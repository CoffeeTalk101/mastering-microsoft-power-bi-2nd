<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><title>Mastering Microsoft Power BI (for pre sume)</title></head><body><div class="calibre1" id="calibre_link-2">
<div id="calibre_link-1879" class="calibre2">
<div id="calibre_link-1880" class="calibre3"><div id="calibre_link-1881" class="calibre4">
    <p class="fm-booktitle">Mastering Microsoft Power BI</p>
    <p class="fm-booktitle">Second Edition</p>
    <p class="fm-booktitle">Expert techniques to create interactive insights for effective data analytics and business intelligence</p>
    <p class="fm-booktitle">Greg Deckler</p>
    <p class="fm-booktitle">Brett Powell</p>
    <p class="fm-booktitle"><img src="images/000059.png" alt="" width="245" height="62" class="calibre5" /></p>
    <p class="fm-booktitle">BIRMINGHAM&mdash;MUMBAI</p>
 <p class="eop"></p>
    <p class="fm-booktitle">Mastering Microsoft Power BI</p>
    <p class="fm-booktitle">Second Edition</p>
    <p class="fm-booktitle">Copyright © 2022 Packt Publishing</p>
    <p class="fm-booktitle"><em class="italic">All rights reserved</em>. No part of this book may be reproduced, stored in a retrieval system, or transmitted in any form or by any means, without the prior written permission of the publisher, except in the case of brief quotations embedded in critical articles or reviews.</p>
    <p class="fm-booktitle">Every effort has been made in the preparation of this book to ensure the accuracy of the information presented. However, the information contained in this book is sold without warranty, either express or implied. Neither the authors, nor Packt Publishing or its dealers and distributors, will be held liable for any damages caused or alleged to have been caused directly or indirectly by this book.</p>
    <p class="fm-booktitle">Packt Publishing has endeavored to provide trademark information about all of the companies and products mentioned in this book by the appropriate use of capitals. However, Packt Publishing cannot guarantee the accuracy of this information.</p>
    <p class="fm-booktitle"><strong class="screentext">Senior Publishing Product Manager:</strong> Devika Battike</p>
    <p class="fm-booktitle"><strong class="screentext">Acquisition Editor &ndash; Peer Reviews:</strong> Saby Dsilva</p>
    <p class="fm-booktitle"><strong class="screentext">Project Editor:</strong> Amisha Vathare</p>
    <p class="fm-booktitle"><strong class="screentext">Content Development Editor:</strong> Rebecca Robinson</p>
    <p class="fm-booktitle"><strong class="screentext">Copy Editor:</strong> Safis Editing</p>
    <p class="fm-booktitle"><strong class="screentext">Technical Editor:</strong> Aditya Sawant</p>
    <p class="fm-booktitle"><strong class="screentext">Proofreader:</strong> Safis Editing</p>
    <p class="fm-booktitle"><strong class="screentext">Indexer:</strong> Rekha Nair</p>
    <p class="fm-booktitle"><strong class="screentext">Presentation Designer:</strong> Ganesh Bhadwalkar</p>
    <p class="fm-booktitle">First published: March 2018 
</p>
    <p class="fm-booktitle">Second edition: June 2022</p>
    <p class="fm-booktitle">Production reference: 3141022</p>
    <p class="fm-booktitle">Published by Packt Publishing Ltd.</p>
   <p class="fm-booktitle">Livery Place</p>
   <p class="fm-booktitle">35 Livery Street</p>
   <p class="fm-booktitle">Birmingham</p>
   <p class="fm-booktitle">B3 2PB, UK.</p>
    <p class="fm-booktitle">ISBN 978-1-80181-148-4</p>
  <p class="fm-booktitle"><a href="http://www.packt.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">www.packt.com</span></a></p>
<p class="eop"></p>
    <h1 id="calibre_link-1882" class="mainheading">Foreword</h1>
<p class="fm-booktitle">Microsoft Power BI is the best analytics platform that empowers every employee to ask and explore questions, uncover insights, and gain intelligence through modern business intelligence tools. Power BI consists of cloud services, mobile applications, a data modeling and report authoring application, and other utilities, including the on-premises data gateway. Additionally, organizations can deploy Power BI reports on-premise via the Power BI Report Server and scale their deployments with Power BI Premium capacity.</p>

<p class="fm-booktitle">This book provides an end-to-end analysis of Power BI tools and features, from planning a Power BI project to distributing Power BI apps to large groups of users. You will be familiarized with all the fundamental concepts and see how Power BI datasets, reports, and dashboards can be designed to deliver insights and rich, interactive experiences.</p>  

<p class="fm-booktitle">You'll also become knowledgeable about management and administration topics, such as the allocation of Power BI Premium capacities, Azure Active Directory security groups, conditional access policies, and staged deployments of Power BI content.</p>

<p class="fm-booktitle">This book will inspire you to take advantage of these powerful features and follow consistent practices in deploying Power BI for your organization. I highly recommend this book to any new or existing Power BI users who want to learn what features and functionalities Power BI provides, as well as how they can quickly take advantage of their data.</p>
<p class="fm-booktitle"><em class="italic">- Leon Gordon, Thought Leader at Forbes Technical Council, Microsoft Data Platform MVP and Partner at Pomerol Partners</em></p>
<p class="eop"></p>
    <h1 id="calibre_link-1883" class="mainheading">Contributors</h1>
    <h1 id="calibre_link-1884" class="heading">About the authors</h1>
    <p class="fm-booktitle"><span class="fm-authornameinbio">Greg Deckler</span> is a Vice President at Fusion Alliance and has been a consulting services professional for over 27 years. Recognized as an expert in Power BI, Greg is a six-time Microsoft MVP for the Data Platform and an active member of the Power BI Community site with over 5,000 solutions authored and hundreds of Quick Measures Gallery submissions. Greg founded the Columbus Azure ML and Power BI User Group in Columbus, OH in 2016 and holds regular monthly meetings. Greg is also the author of numerous external tools for Power BI available for free on his gdeckler GitHub repository.</p>
    <p class="fm-acknowledgement">I would like to deeply thank my family, son Rocket, my extended Fusion Alliance family, the dynamic and vibrant Power BI community as a whole and especially all of the Super Users as well as my user group members. A special thanks to Brett Powell for all of his support and guidance on this book as well as Power BI Cookbook, 2nd Edition.</p>
    <p class="fm-booktitle"><span class="fm-authornameinbio">Brett Powell</span> is a Microsoft business intelligence consultant and author. Brett has over 12 years of business intelligence experience across many industries as a developer, architect, and administrator. Although most known for his Insights Quest blog and the first editions of <em class="italic">the Microsoft Power BI Cookbook</em> and <em class="italic">Mastering Microsoft Power BI</em>, Brett primarily focuses on the needs of clients and project engagements though Frontline Analytics LLC, a Microsoft BI consultancy and Power BI partner.</p>
    <p class="fm-acknowledgement">I give all glory and praise to my Lord and Savior Jesus Christ. I was alone and lost in sin, but Christ has forgiven me and granted me a new peace and purpose for my life.</p>
<p class="eop"></p>
    <h1 id="calibre_link-1885" class="heading">About the reviewer</h1>
    <p class="fm-booktitle"><span class="fm-authornameinbio">Eugene Meidinger</span> has been working in business intelligence for over 8 years now, focusing heavily on business reporting. He speaks regularly at technical conferences, including Pass Summit and SQLBits. Eugene started his own company in 2018, SQLGene Training, and now produces training videos for Pluralsight and consults on Power BI.</p>
    <p class="fm-acknowledgement">I would like to thank my husband Miles for supporting me during the nights and weekends I worked on reviewing this book.</p>
 <p class="eop"></p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-8">
<div id="calibre_link-1886" class="calibre2">
<div id="calibre_link-1887" class="calibre3"><nav id="calibre_link-1888" type="toc" class="calibre8">
    <h2 class="calibre9">Contents</h2>
    <ol class="calibre10">
      <li class="calibre11"><a href="#calibre_link-9" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Preface</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-10" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Who this book is for</a></li>
          <li class="calibre11"><a href="#calibre_link-11" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">What this book covers</a></li>
          <li class="calibre11"><a href="#calibre_link-12" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">To get the most out of this book</a>
          </li>
          <li class="calibre11"><a href="#calibre_link-13" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Get in touch</a></li>
        </ol>
      </li>
      <li value="1" class="calibre13"><a href="#calibre_link-14" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Planning Power BI Projects</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-15" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI deployment modes</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-16" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Corporate BI</a></li>
              <li class="calibre11"><a href="#calibre_link-17" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Self-Service Visualization</a></li>
              <li class="calibre11"><a href="#calibre_link-18" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Self-Service BI</a></li>
              <li class="calibre11"><a href="#calibre_link-19" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Choosing a deployment mode</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-20" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Project discovery and ingestion</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-21" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Sample Power BI project template </a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-22" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Sample template &ndash; Adventure Works BI</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-23" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI project roles</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-24" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dataset designer</a></li>
              <li class="calibre11"><a href="#calibre_link-25" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Report authors</a></li>
              <li class="calibre11"><a href="#calibre_link-26" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI administrator</a></li>
              <li class="calibre11"><a href="#calibre_link-27" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Project role collaboration</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-28" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI licenses</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-29" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Shared capacity</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-30" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Free</a></li>
                  <li class="calibre11"><a href="#calibre_link-31" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Pro</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-32" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dedicated capacity</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-33" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Premium</a></li>
                  <li class="calibre11"><a href="#calibre_link-34" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Premium Per User</a></li>
                  <li class="calibre11"><a href="#calibre_link-35" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Embedded</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-36" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI license scenarios</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-37" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dataset design</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-38" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data warehouse bus matrix</a></li>
              <li class="calibre11"><a href="#calibre_link-39" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dataset design process</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-40" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Select the business process</a></li>
                  <li class="calibre11"><a href="#calibre_link-41" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Declare the grain</a></li>
                  <li class="calibre11"><a href="#calibre_link-42" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Identify the dimensions</a></li>
                  <li class="calibre11"><a href="#calibre_link-43" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Define the facts</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-44" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data profiling</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-45" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data profiling with Power BI Desktop</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-46" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dataset planning</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-47" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data transformations</a></li>
              <li class="calibre11"><a href="#calibre_link-48" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Import, DirectQuery, Live, and Composite datasets</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-49" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Import mode </a></li>
                  <li class="calibre11"><a href="#calibre_link-50" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">DirectQuery/Live mode</a></li>
                  <li class="calibre11"><a href="#calibre_link-51" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Composite mode</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-52" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Sample project analysis</a></li>
          <li class="calibre11"><a href="#calibre_link-53" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-54" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Preparing Data Sources</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-55" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Query folding</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-56" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Partial query folding</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-57" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Query design per dataset mode</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-58" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Import mode dataset queries</a></li>
              <li class="calibre11"><a href="#calibre_link-59" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">DirectQuery dataset queries</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-60" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">DirectQuery report execution</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-61" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Composite datasets</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-62" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Table storage modes</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-63" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data sources</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-64" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Authentication</a></li>
              <li class="calibre11"><a href="#calibre_link-65" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data source settings</a></li>
              <li class="calibre11"><a href="#calibre_link-66" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Privacy levels</a></li>
              <li class="calibre11"><a href="#calibre_link-67" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI as a data source</a></li>
              <li class="calibre11"><a href="#calibre_link-68" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI Desktop options</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-69" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Global options</a></li>
                  <li class="calibre11"><a href="#calibre_link-70" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">CURRENT FILE options</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-71" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">SQL views</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-72" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">SQL views versus M queries</a></li>
              <li class="calibre11"><a href="#calibre_link-73" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">SQL view examples</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-74" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Date dimension view</a></li>
                  <li class="calibre11"><a href="#calibre_link-75" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Mark as date table</a></li>
                  <li class="calibre11"><a href="#calibre_link-76" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Product dimension view</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-77" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Slowly changing dimensions</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-78" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-79" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Connecting to Sources and Transforming Data with M</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-80" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Types of Power Query M queries</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-81" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Organizing queries</a></li>
              <li class="calibre11"><a href="#calibre_link-82" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data source parameters</a></li>
              <li class="calibre11"><a href="#calibre_link-83" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Staging queries</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-84" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">DirectQuery staging</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-85" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Fact and dimension queries</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-86" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Source reference only</a></li>
                  <li class="calibre11"><a href="#calibre_link-87" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Excel workbook &ndash; Annual Sales Plan</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-88" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Parameter tables queries</a></li>
              <li class="calibre11"><a href="#calibre_link-89" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Security table queries</a></li>
              <li class="calibre11"><a href="#calibre_link-90" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Custom function queries</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-91" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Creating Power Query M queries</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-92" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Numeric data types</a></li>
              <li class="calibre11"><a href="#calibre_link-93" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Item access in M</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-94" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power Query M query examples</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-95" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Trailing three years filter</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-96" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Combining queries</a></li>
                  <li class="calibre11"><a href="#calibre_link-97" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Incremental refresh for fact tables</a></li>
                  <li class="calibre11"><a href="#calibre_link-98" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Customer history column</a></li>
                  <li class="calibre11"><a href="#calibre_link-99" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Product dimension integration</a></li>
                  <li class="calibre11"><a href="#calibre_link-100" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">R and Python script transformation</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-101" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dataflows</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-102" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI Premium dataflow features</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-103" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power Query M editing tools</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-104" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Advanced Editor</a></li>
              <li class="calibre11"><a href="#calibre_link-105" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Visual Studio Code</a></li>
              <li class="calibre11"><a href="#calibre_link-106" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Visual Studio</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-107" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-108" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Designing Import, DirectQuery, and Composite Data Models</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-109" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dataset layers</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-110" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI as a superset of Azure Analysis Services</a></li>
              <li class="calibre11"><a href="#calibre_link-111" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dataset objectives</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-112" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Competing objectives</a></li>
                  <li class="calibre11"><a href="#calibre_link-113" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">External factors</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-114" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">The Data Model </a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-115" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">The Model view</a></li>
              <li class="calibre11"><a href="#calibre_link-116" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">The Data view</a></li>
              <li class="calibre11"><a href="#calibre_link-117" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">The Report view</a></li>
              <li class="calibre11"><a href="#calibre_link-118" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Fact tables</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-119" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Fact table columns</a></li>
                  <li class="calibre11"><a href="#calibre_link-120" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Fact column data types</a></li>
                  <li class="calibre11"><a href="#calibre_link-121" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Fact-to-dimension relationships</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-122" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dimension tables</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-123" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Hierarchies</a></li>
                  <li class="calibre11"><a href="#calibre_link-124" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Custom sort</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-125" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Parameter tables</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-126" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Measure groups</a></li>
                  <li class="calibre11"><a href="#calibre_link-127" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Last refreshed date</a></li>
                  <li class="calibre11"><a href="#calibre_link-128" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Measure support logic</a></li>
                  <li class="calibre11"><a href="#calibre_link-129" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Display folders</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-130" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Relationships</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-131" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Uniqueness </a></li>
              <li class="calibre11"><a href="#calibre_link-132" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Ambiguity</a></li>
              <li class="calibre11"><a href="#calibre_link-133" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Single-direction relationships</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-134" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Direct flights only</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-135" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Bidirectional relationships</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-136" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Shared dimensions</a></li>
                  <li class="calibre11"><a href="#calibre_link-137" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Date dimensions </a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-138" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">The CROSSFILTER function</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-139" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Model metadata</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-140" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Visibility</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-141" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Column and measure metadata</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-142" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Default summarization</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-143" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data format</a></li>
                  <li class="calibre11"><a href="#calibre_link-144" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data category</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-145" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Description</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-146" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Optimizing data model performance</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-147" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Import</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-148" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Query caching</a></li>
                  <li class="calibre11"><a href="#calibre_link-149" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Columnar compression</a></li>
                  <li class="calibre11"><a href="#calibre_link-150" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Memory analysis via DMVs and the VertiPaq Analyzer</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-151" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">DirectQuery </a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-152" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Columnstore and HTAP</a></li>
                  <li class="calibre11"><a href="#calibre_link-153" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Automatic aggregations</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-154" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Composite</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-155" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Aggregation tables</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-156" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-157" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Developing DAX Measures and Security Roles</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-158" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">DAX measure basics</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-159" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Filter context</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-160" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">SQL equivalent</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-161" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Measure evaluation process</a></li>
              <li class="calibre11"><a href="#calibre_link-162" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Row context</a></li>
              <li class="calibre11"><a href="#calibre_link-163" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Scalar and table functions</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-164" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Related tables</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-165" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">The CALCULATE() function</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-166" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">The FILTER() function</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-167" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">DAX variables</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-168" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Base measures</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-169" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Measure support expressions</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-170" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">KPI targets</a></li>
                  <li class="calibre11"><a href="#calibre_link-171" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Current and prior periods</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-172" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Date intelligence metrics</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-173" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Current versus prior and growth rates</a></li>
              <li class="calibre11"><a href="#calibre_link-174" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Rolling periods</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-175" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Calculation groups</a></li>
          <li class="calibre11"><a href="#calibre_link-176" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dimension metrics</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-177" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Missing dimensions</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-178" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Ranking metrics</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-179" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dynamic ranking measures</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-180" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Security roles</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-181" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dynamic row-level security</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-182" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Performance testing</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-183" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Performance analyzer</a></li>
              <li class="calibre11"><a href="#calibre_link-184" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">DAX Studio</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-185" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-186" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Planning Power BI Reports</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-187" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Report planning process</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-188" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Identify the audience</a></li>
              <li class="calibre11"><a href="#calibre_link-189" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Define the business questions to answer</a></li>
              <li class="calibre11"><a href="#calibre_link-190" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Confirm that the dataset supports the business questions</a></li>
              <li class="calibre11"><a href="#calibre_link-191" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Determine interactivity</a></li>
              <li class="calibre11"><a href="#calibre_link-192" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Define access and distribution</a></li>
              <li class="calibre11"><a href="#calibre_link-193" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Sketch the report layout</a></li>
              <li class="calibre11"><a href="#calibre_link-194" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Report architecture diagram</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-195" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Visualization best practices</a></li>
          <li class="calibre11"><a href="#calibre_link-196" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Choosing the right visual</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-197" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Tables and matrices versus charts</a></li>
              <li class="calibre11"><a href="#calibre_link-198" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Chart selection</a></li>
              <li class="calibre11"><a href="#calibre_link-199" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Visualization anti-patterns</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-200" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Visual interactions</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-201" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Editing interactions</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-202" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Drillthrough report pages</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-203" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Custom labels and the back button</a></li>
              <li class="calibre11"><a href="#calibre_link-204" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Multi-column drillthrough</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-205" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Report filter scopes</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-206" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Report filter conditions</a></li>
              <li class="calibre11"><a href="#calibre_link-207" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Report and page filters</a></li>
              <li class="calibre11"><a href="#calibre_link-208" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Relative date filtering</a></li>
              <li class="calibre11"><a href="#calibre_link-209" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Visual-level filtering</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-210" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Top N visual-level filters</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-211" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Bookmarks</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-212" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Selection pane and the Spotlight property</a></li>
              <li class="calibre11"><a href="#calibre_link-213" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Custom report navigation</a></li>
              <li class="calibre11"><a href="#calibre_link-214" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">View mode</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-215" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Live connections to Power BI datasets</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-216" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Customizing Live connection reports</a></li>
              <li class="calibre11"><a href="#calibre_link-217" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Switching Live source datasets</a></li>
              <li class="calibre11"><a href="#calibre_link-218" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Switching between import mode and Live mode datasets</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-219" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Report design summary</a></li>
          <li class="calibre11"><a href="#calibre_link-220" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-221" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Creating and Formatting Visualizations</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-222" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">The Visualizations pane</a></li>
          <li class="calibre11"><a href="#calibre_link-223" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Slicers</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-224" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Slicer synchronization</a></li>
              <li class="calibre11"><a href="#calibre_link-225" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Custom slicer parameters</a></li>
              <li class="calibre11"><a href="#calibre_link-226" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">What-if parameters</a></li>
              <li class="calibre11"><a href="#calibre_link-227" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Page filter or slicer?</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-228" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Single-value visuals</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-229" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">The Card visual</a></li>
              <li class="calibre11"><a href="#calibre_link-230" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">The KPI visual</a></li>
              <li class="calibre11"><a href="#calibre_link-231" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Gauge visual</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-232" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Map visuals</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-233" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Bubble map</a></li>
              <li class="calibre11"><a href="#calibre_link-234" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Filled map</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-235" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Waterfall chart</a></li>
          <li class="calibre11"><a href="#calibre_link-236" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power Platform visuals</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-237" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power Apps for Power BI</a></li>
              <li class="calibre11"><a href="#calibre_link-238" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power Automate for Power BI</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-239" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Premium visuals</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-240" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Scorecard</a></li>
              <li class="calibre11"><a href="#calibre_link-241" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Paginated reports</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-242" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Elements</a></li>
          <li class="calibre11"><a href="#calibre_link-243" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Formatting visualizations</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-244" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Tooltips</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-245" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Report page tooltips</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-246" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Column and line charts</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-247" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Column and line chart conditional formatting</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-248" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Table and matrix visuals</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-249" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Custom format strings</a></li>
                  <li class="calibre11"><a href="#calibre_link-250" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Table and matrix conditional formatting</a></li>
                  <li class="calibre11"><a href="#calibre_link-251" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Sparklines</a></li>
                  <li class="calibre11"><a href="#calibre_link-252" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Values as rows</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-253" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Scatter charts</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-254" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-255" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Applying Advanced Analytics</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-256" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">AI visuals</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-257" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Key influencers</a></li>
              <li class="calibre11"><a href="#calibre_link-258" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Decomposition tree</a></li>
              <li class="calibre11"><a href="#calibre_link-259" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Q&amp;A</a></li>
              <li class="calibre11"><a href="#calibre_link-260" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Smart narrative</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-261" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">R and Python visuals</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-262" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">R visual</a></li>
              <li class="calibre11"><a href="#calibre_link-263" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Python visual</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-264" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">ArcGIS Maps for Power BI</a></li>
          <li class="calibre11"><a href="#calibre_link-265" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Custom visuals</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-266" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Adding a custom visual</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-267" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Animation and data storytelling</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-268" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Play axis for Scatter charts</a></li>
              <li class="calibre11"><a href="#calibre_link-269" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Pulse chart</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-270" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Analytics pane</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-271" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Trend line</a></li>
              <li class="calibre11"><a href="#calibre_link-272" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Forecasting</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-273" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Quick insights/Analyze</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-274" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Explain the increase/decrease</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-275" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Mobile-optimized report pages</a></li>
          <li class="calibre11"><a href="#calibre_link-276" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-277" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Designing Dashboards</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-278" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dashboards versus reports</a></li>
          <li class="calibre11"><a href="#calibre_link-279" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dashboard design</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-280" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Visual selection</a></li>
              <li class="calibre11"><a href="#calibre_link-281" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Layout</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-282" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Navigation pane</a></li>
                  <li class="calibre11"><a href="#calibre_link-283" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Fullscreen mode</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-284" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Supporting tiles</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-285" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dashboard architectures</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-286" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Single-dashboard architecture</a></li>
              <li class="calibre11"><a href="#calibre_link-287" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Multiple-dashboard architecture</a></li>
              <li class="calibre11"><a href="#calibre_link-288" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Organizational dashboard architecture</a></li>
              <li class="calibre11"><a href="#calibre_link-289" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Multiple datasets</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-290" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dashboard tiles</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-291" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Tile details and custom links</a></li>
              <li class="calibre11"><a href="#calibre_link-292" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Real-time data tiles</a></li>
              <li class="calibre11"><a href="#calibre_link-293" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dashboard themes</a></li>
              <li class="calibre11"><a href="#calibre_link-294" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Paginated reports</a></li>
              <li class="calibre11"><a href="#calibre_link-295" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Excel workbooks</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-296" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Live report pages</a></li>
          <li class="calibre11"><a href="#calibre_link-297" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Mobile-optimized dashboards</a></li>
          <li class="calibre11"><a href="#calibre_link-298" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-299" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Managing Workspaces and Content</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-300" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Workspaces</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-301" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Workspace roles and rights</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-302" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Viewer role</a></li>
                  <li class="calibre11"><a href="#calibre_link-303" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Contributor role</a></li>
                  <li class="calibre11"><a href="#calibre_link-304" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Member role</a></li>
                  <li class="calibre11"><a href="#calibre_link-305" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Admin role</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-306" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Datasets across workspaces</a></li>
              <li class="calibre11"><a href="#calibre_link-307" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">My workspace</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-308" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Staged deployments</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-309" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Workspace datasets</a></li>
              <li class="calibre11"><a href="#calibre_link-310" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI REST API and PowerShell module</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-311" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI REST API</a></li>
                  <li class="calibre11"><a href="#calibre_link-312" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI PowerShell module</a></li>
                  <li class="calibre11"><a href="#calibre_link-313" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Workspace and content identifiers</a></li>
                  <li class="calibre11"><a href="#calibre_link-314" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">PowerShell sample scripts</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-315" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI deployment pipelines</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-316" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Content sensitivity and protection</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-317" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Information protection</a></li>
              <li class="calibre11"><a href="#calibre_link-318" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data loss prevention</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-319" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Version control</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-320" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">OneDrive for Business</a></li>
              <li class="calibre11"><a href="#calibre_link-321" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Source control for M and DAX code</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-322" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">MSHGQM</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-323" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Metadata management</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-324" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Field descriptions</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-325" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Creating descriptions</a></li>
                  <li class="calibre11"><a href="#calibre_link-326" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">View field descriptions</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-327" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Metadata Mechanic</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-328" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Metadata reporting</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-329" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Standard metadata reports</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-330" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Server and database parameters</a></li>
                  <li class="calibre11"><a href="#calibre_link-331" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Querying the DMVs from Power BI</a></li>
                  <li class="calibre11"><a href="#calibre_link-332" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Integrating and enhancing DMV data</a></li>
                  <li class="calibre11"><a href="#calibre_link-333" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Metadata report pages</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-334" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-335" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Managing the On-Premises Data Gateway</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-336" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">On-premises data gateway planning</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-337" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Top gateway planning tasks</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-338" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Determining whether a gateway is needed</a></li>
                  <li class="calibre11"><a href="#calibre_link-339" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Identifying where the gateway should be installed</a></li>
                  <li class="calibre11"><a href="#calibre_link-340" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Defining the gateway infrastructure and hardware requirements</a></li>
                  <li class="calibre11"><a href="#calibre_link-341" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Defining gateway roles and permissions</a></li>
                  <li class="calibre11"><a href="#calibre_link-342" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Planning for recovery keys</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-343" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Standard versus personal mode</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-344" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Gateway concepts</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-345" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Gateway clusters</a></li>
              <li class="calibre11"><a href="#calibre_link-346" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Gateway architectures</a></li>
              <li class="calibre11"><a href="#calibre_link-347" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Gateway security</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-348" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Gateway installation and configuration</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-349" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">The gateway service account</a></li>
              <li class="calibre11"><a href="#calibre_link-350" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">TCP versus HTTPS mode </a></li>
              <li class="calibre11"><a href="#calibre_link-351" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Connectors</a></li>
              <li class="calibre11"><a href="#calibre_link-352" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Recovery Keys</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-353" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Managing gateway clusters</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-354" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Gateway administrators</a></li>
              <li class="calibre11"><a href="#calibre_link-355" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Gateway data sources and users</a></li>
              <li class="calibre11"><a href="#calibre_link-356" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">PowerShell support for gateway clusters</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-357" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Troubleshooting and monitoring gateways</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-358" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Restoring, migrating, and taking over a gateway</a></li>
              <li class="calibre11"><a href="#calibre_link-359" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Gateway diagnostics</a></li>
              <li class="calibre11"><a href="#calibre_link-360" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Gateway monitoring reports</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-361" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data refresh</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-362" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Scheduled data refresh</a></li>
              <li class="calibre11"><a href="#calibre_link-363" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">DirectQuery datasets</a></li>
              <li class="calibre11"><a href="#calibre_link-364" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Live connections to Analysis Services models</a></li>
              <li class="calibre11"><a href="#calibre_link-365" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dashboard cache refresh</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-366" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-367" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Deploying Paginated Reports</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-368" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Paginated reports in the Power BI service</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-369" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Planning paginated reports</a></li>
              <li class="calibre11"><a href="#calibre_link-370" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Building and publishing paginated reports</a></li>
              <li class="calibre11"><a href="#calibre_link-371" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Identifying and interacting with paginated reports</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-372" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Printing, exporting, subscribing, and sharing</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-373" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Migrating reports to the Power BI service</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-374" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Inventory</a></li>
              <li class="calibre11"><a href="#calibre_link-375" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Assess</a></li>
              <li class="calibre11"><a href="#calibre_link-376" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Plan</a></li>
              <li class="calibre11"><a href="#calibre_link-377" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Migrate</a></li>
              <li class="calibre11"><a href="#calibre_link-378" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">User Acceptance Testing and final deployment</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-379" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Planning the Power BI Report Server (PBRS)</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-380" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Feature differences with the Power BI service</a></li>
              <li class="calibre11"><a href="#calibre_link-381" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Parity with SQL Server Reporting Services</a></li>
              <li class="calibre11"><a href="#calibre_link-382" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data sources and connectivity options</a></li>
              <li class="calibre11"><a href="#calibre_link-383" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Hardware and user licensing</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-384" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Pro licenses for report authors</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-385" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Alternative and hybrid deployment models</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-386" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">PBRS reference topology</a></li>
                  <li class="calibre11"><a href="#calibre_link-387" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Scale PBRS</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-388" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Installing and upgrading PBRS</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-389" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Retrieve the PBRS product key</a></li>
              <li class="calibre11"><a href="#calibre_link-390" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Upgrade cycles </a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-391" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">PBRS client applications</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-392" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Running desktop versions side by side</a></li>
              <li class="calibre11"><a href="#calibre_link-393" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI mobile applications</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-394" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-395" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Creating Power BI Apps and Content Distribution</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-396" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Content distribution methods</a></li>
          <li class="calibre11"><a href="#calibre_link-397" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI apps</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-398" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Licensing apps</a></li>
              <li class="calibre11"><a href="#calibre_link-399" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">App deployment process</a></li>
              <li class="calibre11"><a href="#calibre_link-400" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">User permissions and security</a></li>
              <li class="calibre11"><a href="#calibre_link-401" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Publishing apps</a></li>
              <li class="calibre11"><a href="#calibre_link-402" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Installing apps</a></li>
              <li class="calibre11"><a href="#calibre_link-403" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">App updates</a></li>
              <li class="calibre11"><a href="#calibre_link-404" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Apps on Power BI mobile</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-405" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Sharing content</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-406" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Sharing scopes</a></li>
              <li class="calibre11"><a href="#calibre_link-407" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Sharing versus Power BI apps</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-408" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Embedding</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-409" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Licensing embedding</a></li>
              <li class="calibre11"><a href="#calibre_link-410" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Publish to web</a></li>
              <li class="calibre11"><a href="#calibre_link-411" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Secure URL embedding</a></li>
              <li class="calibre11"><a href="#calibre_link-412" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Microsoft 365 apps</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-413" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Teams</a></li>
                  <li class="calibre11"><a href="#calibre_link-414" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">SharePoint Online</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-415" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Custom applications</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-416" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data alerts</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-417" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power Automate integration</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-418" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Email subscriptions</a></li>
          <li class="calibre11"><a href="#calibre_link-419" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Analyze in Excel</a></li>
          <li class="calibre11"><a href="#calibre_link-420" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Self-service BI workspaces</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-421" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Self-service content distribution</a></li>
              <li class="calibre11"><a href="#calibre_link-422" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Risks of self-service BI</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-423" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-424" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Administering Power BI for an Organization</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-425" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI administrator role</a></li>
          <li class="calibre11"><a href="#calibre_link-426" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data governance for Power BI</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-427" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Implementing data governance</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-428" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Azure Active Directory</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-429" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">AAD B2B collaboration</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-430" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Licensing external users</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-431" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Conditional access policies</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-432" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI admin portal</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-433" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Tenant settings</a></li>
              <li class="calibre11"><a href="#calibre_link-434" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Usage metrics</a></li>
              <li class="calibre11"><a href="#calibre_link-435" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Users and Audit logs</a></li>
              <li class="calibre11"><a href="#calibre_link-436" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Premium Per User</a></li>
              <li class="calibre11"><a href="#calibre_link-437" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Capacity settings</a></li>
              <li class="calibre11"><a href="#calibre_link-438" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Embed codes</a></li>
              <li class="calibre11"><a href="#calibre_link-439" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Organizational visuals</a></li>
              <li class="calibre11"><a href="#calibre_link-440" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Azure connections</a></li>
              <li class="calibre11"><a href="#calibre_link-441" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Workspaces</a></li>
              <li class="calibre11"><a href="#calibre_link-442" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Custom branding</a></li>
              <li class="calibre11"><a href="#calibre_link-443" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Protection metrics</a></li>
              <li class="calibre11"><a href="#calibre_link-444" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Featured content</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-445" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Usage metrics reports</a></li>
          <li class="calibre11"><a href="#calibre_link-446" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Audit logs</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-447" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Audit log monitoring solution</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-448" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">The Power BI REST API for admins</a></li>
          <li class="calibre11"><a href="#calibre_link-449" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre13"><a href="#calibre_link-450" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Building Enterprise BI with Power BI Premium</a>
        <ol class="calibre12">
          <li class="calibre11"><a href="#calibre_link-451" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI Premium</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-452" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Power BI Premium capabilities</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-453" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Premium capacity nodes</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-454" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Frontend versus backend resources</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-455" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Premium capacity estimations</a></li>
          <li class="calibre11"><a href="#calibre_link-456" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Premium capacity administration and allocation</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-457" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Capacity allocation</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-458" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Corporate and Self-Service BI capacity </a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-459" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Create, size, and monitor capacities</a>
                <ol class="calibre12">
                  <li class="calibre11"><a href="#calibre_link-460" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Changing capacity size</a></li>
                  <li class="calibre11"><a href="#calibre_link-461" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Monitoring Premium capacities</a></li>
                </ol>
              </li>
              <li class="calibre11"><a href="#calibre_link-462" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Workspace assignment</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-463" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Premium capacity resource optimization</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-464" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Data model optimizations</a></li>
              <li class="calibre11"><a href="#calibre_link-465" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Report and visualization optimizations</a></li>
              <li class="calibre11"><a href="#calibre_link-466" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Workloads</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-467" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Life cycle management with Premium</a>
            <ol class="calibre12">
              <li class="calibre11"><a href="#calibre_link-468" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">ALM Toolkit deployment</a></li>
              <li class="calibre11"><a href="#calibre_link-469" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Dataset management with SSMS</a></li>
              <li class="calibre11"><a href="#calibre_link-470" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Backing up Premium capacities</a></li>
            </ol>
          </li>
          <li class="calibre11"><a href="#calibre_link-471" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Summary</a></li>
        </ol>
      </li>
      <li class="calibre11"><a href="#calibre_link-472" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Other Books You May Enjoy</a>
      </li>
      <li class="calibre11"><a href="#calibre_link-473" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Index</a></li>
    </ol>
  </nav>
  <nav type="landmarks" id="calibre_link-1889" hidden="" class="calibre8">
    <h1 class="mainheading">Landmarks</h1>
    <ol class="calibre10">
      <li class="calibre13">
        <a type="cover" href="Text/cover.xhtml" data-calibre-removed-titlepage="1" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Cover</a>
      </li>
      <li class="calibre13">
        <a type="index" href="#calibre_link-474" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">Index</a>
      </li>
    </ol>
  </nav>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-1870">
<div id="calibre_link-1890" class="calibre2">
<div id="calibre_link-1891" class="calibre3"><div id="calibre_link-1892" class="calibre4">
    <h1 id="calibre_link-9" class="mainheading">Preface</h1>
    <p class="fm-booktitle">Microsoft Power BI is a leading business intelligence and analytics platform that supports both self-service data visualization and exploration as well as enterprise BI deployments. Power BI consists of cloud services, mobile applications, a data modeling and report authoring application, and other utilities, including the on-premises data gateway. Additionally, organizations can deploy Power BI reports on-premises via the Power BI Report Server and scale their deployments with Power BI Premium capacity.</p>
    <p class="fm-booktitle">This revised and expanded edition provides an end-to-end analysis of the latest Power BI tools and features, from planning a Power BI project to distributing Power BI apps to large groups of users. You’ll be familiarized with all the fundamental concepts and see how Power BI datasets, reports, and dashboards can be designed to deliver insights and rich, interactive experiences. You’ll also become knowledgeable about management and administration topics such as the allocation of Power BI Premium capacities, Azure Active Directory security groups, conditional access policies, and staged deployments of Power BI content. This book will encourage you to take advantage of these powerful features and follow thoughtful, consistent practices in deploying Power BI for your organization.</p>
    <div class="calibre14"></div><h1 id="calibre_link-10" class="heading">Who this book is for</h1>
    <p class="fm-booktitle">This book is intended for business intelligence professionals responsible for either the development of Power BI solutions or the management and administration of a Power BI deployment. BI developers can use this as a reference guide to features and techniques to enhance their solutions. Likewise, BI managers interested in a broad conceptual understanding, as well as processes and practices to inform their delivery of Power BI, will find this a useful resource. Experience in creating content using Power BI Desktop and sharing content on the Power BI service is helpful.</p>
    <div class="calibre14"></div><h1 id="calibre_link-11" class="heading">What this book covers</h1>
    <p class="fm-booktitle"><em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, discusses alternative deployment modes for Power BI, team and project roles, and licensing. Additionally, an example project template and its corresponding planning and dataset design processes are described.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, explains foundational concepts such as query folding, query design, data source preparation and important Power BI Desktop settings.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 3</em>, <em class="italic">Connecting to Sources and Transforming Data with M</em>, depicts the data access layer supporting a Power BI dataset, including data sources and fact and dimension table queries. Concepts of the Power Query M language, such as parameters, are explained and examples of custom M queries involving conditional and dynamic logic are given.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery</em>,<em class="italic"> and Composite Data Models</em>, reviews the components of the data model layer and design techniques in support of usability, performance, and other objectives. These topics include relationship cross-filtering, custom sort orders, hierarchies, and metadata.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, covers the implementation of analysis expressions reflecting business definitions and common analysis requirements. Primary DAX functions, concepts, and use cases such as date intelligence, row-level security roles, and performance testing are examined.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>, describes a report planning process, data visualization practices, and report design fundamentals, including visual selection and filter scopes. In addition, it covers drillthrough report pages, visual interactions, bookmarks, and Live connections.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 7</em>, <em class="italic">Creating and Formatting Visualizations</em>, reviews many standard visuals including slicers, single-number visuals, maps, waterfall charts, scatter charts, Power Platform visuals and Premium visuals, as well as how to format visuals, including the use of tooltips, conditional formatting, custom format strings, and sparklines.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 8</em>, <em class="italic">Applying Advanced Analytics</em>, examines powerful interactive and analytical features, including AI visuals, R and Python visuals, ArcGIS Maps, custom visuals, animation, and the <strong class="screentext">Analytics</strong> pane. Additionally, it covers Quick Insights and mobile optimized report pages.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 9</em>, <em class="italic">Designing Dashboards</em>, provides guidance on visual selection, layout, and supporting tiles to drive effective dashboards. Alternative multi-dashboard architectures, such as an organizational dashboard architecture, are reviewed, as well as the configuration of dashboard tiles and mobile optimized dashboards.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>, features the role and administration of workspaces in the context of Power BI solutions and staged deployments. Additionally, the Power BI REST API, content management features, and practices are reviewed, including field descriptions and version history.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 11</em>, <em class="italic">Managing the On-Premises Data Gateway</em>, covers top gateway planning considerations, including alternative gateway architectures, workloads, and hardware requirements. Gateway administration processes and tools are described, such as the <strong class="screentext">manage gateways</strong> portal, gateway log files, and PowerShell gateway commands.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 12</em>, <em class="italic">Deploying Paginated Reports</em>, explains how to deploy and migrate paginated reports to the Power BI service and compares and contrasts the Power BI Report Server with the Power BI service and provides guidance on deployment topics such as licensing, reference topology, installation, upgrade cycles, and client applications.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>, walks through the process of publishing and updating apps for groups of users. Additionally, other common distribution methods are covered, such as the sharing of reports and dashboards, email subscriptions, data-alert-driven emails, and embedding Power BI content in SharePoint Online, Teams, and custom applications.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>, highlights data governance for self-service and corporate BI, Azure Active Directory features such as Conditional Access policies, and the Power BI admin portal. Details are provided about configuring Power BI service tenant settings and the tools available to monitor Power BI activities.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 15</em>, <em class="italic">Building Enterprise BI with Power BI Premium</em>, reviews the capabilities of Power BI Premium and alternative methods for allocating premium capacity. Additionally, administration and optimization topics are discussed as well as lifecycle management using the ALM Toolkit and SQL Server Management Studio.</p>
    <h1 id="calibre_link-12" class="heading">To get the most out of this book</h1>
    <p class="fm-booktitle">A Power BI Pro license and access to the Power BI service is necessary to follow many of the topics and examples in this book. The assignment of the Power BI Service Administrator role within the Microsoft 365 admin center, as well as administrative access to an on-premises data gateway, would also be helpful. It’s assumed that readers are familiar with the main user interfaces of Power BI Desktop and have some background in business intelligence or information technology.</p>
    <p class="fm-booktitle">The primary data source for the examples in this book was the AdventureWorks data warehouse sample database for SQL Server 2019. A SQL Server 2019 Developer Edition database engine instance was used to host the sample database. For the import mode dataset, an Excel workbook stored the sales plan data. For the DirectQuery dataset, the sales plan data was stored in the sample SQL Server database.</p>
    <p class="fm-booktitle">The original AdventureWorksDW2019 was customized by adding a schema and multiple views. The customized version of this database is included in the code bundle for this book as are the Power BI Desktop files and specific queries and scripts used.</p>
    <h2 id="calibre_link-1893" class="calibre9">Download the example code files</h2>
    <p class="fm-booktitle">The code bundle for the book is hosted on GitHub at <a href="https://github.com/PacktPublishing/-Mastering-Microsoft-Power-BI-Second-Edition" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://github.com/PacktPublishing/-Mastering-Microsoft-Power-BI-Second-Edition</span></a>. We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing/" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://github.com/PacktPublishing/</span></a>. Check them out!</p>
    <h2 id="calibre_link-1894" class="calibre9">Download the color images</h2>
    <p class="fm-booktitle">We also provide a PDF file that has color images of the screenshots/diagrams used in this book. You can download it here: <a href="https://static.packt-cdn.com/downloads/9781801811484_ColorImages.pdf" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://static.packt-cdn.com/downloads/9781801811484_ColorImages.pdf</span></a></p>
    <h2 id="calibre_link-1895" class="calibre9">Conventions used</h2>
    <p class="fm-booktitle">There are a number of text conventions used throughout this book.</p>
    <p class="fm-booktitle"><code class="inlinecode">CodeInText</code>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. For example; “Mount the downloaded <code class="inlinecode">WebStorm-10*.dmg</code> disk image file as another disk in your system.”</p>
    <p class="fm-booktitle">A block of code is set as follows:</p>
    <pre class="programlisting"><code class="hljs-code">let CalculateAge = (BirthDate as date) =&gt;
        Date.Year(CurrentDayQuery) - Date.Year(BirthDate)
in CalculateAge
</code></pre>
    <p class="fm-booktitle">When we wish to draw your attention to a particular part of a code block, the relevant lines or items are highlighted:</p>
    <pre class="programlisting"><code class="hljs-code">let CalculateAge = (BirthDate as date) =&gt;
        Date.Year(CurrentDayQuery) - Date.Year(BirthDate)
<span class="code-highlight"><strong class="hljs-slc">in CalculateAge</strong></span>
</code></pre>
    <p class="fm-booktitle">Any command-line input or output is written as follows:</p>
    <pre class="programlisting1"><code class="hljs-con">Install-Module MicrosoftPowerBIMgmt -Force
</code></pre>
    <p class="fm-booktitle"><strong class="screentext">Bold</strong>: Indicates a new term, an important word, or words that you see on the screen, for example, in menus or dialog boxes, also appear in the text like this. For example: “All workspaces and content within those workspaces are provided a <strong class="screentext">globally unique identifier</strong> (<strong class="screentext">GUID</strong>).”</p>
    <div class="pcalibre5 pcalibre4 note">
      <p class="fm-booktitle">Warnings or important notes appear like this.</p>
    </div>
    <div class="pcalibre5 pcalibre4 packt_tip">
      <p class="fm-booktitle">Tips and tricks appear like this.</p>
    </div>
    <h1 id="calibre_link-13" class="heading">Get in touch</h1>
    <p class="fm-booktitle">Feedback from our readers is always welcome.</p>
    <p class="fm-booktitle"><strong class="screentext">General feedback</strong>: Email <code class="inlinecode">feedback@packtpub.com</code>, and mention the book’s title in the subject of your message. If you have questions about any aspect of this book, please email us at <code class="inlinecode">questions@packtpub.com</code>.</p>
    <p class="fm-booktitle"><strong class="screentext">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book we would be grateful if you would report this to us. Please visit, <a href="http://www.packtpub.com/submit-errata" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://www.packtpub.com/submit-errata</span></a>, selecting your book, clicking on the Errata Submission Form link, and entering the details.</p>
    <p class="fm-booktitle"><strong class="screentext">Piracy</strong>: If you come across any illegal copies of our works in any form on the Internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <code class="inlinecode">copyright@packtpub.com</code> with a link to the material.</p>
    <p class="fm-booktitle"><strong class="screentext">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://authors.packtpub.com</span></a>.</p>
  </div>
  <div id="calibre_link-1896" class="calibre4">
    <h1 id="calibre_link-1897" class="heading">Share your thoughts</h1>
    <p class="fm-booktitle">Once you’ve read <em class="italic">Mastering Microsoft Power BI, Second Edition</em>, we’d love to hear your thoughts! Please <a href="https://packt.link/r/1801811482" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">click here to go straight to the Amazon review page</span></a> for this book and share your feedback.</p>
    <p class="fm-booktitle">Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content.</p>
    <h1 class="heading">Download a free PDF copy of this book</h1>
<p class="fm-booktitle">Thanks for purchasing this book!</p>
<p class="fm-booktitle">Do you like to read on the go but are unable to carry your print books everywhere? Is your eBook purchase not compatible with the device of your choice?</p>
<p class="fm-booktitle">Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at no cost.</p>
<p class="fm-booktitle">Read anywhere, any place, on any device. Search, copy, and paste code from your favorite technical books directly into your application.</p>
<p class="fm-booktitle">The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your inbox daily</p>
<p class="fm-booktitle">Follow these simple steps to get the benefits:</p>
    <ol class="calibre10">
      <li class="calibre13">Scan the QR code or visit the link below
      <figure class="mediaobject"><img src="images/000167.png" alt="" class="calibre15" /></figure>
<p class="normal"><a href="https://packt.link/free-ebook/9781801811484" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://packt.link/free-ebook/9781801811484</span></a></p></li>
      <li class="calibre13">Submit your proof of purchase</li>
      <li class="calibre13">That’s it! We’ll send your free PDF and other benefits to your email directly</li>
    </ol>

  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-1871">
<div id="calibre_link-1898" class="calibre2">
<div id="calibre_link-1899" class="calibre3"><div id="calibre_link-1900" class="calibre4">
    <h1 class="heading">1</h1>
    <h1 id="calibre_link-14" class="mainheading">Planning Power BI Projects</h1>
    <p class="fm-booktitle">Power BI is a robust, flexible business intelligence platform enabling organizations to deploy data analysis and reporting solutions according to their individual policies and use cases. Organizations can utilize Power BI to enable self-service data analytics and visualization for business analysts, as well as deploying enterprise-grade solutions involving technical expertise and advanced security and scalability features. Likewise, Power BI fully supports both cloud and on-premises data sources as well as all primary types of reports, ranging from interactive visualizations to pixel-perfect paginated reports to Excel-based reports.</p>
    <p class="fm-booktitle">While specific organizational goals, the data landscape, and specific resource responsibilities can vary greatly, the underlying concepts, deployment choices, roles, and planning processes for business intelligence projects remain the same. The long-term success or failure of most Power BI projects is most highly correlated to the planning, organization, and effective collaboration of the different stakeholders. Solutions that deliver the most value to the business over time are the result of thoughtful decisions around the people and processes involved in data governance, data quality, data modeling, and finally data visualization and distribution. </p>
    <p class="fm-booktitle">This chapter explores the various project planning decision topics, roles, and processes critical to the success of all Power BI projects.</p>
    <p class="fm-booktitle">In this chapter, we review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">Power BI deployment modes</li>
      <li class="bulletlist">Project discovery and ingestion</li>
      <li class="bulletlist">Power BI project roles</li>
      <li class="bulletlist">Power BI licenses</li>
      <li class="bulletlist">Dataset design</li>
      <li class="bulletlist">Data profiling</li>
      <li class="bulletlist">Dataset planning</li>
    </ul>
    <p class="fm-booktitle">To begin, we first explore the different deployment modes for Power BI.</p>
    <h1 id="calibre_link-15" class="heading">Power BI deployment modes</h1>
    <p class="fm-booktitle">Prior to the existence and adoption of BI tools capable of supporting self-service scenarios, business analysts were <a id="calibre_link-1379" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>effectively relegated to the role of “end user” of solutions developed and maintained from end to end by their information technology department. While this top-down approach helped ensure that the solution would be secure, accurate, and resource-efficient, it was also relatively slow and inflexible to adjust to changing requirements. </p>
    <p class="fm-booktitle">As a consequence, business analysts commonly utilized the IT-owned solutions as merely a starting point or data source to their own MS Office-based solutions that business analysts could maintain. The perceived lack of flexibility and extended timelines sometimes associated with IT-owned solutions often frustrated business teams, resulting in a lack of adoption and “shadow IT” scenarios in which business users created their own solutions via Excel and other tools.</p>
    <p class="fm-booktitle">Modern business intelligence platforms such as Power BI provide increased opportunities for the business to participate in the creation and deployment of data assets for the organization. Organizations can deliver Power BI solutions that require the resources and technical expertise of a Corporate BI approach, as well as empowering business teams to leverage the self-service capabilities of the platform. This “self-service” can range widely from enabling teams to access and analyze certain certified Power BI datasets to empowering business analysts to create their own end-to-end solutions including their own data transformation workflows and semantic models. </p>
    <p class="fm-booktitle">In many scenarios, a combination of corporate IT resources, such as the on-premises data gateway and Power BI Premium capacity, can be combined with the business users’ knowledge of requirements and familiarity with data analysis and visualization in order to increase the velocity of data asset development. More experienced organizations may even utilize multiple deployment modes depending on the distinct requirements and use cases for Power BI across different teams and projects. </p>
    <p class="fm-booktitle">For example, solutions involving highly sensitive data or targeted at executive leadership are generally owned from end to end by Corporate BI/IT personnel. However, in scenarios involving rapidly changing requirements where deep business knowledge is essential, business analysts familiar with the data are often empowered with sufficient Power BI licenses and resources to develop their own datasets and reports.</p>
    <p class="fm-booktitle">We refer to standard deployment mode as <strong class="screentext">Corporate BI</strong>, a deployment mode where the IT department controls all aspects of the business intelligence platform. Alternative approaches are called <strong class="screentext">self-service</strong>, where<a id="calibre_link-1674" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the business controls some or all aspects of the business intelligence platform. </p>
    <p class="fm-booktitle">Self-service approaches can benefit both IT and business teams, as self-service can reduce IT resource <a id="calibre_link-1380" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>constraints and project timelines, and provide the business with greater flexibility and control as analytical needs change. Additionally, Power BI projects can be migrated across deployment modes over time as required skills and resources change. However, greater levels of self-service and shared ownership structures generally increase the risk of miscommunication and introduce issues of version control, quality, and consistency.</p>
    <p class="fm-booktitle">These deployment modes are summarized in <em class="italic">Figure 1.1</em>:</p>
    <figure class="mediaobject"><img src="images/000328.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.1: Power BI deployment modes</p>
    <p class="fm-booktitle">A Power BI dataset is a semantic data model primarily comprised of data source queries, relationships between fact and dimension tables, and measure calculations. A semantic data model adds meaning to the physical, underlying data by adding relationships between data entities, allowing organizations to extract truth and understanding from their data. </p>
    <p class="fm-booktitle">Datasets often contain hierarchies, row-level security roles, and often other metadata such as calculation groups, detailed row expressions, and other metadata that supports usability and analysis. Power BI datasets share the heritage and concepts of Analysis Services tabular mode models and are generally developed using Power BI Desktop, a Windows application. </p>
    <p class="fm-booktitle">Microsoft has now positioned Power BI Premium-hosted datasets as their flagship semantic modeling tool and a “superset” of Analysis Services models. As the “superset” term implies, Power BI Premium-hosted datasets now support all of the enterprise-grade modeling features of Analysis Services and there are a number of powerful modeling features, such as composite models and incremental refresh policies, that are only available via Power <a id="calibre_link-1901" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>BI datasets. <em class="italic">Chapter 15</em>, <em class="italic">Building Enterprise BI with Power BI Premium</em>, covers Power BI Premium in more detail.</p>
    <p class="fm-booktitle">Now that deployment modes are understood at a high level, let’s take a look at each of the three deployment modes in greater detail.</p>
    <h2 id="calibre_link-16" class="calibre9">Corporate BI</h2>
    <p class="fm-booktitle">The Corporate BI delivery <a id="calibre_link-1381" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>approach in which the BI team develops and maintains both the Power BI dataset (sometimes called a data model) and the <a id="calibre_link-774" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>required report visualizations is a common deployment option, particularly for large-scale projects and projects with executive-level sponsors or stakeholders. This is the approach followed in this chapter and throughout this book, as it offers maximum control over top BI objectives, such as version control, scalability, usability, and performance. </p>
    <p class="fm-booktitle">Corporate BI can be visualized as shown in <em class="italic">Figure 1.2</em>:</p>
    <figure class="mediaobject"><img src="images/000308.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.2: Corporate BI</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 1.2</em>, all data and<a id="calibre_link-1902" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Power BI assets are owned by corporate IT and business users simply consume reports and dashboards published by corporate IT to the Power BI service.</p>
    <p class="fm-booktitle">Again, with the Corporate BI approach, business users are solely consumers of corporate business intelligence assets. Next, we compare this approach with self-service approaches where business users are more engaged with the creation and deployment of business intelligence assets.</p>
    <h2 id="calibre_link-17" class="calibre9">Self-Service Visualization</h2>
    <p class="fm-booktitle">In the Self-Service Visualization approach, the dataset is <a id="calibre_link-1384" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>created and maintained by the IT organization’s BI team, but certain business users with Power BI Pro licenses create reports and dashboards for consumption by other users. In many scenarios, business analysts are already comfortable with authoring reports in Power BI Desktop (or, optionally, Excel) and can leverage their business knowledge to rapidly develop useful visualizations and insights. </p>
    <p class="fm-booktitle">With ownership of the dataset, the BI team can be confident that only curated data sources and standard metric definitions are used in reports and can ensure that the dataset remains available, performant, and updated or refreshed as per business requirements.</p>
    <p class="fm-booktitle">Self-Service Visualization is shown in <em class="italic">Figure 1.3</em>:</p>
    <figure class="mediaobject"><img src="images/000348.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.3: Self-Service Visualization</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 1.3</em>, dataset designers within corporate IT still create and manage the Power BI datasets but business users <a id="calibre_link-1903" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>author and publish reports and dashboards to the Power BI service. In the next section, we explore the Self-Service BI approach driven entirely by the business.</p>
    <h2 id="calibre_link-18" class="calibre9">Self-Service BI</h2>
    <p class="fm-booktitle">In the Self-Service BI approach, the BI organization only contributes essential infrastructure and monitoring, such as the <a id="calibre_link-1385" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>use of an on-premises data gateway and possibly Power BI Premium capacity to support the solution. Since the business team maintains control of both the datasets and the visualization layer, the business team has maximum flexibility to tailor its own solutions including data source retrieval, transformation, and modeling. </p>
    <p class="fm-booktitle">This flexibility, however, can be negated by a lack of technical coding skills and a lack of technical knowledge such as the relationships between tables in a database. Additionally, business-controlled datasets can introduce version conflicts with corporate semantic models and generally lack the resilience, performance, and scalability of IT-owned datasets. Self-Service BI can be visualized as shown in <em class="italic">Figure 1.4</em>:</p>
    <figure class="mediaobject"><img src="images/000318.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.4: Self-Service Visualization</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 1.4</em>, with a completely self-service approach to business intelligence with Power BI, the business, and <a id="calibre_link-1904" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>not IT, performs all of the functions of dataset design and report authoring. Now that the three different deployment modes are understood in greater detail, next we cover choosing between them. </p>
    <h2 id="calibre_link-19" class="calibre9">Choosing a deployment mode</h2>
    <p class="fm-booktitle">Organizations generally choose a<a id="calibre_link-1382" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> standard deployment mode used throughout the business or choose a particular deployment mode based upon the unique requirements and goals of each individual Power BI project. </p>
    <p class="fm-booktitle">It’s usually necessary or at least beneficial for Corporate BI organizations to own the Power BI datasets or at least the datasets that support important, widely distributed reports and dashboards. This is primarily due to the value of providing a single source of truth built on top of a curated data source such as a data warehouse as well as the technical skills involved in developing and managing large or complex datasets. </p>
    <p class="fm-booktitle">Additionally, BI organizations require control of datasets to implement security and to maintain version control. Security and version control often factor into corporate governance policies or are necessary to maintain compliance with regulations imposed by government agencies. Therefore, small datasets initially created by business teams are often migrated to the BI team and either integrated into larger models or rationalized given the equivalent functionality from an existing dataset.</p>
    <p class="fm-booktitle">Larger organizations with experience in deploying and managing Power BI often utilize a mix of deployment modes depending on the needs of the project and available resources. For example, a Corporate BI solution with a set of standard IT-developed reports and dashboards distributed via a Power BI app may be extended by assigning Power BI Pro licenses to certain business users who have experience or training in Power BI report design. These users could then leverage the existing data model and business definitions maintained by IT to create new reports and dashboards and distribute this content in a separate Power BI workspace and/or app. </p>
    <p class="fm-booktitle">A workspace is simply a<a id="calibre_link-1905" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> container of datasets, reports, and dashboards in the Power BI cloud service that can be distributed to large groups of users. A Power BI app represents the published version of a workspace in the Power BI service and workspace. Members can choose which items in the workspace are included in the published Power BI app. See <em class="italic">Chapter 10</em>, <em class="italic">Managing Application Workspaces and Content</em>, and <em class="italic">Chapter 13</em>, <em class="italic">Creating Apps and Content Distribution</em>, for greater detail on app workspaces and apps, respectively.</p>
    <p class="fm-booktitle">Another common scenario is<a id="calibre_link-1547" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> a <strong class="screentext">Proof of Concept</strong> (<strong class="screentext">POC</strong>). A POC is a small-scale self-service solution developed by a business user or a team designed to be transitioned to a formal, IT-owned, and managed solution. Power BI Desktop’s rich graphical interfaces at each layer of the application (query editor, data model, and report canvas) make it possible and often easy for users to create useful models and reports with minimal experience and little to no code. </p>
    <p class="fm-booktitle">It’s much more difficult, of course, to deliver consistent insights across business functions (that is, finance, sales, and marketing) and at scale in a secure, governed environment. The IT organization can enhance the quality and analytical value of these assets, as well as providing robust governance and administrative controls to ensure that the right data is being accessed by the right people.</p>
    <p class="fm-booktitle">The following list of fundamental questions help guide a deployment mode decision:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Who will own the data model?<p class="normal1">Experienced dataset designers and other IT professionals are usually required to support complex data transformations, analytical data modeling, large data sizes, and security rules, such as RLS roles, as described in <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>.</p>
        <p class="normal1">If the required data model is relatively small and simple, or if the requirements are unclear, the business team may be best positioned to create at least the initial iterations of the model.</p>
        <p class="normal1">The data model could be created with Analysis Services or Power BI Desktop.</p>
      </li>
      <li class="calibre13">Who will own the reports and dashboards?<p class="normal1">Experienced Power BI report developers with an understanding of corporate standards and data visualization best practices can deliver a consistent user experience.</p>
        <p class="normal1">Business users can be trained on report design and development practices and are well positioned to manage the visualization layer, given their knowledge of business needs and questions.</p>
      </li>
      <li class="calibre13">How will the Power <a id="calibre_link-1383" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>BI content be managed and distributed?<p class="normal1">A staged deployment across development, test, and production environments, as described in <em class="italic">Chapter 8</em>, <em class="italic">Managing Application Workspaces and Content</em>, helps to ensure that quality, validated content is published. This approach is generally exclusive to Corporate BI projects.</p>
        <p class="normal1">Sufficient Power BI Premium capacity is required to support distribution to Power BI free users and either large datasets or demanding query workloads.</p>
        <p class="normal1">Self-Service BI content can be assigned to Premium capacity, but organizations may wish to limit the scale or scope of these projects to ensure that provisioned capacity is being used efficiently.</p>
      </li>
    </ol>
    <p class="fm-booktitle">As covered in this section, deployment modes represent the overall manner in which Power BI is used within an organization. Now that the different deployment modes for Power BI are fully understood, we next move on to covering the processes and roles for implementing individual Power BI projects.</p>
    <h1 id="calibre_link-20" class="heading">Project discovery and ingestion</h1>
    <p class="fm-booktitle">An organization’s business intelligence assets are the result of individual projects designed to accomplish a<a id="calibre_link-1431" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> specific set of goals or answer a specific set of business questions. Thus, the successful initiation and execution of business intelligence projects is vital to all organizations.</p>
    <p class="fm-booktitle">Power BI projects often begin with answering a set of standard questions within a project template form. Business guidance on these<a id="calibre_link-1776" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> questions informs the BI team of the high-level technical needs of the project and helps to promote a productive project kickoff. By reviewing the project template, the BI team can ask the project sponsor or relevant <strong class="screentext">Subject Matter Experts</strong> (<strong class="screentext">SMEs</strong>) targeted questions to better understand the current state and the goals of the project.</p>
    <p class="fm-booktitle">A sample Power BI project template is provided in the following section.</p>
    <h2 id="calibre_link-21" class="calibre9">Sample Power BI project template </h2>
    <p class="fm-booktitle">The primary focus of the project planning<a id="calibre_link-1432" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> template and the overall project planning stage is on the data sources and the scale and structure of the Power BI dataset <a id="calibre_link-1433" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>required. The project sponsor or business users may only have an idea of several reports, dashboards, or metrics needed but, as a Corporate BI project, it’s essential to focus on where the project fits within an overall BI architecture and the long-term <strong class="screentext">R</strong><strong class="screentext">eturn on Investment</strong> (<strong class="screentext">ROI</strong>) of the solution. For example, BI teams would look to leverage any existing Power BI datasets or Analysis Services tabular models applicable to the project and would be sensitive to version control issues.</p>
    <p class="fm-booktitle">The following section provides a completed template for a Power BI project.</p>
    <h3 id="calibre_link-22" class="heading1">Sample template &ndash; Adventure Works BI</h3>
    <p class="fm-booktitle">The template is comprised of two<a id="calibre_link-1434" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> tables. The first table, <em class="italic">Table 1.1</em>, answers the essential who and when questions so that the project can be added to the BI team’s backlog. The BI team can use this information to plan their engagements across multiple ongoing and requested Power BI projects and to respond to project stakeholders, such as Vickie Jacobs, VP of Group Sales, in this example:</p>
    <table id="calibre_link-1906" class="table-container">
      <tbody class="calibre16">
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Date of Submission</p>
          </td>
          <td class="table-cell">
            <p class="normal2">6/6/2022</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Project Sponsor</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Vickie Jacobs, VP of Group Sales</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Primary Stakeholders</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Adventure Works Sales</p>
            <p class="normal2">Adventure Works Corp</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Power BI Author(s)</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Mark Langford, Sales Analytics Manager</p>
          </td>
        </tr>
      </tbody>
    </table>
    <figure class="mediaobject"> Table 1.1: Project sponsors, stakeholders, and participants</figure>
    <p class="fm-booktitle">Identifying stakeholders is critical to the success of business intelligence projects. Stakeholders define the goals and requirements of the business intelligence project and ultimately determine success or failure in meeting identified goals. There are often multiple stakeholders for business intelligence projects and these stakeholders may even span multiple business domains. Start by identifying the business domains as stakeholders for the business intelligence project and then identify specific individuals within those domains who can provide the goals and requirements for the project.</p>
    <p class="fm-booktitle">It is always advantageous to identify a single individual as a special kind of stakeholder, a project sponsor. Project sponsors secure the funding and assist in the prioritization of resources for business intelligence projects.</p>
    <p class="fm-booktitle">The following table, <em class="italic">Table 1.2</em>, is a list of questions that describe the project’s requirements and scope. It is critical to discover and answer as many of these questions as possible early on in a business intelligence project in order to set expectations in terms of the cost and duration <a id="calibre_link-1435" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of the project. For example, the number of users who are read-only consumers of Power BI reports and dashboards and the number of self-service users who need Power BI Pro licenses to create Power BI content largely impact the total cost of the project. Likewise, the amount of historical data to include in the dataset (2 years, 5 years?) can significantly impact performance scalability:</p>
    <table id="calibre_link-1907" class="table-container">
      <tbody class="calibre16">
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Topic</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">#</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Question</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Business Input</strong></p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Data sources</p>
          </td>
          <td class="table-cell">
            <p class="normal2">1</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can you describe the required data? (For example, sales, inventory, shipping)</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Internet Sales, Reseller Sales, and the Sales and Margin Plan. We need to analyze total corporate sales, online and reseller sales, and compare these results to our plan.</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Data sources</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Is all of the data required for your project available in the data warehouse (SQL Server)?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">No.</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Data sources</p>
          </td>
          <td class="table-cell">
            <p class="normal2">3</p>
          </td>
          <td class="table-cell">
            <p class="normal2">What other data sources (if any) contain all or part of the required data (for example, Web, Oracle, Excel)?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">The Sales and Margin Plan is maintained in Excel.</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Security</p>
          </td>
          <td class="table-cell">
            <p class="normal2">4</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Should certain users be prevented from viewing some or all of the data?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes, sales managers and associates should only see data for their sales territory group. VPs of sales, however, should have global access.</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Security</p>
          </td>
          <td class="table-cell">
            <p class="normal2">5</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Does the data contain any PCII, HIPAA, GDPR, or other sensitive data?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">No, not that I’m aware of.</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Scale</p>
          </td>
          <td class="table-cell">
            <p class="normal2">6</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Approximately, how many years of historical data are needed?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">3-4.</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Scale</p>
          </td>
          <td class="table-cell">
            <p class="normal2">7</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Is it necessary to track the history of certain dimensions such as customers or products? For example, if a customer’s address changes, is it necessary to store and report on both the prior address and the new address?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes, it would be helpful to track product history.</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Data refresh</p>
          </td>
          <td class="table-cell">
            <p class="normal2">8</p>
          </td>
          <td class="table-cell">
            <p class="normal2">How often does the data need to be refreshed?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Daily.</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Data refresh</p>
          </td>
          <td class="table-cell">
            <p class="normal2">9</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Is there a need to view data in real time (as it changes)?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">No.</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Distribution</p>
          </td>
          <td class="table-cell">
            <p class="normal2">10</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Approximately, how many users will need to view reports and dashboards?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">200.</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Distribution</p>
          </td>
          <td class="table-cell">
            <p class="normal2">11</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Approximately, how many users will need to create reports and dashboards?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">3-4.</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Distribution</p>
          </td>
          <td class="table-cell">
            <p class="normal2">12</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Will the users be viewing the reports and dashboards on mobile devices such as phones or tablets?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes, users need the ability to access the information on their phones. </p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Version control</p>
          </td>
          <td class="table-cell">
            <p class="normal2">13</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Are there existing reports on the same data? If so, please describe.</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes, there are daily and weekly sales snapshot reports available on the portal. Additionally, our team builds reports in Excel that compare actuals to the plan.</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Version Control</p>
          </td>
          <td class="table-cell">
            <p class="normal2">14</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Is the Power BI solution expected to replace these existing reports?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes, we would like to exclusively use Power BI going forward.</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Version Control</p>
          </td>
          <td class="table-cell">
            <p class="normal2">15</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Is there an existing Power BI dataset that targets the same business processes (fact tables)?</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Not to our knowledge.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <figure class="mediaobject">Table 1.2: Project questions regarding project’s scope</figure>
    <p class="fm-booktitle">A business analyst inside the IT organization often partners with the business on completing the project ingestion template and reviews the current state in order to give greater context to the template. Prior to the project kickoff meeting, the business analyst usually meets with the BI team members to review the template and any additional findings or considerations. </p>
    <p class="fm-booktitle">Many questions with greater levels <a id="calibre_link-1436" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of detail are required as the project moves forward and therefore the template shouldn’t attempt to be comprehensive or overwhelm business teams. The specific questions to include should use business-friendly language and serve to call out the top drivers of project resources and Corporate BI priorities, such as security and version control. </p>
    <p class="fm-booktitle">Now that you understand the process and requirements that drive project discovery and ingestion, we next cover the different roles involved in Power BI projects.</p>
    <h1 id="calibre_link-23" class="heading">Power BI project roles</h1>
    <p class="fm-booktitle">Following the review of the project<a id="calibre_link-1424" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> template and input from the business analyst, members of the Power BI team directly engage the project sponsor and other key stakeholders to officially engage in the project. These stakeholders include SMEs on the data source systems, business team members knowledgeable about the current state of reporting and analytics, and administrative or governance personnel with knowledge of organizational policies, available licenses, and current usage. </p>
    <p class="fm-booktitle">New Power BI projects of any significant scale and long-term adoption of Power BI within organizations require <strong class="screentext">Dataset Designers</strong>, <strong class="screentext">Report Authors</strong>, and <strong class="screentext">Power BI Admin(s)</strong>, as illustrated in the following diagram:</p>
    <figure class="mediaobject"><img src="images/000367.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.5: Power BI team roles</p>
    <p class="fm-booktitle">Each of the three Power BI <a id="calibre_link-1425" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>project roles and perhaps longer-term roles as part of a business intelligence team entail a distinct set of skills and responsibilities. It can be advantageous in a short-term or POC scenario for a single user to serve as both a dataset designer and a report author. However, the Power BI platform and the multi-faceted nature of Corporate BI deployments are too broad and dynamic for a single BI professional to adequately fulfill both roles. </p>
    <p class="fm-booktitle">It’s recommended that team members either self-select or are assigned distinct roles based on their existing skills and experience and that each member develops advanced and current knowledge relevant to their role. For example, individuals with a <strong class="screentext">user experience and user interface </strong>(<strong class="screentext">UX/UI</strong>) background are generally best suited to fulfill the <strong class="screentext">Report Author</strong> role. Conversely, more technical developers with a background in coding and data modeling often fulfill the <strong class="screentext">Dataset Designer</strong> role. A BI manager and/or a project manager can help facilitate effective communication across roles and between the BI team and other stakeholders, such as project sponsors.</p>
    <p class="fm-booktitle">Let’s now take a closer look at each of the three roles involved in Power BI projects.</p>
    <h2 id="calibre_link-24" class="calibre9">Dataset designer</h2>
    <p class="fm-booktitle">The dataset designer is responsible for the data access layer of the Power BI dataset, including the authentication to data <a id="calibre_link-1426" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>sources and the M queries used to define the tables of the data model. Additionally, the dataset designer defines the relationships of the model and any required row-level security roles and develops<a id="calibre_link-1867" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the DAX measure expressions for use in reports, such as <strong class="screentext">year-to-date</strong> (<strong class="screentext">YTD</strong>) sales.</p>
    <p class="fm-booktitle">A Power BI dataset designer often has experience in developing Analysis Services models, particularly Analysis Services models in tabular mode, as this aligns with the semantic modeling engine used in Power BI. For organizations utilizing both Analysis Services and Power BI Desktop, this could be the same individual. Alternatively, business analysts experienced with Power Pivot for Excel or with the modeling features of Power BI Desktop may also prove to have the skills required of Power BI dataset designers for self-service scenarios.</p>
    <p class="fm-booktitle">Datasets (semantic models) have always been the heart of Power BI solutions as they serve as the data source responsible for rapidly resolving the report queries generated by reports and analysis sessions. Power BI datasets can be designed to import copies of data from multiple data sources into a compressed, in-memory cache, as well as merely passing report queries back to a data source system such as Azure Synapse Analytics. Additionally, Power BI dataset designers can mix both import (in-memory) and DirectQuery storage modes across different tables of a dataset thus balancing the tradeoffs between the two storage modes. </p>
    <p class="fm-booktitle">In addition to providing a performant and scalable data source that efficiently utilizes resources (CPU, RAM), datasets must provide a user-friendly interface for report authors and analysts to quickly produce effective content. Moreover, datasets also typically contain <strong class="screentext">Row-Level Security</strong> (<strong class="screentext">RLS</strong>) roles that limit what certain users or groups of users can see and can also contain complex logic to support certain business rules or report requirements. Datasets are therefore a critical component of Power BI projects and their design has tremendous implications regarding user experience, query performance, source system and Power BI resource utilization, and more. </p>
    <p class="fm-booktitle">Given the importance of Power BI datasets and the implications of dataset design decisions for entire environments, many organizations choose to dedicate one or multiple developer roles to Power BI datasets. These individuals are expected to have advanced- to expert-level knowledge of <strong class="screentext">Data Analysis eXpressions</strong> (<strong class="screentext">DAX</strong>) as well as experience with enterprise<a id="calibre_link-754" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> features such as aggregation tables, partitions and incremental refresh, and other supporting third-party tools such as ALM Toolkit. All of these topics are explained in later chapters.</p>
    <p class="fm-booktitle">Business analysts or “power users” can often independently learn or receive essential training to build basic Power BI datasets that meet the needs of their department. However, business analysts can also struggle to learn coding languages like M and DAX and can fail to appreciate other goals of a dataset such as resource usage. For this reason, organizations are well advised to regularly monitor the datasets developed by business teams/analysts and consider adopting a process for migrating ownership of these datasets from a business team to a Corporate BI team.</p>
    <p class="fm-booktitle">It can’t be emphasized strongly enough that Power BI project teams should carefully distinguish between datasets and reports and maintain a goal of supporting many related reports and dashboards via high-quality, well-tested or certified datasets. This can be challenging as teams are generally tasked with developing reports regardless of the source dataset, thus creating a temptation to simply create a dataset dedicated to the needs of a single report. Over the long term this “report factory” approach results in both inefficient use of resources (CPU) as well as confusion and manageability issues with many datasets having slightly different logic and all needing to be maintained.</p>
    <p class="fm-booktitle">Dataset designers should regularly communicate with data source owners or SMEs, as well as report authors. For example, the dataset designer needs to be aware of changes to data sources so that data access queries can be revised accordingly, and report authors can advise of <a id="calibre_link-1427" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>any additional measures or columns necessary to create new reports. Furthermore, the dataset designer should be aware of the performance and resource utilization of deployed datasets and should work with the Power BI admin on issues such as Power BI Premium capacity.</p>
    <p class="fm-booktitle">As per <em class="italic">Figure 1.5</em>, there are usually relatively few dataset designers in a team compared with the number of report authors. This is largely due to the organizational objectives of version control and reusability, which leads to a small number of large datasets. Additionally, robust dataset development requires knowledge of the M and DAX functional programming languages, dimensional modeling practices, and business intelligence. Database experience is also very helpful. If multiple dataset designers are on a team, they should look to standardize their development practices so that they can more easily learn and support each other’s solutions.</p>
    <p class="fm-booktitle">With the crucial role of the dataset designer understood, we next explore the report author role.</p>
    <h2 id="calibre_link-25" class="calibre9">Report authors</h2>
    <p class="fm-booktitle">Report authors interface directly with the consumers of reports and dashboards or a representative of this group. In a self-service<a id="calibre_link-1430" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> deployment mode or a hybrid project (business and IT), a small number of report authors may themselves work within the business. </p>
    <p class="fm-booktitle">Above all else, report authors must have a clear understanding of the business questions to be answered and the measures and attributes (columns) needed to visually analyze and answer these questions. The report author should also be knowledgeable of visualization best practices, such as symmetry and minimalism, in addition to any corporate standards for report formatting and layout.</p>
    <p class="fm-booktitle">Power BI Desktop provides a rich set of formatting properties and analytical features, giving report authors granular control over the appearance and behavior of visualizations. Report authors should be very familiar with all standard capabilities, such as conditional formatting, drilldown, drillthrough, and cross-highlighting, as they often lead demonstrations or training sessions. </p>
    <p class="fm-booktitle">It’s important for report authors to understand the use cases and essential features of the two alternative report types available in Power BI &ndash; paginated reports and Excel reports. For example, given the requirements to export or print detail-level data, a report author should be comfortable in building a paginated report via the Power BI Report Builder. Additionally, report authors should understand the organization’s policies on custom visuals available in the MS Office store and the specific use cases for top or popular custom visuals. </p>
    <p class="fm-booktitle">It should be clear now that report authors have distinct responsibilities and skillsets compared to dataset designers. The ability to design intuitive reports and dashboards that are easily understood by the business is also of critical importance to the success of every Power BI project. Next, we look at the last critical role, the Power BI administrator.</p>
    <h2 id="calibre_link-26" class="calibre9">Power BI administrator</h2>
    <p class="fm-booktitle">As Power BI has grown its capabilities and become a mission-critical tool for organizations, the role of a Power BI administrator (admin) has become increasingly common. Power BI administrators are<a id="calibre_link-1428" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> responsible for ensuring Power BI is utilized effectively and according to the organization’s policies. For example, Power BI administrators monitor and troubleshoot dataset refresh failures, performance issues, user access requests and issues, and the overall health of an organization’s Premium capacities.</p>
    <p class="fm-booktitle">A Power BI administrator is assigned the Power <a id="calibre_link-536" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>BI administrator role in <strong class="screentext">Azure Active Directory</strong>, the identity and access control service at the heart of Microsoft’s<a id="calibre_link-1728" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> cloud-based <strong class="screentext">Software as a Service</strong> (<strong class="screentext">SaaS</strong>) products. Assignment of the Power BI administrator role is done in the Microsoft 365 admin center and <a id="calibre_link-1028" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>only <strong class="screentext">Global administrators</strong> of Office 365 can assign users to the role.</p>
    <p class="fm-booktitle">Users assigned to the Power BI administrator role obtain access to the Power BI admin portal and the rights to configure Power BI tenant settings. The Power BI admin portal and tenant settings are used to enable or disable features, such as exporting data and printing reports and dashboards. BI and IT managers that oversee Power BI deployments are often assigned to this role, as the role also provides the ability to manage Power BI Premium capacities and access to standard monitoring and usage reporting. </p>
    <p class="fm-booktitle">The Power BI admin should have a clear understanding of the organizational policy on the various tenant settings, such as whether content can be shared with external users. For most tenant settings, the Power BI administrator can define rules in the Power BI admin portal to include or exclude specific security groups. For example, external sharing can be disabled for the entire organization except for a specific security group of users. </p>
    <p class="fm-booktitle">Power BI admins must also have a thorough knowledge of permissions, roles, sharing, and licensing of Power BI in order to resolve common issues related to access. For example, a Power BI admin would know that build permission to a dataset could be granted to a business analyst as a less permissive alternative to membership in the workspace of the source dataset.</p>
    <p class="fm-booktitle">Most organizations should assign two or more users to the Power BI administrator role and ensure these users are trained on the administration features specific to this role. <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>, contains details on the Power BI admin portal and other administrative topics.</p>
    <p class="fm-booktitle">While Power BI admins are not involved in the day-to-day activities of specific projects, the role is ultimately critical to<a id="calibre_link-1908" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the success of all projects, as is the overall collaboration between all project roles, which we cover in the next section.</p>
    <h2 id="calibre_link-27" class="calibre9">Project role collaboration</h2>
    <p class="fm-booktitle">Communicating and <a id="calibre_link-1429" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>documenting project role assignments during the planning stage promotes the efficient use of time during the development and operations phases. For organizations committed to the Power BI platform and perhaps migrating away from a legacy or different BI platform, project roles may become full-time positions.</p>
    <p class="fm-booktitle">For example, BI developers with experience in DAX and Analysis Services tabular models may transition to permanent dataset designer roles while BI developers experienced in data visualization and report development may become report authors:</p>
    <table id="calibre_link-1909" class="table-container">
      <tbody class="calibre16">
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Name</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Project role</strong></p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Brett Powell</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Dataset Designer</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Jennifer Lawrence</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Report Author</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Anna Sanders</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Power BI Administrator</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Mark Langford</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Report Author</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Stacy Loeb</p>
          </td>
          <td class="table-cell">
            <p class="normal2">QA Tester</p>
          </td>
        </tr>
      </tbody>
    </table>
    <figure class="mediaobject">Table 1.3: Project role assignments</figure>
    <p class="fm-booktitle">It is important for the individuals within all of the various roles to work together and communicate effectively in order to deliver a successful project outcome. Proper communication and collaboration are important to all projects but are perhaps even more crucial within the realm of business intelligence given the distinct nature of the roles involved and the criticality of accurate, effective reporting to the success of organizations.</p>
    <p class="fm-booktitle">With project roles and responsibilities now understood, we next cover the various forms of licensing for Power BI deployments.</p>
    <h1 id="calibre_link-28" class="heading">Power BI licenses</h1>
    <p class="fm-booktitle">Power BI provides a number of different licensing options that provide flexible and affordable pricing for individuals and organizations. These licensing options come in two primary categories:</p>
    <ul class="calibre10">
      <li class="bulletlist">Shared capacity</li>
      <li class="bulletlist">Dedicated capacity</li>
    </ul>
    <p class="fm-booktitle">Let us first have a look at shared capacity.</p>
    <h2 id="calibre_link-29" class="calibre9">Shared capacity</h2>
    <p class="fm-booktitle">Shared capacity is like an apartment building. While each tenant in the building has their own personal living quarters accessible<a id="calibre_link-1399" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to only themselves, certain infrastructures such as plumbing, electrical wiring, and stairways are common to everyone in the building. Shared capacity for Power BI is similar. Each tenant within the Power BI service <a id="calibre_link-1685" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>has its own area for publishing data and reporting assets but infrastructure such as memory and processing capacity are shared among the tenants. Thus, just like a noisy neighbor in an apartment building can affect other tenants, so too can tenants within shared capacity in the Power BI service impact the performance for other tenants. </p>
    <p class="fm-booktitle">Two licensing options exist for using shared capacity within the Power BI service:</p>
    <ul class="calibre10">
      <li class="bulletlist">Free</li>
      <li class="bulletlist">Pro</li>
    </ul>
    <p class="fm-booktitle">In the next two sections, we look at the differences between free and Pro licensing.</p>
    <h3 id="calibre_link-30" class="heading1">Free</h3>
    <p class="fm-booktitle">It is possible to use <a id="calibre_link-1686" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI entirely for free. First, the Power BI Desktop application is always free to download and use. Licensing does not become a factor until one desires to use the Power BI service. However, there is a free version of the Power BI service license. The free license allows reports to be published to the Power BI service, however, there are significant limitations with this approach. <em class="italic">Figure 1.6</em> provides an overview of using Power BI free licensing.</p>
    <figure class="mediaobject"><img src="images/000357.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.6: Power BI free</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 1.6</em>, report authors can use Power BI Desktop to create datasets and reports and publish these assets to the Power BI service. However, datasets can only be refreshed from cloud sources and only from the user’s personal workspace, <strong class="screentext">My Workspace</strong>. Refreshing on-premises<a id="calibre_link-1687" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> data sources is not supported. In addition, sharing content with other internal and external users is only possible through the <strong class="screentext">Publish to Web</strong> feature. </p>
    <p class="fm-booktitle">It is important to understand that the <a id="calibre_link-1400" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Publish to Web feature does not provide any kind of security or authentication. Anyone that has the link to the report that has been published using the Publish to Web feature can access the report anonymously. There are many other features that cannot be used in the Power BI service as well, such as subscriptions and comments.</p>
    <p class="fm-booktitle">Once the limitations are understood, solely using the free license for Power BI has only limited uses. Mainly, it is used for testing or performing a proof of concept. However, the free Power BI service license can be coupled with Power BI Premium to provide a powerful and affordable solution for enterprises.</p>
    <p class="fm-booktitle">Now that the<a id="calibre_link-1688" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> free licensing model is <a id="calibre_link-1910" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>understood, let’s compare it with the pro licensing model.</p>
    <h3 id="calibre_link-31" class="heading1">Pro</h3>
    <p class="fm-booktitle">The Pro licensing <a id="calibre_link-1689" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>option for Power BI removes the limitations of free licensing when using the Power BI service. <em class="italic">Figure 1.7</em> presents an overview of Pro licensing.</p>
    <figure class="mediaobject"><img src="images/000385.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.7: Power BI Pro</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 1.7</em>, Pro licensing allows users to share reports with both internal and external users. However, those users also require a Pro license in order to access and view the reports and datasets. Essentially, anyone that collaborates (views, creates, edits) datasets, reports, and dashboards must have a Pro license. </p>
    <p class="fm-booktitle">Using a Pro license removes all of the restrictions of the free licensing structure and users are able to utilize the standard<a id="calibre_link-1690" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> features of the Power BI service including the ability to create subscriptions, comment, create and use apps, and <a id="calibre_link-513" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>leverage the <strong class="screentext">Analyze in Excel </strong>feature, which exports a report’s underlying data to Excel in order to support further analysis.</p>
    <p class="fm-booktitle">Now that we have explored the free and Pro licensing options associated with shared capacity, we’ll next look at the licensing models available for dedicated capacity.</p>
    <h2 id="calibre_link-32" class="calibre9">Dedicated capacity</h2>
    <p class="fm-booktitle">In addition to shared capacity licenses, there <a id="calibre_link-1396" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are also dedicated capacity licenses available for Power BI. These licenses reserve memory and processing capacity solely for the use of a particular tenant. In addition, these licenses enable advanced features such as larger datasets, increased user quotas, more frequent dataset refreshes, paginated<a id="calibre_link-887" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> reports, goals, scorecards, pipelines, and embedding of content into corporate applications.</p>
    <p class="fm-booktitle">Three licensing options exist for using dedicated capacity within the Power BI service:</p>
    <ul class="calibre10">
      <li class="bulletlist">Premium</li>
      <li class="bulletlist">Premium Per User</li>
      <li class="bulletlist">Embedded</li>
    </ul>
    <p class="fm-booktitle">We cover each of these licensing options in detail in the following sections.</p>
    <h3 id="calibre_link-33" class="heading1">Premium</h3>
    <p class="fm-booktitle">With Power BI Premium, users with Power BI free licenses are able to access and view Power BI apps of <a id="calibre_link-888" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>reports and dashboards that have been assigned to Premium capacities. This access includes consuming the content via the Power BI mobile application as well as fully interacting with standard Power BI service features such as using subscriptions and comments. Additionally, Power BI Pro users can share dashboards with Power BI free users if the dashboard is contained in a Premium workspace. Power BI Pro licenses are required for users that create or distribute Power BI content, such as connecting to published datasets from Power BI Desktop or Excel. <em class="italic">Figure 1.8</em> presents an overview of Premium licensing.</p>
    <figure class="mediaobject"><img src="images/000376.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.8: Power BI Premium</p>
    <p class="fm-booktitle">Power BI Premium is purchased in capacity units priced on a per-month basis. These capacity units are called node types and <a id="calibre_link-889" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>range in size from a P1 with 25 GB of RAM and eight virtual cores for $5,000/month to a P5 with <a id="calibre_link-1161" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>400 GB of RAM and 128 virtual cores for $80,000/month. It is important to understand that this is dedicated capacity and is charged on a per-month basis (not per minute or hour). Power BI Premium also includes a license for using Power BI Report Server on-premises.</p>
    <p class="fm-booktitle">An organization may choose to license Power BI Premium capacities for additional or separate reasons beyond the ability to distribute Power BI content to read-only users without incurring per-user license costs. Significantly, greater detail on Power BI Premium features and deployment considerations is included in <em class="italic">Chapter 15</em>, <em class="italic">Building Enterprise BI with Power BI Premium</em>.</p>
    <p class="fm-booktitle">With an entry price point for Power BI Premium of $5,000 per month, many mid-sized organizations were priced out of the<a id="calibre_link-1911" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> ability to afford dedicated capacity. Thus, Microsoft recently introduced Premium Per User pricing, which we cover next.</p>
    <h3 id="calibre_link-34" class="heading1">Premium Per User</h3>
    <p class="fm-booktitle"><strong class="screentext">Premium Per User</strong> (<strong class="screentext">PPU</strong>) licensing effectively <a id="calibre_link-890" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>works identically to Pro licensing except that all users of a PPU workspace must have a PPU license. An overview of PPU licensing is shown in <em class="italic">Figure 1.9</em>.</p>
    <figure class="mediaobject"><img src="images/000404.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.9: Power BI Premium Per User</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 1.9</em>, PPU licensing works the same as Pro licensing except that PPU licensing adds the additional advanced features of Premium such as increased dataset sizes, increased refresh frequency, paginated reports, goals, scorecards, and pipelines.</p>
    <p class="fm-booktitle">Let’s now take a look at the last <a id="calibre_link-1912" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dedicated capacity licensing option, Embedded.</p>
    <h3 id="calibre_link-35" class="heading1">Embedded</h3>
    <p class="fm-booktitle">Power BI Embedded is intended for use by<a id="calibre_link-885" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> developers and <strong class="screentext">Independent Software Vendors</strong> (<strong class="screentext">ISVs</strong>) that use APIs to embed Power BI visuals, reports, and<a id="calibre_link-1049" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> dashboards within their custom web applications. These applications can then be accessed by external customers. <em class="italic">Figure 1.10</em> provides an overview of Power BI Embedded.</p>
    <figure class="mediaobject"><img src="images/000394.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.10: Power BI Embedded</p>
    <p class="fm-booktitle">Similar to Power BI Premium, capacity units or node types for Embedded range in size from an A1 with 3 GB of RAM and a single virtual core for $750 per month to an A6 with 100 GB of RAM and 32 virtual cores for $24,000 per month. However, different than Premium, Embedded is charged on a usage basis per minute versus a flat charge per month. The usage-based charge is attractive to developers and ISVs as this provides greater flexibility and less <a id="calibre_link-886" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>expense, particularly during development, since the service can be deprovisioned when development is not occurring.</p>
    <p class="fm-booktitle">With the basic licenses for Power BI understood, let’s next consider how these different licenses are combined to provide a complete licensing scenario for an organization.</p>
    <h2 id="calibre_link-36" class="calibre9">Power BI license scenarios</h2>
    <p class="fm-booktitle">The optimal mix of Power BI Pro and <a id="calibre_link-1397" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI Premium licensing in terms of total cost varies based on the volume of users and the composition of those users between read-only consumers of content versus Self-Service BI users. In relatively small deployments, such as 200 total users, a Power BI Pro license can be assigned to each user regardless of self-service usage and Power BI Premium capacity can be avoided. </p>
    <p class="fm-booktitle">However, there are other benefits to licensing Power BI Premium capacity that may be necessary for certain deployments, such as larger datasets or more frequent data refreshes.</p>
    <p class="fm-booktitle">If an organization consists of 700 total users with 600 read-only users and 100 self-service users (content creators), it’s more cost-effective to assign Power BI Pro licenses to the 100 self-service users and to provision Power BI Premium capacity to support the other 600 users. Likewise, for a larger organization with 5,000 total users and 4,000 self-service users, the most cost-effective licensing option is to assign Power Pro licenses to the 4,000 self-service users and to license Power BI Premium for the remaining 1,000 users. </p>
    <p class="fm-booktitle">Several factors drive the amount of Power BI Premium capacity to provision, such as the number of concurrent users, the complexity of the queries generated, and the number of Concurrent data refreshes. See <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>, and <em class="italic">Chapter 15</em>, <em class="italic">Building Enterprise BI with Power BI Premium</em>, for additional details on aligning Power BI licenses and resources with the needs of Power BI deployments.</p>
    <p class="fm-booktitle">In the sample project example introduced in the section <em class="italic">Sample template &ndash; Adventure Works BI</em>, Power BI Premium is being used. Therefore, only a few users need Power BI Pro licenses to create and share reports and dashboards. </p>
    <p class="fm-booktitle">Referencing <em class="italic">Table 1.3</em>, Mark Langford, a data analyst for the sales organization, requires a Pro license to analyze published datasets from Microsoft Excel. Jennifer Lawrence, a corporate BI developer and report author for this project, requires a Pro license to publish Power BI reports to app workspaces and distribute Power BI apps to users. Finally, Brett Powell as dataset designer also requires a Power BI Pro license to create and publish the underlying dataset. </p>
    <p class="fm-booktitle">Typically, a Power BI administrator is also assigned a Power BI Pro license. Per <em class="italic">Table 1.3</em>, Anna Sanders is the Power BI administrator. However, a Power BI Pro license is not required to be assigned to<a id="calibre_link-1398" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the Power BI administrator role. </p>
    <p class="fm-booktitle">The approximately 200 Adventure Works sales team users who only need to view the content can be assigned free licenses and consume the published content via Power BI apps associated with Power BI Premium capacity. Organizations can obtain more Power BI Pro licenses and Power BI Premium capacity (virtual cores, RAM) as usage and workloads increase. </p>
    <p class="fm-booktitle">We mentioned at the beginning of this chapter that Power BI is a robust, flexible business intelligence platform and the different licensing options and combinations are a reflection of that flexibility. In the following sections, we’ll next cover the tools, processes, and overall design of datasets.</p>
    <h1 id="calibre_link-37" class="heading">Dataset design</h1>
    <p class="fm-booktitle">Designing Power BI datasets is in many respects similar to designing data warehouses. Both datasets and data warehouses share concepts such as fact and dimension tables, star schemas, slowly changing <a id="calibre_link-796" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dimensions, fact table granularity, and local and foreign keys for building relationships between tables. </p>
    <p class="fm-booktitle">This similarity allows us to use the same proven tools and processes for designing and building Power BI datasets as are used to design data warehouses. In this section, we cover the tools and processes used to design <a id="calibre_link-797" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI datasets, starting with the <strong class="screentext">data warehouse bus matrix</strong>.</p>
    <h2 id="calibre_link-38" class="calibre9">Data warehouse bus matrix</h2>
    <p class="fm-booktitle">The data<a id="calibre_link-1913" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> warehouse bus matrix is a staple of the Ralph Kimball data warehouse architecture, which provides an incremental and integrated approach to data warehouse design. This architecture, as per <em class="italic">The Data Warehouse Toolkit (Third Edition)</em> by Ralph Kimball, allows for scalable data models, as multiple business teams or functions often require access to the same business process data and dimensions.</p>
    <p class="fm-booktitle">To promote reusability and project communication, a data warehouse bus matrix of business processes and shared dimensions is recommended. An example data warehouse bus matrix is shown in <em class="italic">Figure 1.11</em>:</p>
    <figure class="mediaobject"><img src="images/000000.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.11: Data warehouse bus matrix</p>
    <p class="fm-booktitle">Each row in <em class="italic">Figure 1.11</em> reflects an important and recurring business process, such as the monthly close of the general ledger, and each column represents a business entity, which may relate to one or several of the business processes. The shaded rows (<strong class="screentext">Internet Sales</strong>,<strong class="screentext"> Reseller Sales</strong>,<strong class="screentext"> </strong>and <strong class="screentext">Sales Plan</strong>) identify the business processes that will be implemented as their own star schemas for this project. </p>
    <p class="fm-booktitle">The bus matrix can be developed in collaboration with business stakeholders, such as the corporate finance manager, as well as source system and business intelligence or data warehouse SMEs. </p>
    <p class="fm-booktitle">The architecture of the dataset should support future BI and analytics projects of the organization involving the given business processes (fact tables) and business entities (dimension tables). For example, the same dataset containing <strong class="screentext">Internet Sales</strong> data should support both an executive’s sales and revenue dashboard as well a business analyst’s ad hoc analysis via Excel PivotTables. </p>
    <p class="fm-booktitle">Additional business processes, such as maintaining product inventory levels, could potentially be added to the same Power BI dataset in a future project. Importantly, these future additions could leverage existing dimension tables, such as a product table, including its source query, column metadata, and any defined hierarchies.</p>
    <p class="fm-booktitle">Each Power BI report is usually <a id="calibre_link-798" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>tied to a single dataset. Given this 1:1 relationship and the analytical value of integrated reports across multiple business processes, such as <strong class="screentext">Inventory</strong> and <strong class="screentext">Internet Sales</strong>, it’s important to design datasets that can scale to support multiple star schemas. Consolidating business processes into one or a few datasets also makes solutions more manageable and is a better use of source system resources, as common tables (for example, <strong class="screentext">Product</strong>, <strong class="screentext">Customer</strong>) are only refreshed once.</p>
    <p class="fm-booktitle">The data warehouse bus matrix is a proven tool used during the design process of data warehouses and is just as effective for designing Power BI datasets. We cover this design process in the next section.</p>
    <h2 id="calibre_link-39" class="calibre9">Dataset design process</h2>
    <p class="fm-booktitle">With the data warehouse<a id="calibre_link-799" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> bus matrix as a guide, the business intelligence team can work with representatives from the relevant business teams and project sponsors to complete the following four-step dataset design process:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Select the business process</li>
      <li class="calibre13">Declare the grain</li>
      <li class="calibre13">Identify the dimensions</li>
      <li class="calibre13">Define the facts</li>
    </ol>
    <p class="fm-booktitle">In the following sections, we cover each of these steps in detail, starting with selecting the business process.</p>
    <h3 id="calibre_link-40" class="heading1">Select the business process</h3>
    <p class="fm-booktitle">Ultimately, each business <a id="calibre_link-800" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>process is represented by a fact table with a star schema of many-to-one relationships to dimensions. In a discovery or requirements gathering process, it can be difficult to focus on a single business process in isolation as users regularly analyze multiple business processes simultaneously or need to. </p>
    <p class="fm-booktitle">Nonetheless, it’s essential that the dataset being designed reflects low-level business activities (for example, receiving an online sales order) rather than consolidation or integration of distinct business processes such as a table with both online and reseller sales data:</p>
    <ul class="calibre10">
      <li class="bulletlist">Confirm that the answer provided to the first question of the project template from <em class="italic">Table 1.2</em> regarding data sources is accurate.</li>
      <li class="bulletlist">In this project, the required business processes are <strong class="screentext">Internet Sales</strong>, <strong class="screentext">Reseller Sales</strong>, and <strong class="screentext">Annual Sales</strong> and <strong class="screentext">Margin Plan</strong>.</li>
      <li class="bulletlist">Each of the three business processes corresponds to a fact table to be included in the Power BI dataset.</li>
      <li class="bulletlist">Obtain a high-level understanding of the top business questions for each business process. For example, “What are total sales relative to the <strong class="screentext">Annual Sales Plan</strong> and relative to last year?”.</li>
      <li class="bulletlist">In this project, Internet Sales and Reseller Sales are combined into overall corporate sales and margin KPIs.</li>
      <li class="bulletlist">Optionally, reference the data warehouse bus matrix of business processes and their related dimensions. For example, discuss the integration of inventory data and the insights this integration may provide.</li>
      <li class="bulletlist">In many projects, a choice or compromise has to be made given the limited availability of certain business processes and the costs or timelines associated with preparing this data for production use.</li>
      <li class="bulletlist">Additionally, business processes (fact tables) are the top drivers of the storage and processing costs of the dataset and thus should only be included if necessary.</li>
    </ul>
    <p class="fm-booktitle">A common anti-pattern (a response<a id="calibre_link-1914" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to a reoccurring problem that is generally ineffective and potentially counterproductive) to avoid in Power BI projects is the development of datasets for specific projects or teams rather than business processes. For example, developing a dataset exclusively for the marketing team and another dataset created for the sales organization. Assuming both teams require access to the same sales data, this approach naturally leads to a waste of resources, as the same sales data is queried and refreshed twice and both datasets consume storage resources in the Power BI service. </p>
    <p class="fm-booktitle">Additionally, this isolated approach leads to manageability and version control issues, as the datasets may contain variations in transformation or metric logic. Therefore, although the analytical needs of specific business users or teams are indeed the priority of BI projects, it’s important to plan for sustainable solutions that can ultimately be shared across teams.</p>
    <p class="fm-booktitle">Let’s now look at the next step in the process, declaring the grain.</p>
    <h3 id="calibre_link-41" class="heading1">Declare the grain</h3>
    <p class="fm-booktitle">The grain of fact tables ultimately governs the level of detail available for analytical queries as well as the amount of data to be accessed. Higher grains mean more detail while lower grains mean less detail.</p>
    <p class="fm-booktitle">All rows of a fact table should represent the individual<a id="calibre_link-805" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> business process from step 1 at a certain level of detail or grain such as the header level or line level of a purchase order. Therefore, each row should have the same meaning and thus contain values for the same key columns to dimensions and the same numeric columns.</p>
    <p class="fm-booktitle">During this step, determine what each row of the different business processes represents. For example, each row of the Internet Sales fact table represents the line of a sales order from a customer. Conversely, the rows of the Sales and Margin Plan are aggregated to the level of a Calendar Month, Products Subcategory, and Sales Territory region.</p>
    <p class="fm-booktitle">If it’s necessary to apply filters or logic to treat certain rows of a fact table differently than others, the fact table likely contains multiple business processes (for example, shipments and orders). Although it’s technically possible to build this logic into DAX measure expressions, well-designed fact tables benefit Power BI and other data projects and tools over the long term. Thus, in such circumstances, it is advisable to split the table into two separate tables. </p>
    <p class="fm-booktitle">When analyzing the grain of fact tables, consider the following:</p>
    <ul class="calibre10">
      <li class="bulletlist">Review and discuss the implications of the chosen grain in terms of dimensionality and scale</li>
      <li class="bulletlist">Higher granularities provide greater levels of dimensionality and thus detail but result in much larger fact tables</li>
      <li class="bulletlist">If a high grain or the maximum grain is chosen, determine the row counts per year and the storage size of this table once loaded into Power BI datasets</li>
      <li class="bulletlist">If a lower grain is chosen, ensure that project stakeholders understand the loss of dimensionalities, such as the inability to filter for specific products or customers</li>
    </ul>
    <p class="fm-booktitle">In general, a higher granularity is recommended for analytical power and sustainability. If a less granular design is chosen, such as the header level of a sales order, and this grain later proves to be insufficient to answer new business questions, then either a new fact table would have to be added to the dataset or the existing fact table and all of its measures and dependent reports would have to be replaced. </p>
    <p class="fm-booktitle">Once the grains of all fact tables are determined, it is time to move on to the next step and identify the dimensions.</p>
    <h3 id="calibre_link-42" class="heading1">Identify the dimensions</h3>
    <p class="fm-booktitle">Dimensions are a <a id="calibre_link-801" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>natural byproduct of the grain chosen in the previous design process step. A single sample row from the fact table should clearly indicate the business entities (dimensions) associated with the given process such as the customer who purchased an individual product on a certain date and at a certain time via a specific promotion. </p>
    <p class="fm-booktitle">Fact tables representing a lower grain have fewer dimensions. For example, a fact table representing the header level of a purchase order may identify the vendor but not the individual products purchased from the vendor.</p>
    <p class="fm-booktitle">When analyzing dimensions, consider the following:</p>
    <ul class="calibre10">
      <li class="bulletlist">Identify and communicate the dimensions that can be used to filter (aka slice and dice) each business process.</li>
      <li class="bulletlist">The foreign key columns based on the grain chosen in the previous step reference dimension tables.</li>
      <li class="bulletlist">Review a sample of all critical dimension tables, such as <strong class="screentext">Product</strong> or <strong class="screentext">Customer</strong>, and ensure these tables contain the columns and values necessary or expected.</li>
      <li class="bulletlist">Communicate which dimensions can be used to filter multiple business processes simultaneously. For example, in this project, the Product, Sales Territory, and Date dimensions can be used to filter all three fact tables.</li>
      <li class="bulletlist">The data warehouse bus matrix referenced earlier can be helpful for this step.</li>
      <li class="bulletlist">Look for any gap between the existing dimension tables and business questions or related reports.</li>
      <li class="bulletlist">For example, existing IT-supported reports may contain embedded logic that creates columns via <strong class="screentext">Structured Query Language</strong> (<strong class="screentext">SQL</strong>) that are not stored in the data warehouse.</li>
      <li class="bulletlist">Strive to maintain version control for dimension tables and the columns (attributes) within dimension tables.</li>
      <li class="bulletlist">It may be necessary for project stakeholders to adapt or migrate from legacy reports or an internally maintained source to the Corporate BI source.</li>
    </ul>
    <p class="fm-booktitle">A significant challenge to the identity of the dimensions step can be a lack of <strong class="screentext">Master Data Management</strong> (<strong class="screentext">MDM</strong>) and alternative versions. MDM is <a id="calibre_link-1098" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>a discipline practiced by organizations in order to ensure the accuracy, uniformity, semantic consistency, and stewardship of the official data assets.</p>
    <p class="fm-booktitle">For example, the sales organization may<a id="calibre_link-802" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> maintain its own dimension tables in Excel or Microsoft Access and its naming conventions and hierarchy structures may represent a conflict or gap with the existing data warehouse. Additionally, many corporate applications may store their own versions of common dimensions, such as products and customers. </p>
    <p class="fm-booktitle">These issues should be understood and, despite pressure to deliver BI value quickly or according to a specific business team’s preferred version, the long-term value of a single definition for an entire organization as expressed via the bus matrix should not be sacrificed.</p>
    <p class="fm-booktitle">With dimensions identified, the final step is to define the fact tables.</p>
    <h3 id="calibre_link-43" class="heading1">Define the facts</h3>
    <p class="fm-booktitle">The facts represent the numeric columns<a id="calibre_link-803" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> included in the fact tables. While the dimension columns from step 3 are used for relationships to dimension tables, the fact columns are used in measures containing aggregation logic such as the sum of a quantity column and the average of a price column.</p>
    <p class="fm-booktitle">When defining the facts, consider the following:</p>
    <ul class="calibre10">
      <li class="bulletlist">Define the business logic for each fact, represented by measures in the dataset. For example, gross sales is equal to the extended amount on a sales order, and net sales is equal to gross sales minus discounts.</li>
      <li class="bulletlist">Any existing documentation or relevant technical metadata should be reviewed and validated.</li>
      <li class="bulletlist">Similar to the dimensions, any conflicts between existing definitions should be addressed so that a single definition for a core set of metrics is understood and approved.</li>
      <li class="bulletlist">Additionally, a baseline or target source should be identified to validate the accuracy of the metrics to be created. For example, several months following the project, it should be possible to compare the results of DAX measures from the Power BI dataset to an SSRS report or a SQL query.</li>
      <li class="bulletlist">If no variance exists between the two sources, the DAX measures are valid and thus any doubt or reported discrepancy is due to some other factor</li>
    </ul>
    <p class="fm-booktitle">See <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, <em class="italic">Chapter 3</em>, <em class="italic">Connecting Sources and Transforming Data with M</em>, <em class="italic">Chapter 4</em>, <em class="italic">Designing Import and DirectQuery Data Models</em>, and <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, for details on the fact table columns to include in Power BI datasets (for import or DirectQuery) and the development of DAX metric expressions. The fact<a id="calibre_link-804" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> definitions from this step relate closely to the concept of base measures described in <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>.</p>
    <p class="fm-booktitle">Ultimately, the DAX measures implemented have to tie to the approved definitions, but there are significant data processing, storage, and performance implications based on how this logic is computed. In many cases, the Power BI dataset can provide the same logic as an existing system but via an alternative methodology that better aligns with Power BI or the specific project need. </p>
    <p class="fm-booktitle">This concludes the dataset design process. Next, we cover another important topic related to datasets, data profiling.</p>
    <h1 id="calibre_link-44" class="heading">Data profiling</h1>
    <p class="fm-booktitle">The four-step dataset design process can be immediately followed by a technical analysis of the source data for the required fact and dimension tables of the dataset. Technical metadata, including <a id="calibre_link-785" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>database diagrams and data profiling results, such as the existence of null values in source columns, are essential for the project planning stage. This information is used to ensure the Power BI dataset reflects the intended business definitions and is built on a sound and trusted source.</p>
    <p class="fm-booktitle">For example, <em class="italic">Figure 1.12</em> shows a database diagram that describes the schema for the reseller sales business process:</p>
    <figure class="mediaobject"><img src="images/000414.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.12: SQL Server database diagram: reseller sales</p>
    <p class="fm-booktitle">The foreign key constraints (the lines between the tables) identify the surrogate key columns used in the relationships<a id="calibre_link-786" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of the Power BI dataset and the referential integrity of the source database. The columns used as keys are displayed in <em class="italic">Figure 1.12</em> with small key icons to the left of the column name.</p>
    <p class="fm-booktitle">In this schema, the product dimension is modeled as three separate dimension tables&mdash;<code class="inlinecode">DimProduct</code>,<code class="inlinecode"> DimProductSubcategory</code>, and <code class="inlinecode">DimProductCategory</code>. Given the priorities of usability, manageability, and query performance, a single denormalized product dimension table that includes essential <code class="inlinecode">Product Subcategory</code> and <code class="inlinecode">Product Category</code> columns is generally recommended. This reduces the volume of source queries, relationships, and tables in the data model and improves report query performance, as fewer relationships must be scanned by the dataset engine. </p>
    <p class="fm-booktitle">Clear visibility of the source system, including referential and data integrity constraints, data quality, and any MDM processes, is essential. Unlike other popular BI tools, Power BI is capable of addressing many data integration and quality issues, particularly with relational database sources that Power BI can leverage to execute data transformation operations. However, Power BI’s <strong class="screentext">extract, transform, load</strong> (<strong class="screentext">ETL</strong>) capabilities are not a substitute for data warehouse architecture and<a id="calibre_link-1742" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> enterprise ETL tools, such as <strong class="screentext">SQL Server Integration Services</strong> (<strong class="screentext">SSIS</strong>).</p>
    <p class="fm-booktitle">For example, it’s the responsibility of the data warehouse to support historical tracking with slowly changing dimension ETL processes that generate new rows and surrogate keys for a dimension when certain columns change. To illustrate a standard implementation of slowly changing dimensions, <em class="italic">Figure 1.13</em> shows the results of a query of the <code class="inlinecode">DimProduct</code> table in the Adventure Works data warehouse returning three rows for one product (FR-M94B-38):</p>
    <figure class="mediaobject"><img src="images/000019.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.13: Historical tracking of dimensions via slowly changing dimension ETL processes</p>
    <p class="fm-booktitle">It’s the responsibility of the Power BI team and particularly the dataset designer to accurately reflect this historical tracking via relationships and DAX measures, such as the count of distinct products not <a id="calibre_link-787" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>sold. Like historical tracking, the data warehouse should also reflect all master data management processes that serve to maintain accurate master data for essential dimensions, such as customers, products, and employees.</p>
    <p class="fm-booktitle">In other words, despite many line of business applications and <strong class="screentext">Enterprise Resource Planning </strong>(<strong class="screentext">ERP</strong>), <strong class="screentext">Customer Relationship Management </strong>(<strong class="screentext">CRM</strong>), <strong class="screentext">Human Resource Management</strong> (<strong class="screentext">HRM</strong>), and other large corporate systems that store and process the same master data, the data warehouse should reflect the centrally governed and cleansed standard. Therefore, creating a Power BI dataset that only reflects one of these source systems may later introduce version control issues and, similar to choosing an incorrect granularity for a fact table, can ultimately require costly and invasive revisions. </p>
    <p class="fm-booktitle">Different tools are available with data profiling capabilities. If the data source is SQL Server, SSIS can be used to analyze source data intended for use in a project. In <em class="italic">Figure 1.14</em>, the <strong class="screentext">Data Profiling task</strong> is used in an SSIS package to analyze the customer dimension table:</p>
    <figure class="mediaobject"><img src="images/000009.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.14: Data Profiling task in SSIS</p>
    <p class="fm-booktitle">The Data Profiling task requires an ADO.NET connection to the data source and can write its output to an XML file or an SSIS variable. In this example, the ADO.NET data source is the Adventure Works data warehouse database in SQL Server 2016 and the destination is an XML file (<code class="inlinecode">DataProfilingData.xml</code>). </p>
    <p class="fm-booktitle">Once the task is executed, the <a id="calibre_link-788" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>XML file can be read via the SQL Server Data Profile Viewer as per the following example. Note that this application, Data Profile Viewer, requires the installation of SQL Server and that the Data Profiling task only works with SQL Server data sources. All fact and dimension table sources can be analyzed quickly for the count and distribution of unique values, the existence of null values, and other useful statistics.</p>
    <p class="fm-booktitle">Each Data Profiling task can be configured to write its results to an XML file on a network location for access via tools such as the Data Profile Viewer. In the example shown in <em class="italic">Figure 1.15</em>, the Data Profile Viewer is opened from within SSIS to analyze the output of the Data Profiling task for the customer dimension table:</p>
    <figure class="mediaobject"><img src="images/000039.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.15: Data Profile Viewer: column null ratio profiles of DimCustomer table</p>
    <p class="fm-booktitle">Identifying and documenting issues in the source data via data profiling is a critical step in the planning process. For example, the cardinality or count of unique values largely determines the data size of a column in an import mode dataset. Similarly, the severity of data quality issues identified impacts whether a DirectQuery dataset is a feasible option.</p>
    <p class="fm-booktitle">In general, enterprise BI teams<a id="calibre_link-1915" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> should utilize enterprise data profiling tools such as those included with SQL Server. However, basic data profiling tools are also available in Power BI Desktop, which we cover next.</p>
    <h2 id="calibre_link-45" class="calibre9">Data profiling with Power BI Desktop</h2>
    <p class="fm-booktitle">Power BI Desktop includes simple<a id="calibre_link-789" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> data quality reporting within the Power Query Editor interface. The Power Query Editor is used to develop queries for connecting to <a id="calibre_link-1394" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and ingesting data from source systems and is covered in detail in <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>.</p>
    <p class="fm-booktitle">To access the data quality reporting within Power Query Editor, use the <strong class="screentext">View</strong> tab and check the boxes for <strong class="screentext">Column quality</strong>, <strong class="screentext">Column distribution</strong>, and <strong class="screentext">Column profile</strong> as shown in <em class="italic">Figure 1.16</em>:</p>
    <figure class="mediaobject"><img src="images/000029.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.16: Data quality in Power Query Editor</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 1.16</em>, activating<a id="calibre_link-790" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the data quality reporting within Power Query Editor displays many important statistics such as the number of distinct <a id="calibre_link-1395" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>values, the value distribution, and the percentage of valid values and errors.</p>
    <p class="fm-booktitle">While not as comprehensive as some enterprise data quality tools, the data quality reporting within Power Query Editor is useful as an additional data quality check for data accessed by Power BI Desktop.</p>
    <p class="fm-booktitle">Once source data is profiled, the next natural step is dataset planning as covered in the next section.</p>
    <h1 id="calibre_link-46" class="heading">Dataset planning</h1>
    <p class="fm-booktitle">After the source data is profiled and evaluated against the requirements identified in the four-step dataset design process, the BI team can further analyze the implementation options for the<a id="calibre_link-819" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> dataset. In almost all Power BI projects, even with significant investments in enterprise data warehouse architecture and ETL tools and processes, some level of additional logic, integration, or transformation is needed to enhance the quality and value of the source data or to effectively support a business requirement. </p>
    <p class="fm-booktitle">A priority of the dataset planning stage is to determine how the identified data transformation issues are addressed to support the dataset. Additionally, based on all available information and requirements, the project team must determine whether to develop an import mode dataset, DirectQuery dataset, or composite dataset. Import, DirectQuery, and composite datasets are explained in the section <em class="italic">Import, DirectQuery, Live, and Composite Datasets.</em></p>
    <p class="fm-booktitle">The initial step in the dataset planning process is planning for data transformations, which we’ll review next.</p>
    <h2 id="calibre_link-47" class="calibre9">Data transformations</h2>
    <p class="fm-booktitle">To help clarify the dataset<a id="calibre_link-822" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> planning process, a diagram such as <em class="italic">Figure 1.17</em> can be created that identifies the different layers of the data warehouse and Power BI dataset where transformation and business logic can be implemented: </p>
    <figure class="mediaobject"><img src="images/000060.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.17: Dataset planning architecture</p>
    <p class="fm-booktitle">In some projects, minimal transformation<a id="calibre_link-823" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> logic is needed and can be easily included in the Power BI dataset or the SQL views accessed by the dataset. For example, if only a few additional columns are needed for a dimension table and there’s straightforward guidance on how these columns should be computed, the IT organization may choose to implement these transformations within Power BI’s Power Query (M) queries rather than revise the data warehouse, at least in the short term.</p>
    <p class="fm-booktitle">If a substantial gap between BI needs and the corporate data warehouse is allowed to persist and grow due to various factors, such as cost, project expediency, and available data warehouse skills, then Power BI datasets become more complex to build and maintain. Dataset designers should regularly analyze and communicate the implications of datasets assuming greater levels of complexity. </p>
    <p class="fm-booktitle">However, if the required transformation logic is complex or extensive with multiple join operations, row filters, and data type changes, then the IT organization may choose to implement essential changes in the data warehouse to support the new dataset and future BI projects. For example, a staging table and a SQL stored procedure may be needed to support a revised nightly update process, or the creation of an index may be needed to deliver improved query performance for a DirectQuery dataset.</p>
    <p class="fm-booktitle">Ideally, all required data transformation and shaping logic could be implemented in the source data warehouse and its ETL processes so that Power BI is exclusively used for analytics and visualization. However, in the reality of scarce IT resources and project delivery timelines, typically at least a portion of these issues must be handled through other means, such as SQL view objects or Power BI’s M query functions. </p>
    <p class="fm-booktitle">A best practice is to implement data transformation operations within the data warehouse or source system. This minimizes the resources required to process an import mode dataset and, for DirectQuery datasets, can significantly improve query performance, as these operations would otherwise be executed during report queries. </p>
    <p class="fm-booktitle">For many common data sources, such as Oracle and Teradata, M query expressions are translated into equivalent SQL statements (if possible) and these statements are passed back to the source system via a process called query <a id="calibre_link-1566" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>folding. See <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, for more details on query folding. </p>
    <p class="fm-booktitle">As per the dataset planning architecture diagram, a layer of SQL views should serve as the source objects to datasets created with Power BI Desktop. By creating a SQL view for each dimension and fact table of the dataset, the data source owner or administrator is able to identify the views as dependencies of the source tables and is therefore less likely to implement changes that would impact the dataset without first consulting the BI team. </p>
    <p class="fm-booktitle">Additionally, the SQL views improve the availability of the dataset, as modifications to the source tables are much less likely to cause the refresh process to fail.</p>
    <p class="fm-booktitle">As a general rule, the BI team and IT organization should avoid the use of DAX for data transformation and shaping logic, such<a id="calibre_link-824" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> as DAX calculated tables and calculated columns. The primary reason for this is that it weakens the link between the dataset and the data source, as these expressions are processed entirely by the Power BI dataset after source queries have been executed. </p>
    <p class="fm-booktitle">Additionally, the distribution of transformation logic across multiple layers of the solution (SQL, M, DAX) causes datasets to become less flexible and manageable. Moreover, tables and columns created via DAX do not benefit from the same compression algorithms applied to standard tables and columns and thus can represent both a waste of resources as well as a performance penalty for queries accessing these columns.</p>
    <p class="fm-booktitle">In the event that required data transformation logic cannot be implemented directly in the data warehouse or its ETL or <strong class="screentext">Extract-Load-Transform</strong> (<strong class="screentext">ELT</strong>) process, a second alternative is to build this logic into the layer of SQL views supporting the Power BI dataset. For example, a SQL view<a id="calibre_link-1916" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> for the product dimension could be created that joins the Product, Product Subcategory, and Product Category dimension tables, and this view could be accessed by the Power BI dataset. </p>
    <p class="fm-booktitle">As a third option, M functions in the Power BI query expressions could be used to enhance or transform the data provided by the SQL views. See <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, for details on these functions and the Power BI data access layer generally.</p>
    <p class="fm-booktitle">Once data transformation planning is complete, the next step is to determine the mode of the dataset as explained in the next section.</p>
    <h2 id="calibre_link-48" class="calibre9">Import, DirectQuery, Live, and Composite datasets</h2>
    <p class="fm-booktitle">A subsequent but closely related step in dataset planning is choosing between the default import mode, DirectQuery mode, Live mode, or composite mode. In some projects, this is a simple decision as<a id="calibre_link-820" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> only one option is feasible or realistic given the known requirements while other projects entail significant analysis of the pros and cons of either design. </p>
    <p class="fm-booktitle">If a data source is considered slow or ill-equipped <a id="calibre_link-827" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to handle a high volume of analytical queries, then an import mode dataset is very likely the preferred option. Likewise, if near real-time visibility of a data source is an essential business requirement, then DirectQuery or Live mode are the only options.</p>
    <p class="fm-booktitle">The DirectQuery and Live modes <a id="calibre_link-825" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are very similar to one another. Both methods do not store data within the dataset itself but rather query source systems directly to retrieve data based upon user interaction with reports and dashboards. However, Live mode is only supported for Power BI datasets, Analysis Services (both multi-dimensional and tabular), and Dataverse.</p>
    <p class="fm-booktitle">When DirectQuery/Live is a feasible option or can be made a feasible option via minimal modifications, organizations may be attracted to the prospect of leveraging investments in high-performance database and data warehouse systems. However, the overhead costs and version control concerns of import mode can be reduced via Power BI features, such as the dataset refresh APIs or pipelines discussed in <em class="italic">Chapter 10</em>, <em class="italic">Managing Application Workspaces and Content</em>, and incremental data refresh. </p>
    <p class="fm-booktitle">The following list of questions can help guide an import versus DirectQuery/Live decision:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Is there a single data source for our dataset that Power BI supports as a DirectQuery/Live source?<p class="normal1">For example, each fact and dimension table needed by the dataset is stored in a single data warehouse database, such as Oracle, Teradata, SQL Server, or Azure SQL Database.</p>
        <p class="normal1">The following URL identifies the data sources supported for DirectQuery/Live with Power BI, including sources that are currently only in beta: <a href="http://bit.ly/2AcMp25" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2AcMp25</span></a>.</p>
      </li>
      <li class="calibre13">If DirectQuery/Live is an option per question 1, is this source capable of supporting the analytical query workload of Power BI?<p class="normal1">For example, although Azure Synapse (formerly Azure SQL Data Warehouse) technically supports DirectQuery, it’s not recommended to use Azure Synapse as a DirectQuery data source, given the limitations on the volume of concurrent queries supported and a lack of query plan caching. </p>
        <p class="normal1">In many other scenarios, the data source may not be optimized for analytical queries, such as with star schema designs and indexes that target common BI/reporting queries. Additionally, if the database is utilized for <strong class="screentext">Online Transaction Processing</strong> (<strong class="screentext">OLTP</strong>) workloads<a id="calibre_link-1169" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and/or other BI/analytical tools, then it’s necessary to evaluate any potential impact on these applications and the availability of resources.</p>
      </li>
      <li class="calibre13">Is an import mode dataset feasible, given the size of the dataset and any requirements for near real-time visibility of the data source?<p class="normal1">Currently, Power BI Premium supports import mode datasets up to 400 GB in size. However, the true limit for model sizes in Premium is limited to the total available amount of RAM within the capacity. In addition, PPU datasets are limited to 100 GB and Pro datasets are limited to 10 GB. Therefore, truly massive datasets must either use a DirectQuery data source or a Live connection to an Analysis Services model.</p>
        <p class="normal1">Additionally, Power BI Premium currently supports a maximum of 48 refreshes per day for import mode datasets. Therefore, if there’s a need to view data source data for the last several minutes or seconds, an import mode dataset is not feasible.</p>
      </li>
      <li class="calibre13">If the DirectQuery/Live source is capable of supporting a Power BI workload as per question 2, is the DirectQuery/Live connection more valuable than the additional performance and flexibility provided via the import mode?</li>
      <li class="calibre13">In other words, if an import mode dataset is feasible, as per question 3, then an organization should evaluate the trade-offs of the two modes. For example, since an import mode dataset is hosted in the Power BI service and in a compressed and columnar in-memory data store, it is likely to provide a performance advantage. This is particularly the case if the DirectQuery/Live source is hosted on-premises and thus queries from the Power BI cloud service must pass through the on-premises data gateway reviewed in <em class="italic">Chapter 11</em>, <em class="italic">Managing the On-Premises Data Gateway</em>.<p class="normal1">Additionally, any future data sources and most future data transformations need to be integrated into the DirectQuery/Live source. With an import mode dataset, the scheduled import process can include many data transformations and potentially other data sources without negatively impacting query performance.</p>
      </li>
    </ol>
    <p class="fm-booktitle">For organizations that have invested in powerful data source systems for BI workloads, there’s a strong motivation to leverage this system via DirectQuery/Live. In general, business intelligence teams and architects are averse to copying data into another data store and thus creating both another data movement and a source of reporting that must be supported. </p>
    <p class="fm-booktitle">Let’s now take a more detailed look at each of the possible dataset modes.</p>
    <h3 id="calibre_link-49" class="heading1">Import mode </h3>
    <p class="fm-booktitle">An import mode dataset can<a id="calibre_link-828" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> include multiple data sources, such as SQL Server, Oracle, and an Excel file. Since a snapshot of the source data is loaded into the Power BI cloud service, in addition to its in-memory columnar compressed structure, query performance is usually good for most scenarios. </p>
    <p class="fm-booktitle">Another important advantage of import mode datasets is the ability to implement data transformations without negatively impacting query performance. Unlike DirectQuery/Live datasets, the operations of data source SQL views and the M queries of import datasets are executed during the scheduled data refresh process. The <em class="italic">Query design per dataset mode</em> section of <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, discusses this issue in greater detail. </p>
    <p class="fm-booktitle">Given the performance advantage <a id="calibre_link-829" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of the in-memory mode relative to DirectQuery/Live, the ability to integrate multiple data sources, and the relatively few use cases where real-time visibility is required, most Power BI datasets are designed using import mode.</p>
    <p class="fm-booktitle">Next, we provide more detail about DirectQuery/Live mode.</p>
    <h3 id="calibre_link-50" class="heading1">DirectQuery/Live mode</h3>
    <p class="fm-booktitle">While DirectQuery and Live connections are different, as<a id="calibre_link-826" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> explained previously, they are similar to one another and share common traits, such as not storing data within the dataset itself but rather querying source systems directly to retrieve data based upon user interaction with reports and dashboards.</p>
    <p class="fm-booktitle">A DirectQuery/Live dataset is traditionally limited to a single data source and serves as merely a thin semantic layer or interface to simplify the report development and data exploration experience. DirectQuery/Live datasets translate report queries into compatible queries for the data source and leverage the data source for query processing, thus eliminating the need to store and refresh an additional copy of the source data.</p>
    <p class="fm-booktitle">A common use case of DirectQuery/Live is to provide near real-time visibility to changes in source data. For example, a manufacturer may want to monitor activities occurring on a manufacturing floor and potentially link this monitoring solution to notifications or alerts. </p>
    <p class="fm-booktitle">The performance of DirectQuery/Live datasets is strongly influenced by the design and resources available to the source system. Successful DirectQuery/Live datasets generally result from performance optimizations implemented in the source system such as via columnstore indexes, materialized views, and star schema designs that reduce the complexity of report queries.</p>
    <p class="fm-booktitle">With import and <a id="calibre_link-1917" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>DirectQuery/Live modes understood, we next cover the relatively new composite mode.</p>
    <h3 id="calibre_link-51" class="heading1">Composite mode</h3>
    <p class="fm-booktitle">Composite mode is perhaps the most <a id="calibre_link-821" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>significant enhancement to Power BI in recent years as it enables table-level control over a table’s storage mode (Import, DirectQuery, Dual). </p>
    <p class="fm-booktitle">Storage modes are covered in greater detail in <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>. When designed effectively, a composite model can deliver the performance benefits of import (in-memory) models but also provide scalability for large DirectQuery source systems. </p>
    <p class="fm-booktitle">A common design pattern with composite models is to set the storage mode of a massive fact table to DirectQuery but configure a smaller, targeted aggregation table in import mode and related dimension tables in dual mode. Power BI automatically utilizes the in-memory aggregation table to resolve incoming report queries if the given aggregation table(s) and its related Dual mode dimension tables contain the necessary data.</p>
    <p class="fm-booktitle">Even more recently, Microsoft has unveiled DirectQuery for Power BI datasets and Azure Analysis Services. With DirectQuery for Power BI datasets and Azure Analysis Services, datasets developed and published to Power BI can be chained or extended to produce new datasets that incorporate additional import or DirectQuery sources.</p>
    <p class="fm-booktitle">With data transformation and data model storage mode decisions made, the dataset planning process is complete. Let’s now take a look at how these planning processes and decisions apply to our sample project introduced earlier in this chapter. </p>
    <h1 id="calibre_link-52" class="heading">Sample project analysis</h1>
    <p class="fm-booktitle">As per the data refresh <a id="calibre_link-1651" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>questions from the project template (questions 7 and 8), the Power BI dataset only needs to be refreshed daily&mdash;there’s not a need for real-time visibility of the data source. From a dataset design perspective, this means that the default import mode is sufficient for this project in terms of latency or data freshness.</p>
    <p class="fm-booktitle">The project template from <em class="italic">Table 1.2</em> also advises that an Excel file containing the <strong class="screentext">Annual Sales Plan</strong> must be included in addition to the historical sales data in the SQL Server data warehouse. Therefore, unless the Annual Sales Plan data can be migrated to the same SQL Server database containing the Internet Sales and Reseller Sales data, an import mode dataset is the only option.</p>
    <p class="fm-booktitle">The data security requirements from the project template can be implemented via simple security roles and therefore do not materially impact the import or DirectQuery decision. DirectQuery datasets can support dynamic or user-based security models as well but, given restrictions on the <a id="calibre_link-1918" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>DAX functions that can be used in security roles for DirectQuery datasets, import mode datasets can more easily support complex security requirements. However, depending on the data source and the security applied to that source relative to the requirements of the project, organizations may leverage existing data source security through a DirectQuery dataset via a single sign-on with Kerberos delegation.</p>
    <p class="fm-booktitle">Finally, the BI team must also consider the scale of the dataset relative to size limitations with import mode datasets. As per the project template in <em class="italic">Table 1.2</em> (#6), 3-4 years of sales history needs to be included, and thus the dataset designer needs to determine the size of the Power BI dataset that would store that data. For example, if Power BI Premium capacity is not available, the dataset is limited to a max size of 1 GB. If Power BI Premium capacity is available, large datasets (for example, 10 GB+) potentially containing hundreds of millions of rows can be published to the Power BI service. </p>
    <p class="fm-booktitle">The decision for this project is to develop an import mode dataset and to keep the Excel file containing the Annual Sales Plan on a secure network location. The BI team will develop a layer of views to retrieve the required dimension and fact tables from the SQL Server database as well as connectivity to the Excel file. The business is responsible for maintaining the following Annual Sales Plan Excel file in its current schema, including any row updates and the insertion of new rows for future plan years. An excerpt from this file is shown in <em class="italic">Figure 1.18</em>: </p>
    <figure class="mediaobject"><img src="images/000049.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 1.18: Annual Sales Plan in Excel data table</p>
    <p class="fm-booktitle">By using the existing Excel file for the planned sales and margin data rather than integrating this data into the data warehouse, the project is able to start faster and maintain continuity for the business team responsible for this source. Similar to collaboration with all data source owners, the dataset designer could advise the business user or team responsible for the sales plan on the required structure and the rules for maintaining the data source to allow for integration<a id="calibre_link-1652" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> into Power BI. </p>
    <p class="fm-booktitle">For example, the name and directory of the file, as well as the column names of the Excel data table, cannot be changed without first communicating these requested revisions. Additionally, the values of the <code class="inlinecode">Sales Territory Region,</code> <code class="inlinecode">Product Subcategory</code>, and <code class="inlinecode">Calendar Yr-Mo</code> columns must remain aligned with those used in the data warehouse to support the required actual versus plan visualizations.</p>
    <p class="fm-booktitle">The sales plan includes multiple years and represents a granularity of the month, sales territory region, and product subcategories. </p>
    <p class="fm-booktitle">In other words, each row represents a unique combination of values from the <code class="inlinecode">Calendar Yr-Mo</code>, <code class="inlinecode">Sales Territory Region</code>, and <code class="inlinecode">Product Subcategory</code> columns. The <em class="italic">Bridge tables</em> section in <em class="italic">Chapter 4</em>, <em class="italic">Designing Import and DirectQuery Data Models</em>, describes how these three columns are used in integrating the Sales Plan data into the dataset containing <code class="inlinecode">Internet Sales</code> and <code class="inlinecode">Reseller Sales</code> data.</p>
    <p class="fm-booktitle">This completes the sample project analysis and concludes this chapter.</p>
    <h1 id="calibre_link-53" class="heading">Summary</h1>
    <p class="fm-booktitle">In this chapter, we’ve walked through the primary elements and considerations in planning a Power BI project. A standard and detailed planning process inclusive of the self-service capabilities needed or expected, project roles and responsibilities, and the design of the dataset can significantly reduce the time and cost to develop and maintain the solution. With a sound foundation of business requirements and technical analysis, a business intelligence team can confidently move forward into the development stage.</p>
    <p class="fm-booktitle">In the next chapter, the two data sources identified in this chapter (SQL Server and Excel) are accessed to begin the development of an import mode dataset. Source data is retrieved via Power BI’s M language queries to retrieve the set of required fact and dimension tables. Additionally, several data transformations and query techniques are applied to enhance the analytical value of the data and the usability of the dataset.</p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-1872">
<div id="calibre_link-1919" class="calibre2">
<div id="calibre_link-1920" class="calibre3"><div id="calibre_link-1921" class="calibre4">
    <h1 class="heading">2</h1>
    <h1 id="calibre_link-54" class="mainheading">Preparing Data Sources</h1>
    <p class="fm-booktitle">This chapter follows on from the dataset planning process described in <em class="italic">Chapter 1</em>, <em class="italic">Planning BI Projects</em>, by providing guidance on how to prepare for connecting to and transforming data using <strong class="screentext">Power Query</strong> (<strong class="screentext">M</strong>) queries. Power Query queries are written in a data transformation language commonly called “M” or can be generated via the Power Query Editor user interface. These queries access data sources and optionally apply data transformation logic to prep the tables for the Power BI data model.</p>
    <p class="fm-booktitle">As mentioned in <em class="italic">Chapter 1</em>, <em class="italic">Planning BI Projects</em>, to the greatest extent possible data transformation processes should be implemented within data sources such as <strong class="screentext">Azure SQL</strong> and <strong class="screentext">Azure Synapse SQL</strong> rather than via Power BI’s data transformation capabilities. The presence of significant data transformation logic (for example, joins, filters, and new columns) outside of an organization’s primary data warehouse or “source of truth” makes these solutions more difficult to understand and support. </p>
    <p class="fm-booktitle">Prior to actually connecting to and transforming data, it is critical to understand a number of important concepts, design principles, data sources, and Power BI Desktop settings as well as source system preparation.</p>
    <p class="fm-booktitle">In this chapter, we cover the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">Query folding</li>
      <li class="bulletlist">Query design per dataset mode</li>
      <li class="bulletlist">Data sources</li>
      <li class="bulletlist">SQL views</li>
    </ul>
    <p class="fm-booktitle">Before diving into detailed explanations about data sources, SQL views, and M, it is critical that the reader be familiar with the concept of query folding.</p>
    <h1 id="calibre_link-55" class="heading">Query folding</h1>
    <p class="fm-booktitle">Query folding is one of the most powerful and important capabilities of the M language as it translates M expressions <a id="calibre_link-1567" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>into equivalent query statements for the given source system to process. With query folding, Power Query (M) serves as a rich abstraction layer for defining both simple and complex data transformation processes while still leveraging the compute resources of the source system. When implementing any remaining logic or data transformations via M functions, a top priority of the dataset designer is to ensure that these operations are folded to the data source.</p>
    <p class="fm-booktitle">In the following M query shown in <em class="italic">Figure 2.1</em>, a <code class="inlinecode">Table.RemoveColumns()</code> M function is applied against the SQL view for the <strong class="screentext">Internet Sales</strong> fact table to exclude three columns that are not needed for the dataset:</p>
    <figure class="mediaobject"><img src="images/000082.png" alt="Graphical user interface, application  Description automatically generated" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.1: Power Query Editor: View Native Query</p>
    <p class="fm-booktitle">The additional step is translated to a SQL query that simply doesn’t select the three columns. The specific SQL statement passed to the source system can be accessed by right-clicking the final step in the <strong class="screentext">Query Settings</strong><strong class="screentext"> </strong>pane and selecting <strong class="screentext">View Native Query</strong> as shown in <em class="italic">Figure 2.1</em>. If the <strong class="screentext">View Native Query</strong> option is grayed out, this indicates that the specific step or transformation is executed with local resources.</p>
    <p class="fm-booktitle">Most data sources that can be queried, such as relational databases (e.g. SQL Server, Oracle) support <a id="calibre_link-1568" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>query folding. Data sources that lack any mechanism for understanding and resolving queries, such as Excel files and Azure blobs, naturally do not support query folding.. The M queries against these file sources use local M engine resources and thus the volume of data imported as well as the complexity of the query should be limited. Other sources, such as SharePoint lists, Active Directory, and Exchange, support some level of query folding, though significantly less than relational databases.</p>
    <p class="fm-booktitle">Queries may be completely folded to the source system or partially folded as explained in the next section.</p>
    <h2 id="calibre_link-56" class="calibre9">Partial query folding</h2>
    <p class="fm-booktitle">Dataset designers should check the final step of each query in the dataset to ensure that query folding is <a id="calibre_link-1571" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>occurring. If all required transformations or logic of <a id="calibre_link-1277" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>an M query cannot be folded into a single SQL statement, the dataset designer should attempt to re-design the query to obtain as much query folding as possible. </p>
    <p class="fm-booktitle">For example, all common or simple transformations can be implemented in the first few steps of the query so that <strong class="screentext">View Native Query</strong> is visible for as many steps as possible. The remaining logic can <a id="calibre_link-1817" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>be added as the last step of the query and this locally executed step or transformation is applied against the results of the SQL statement generated from the last step in which <strong class="screentext">View Native Query</strong> is active. </p>
    <p class="fm-booktitle">The <code class="inlinecode">Value.NativeQuery()</code> M function can be used to pass a SQL statement to the data source. However, any further transformations applied to the results of this function in the M query exclusively use local resources. Therefore, if implemented, the SQL statement passed to the data source should either include all required logic for the query or return a small result set that can be further processed with local resources. </p>
    <p class="fm-booktitle">With the concept <a id="calibre_link-1922" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of query folding and its importance <a id="calibre_link-1923" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>understood, we’ll next explore the different designs and considerations for queries depending upon the mode of the dataset.</p>
    <h1 id="calibre_link-57" class="heading">Query design per dataset mode</h1>
    <p class="fm-booktitle">As mentioned in <em class="italic">Chapter 1</em>, <em class="italic">Planning BI Projects</em>, to the greatest extent possible data transformation <a id="calibre_link-1564" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>processes should be implemented within <a id="calibre_link-812" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>data sources such as Azure SQL and Azure Synapse Analytics rather than via Power BI’s data transformation capabilities. </p>
    <p class="fm-booktitle">The presence of significant data transformation logic, such as joins, filters, and new columns, outside of an organization’s primary data warehouse or “source of truth” makes these solutions more difficult to understand and support. In addition, source systems are generally provisioned with more compute resources to handle data transformations and often include secondary data structures, like indexes, that speed up certain operations such as filters and joins.</p>
    <p class="fm-booktitle">If resource or time constraints make it necessary to apply data transformations in Power BI rather than source systems, Power Query (M) should generally be favored over DAX calculated columns and tables. Additionally, the Power Query (M) transformations should be documented and communicated such that this logic or process can later be migrated to a source system.</p>
    <p class="fm-booktitle">With respect to query design per dataset mode, many common M queries are the same for both <strong class="screentext">import </strong>and <strong class="screentext">DirectQuery</strong> datasets. However, depending on the dataset mode, there can be widely different implications for the source system resource load (memory, CPU, and disk) and the performance of the queries from Power BI. </p>
    <p class="fm-booktitle">Therefore, it’s essential that the dataset planning decisions regarding table storage mode (import, DirectQuery, Dual) are reflected in the M queries for the dataset. For example, a query that gets imported into memory only once a night is a much better candidate to implement data transformations than a query that is folded back to the source system during report interactions via DirectQuery. </p>
    <p class="fm-booktitle">The M queries supporting a Power BI dataset import mode should exclude, or possibly split, columns with many unique values, such as a <code class="inlinecode">transaction number</code> column, as these columns consume relatively high levels of memory. A standard design technique for import mode models is to exclude derived fact table columns with relatively more unique values when these values can be computed via simple DAX measure expressions based on columns of the same table with fewer unique values.</p>
    <p class="fm-booktitle">In the following example, the <code class="inlinecode">SUMX()</code> DAX function is used to compute the <code class="inlinecode">Sales Amount</code> measure based <a id="calibre_link-1924" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>on the <code class="inlinecode">Order Quantity</code> and <code class="inlinecode">Unit Price</code> columns <a id="calibre_link-1925" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of the <code class="inlinecode">Internet Sales</code> fact table, thus avoiding the need to import the <code class="inlinecode">Sales Amount</code> column:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Sales Amount (Import) = 
SUMX('Internet Sales','Internet Sales'[Order Quantity]*'Internet Sales'[Unit Price]) 
Internet Sales Amount (DirectQuery) = SUM('Internet Sales'[Sales Amount]) 
</code></pre>
    <p class="fm-booktitle">As per the second measure, the <code class="inlinecode">Sales Amount</code> column would be included in a DirectQuery data model and the DAX measure for the sales amount would exclusively utilize this column to generate a more efficient SQL query for the data source.</p>
    <p class="fm-booktitle">The import mode model is able to efficiently compute similar <code class="inlinecode">SUMX()</code> expressions at scale with basic arithmetic operators (+, -, *, /) as these operations are supported by the multithreaded storage engine of the <strong class="screentext">xVelocity</strong> in-memory analytics engine. For greater detail on DAX measures for import and DirectQuery datasets, see <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>.</p>
    <p class="fm-booktitle">The M queries supporting a DirectQuery dataset should generally contain minimal to no transformation logic as the complexity of the resulting SQL statement may negatively impact the performance of Power BI report queries, as well as increasing the resource usage of the data source. This is especially important for the fact tables and any large dimension tables of the DirectQuery dataset. Given the central role of the data source for query performance and scalability of DirectQuery solutions, the Power BI dataset designer should closely collaborate with the data source owner or subject matter expert, such as a database administrator, to make the best use of available source system resources.</p>
    <p class="fm-booktitle">With composite models, individual tables are set with distinct storage modes (import, DirectQuery, Dual) in order to achieve a balance of the benefits of both import and DirectQuery modes. The most common use case for composite models involves very large fact tables with hundreds of millions or billions of rows. In a composite model, this large source table can be set as DirectQuery and a much smaller import mode aggregation table can be added to the model to resolve the most common or important report queries via compressed memory. Power BI composite models with aggregation tables can dynamically determine if report queries can be resolved by aggregation table(s), which are typically import mode tables, or if it’s necessary to issue queries to the DirectQuery source tables. </p>
    <p class="fm-booktitle">As noted in the <em class="italic">To get the most out of this book</em><em class="italic"> </em>section of the <em class="italic">Preface</em>, an AdventureWorks data warehouse sample database (<strong class="screentext">AdventureWorksDW2019</strong>) hosted on a local instance of the SQL Server 2019 database engine is the primary data source for the examples in this book. The PBIX files included in the code bundle reference <strong class="screentext">localhost\MSSQLSERVERDEV</strong> as the name of the database server and <strong class="screentext">AdventureWorksDW2019 </strong>as the name of the database. </p>
    <p class="fm-booktitle">Therefore, any attempt to refresh the queries within these PBIX files or create new queries against this data source results in errors as the user doesn’t have access to this source unless the same instance name and database name are used within the reader’s own environment.</p>
    <p class="fm-booktitle">Additionally, certain objects of the <strong class="screentext">AdventureWorksDW2019 </strong>database used in this book, such as views, are <a id="calibre_link-1565" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>not included in the original downloadable <a id="calibre_link-813" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>sample database from Microsoft. However, a backup of the database used for this book was created that includes the custom schema and views. This file is available in the code samples for this chapter. This file can be downloaded, unzipped, and the database restored to a local copy or other SQL Server and thus only requires that the query parameters be changed to point to the correct server and database.</p>
    <p class="fm-booktitle">Let’s now take a look at design considerations for import mode dataset queries.</p>
    <h2 id="calibre_link-58" class="calibre9">Import mode dataset queries</h2>
    <p class="fm-booktitle">All M queries of an import mode dataset, or import mode tables in a composite dataset, are executed <a id="calibre_link-1039" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>once per dataset refresh. Therefore, if sufficient resources are available during the dataset refresh process, the M queries can contain more complex and resource-intensive operations without negatively impacting report query performance. </p>
    <p class="fm-booktitle">However, as mentioned in the previous section, as a Power BI dataset matures and particularly when a data warehouse system is available, it’s considered a best practice to migrate M data transformation logic to the source view or table objects of the data warehouse. If migration of the data transformation logic to a data warehouse source system is not an option, a Power BI dataflow defined in the Power BI service might be a more robust alternative to a complex M query expression embedded within a dataset. This is particularly the case if the dataflow can utilize premium capacity and if other datasets may need to leverage the same data transformation workflow.</p>
    <p class="fm-booktitle">In this project example <a id="calibre_link-1569" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>with an on-premises SQL Server database, the M queries can utilize the database server’s resources during each refresh via a <strong class="screentext">query folding</strong> process. Query folding <a id="calibre_link-1926" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>simply means that the M query is translated into the native syntax of the source system and executed locally by the source system. </p>
    <p class="fm-booktitle">In the event that certain M expressions cannot be translated into an equivalent SQL statement for the given source, these expressions are instead evaluated by the <strong class="screentext">data gateway</strong>. A data gateway is simply software installed on an on-premises server that serves as <a id="calibre_link-763" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>a bridge between the Power BI service and on-premises data sources. Data gateways are explored in depth in <em class="italic">Chapter 11</em>, <em class="italic">Managing the On-Premises Data Gateway</em>.</p>
    <p class="fm-booktitle">If the source database was in the cloud and not on-premises or within an <strong class="screentext">Infrastructure-as-a-Service</strong> (<strong class="screentext">IaaS</strong>) virtual machine, a gateway would not be required for the refresh, and resources in <a id="calibre_link-1050" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI, such as Power BI Premium capacity <a id="calibre_link-1285" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>hardware, would be used to execute any M expressions <a id="calibre_link-1730" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>that can’t query fold back to a source. Briefly, IaaS provides on-demand access to virtual and physical servers, storage, and networking. IaaS is distinct from <strong class="screentext">Platform as a Service</strong> (<strong class="screentext">PaaS</strong>) and <strong class="screentext">Software as a Service</strong> (<strong class="screentext">SaaS</strong>), which provide on-demand access to ready-to-use services and software.</p>
    <p class="fm-booktitle">For import mode datasets, M queries can be partially folded such that a source database is used to execute only part of the required logic. For example, an M query may contain both simple transformation steps, such as filtering out rows, as well as more complex logic that references a custom M function. M functions are just like functions in other programming languages, blocks of code that perform specific tasks. </p>
    <p class="fm-booktitle">In the case of partial folding, a SQL statement is generated for the initial steps of the query, and the results of this SQL query are then used by the data gateway to process the remaining logic. All steps (variables) within an M query following a step that cannot be folded are also not folded. Likewise, any M step following a <code class="inlinecode">Value.NativeQuery()</code> function that passes a SQL statement to a source system is also not folded. See the <em class="italic">Query folding</em> section earlier in this chapter for more details.</p>
    <p class="fm-booktitle">Next, we’ll consider <a id="calibre_link-1040" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the designs of DirectQuery dataset queries. </p>
    <h2 id="calibre_link-59" class="calibre9">DirectQuery dataset queries</h2>
    <p class="fm-booktitle">Similar to import mode dataset queries, there are also specific design considerations when dealing with DirectQuery dataset queries. For DirectQuery datasets or DirectQuery tables <a id="calibre_link-910" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>in a composite dataset, every M query is folded to exclusively utilize the resources of the data source. It should be noted that relatively few data source systems support DirectQuery. In addition, certain M functions and query logic that lack an equivalent translation for the given data source are not supported. In these scenarios, the dataset designer can develop alternative M queries that produce the same target data structure and are supported by the source system or implement the necessary logic within the source system, such as adding a layer of SQL views, to support the desired dataset. </p>
    <p class="fm-booktitle">An additional and fundamental limitation to the scope of M queries for DirectQuery datasets is the impact on query performance and user experience. Since the native statements representing M queries must be executed by the source system during report viewing sessions, common transformations such as converting data types and sorting tables can cause significant performance degradation.</p>
    <p class="fm-booktitle">Additionally, a high volume of sub-optimal native queries passed from Power BI reports can quickly drive up the resource usage of the source system. Therefore, although it’s often technically possible to implement similar data transformation logic as import mode datasets using the native system and DirectQuery, the performance and resource implications of these transformations frequently prove unacceptable.</p>
    <p class="fm-booktitle">Dataset designers of DirectQuery datasets should document the native statements generated by their M queries. As shown in the <em class="italic">Query folding</em> section earlier in this chapter, these queries can be accessed from the <strong class="screentext">View Native Query</strong> command within the <strong class="screentext">Applied Steps</strong> pane of the Power Query Editor in Power BI Desktop. Sharing and reviewing these queries with the data source owner or a subject matter expert on the data source can often lead to new ideas to improve performance or data quality. </p>
    <p class="fm-booktitle">One powerful technique to optimize DirectQuery performance is via the dynamic Power Query (M) parameters feature. With dynamic Power Query parameters, the filter selections of the report user for a common dimension such as department or fiscal year are passed into a <a id="calibre_link-911" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>performance-optimized query such as the <code class="inlinecode">Where</code> clause of a SQL statement.</p>
    <p class="fm-booktitle">Let’s take a closer look at how DirectQuery operates during report execution.</p>
    <h3 id="calibre_link-60" class="heading1">DirectQuery report execution</h3>
    <p class="fm-booktitle">Because DirectQuery results in queries against the source system for each report interaction <a id="calibre_link-908" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>by users, it is important to fully understand the performance and operations of these queries.</p>
    <p class="fm-booktitle">In the database trace from SQL Server Profiler shown in <em class="italic">Figure 2.2</em>, a DirectQuery dataset has translated a Power BI report query into a SQL statement, which joins the SQL statements associated with the <code class="inlinecode">Reseller Sales</code>, <code class="inlinecode">Reseller</code>, and <code class="inlinecode">Date</code> M queries:</p>
    <figure class="mediaobject"><img src="images/000071.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.2: SQL Server Profiler trace &ndash; Power BI DirectQuery report visualization</p>
    <p class="fm-booktitle">For DirectQuery datasets, it’s important to understand both the individual queries associated with each table of the model as well as how the data source is utilizing these queries in resolving report queries. In this example, the three table queries are used as derived tables to form the <code class="inlinecode">FROM</code> clause of the outer SQL statement. Additionally, though not included in the trace image, the <code class="inlinecode">WHERE</code> clause reflects a slicer (filter) selection for a specific calendar year in a Power BI report.</p>
    <p class="fm-booktitle">We’ll now move on to query design considerations for composite datasets.</p>
    <h2 id="calibre_link-61" class="calibre9">Composite datasets</h2>
    <p class="fm-booktitle">As described in <em class="italic">Chapter 1</em>, <em class="italic">Planning BI Projects</em>, composite datasets allow mixing DirectQuery mode tables from different sources and/or DirectQuery mode tables and import mode <a id="calibre_link-652" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>tables in a single dataset, such as having the reseller sales table in DirectQuery mode but the internet sales table in import (in-memory) mode.</p>
    <p class="fm-booktitle">With the release of the <strong class="screentext">DirectQuery for PBI datasets and AS</strong> feature, multiple connections to Power BI datasets can be combined within a composite data model or a Power BI dataset can be modified through a process called <strong class="screentext">chaining</strong>. Chaining involves a Power BI dataset that is <a id="calibre_link-622" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>extended through the creation of DAX columns and measures or by combining the dataset with import mode or other DirectQuery-mode tables.</p>
    <p class="fm-booktitle">The use of composite datasets should be considered carefully. Generally, whenever possible, it is best to design import mode datasets as they provide the best performance and the greatest amount of flexibility in terms of dataset design. Composite datasets can be useful, however, with respect to extremely large fact tables or a requirement for near real-time reporting.</p>
    <p class="fm-booktitle">When using composite models, the inherent limitations of DirectQuery are still applicable except that many of these limitations now apply to individual tables instead of the entire dataset. For example, a calculated column in a DirectQuery table can still only refer to other columns in the same table. Other DirectQuery limitations apply to the entire dataset if a <a id="calibre_link-1572" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>single table within the dataset has a storage mode of DirectQuery, such as the unavailability of the <strong class="screentext">Quick Insights feature</strong>. The Quick Insights feature is covered in <em class="italic">Chapter 8</em>, <em class="italic">Applying Advanced Analytics</em>.</p>
    <p class="fm-booktitle">With composite models, the concerns around data security and data privacy are extended to actually using a report versus solely during data refresh. Because the dataset contains multiple DirectQuery data sources or DirectQuery and import mode data sources, the underlying queries between tables can comingle the data from different sources. For example, sensitive information stored in a spreadsheet could be included in a query sent to a DirectQuery SQL Server relational database. Corporate security and privacy restrictions may not allow such interaction. </p>
    <p class="fm-booktitle">Dataset designers should be particularly cognizant of the encryption levels of data sources in composite models. It is unwise to allow information retrieved over an encrypted data source connection to be included in information sent to a data source accessed over an unencrypted connection.</p>
    <p class="fm-booktitle">There are also performance considerations when using composite datasets that are the same or similar to the performance concerns with pure DirectQuery datasets. However, composite datasets add an additional layer of performance considerations over simple DirectQuery datasets. This is because a single visual may send queries to multiple different data sources. </p>
    <p class="fm-booktitle">Consider that results from one query may be sent across to a second source via a subsequent query. This type of scenario can result in a DirectQuery SQL query containing a large <a id="calibre_link-653" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>number of literal values that becomes inefficient to include in a <code class="inlinecode">WHERE</code> clause or results in multiple SQL queries involving one SQL query per group value. </p>
    <p class="fm-booktitle">Therefore, dataset designers must pay particularly close attention to the <strong class="screentext">cardinality </strong>(number of unique values) of columns in such scenarios. Relatively low cardinality of a few thousand unique values <a id="calibre_link-620" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>should not impact performance but as cardinality increases, performance can be reduced or result in failure to execute the queries successfully.</p>
    <p class="fm-booktitle">In addition to the query design considerations for composite models covered thus far, composite models introduce additional table storage modes.</p>
    <h3 id="calibre_link-62" class="heading1">Table storage modes</h3>
    <p class="fm-booktitle">Composite models enable dataset creators to configure multiple storage modes across the different tables of a <a id="calibre_link-654" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>model thus balancing the benefits <a id="calibre_link-1801" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of both import (cached) data and DirectQuery. Typically, composite models also utilize hidden aggregation tables such that all common summary-level queries are resolved by either a relatively small use of memory or an optimized DirectQuery object but detailed queries are handled via a large-scale DirectQuery source system. Once a composite model is created, the Power BI dataset dynamically determines whether incoming report queries are resolved via imported in-memory cache or the source system via DirectQuery.</p>
    <p class="fm-booktitle">With composite models, there are four storage modes available for tables within the dataset. Of these four, we have already discussed import and DirectQuery modes. Two additional modes are added for non-calculated tables, <strong class="screentext">Dual</strong> and <strong class="screentext">Hybrid</strong>.</p>
    <p class="fm-booktitle">Dual mode tables are DirectQuery tables where a copy of the table is also kept in memory in order to support fast <a id="calibre_link-939" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>access and query performance as if the table were in import-only mode. Thus, Dual mode allows queries involving import mode-only tables to perform quickly when also requiring queries to the Dual mode table but still allow the table to participate in DirectQuery-only queries as well. </p>
    <p class="fm-booktitle">Consider a data model <a id="calibre_link-1927" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>that involves fact tables using DirectQuery <a id="calibre_link-1928" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and imported dimension tables. In this scenario, the dimension tables should be set to Dual mode in order to support DirectQuery queries as well as fast performance with import mode queries.</p>
    <p class="fm-booktitle">Hybrid tables are tables that contain one or more import mode partitions as well as a single DirectQuery partition. Note that table partitions are simply a way to divide portions of data within <a id="calibre_link-1036" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the table. For example, incremental refresh adds additional table partitions so that the data within each incremental refresh partition can be processed separately from the initial load of the data. </p>
    <p class="fm-booktitle">This means that a single table can contain a large base load of data as well as data resulting from incremental refreshes. This data can be queried quickly because the data exists in memory within the dataset. However, the data within the table also supports near real-time visibility via its DirectQuery partition. Thus, queries against the table retrieve data from the one or more import mode partitions as well as the most recent data that has not been imported via DirectQuery.</p>
    <p class="fm-booktitle">Hybrid tables are a relatively new development but present an attractive design alternative where the dataset remains largely import but allows for near real-time data visibility as well. Hybrid tables should not be confused with Dual mode tables. Dual mode simply allows data model tables to be available for report visuals that may query both import and DirectQuery tables within the data model while Hybrid tables allow a single table to retrieve data from import mode partitions as well as via DirectQuery. </p>
    <h1 id="calibre_link-63" class="heading">Data sources</h1>
    <p class="fm-booktitle">Data source connectivity is one <a id="calibre_link-830" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of the strengths of Power BI, due to the vast list of standard data <a id="calibre_link-1227" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>source connectors included in Power BI Desktop. In <a id="calibre_link-1226" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>addition, numerous industry standards <a id="calibre_link-1163" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>such as <strong class="screentext">Open Data Protocol</strong> (<strong class="screentext">OData</strong>), <strong class="screentext">Open Database Connectivity </strong>(<strong class="screentext">ODBC</strong>), and <strong class="screentext">Object Linking and Embedding</strong> <strong class="screentext">Database</strong> (<strong class="screentext">OLE DB</strong>) are supported. The breadth of data connectivity options is further bolstered by the ability for developers to create custom Power BI data connectors for a specific application, service, or data source. </p>
    <p class="fm-booktitle">Although a Power BI dataset can connect to multiple sources ranging from Azure Synapse Analytics to a text file, solution architects and developers should strive to build solutions on a single, well-supported source such as a data warehouse database system that already contains <a id="calibre_link-1929" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the necessary data integrations as well as reflects data integrity constraints and quality processes. Power BI datasets that connect to several distinct sources, and particularly to less stable sources like files and folders, are much more prone to data quality and refresh errors and are more difficult to support.</p>
    <p class="fm-booktitle">Power BI’s data connectors are consistently extended and improved with each monthly release of Power BI Desktop. New data sources are commonly added as a<strong class="screentext"> preview </strong>release feature (beta) and previous Preview connectors are moved from Preview to <strong class="screentext">general availability</strong>. Generally available connectors are those that are considered fully functional and stable.</p>
    <p class="fm-booktitle">In the following example from the November 2021 release of Power BI Desktop,<em class="italic"> Figure 2.3</em> shows that four new connectors have been released to <strong class="screentext">Preview</strong> while three other connectors that are already generally available have been updated: </p>
    <figure class="mediaobject"><img src="images/000103.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.3: Preview and generally available data connectors in Power BI Desktop</p>
    <p class="fm-booktitle">Preview connectors should only be used for testing purposes, as differences between the preview release and the subsequent generally available connector may cause queries dependent on the preview version to fail.</p>
    <p class="fm-booktitle">Regardless of the data <a id="calibre_link-831" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>connector used, all data connectors share certain common elements within Power BI Desktop, including such things as authentication caching, data source settings, and privacy levels as covered in the following sections.</p>
    <h2 id="calibre_link-64" class="calibre9">Authentication</h2>
    <p class="fm-booktitle">All data sources require some type of authentication, even if the authentication is simply <strong class="screentext">anonymous </strong>such as <a id="calibre_link-832" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>publicly available web pages. Power BI Desktop saves a data source credential, or sign-in identity, for each data source connection used. These credentials and settings are not stored in the PBIX file but rather on the local computer specific to the given user.</p>
    <p class="fm-booktitle">Solution architects and developers should carefully consider which identity or principle is used to authenticate to the data source, which permissions have been granted to this account, and how this identity or credential is maintained. The main outcome of an authentication policy or process is to ensure that solutions utilize a system identity available to the IT/BI team and do not have a dependency on an individual user’s account permissions. </p>
    <p class="fm-booktitle">For example, if SQL Server or Azure SQL Database is the source system, a BI team may create a SQL login and user with the minimal permissions necessary to read the objects within the scope of the solution. The password for this SQL login could be stored in Azure Key Vault and revised every 3-6 months by the IT/BI team.</p>
    <p class="fm-booktitle">An authentication dialog specific to the data source is rendered if the user hasn’t accessed the data source before or if the user has removed existing permissions to the data source in Power BI Desktop’s <strong class="screentext">Data source settings</strong> menu. In the following example shown in <em class="italic">Figure 2.4</em>, a <code class="inlinecode">Sql.Database()</code> M query function references the <code class="inlinecode">AdventureWorksDW2019</code> SQL Server database on the <code class="inlinecode">localhost\MSSQLSERVERDEV</code> SQL Server instance.</p>
    <p class="fm-booktitle">In this scenario, the user has not previously accessed this data source (or has cleared existing source permissions), and thus executing this query prompts the user to configure the authentication to this source as shown in <em class="italic">Figure 2.4</em>:</p>
    <figure class="mediaobject"><img src="images/000093.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.4: Edit authentication credentials in Power BI Desktop</p>
    <p class="fm-booktitle">Most relational database sources have similar authentication options. For SQL Server, the user can choose <a id="calibre_link-833" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>between the default <strong class="screentext">Windows</strong> authentication (that is, <strong class="screentext">Use my current credentials</strong>), <strong class="screentext">Database</strong> authentication if the database is in <strong class="screentext">Mixed Mode</strong> (SQL user or Windows authentication), or <strong class="screentext">Microsoft account</strong> if SQL Server is running in Microsoft Azure. </p>
    <p class="fm-booktitle">Additionally, the credentials can be saved exclusively to the specific database or be reused for other databases on the same server as shown in <em class="italic">Figure 2.4</em> in the dropdown under <strong class="screentext">Select which level to apply these settings to</strong>.</p>
    <p class="fm-booktitle">Once authentication is configured, the authentication settings for a data source can be accessed via the <strong class="screentext">Data source settings</strong> menu within Power BI Desktop.</p>
    <h2 id="calibre_link-65" class="calibre9">Data source settings</h2>
    <p class="fm-booktitle">The <strong class="screentext">Data source settings</strong> menu provides access to the authentication and privacy levels configured for each <a id="calibre_link-838" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>data source within the current file and the saved permissions available to all of the user’s Power BI Desktop files.</p>
    <p class="fm-booktitle">This menu can be accessed under the <strong class="screentext">Transform data</strong> dropdown on the <strong class="screentext">Home </strong>tab of Power BI Desktop’s <strong class="screentext">Report view</strong> or from the <strong class="screentext">Home</strong> tab of the <strong class="screentext">Power Query Editor</strong>, as shown in <em class="italic">Figure 2.5</em>:</p>
    <figure class="mediaobject"><img src="images/000124.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.5: Data source settings menu in Power Query Editor</p>
    <p class="fm-booktitle">In this example, the user chose to save the Windows authentication to the SQL Server instance,<strong class="screentext"> </strong><strong class="screentext">localhost\mssqlserverdev</strong>, rather than the specific database (<strong class="screentext">AdventureWorksDW2019</strong>) on the server. The <strong class="screentext">Edit Permissions...</strong> command button provides the ability to revise the authentication, such as from <strong class="screentext">Windows</strong> to <strong class="screentext">Database</strong>, or to enter a new <strong class="screentext">User name</strong> and <strong class="screentext">Password</strong>.</p>
    <p class="fm-booktitle">The <strong class="screentext">Edit…</strong> button of the <strong class="screentext">Edit Permissions</strong> dialog, highlighted in <em class="italic">Figure 2.6</em>, prompts the same SQL Server <a id="calibre_link-839" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>credential menu used when originally configuring the method of authentication to the data source:</p>
    <figure class="mediaobject"><img src="images/000113.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.6: Edit credentials accessed via Edit Permissions</p>
    <p class="fm-booktitle">Many organizations set policies requiring users to regularly revise their usernames or passwords for certain data sources. Once these credentials are updated, the user should utilize the <strong class="screentext">Edit Permissions</strong> menu to ensure that the updated credentials are used for M queries against the data source. Depending on the security policy of the data source, repeated failures <a id="calibre_link-1930" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to authenticate due to outdated credentials can cause the user’s account to be temporarily locked out of the data source. </p>
    <p class="fm-booktitle">Having mentioned that the <strong class="screentext">Data source settings</strong> menu also provides access to the privacy levels of data sources, we will explain these next.</p>
    <h2 id="calibre_link-66" class="calibre9">Privacy levels</h2>
    <p class="fm-booktitle">In addition to the authentication method and user credentials, Power BI also stores a privacy level for each data source. Privacy levels define the isolation level of data sources and thus <a id="calibre_link-836" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>restrict the integration of data sources in M queries. For example, in the absence of privacy levels, an M query that merges a CSV file with a publicly available online database could result in the data from the CSV file being passed to the online database to execute the operation. </p>
    <p class="fm-booktitle">Although such behavior is preferable from a query performance and resource utilization standpoint, the CSV file may contain sensitive information that should never leave the organization or even an individual user’s machine. Applying privacy levels, such as private for the CSV file and public for the online database, isolates the two sources during query execution, thus preventing unauthorized access to sensitive data.</p>
    <p class="fm-booktitle">The privacy level of a data source can be accessed from the same <strong class="screentext">Edit Permissions</strong> dialog available in the <strong class="screentext">Data source settings</strong> menu as shown in <em class="italic">Figure 2.7:</em> </p>
    <figure class="mediaobject"><img src="images/000146.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.7: Privacy Level options per data source</p>
    <p class="fm-booktitle">The default <strong class="screentext">Privacy Level</strong> for data sources is <strong class="screentext">None</strong>. Therefore, dataset designers should revise privacy levels <a id="calibre_link-837" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>when first configuring data sources in Power BI Desktop based on the security policies for the given sources.</p>
    <p class="fm-booktitle">Four privacy levels are available: </p>
    <ul class="calibre10">
      <li class="bulletlist"><strong class="screentext">None</strong>: The privacy level applied is inherited from a separate data source, or not applied if the separate parent source has not been configured. For example, the privacy level for an Excel workbook stored on a network directory could be set to <strong class="screentext">None</strong>, yet the isolation level of <strong class="screentext">Private</strong> would be enforced if a data source for the root directory of the file is set to <strong class="screentext">Private</strong>. </li>
      <li class="bulletlist"><strong class="screentext">Public</strong>: A public data source is not isolated from other public sources, but data transfer from organizational and private data sources to public data sources is prevented. Public source data can be transferred to an organizational data source but not to a private data source. </li>
      <li class="bulletlist"><strong class="screentext">Organizational</strong>: An organizational data source is isolated from all public data sources but is visible to other organizational data sources. For example, if a CSV file is marked as <strong class="screentext">Organizational</strong>, then a query that integrates this source with an organizational SQL Server database can transfer this data to the database server to execute the query. </li>
      <li class="bulletlist"><strong class="screentext">Private</strong>: A <strong class="screentext">Private</strong> data source is completely isolated from all other data sources. Data from the <strong class="screentext">Private</strong> data source is not transferred to any other data sources, and data from public sources is not transferred to the <strong class="screentext">Private</strong> source.</li>
    </ul>
    <p class="fm-booktitle">In this project, the Excel workbook containing the <strong class="screentext">Annual Sales Plan</strong> is not merged with any queries accessing <a id="calibre_link-1931" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the SQL Server data warehouse and thus the privacy levels do not impact any queries. However, as with all other data security issues, such as <strong class="screentext">Row-Level Security (RLS)</strong> roles, the dataset designer should be mindful of privacy <a id="calibre_link-1645" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>levels and apply the appropriate setting per data source.</p>
    <p class="fm-booktitle">Restrictive privacy levels may prevent query folding from occurring and thus significantly reduce performance and reliability. For example, if an Excel workbook is isolated from a SQL Server data source due to a <strong class="screentext">Private</strong> privacy level, then the local resources available to the M engine are used to execute this operation rather than the SQL Server database engine. If the source data retrieved from SQL Server is large enough, the resource requirements to load this data and then execute this operation locally could cause the query to fail.</p>
    <p class="fm-booktitle">With the essentials of data sources within Power BI understood, we’ll next cover perhaps one of the most important data sources for Power BI, the Power BI service itself.</p>
    <h2 id="calibre_link-67" class="calibre9">Power BI as a data source</h2>
    <p class="fm-booktitle">Dozens of cloud services are available to Power BI as data sources, such as Google Analytics and Dynamics 365. Most importantly for this project, the Power BI service is a fully supported data source enabling report development <a id="calibre_link-1299" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>in Power BI Desktop against published datasets. As shown in <em class="italic">Figure 2.8</em>, the datasets contained in Power BI workspaces in which the user is a member are exposed as data sources: </p>
    <figure class="mediaobject"> <img src="images/000135.png" alt="Graphical user interface, application  Description automatically generated" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.8: Power BI service data connector in Power BI Desktop</p>
    <p class="fm-booktitle">Connecting to a dataset published to Power BI establishes a live connection for the given report, just like connections to Analysis Services. With live connections, all data retrieval and modeling capabilities are disabled and the queries associated with report visualizations are executed against the source dataset.</p>
    <p class="fm-booktitle">In certain scenarios it’s necessary or useful to integrate a portion of one Power BI dataset into a different dataset. In these cases, the XMLA endpoint can be used to connect to a Power BI dataset as though it’s an Analysis Services database and pass a DAX query to support table(s) in the source dataset. </p>
    <p class="fm-booktitle">Additionally, the Power BI composite models feature now supports the ability to connect to multiple Power BI datasets and/or Analysis Services models from the same Power BI dataset. For example, if inventory and sales data is stored in separate PBI datasets and <a id="calibre_link-1932" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the requirement is to display inventory and sales visuals in the same report, connections to both datasets can be defined in Power BI Desktop and converted from Live connections to DirectQuery data sources. As shown in <em class="italic">Figure 2.8</em>, within the Power BI service, datasets can be endorsed as either <strong class="screentext">Certified</strong> or <strong class="screentext">Promoted</strong>. </p>
    <p class="fm-booktitle">Endorsed datasets are presented at the top of the dialog with <strong class="screentext">Certified</strong> datasets displayed first and then <strong class="screentext">Promoted</strong> datasets. Organizations should adopt a process of certifying datasets in order to distinguish enterprise data assets from other potentially less trustworthy data. Endorsing or featuring content is further discussed in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>.</p>
    <p class="fm-booktitle">Leveraging published datasets as the sources for reports provides natural isolation between the dataset design and report development processes. For example, a dataset designer <a id="calibre_link-1300" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can implement changes to a local Power BI Desktop file, such as the creation of new DAX measures, and re-publish the dataset to make these measures available to report authors. Additionally, such connections provide report authors with visibility of the latest successful refresh of the dataset if the dataset is configured in import mode.</p>
    <p class="fm-booktitle">Before moving on from data sources, we’ll next cover some important Power BI Desktop options that should be configured prior to starting query development.</p>
    <h2 id="calibre_link-68" class="calibre9">Power BI Desktop options</h2>
    <p class="fm-booktitle">Dataset designers should be aware of the global and current file settings available in Power BI Desktop. Among other options, these settings include the implementation of the privacy levels <a id="calibre_link-834" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>described earlier, the DAX functions available to DirectQuery datasets, auto-recovery, preview features, and whether M queries are executed serially or in parallel.</p>
    <p class="fm-booktitle">Power BI Desktop options can be accessed from the <strong class="screentext">File</strong> menu by doing the following:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Choose <strong class="screentext">File</strong> in the ribbon</li>
      <li class="calibre13">Choose <strong class="screentext">Options and settings</strong> </li>
      <li class="calibre13">Choose <strong class="screentext">Options</strong> </li>
    </ol>
    <p class="fm-booktitle">These steps open the <strong class="screentext">Options</strong> dialog in Power BI Desktop. Choosing <strong class="screentext">Privacy</strong> from the left navigation of the <strong class="screentext">Options</strong> dialog presents the <strong class="screentext">Privacy Levels</strong> options as shown in <em class="italic">Figure 2.9</em>: </p>
    <figure class="mediaobject"><img src="images/000168.png" alt="Graphical user interface, text, application, email  Description automatically generated" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.9: Power BI Desktop options &ndash; GLOBAL| Privacy</p>
    <p class="fm-booktitle">By setting the global <strong class="screentext">Privacy Levels</strong> option to <strong class="screentext">Always combine data according to your Privacy Level settings for each source</strong>, the current file privacy setting options are disabled. For all development and project activities, it’s recommended to apply the privacy levels established per data source rather than each PBIX file’s privacy settings (the second option) or to <strong class="screentext">Always ignore Privacy Level settings</strong>.</p>
    <p class="fm-booktitle">It’s outside the scope of this chapter to provide comprehensive details of every Power BI Desktop option, but <a id="calibre_link-835" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the following two sections recommend settings that are relevant to dataset design. We start with global options (settings applied to all Power BI files).</p>
    <h3 id="calibre_link-69" class="heading1">Global options</h3>
    <p class="fm-booktitle">Global options only <a id="calibre_link-1393" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>need to be set once and concern <a id="calibre_link-1030" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>fundamental settings, including data source privacy levels and security:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">For <strong class="screentext">Security</strong>, under <strong class="screentext">Native Database Queries</strong>, check the box for <strong class="screentext">Require user approval for new native database queries</strong>. Under <strong class="screentext">ArcGIS for Power BI</strong>, check the box for <strong class="screentext">Use ArcGIS Maps for Power BI</strong>.</li>
      <li class="calibre13">Set the <strong class="screentext">Privacy </strong>option to <strong class="screentext">Always combine data according to your Privacy Level settings for each source</strong>.</li>
      <li class="calibre13">For <strong class="screentext">Power Query Editor</strong> options, check the boxes for <strong class="screentext">Display the Query Settings pane </strong>and <strong class="screentext">Display the Formula Bar</strong>.</li>
      <li class="calibre13">When finished, click the <strong class="screentext">OK</strong> button in the bottom-right corner of the <strong class="screentext">Options</strong> dialog to apply these settings.</li>
    </ol>
    <p class="fm-booktitle">Note that it may be necessary to restart Power BI Desktop for the revised settings to take effect. Next, we cover options that should be set for the current file.</p>
    <h3 id="calibre_link-70" class="heading1">CURRENT FILE options</h3>
    <p class="fm-booktitle">The CURRENT FILE options must <a id="calibre_link-677" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>be set per Power BI Desktop file <a id="calibre_link-1390" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and are particularly important when creating a new dataset:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Click on <strong class="screentext">Data Load</strong> under <strong class="screentext">CURRENT FILE</strong></li>
      <li class="calibre13">Under <strong class="screentext">Type Detection</strong>, disable the option to <strong class="screentext">Detect column types and headers for unstructured sources</strong> </li>
      <li class="calibre13">Under <strong class="screentext">Relationships</strong>, disable all options, including <strong class="screentext">Import of relationships from data sources on first load</strong>, <strong class="screentext">Update or delete relationships when refreshing data</strong>, and <strong class="screentext">Autodetect new relationships after data is loaded</strong></li>
      <li class="calibre13">Under <strong class="screentext">Time intelligence</strong>, disable the <strong class="screentext">Auto date/time</strong> option</li>
      <li class="calibre13">For larger import datasets with many queries, disable the checkbox for <strong class="screentext">Enable parallel loading of tables</strong> under <strong class="screentext">Parallel loading of tables</strong></li>
      <li class="calibre13">Click the <strong class="screentext">OK</strong> button in the bottom-right corner of the <strong class="screentext">Options</strong> dialog to apply these settings</li>
    </ol>
    <p class="fm-booktitle">Your <strong class="screentext">CURRENT FILE | Data Load</strong> settings should look like <em class="italic">Figure 2.10</em>:</p>
    <figure class="mediaobject"><img src="images/000156.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.10: Power BI Desktop Options &ndash; CURRENT FILE | Data Load settings</p>
    <p class="fm-booktitle">Note that some of these same settings can be applied at the <strong class="screentext">GLOBAL</strong> level as well, such as <strong class="screentext">Type Detection</strong> and <strong class="screentext">Relationships</strong> settings. The dataset designer should explicitly apply the <a id="calibre_link-678" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>appropriate data types within the M queries, accessing any <a id="calibre_link-1391" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>unstructured sources, such as Excel files. Likewise, the dataset designer should have access to data source documentation or subject matter experts regarding table relationships. </p>
    <p class="fm-booktitle">Furthermore, the columns and hierarchies of the dataset’s date dimension table can be used instead of the automatic internal date tables associated with the <strong class="screentext">Auto Date/Time</strong> option. The creation of automatic date/time hierarchies for every date or date/time field within a dataset can significantly increase the size of import mode datasets due to the generally high cardinality of date and date/time columns.</p>
    <p class="fm-booktitle">Large Power BI datasets with multiple fact tables can contain many queries, which, if executed in parallel, can overwhelm the resources of the source system, resulting in a data refresh failure. Disabling the parallel loading of tables, therefore, improves the availability of the dataset and reduces the impact of the refresh process on the source server.</p>
    <p class="fm-booktitle">When Power BI Desktop is being used for report development rather than dataset development, the <strong class="screentext">Query reduction</strong> settings in the <strong class="screentext">CURRENT FILE</strong> options can benefit the user experience. These <a id="calibre_link-679" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>options, including the <strong class="screentext">Disabling of cross-highlighting/filtering by default</strong> and <a id="calibre_link-1392" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>enabling <strong class="screentext">Add an Apply button for each slicer to apply changes when you’re ready</strong> and <strong class="screentext">Add a single Apply button to the filter pane to apply changes at once</strong>, result in fewer report queries being generated. Particularly for large and DirectQuery datasets, these options can contribute to more efficient and responsive self-service experiences with reports.</p>
    <p class="fm-booktitle">This concludes the overview of data sources and data source settings. We’ll next move on to another important subject in data preparation prior to the creation of actual queries, SQL views.</p>
    <h1 id="calibre_link-71" class="heading">SQL views</h1>
    <p class="fm-booktitle">As described in the <em class="italic">Dataset planning</em> section of <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, a set of SQL views should be created within the data source and these SQL views, rather than the database tables, should be accessed by the Power BI dataset. SQL views are essentially virtual tables <a id="calibre_link-1750" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>that provide an abstraction layer from the underlying database tables. SQL views can be used to merge database tables and to limit the number of columns, thus preventing such transformations from occurring within Power Query queries.</p>
    <p class="fm-booktitle">Each fact and dimension table required by the Power BI dataset should have its own SQL view and its own M query within the dataset that references this view. The SQL views should preferably be assigned to a dedicated database schema and identify the dimension or fact table represented as shown in <em class="italic">Figure 2.11</em>:</p>
    <figure class="mediaobject"><img src="images/000189.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.11: Views assigned to BI schema in SQL Server</p>
    <p class="fm-booktitle">A common practice is to create a database schema specific to the given dataset being created or to the specific set of reports and dashboards required for a project. However, as suggested in the <em class="italic">Data warehouse bus matrix</em> section of <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, there shouldn’t be multiple versions of dimensions and facts across separate datasets&mdash;version <a id="calibre_link-1751" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>control is a top long-term deliverable for the BI team. Therefore, a single database schema with a generic name (BI in this example) is recommended.</p>
    <p class="fm-booktitle">The existence of SQL views declares a dependency to source tables that are visible to the data source owner. In the event that a change to the source tables of a view is needed or planned, the SQL view can be adjusted, thus avoiding any impact on the Power BI dataset, such as a refresh failure or an unexpected change in the data retrieved. As shown in <em class="italic">Figure 2.12</em>, a view (<code class="inlinecode">BI.vDim_Promotion</code>) is identified as a dependent object of the <code class="inlinecode">DimPromotion</code> dimension table:</p>
    <figure class="mediaobject"><img src="images/000179.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.12: SQL Server Object Dependencies</p>
    <p class="fm-booktitle">For mature data warehouse sources, the simple query logic contained in each SQL view is sufficient to support the <a id="calibre_link-1752" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>needs of the dataset. However, with Power BI (and Analysis Services tabular), BI teams can also leverage M functions to further enhance the value of this data. Such enhancements are covered in the <em class="italic">M query examples</em> section of <em class="italic">Chapter 3</em>, <em class="italic">Connecting to Sources and Transforming Data with M</em>. For now, we’ll move on to the subject of the differences between using SQL views versus M queries for data transformation.</p>
    <h2 id="calibre_link-72" class="calibre9">SQL views versus M queries</h2>
    <p class="fm-booktitle">A common question in Power BI projects specific to data retrieval is whether to implement any <a id="calibre_link-1756" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>remaining transformation logic outside the data <a id="calibre_link-1148" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>source in SQL views, within the M queries of the dataset, or both. For Analysis Services projects prior to SQL Server 2017, the layer of SQL views was the only option to implement any transformations and some BI teams may prefer this more familiar language and approach. </p>
    <p class="fm-booktitle">In some scenarios, the dataset author doesn’t have the permissions necessary to create or alter SQL views in the source database. In other scenarios, the dataset author may be stronger or more comfortable with M queries relative to SQL. Additionally, given the expanded role of M <a id="calibre_link-550" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>queries in the Microsoft ecosystem, such as in Dataverse and <strong class="screentext">Azure Data Factory</strong> (<strong class="screentext">ADF</strong>) pipelines, other BI teams may see long-term value in M queries for lightweight data transformation needs.</p>
    <p class="fm-booktitle">Ideally, an organization’s data warehouse already includes the necessary data transformations and thus minimal transformation is required within SQL or M. In this scenario, the M query for the table can simply reference the SQL view of the table, which itself contains minimal to no transformations, and inherit all required columns and logic. </p>
    <p class="fm-booktitle">As a secondary alternative, the SQL views can be modified to efficiently implement the required logic, thus isolating this code to the data source. As a third design option, M queries can implement the required logic and, via query folding, generate a SQL statement for execution by the source. Yet another design option, though less than ideal due to transformation logic existing in two different places and languages, is to implement part of the required logic in the SQL view and the remaining logic in the M query.</p>
    <p class="fm-booktitle">The guiding principle of the data retrieval process for the import mode dataset is to leverage the resources and architecture of the data source. The M queries of the Power BI dataset, which access the layer of SQL views in the source system, ultimately represent the fact and dimension tables of the data model exposed for report development and ad hoc analysis. This model should address all data transformation needs, thus avoiding the need for DAX-calculated columns and DAX-calculated tables.</p>
    <p class="fm-booktitle">Additionally, the data model in Power BI (or Analysis Services) should remain aligned with the architecture and definitions of the data warehouse. If a gap is created by embedding data transformation logic (for example, new columns) into the Power BI dataset that is not present in the data warehouse, plans should be made to eventually migrate this logic back to the data warehouse in order to restore alignment.</p>
    <p class="fm-booktitle">In other words, a user or tool should be able to return the same results of a Power BI report based on <a id="calibre_link-1149" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the Power BI dataset by issuing a SQL query against <a id="calibre_link-1757" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the source data warehouse. This is particularly essential in environments with other BI and reporting tools built on top of the data warehouse.</p>
    <p class="fm-booktitle">If it’s necessary to use both SQL views and M functions to implement the data transformation logic, then both queries should be documented and, when possible, this logic should be consolidated closer to the data source.</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 1.16, Dataset planning architecture</em>, from <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, there are six layers in which data logic can be implemented. This figure is repeated as <em class="italic">Figure 2.13 </em>for convenience:</p>
    <figure class="mediaobject"><img src="images/000208.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.13: Dataset planning architecture</p>
    <p class="fm-booktitle">Data retrieval processes should strive to leverage the resources of data sources and avoid or <a id="calibre_link-1933" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>minimize the use of local resources. For example, a derived <a id="calibre_link-1934" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>column implemented within either <strong class="screentext">SQL Views</strong> (layer 3) or <strong class="screentext">M Queries</strong> (layer 4) that folds its logic to the data source is preferable to a column created by <strong class="screentext">DAX Calculated Tables and Columns</strong> (layer 5). </p>
    <p class="fm-booktitle">Likewise, if data transformation logic is included within M queries (for example, joins or group by), it’s important to ensure these operations are being executed by the source system as described in the <em class="italic">Query folding</em> section earlier in this chapter. These considerations are especially critical for large tables given the relatively limited resources (for example, CPU and memory) of a Power BI dataset or the data gateway if applicable.</p>
    <p class="fm-booktitle">Additionally, the dimension and fact tables of the Power BI dataset and any DAX measures created should represent a single version for the organization&mdash;not a customization for a specific team or project sponsor. Therefore, although the combination of SQL views and M queries provides significant flexibility for implementing data transformations and logic, over time this logic should be incorporated into corporate data warehouses and <strong class="screentext">Extract-Transform-Load</strong> (<strong class="screentext">ETL</strong>) processes so that all business intelligence <a id="calibre_link-970" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>tools have access to a common data source.</p>
    <p class="fm-booktitle">Incrementally migrate transformation logic closer to the corporate data warehouse over time. For example, a custom column that’s originally created within an M query via the <code class="inlinecode">Table.AddColumn()</code> function and a conditional expression (<code class="inlinecode">if...then</code>) could subsequently be built into the SQL view supporting the table, thus eliminating the need for the M query logic.</p>
    <p class="fm-booktitle">In the second and final stage, the column could be added to the dimension or fact table of the corporate data warehouse and the conditional expression could be implemented within a standard <a id="calibre_link-1150" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>data warehouse ETL package or stored procedure. This final <a id="calibre_link-1758" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>migration stage would eliminate the need for the SQL view logic, improve the durability and performance of the data retrieval process, and in some scenarios also increase the feasibility of a DirectQuery dataset.</p>
    <p class="fm-booktitle">With the differences between SQL views and M queries understood, let’s next explore some examples of SQL views.</p>
    <h2 id="calibre_link-73" class="calibre9">SQL view examples</h2>
    <p class="fm-booktitle">As mentioned, the capabilities of source data systems, such as the creation of SQL views in SQL Server, should be leveraged when possible to transform data. Each SQL view should only retrieve <a id="calibre_link-1753" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the columns required for the dimension or fact table. If necessary, the views should apply business-friendly, unambiguous column aliases with spaces and proper casing. </p>
    <p class="fm-booktitle">Dimension table views should include the surrogate key used for the relationship-to-fact tables. As shown by the product dimension example later in this section, include the business or natural key column if historical tracking must be maintained.</p>
    <p class="fm-booktitle">Fact table views should include the foreign key columns for the relationships to the dimension tables, the fact columns needed for measures, and a <code class="inlinecode">WHERE</code> clause to only retrieve the required rows, such as the prior three years. Given the size of many data warehouse fact tables and the differences in how this data can best be accessed, as per the <em class="italic">Query design per dataset mode</em> section earlier in this chapter, dataset designers should ensure that the corresponding SQL views are efficient and appropriate for the dataset.</p>
    <p class="fm-booktitle">A robust date dimension table is critical for almost all datasets and thus its SQL view and/or M query has a few unique requirements. For example, date dimension tables should include integer columns that can define the default sort order of weekdays as well as sequentially increasing integer columns to support date intelligence expressions. </p>
    <p class="fm-booktitle">The date table should also include a natural hierarchy of columns (that is, <code class="inlinecode">Year</code>, <code class="inlinecode">Year-Qtr</code>, <code class="inlinecode">Year-Mo</code>, <code class="inlinecode">Year-Wk</code>) for both the Gregorian (standard) calendar as well as any custom fiscal calendar. These columns enable simple drill-up/down experiences in Power BI and report visualizations at different date granularities that span multiple time periods, such as the prior two years by week.</p>
    <p class="fm-booktitle">Given the static nature of the date (and time) dimension tables, their minimal size, and their near-universal application in reports and dashboards, it’s usually a good use of IT/BI resources to <a id="calibre_link-1754" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>enhance the source date table in the data warehouse. This could include any derived columns currently supported via SQL views or M queries as well as columns uniquely valuable to the organization, such as company holidays. </p>
    <p class="fm-booktitle">Any dynamic columns, such as <code class="inlinecode">Calendar Month Status</code> (<code class="inlinecode">Current Month</code>, <code class="inlinecode">Prior Month</code>), can be computed within a SQL-stored procedure or an ETL package and this processing can be scheduled to update the source date table daily.</p>
    <p class="fm-booktitle">For our first example, we take a look at building a date dimension view.</p>
    <h3 id="calibre_link-74" class="heading1">Date dimension view</h3>
    <p class="fm-booktitle">Nearly all data models include some sort of date table due to the importance of tracking metrics <a id="calibre_link-1759" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>important to an organization <a id="calibre_link-844" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>over time. <em class="italic">Table 2.1</em> shows sample data from a date dimension SQL view that includes several columns needed by the Power BI dataset:</p>
    <table id="calibre_link-1935" class="table-container">
      <tbody class="calibre16">
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Date</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Calendar Year</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Calendar Yr-Qtr</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Calendar Yr-Mo</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Calendar Yr-Wk</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Calendar Year Month Number</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Calendar Month Status</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Calendar Year Status</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Prior Calendar Year Date</strong></p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">2/26/2022</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022-Q1</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022-Feb</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022-WK9</p>
          </td>
          <td class="table-cell">
            <p class="normal2">110</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Prior Calendar Month</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Current Calendar Year</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2/26/2021</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">2/27/2022</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022-Q1</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022-Feb</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022-WK9</p>
          </td>
          <td class="table-cell">
            <p class="normal2">110</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Prior Calendar Month</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Current Calendar Year</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2/27/2021</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">2/28/2022</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022-Q1</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022-Feb</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022-WK9</p>
          </td>
          <td class="table-cell">
            <p class="normal2">110</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Prior Calendar Month</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Current Calendar Year</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2/28/2021</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">3/1/2022</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022-Q1</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022-Mar</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2022-WK9</p>
          </td>
          <td class="table-cell">
            <p class="normal2">111</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Current Calendar Month</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Current Calendar Year</p>
          </td>
          <td class="table-cell">
            <p class="normal2">3/1/2021</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="fm-acknowledgement">Table 2.1: Sample date dimension columns</p>
    <p class="fm-booktitle">The <code class="inlinecode">Calendar Year Month Number</code> column can be used to define the default sort order of the <code class="inlinecode">Calendar Yr-Mo</code> column and can also support date intelligence DAX measure expressions that select a specific time frame, such as the trailing four months. Likewise, a <code class="inlinecode">Prior Calendar Year Date</code> (or <code class="inlinecode">prior fiscal year date</code>) column can be referenced in date intelligence measure expressions. </p>
    <p class="fm-booktitle">The <code class="inlinecode">Calendar Month Status</code> and <code class="inlinecode">Calendar Year Status</code> columns make it easy for report authors to define common filter conditions, such as the current and prior month or the current year <a id="calibre_link-1760" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>excluding the current <a id="calibre_link-845" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>month.</p>
    <p class="fm-booktitle">Additionally, since the values for these columns are updated either by a daily job in the source database or computed within the SQL view for the date dimension, the filter conditions for these columns only need to be set once.</p>
    <p class="fm-booktitle">Power BI Desktop supports relative date filtering conditions for date columns by default. Similar to the <code class="inlinecode">Calendar Month Status</code> and <code class="inlinecode">Calendar Year Status</code> columns identified earlier, this feature is also useful in defining many common report filter conditions, such as the last 20 days. However, relative date filtering is not comprehensive in the conditions it supports and thus it often doesn’t support specific report requirements. </p>
    <p class="fm-booktitle">Dataset developers should work with data warehouse developers and/or data engineers in the organization to ensure that the date dimension table contains the logical columns necessary to simplify report development and avoid the need for report authors to regularly update the date filters in their reports. As one example, an organization that runs on a fiscal calendar distinct from the standard Gregorian calendar can benefit from columns that can filter for the current fiscal period or the latest closed period. Additional details regarding relative date filtering are available in<em class="italic"> </em><em class="italic">Chapter 7</em>, <em class="italic">Creating and Formatting Visualizations</em>.</p>
    <p class="fm-booktitle">The following SQL statement from the date dimension view (<code class="inlinecode">BI.vDim_Date</code>) leverages the <code class="inlinecode">CURRENT_TIMESTAMP()</code> function to compute two dynamic columns (<code class="inlinecode">Calendar Year Status</code> and <code class="inlinecode">Calendar Month Status</code>) and the <code class="inlinecode">DATEPART()</code> function to retrieve the date rows from January 1st of three years ago through to the current date:</p>
    <pre class="programlisting"><code class="hljs-code">SELECT
  D.[FullDateAlternateKey]
, 
  CASE
    WHEN YEAR(D.[FullDateAlternateKey]) = YEAR(CURRENT_TIMESTAMP) THEN 'Current Calendar Year'
    WHEN YEAR(D.[FullDateAlternateKey]) = YEAR(CURRENT_TIMESTAMP)-1 THEN 'Prior Calendar Year'
    WHEN YEAR(D.[FullDateAlternateKey]) = YEAR(CURRENT_TIMESTAMP)-2 THEN '2 Yrs Prior Calendar Year'
    WHEN YEAR(D.[FullDateAlternateKey]) = YEAR(CURRENT_TIMESTAMP)-3 THEN '3 Yrs Prior Calendar Year'
    ELSE 'Other Calendar Year' 
  END AS [Calendar Year Status]
,
  CASE
    WHEN YEAR(D.[FullDateAlternateKey]) = YEAR(CURRENT_TIMESTAMP) AND MONTH(D.[FullDateAlternateKey]) = MONTH(CURRENT_TIMESTAMP) THEN 'Current Calendar Month'
    WHEN YEAR(D.[FullDateAlternateKey]) = YEAR(DATEADD(MONTH,-1,CAST(CURRENT_TIMESTAMP AS date))) AND 
    MONTH(D.[FullDateAlternateKey]) = MONTH(DATEADD(MONTH,-1,CAST(CURRENT_TIMESTAMP AS date))) THEN 'Prior Calendar Month'
    WHEN YEAR(D.[FullDateAlternateKey]) = YEAR(DATEADD(MONTH,-2,CAST(CURRENT_TIMESTAMP AS date))) AND 
    MONTH(D.[FullDateAlternateKey]) = MONTH(DATEADD(MONTH,-2,CAST(CURRENT_
TIMESTAMP AS date))) THEN '2 Mo Prior Calendar Month'
    WHEN YEAR(D.[FullDateAlternateKey]) = YEAR(DATEADD(MONTH,-3,CAST(CURRENT_TIMESTAMP AS date))) AND 
    MONTH(D.[FullDateAlternateKey]) = MONTH(DATEADD(MONTH,-3,CAST(CURRENT_TIMESTAMP AS date))) THEN '3 Mo Prior Calendar Month'
    ELSE 'Other Calendar Month'
  END AS [Calendar Month Status]
FROM
DBO.DimDate as D
WHERE
D.[CalendarYear] &gt;= DATEPART(YEAR,CURRENT_TIMESTAMP)-3 AND D.[FullDateAlternateKey] &lt;= CAST(CURRENT_TIMESTAMP as date);   
</code></pre>
    <p class="fm-booktitle">Provided that the <a id="calibre_link-1761" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>scheduled refresh of the import <a id="calibre_link-846" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>mode dataset is successful, reports with filter conditions defined against the dynamic date columns, such as <code class="inlinecode">Calendar Month Status</code>, are updated automatically.</p>
    <p class="fm-booktitle">If the date columns in the SQL Server data source are only available as integers in <code class="inlinecode">YYYYMMDD</code> format, the following T-SQL expression can be used to produce a date data type within the SQL view:</p>
    <pre class="programlisting"><code class="hljs-code">CONVERT(date,CAST(F.OrderDateKey AS nvarchar(8)),112)
</code></pre>
    <p class="fm-booktitle">However, the <strong class="screentext">Mark as date table</strong> feature <a id="calibre_link-1936" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can be used to leverage <a id="calibre_link-1937" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>existing <code class="inlinecode">YYYYMMDD</code> integer columns for date relationships, as described in the following section.</p>
    <h3 id="calibre_link-75" class="heading1">Mark as date table</h3>
    <p class="fm-booktitle">The DAX query language used by Power BI datasets comes with many time intelligence functions for creating <a id="calibre_link-1762" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>analytical measures such as <code class="inlinecode">DATESBETWEEN()</code>, <code class="inlinecode">DATEADD()</code>, and <code class="inlinecode">DATESYTD()</code>. In order to effectively utilize these <a id="calibre_link-1095" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>functions, the dataset must have a table explicitly defined as a date table.</p>
    <p class="fm-booktitle">Most data warehouses store date columns as integers for query performance reasons. For example, an <code class="inlinecode">Order Date Key</code> column on a fact table would store the <code class="inlinecode">20180225 (YYYYMMDD)</code> value as an integer data type to represent February 25th, 2018. Likewise, an existing date dimension table in the data warehouse usually also contains a <code class="inlinecode">YYYYMMDD</code> date key column to support the join to these fact tables in SQL queries. </p>
    <p class="fm-booktitle">If this date dimension table also contains a date column and meets essential data integrity criteria, the <strong class="screentext">Mark as date table</strong> feature in Power BI Desktop can be used to leverage existing integer/whole number columns representing dates for relationships.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 2.14</em>, the <strong class="screentext">Date</strong> table has been selected in the <strong class="screentext">Fields</strong> list in Power BI Desktop and the <strong class="screentext">Mark as date table</strong> icon has been selected from the <strong class="screentext">Table tools</strong> tab of the ribbon:</p>
    <figure class="mediaobject"><img src="images/000199.png" alt="Graphical user interface, application  Description automatically generated" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 2.14: Mark as Date Table</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 2.14</em>, the column named <strong class="screentext">Date</strong>, which is stored as a <strong class="screentext">Date</strong> data type, has been specified as the <strong class="screentext">Date column</strong> to be used by the <strong class="screentext">Mark as date table</strong> feature. Power BI validates that this column meets the required criteria to function properly.</p>
    <p class="fm-booktitle">In addition to relationships based on <code class="inlinecode">YYYYMMDD</code> columns, this feature enables DAX time intelligence <a id="calibre_link-1763" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>functions, such as <code class="inlinecode">SAMEPERIODLASTYEAR()</code>, to work <a id="calibre_link-1096" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>properly. Power BI uses the date column specified by the model author in the <strong class="screentext">Mark as date table</strong> setting in executing these expressions.</p>
    <p class="fm-booktitle">To utilize the <strong class="screentext">Mark as date table</strong> feature, the <strong class="screentext">Date</strong> column (<strong class="screentext">Date</strong> data type) specified for the <strong class="screentext">Mark as date table</strong> feature must meet the following criteria:</p>
    <ul class="calibre10">
      <li class="bulletlist">No null values.</li>
      <li class="bulletlist">No duplicate values.</li>
      <li class="bulletlist">Contiguous date values:<ul class="calibre12">
          <li class="bulletlist">There must be a single date value for each date from the earliest date to the latest date. In other words, there can’t be any gaps or missing dates.</li>
          <li class="bulletlist">If a date/time column is used, the timestamp must be the same for each value of the column. </li>
        </ul>
      </li>
    </ul>
    <p class="fm-booktitle">We’ll now move <a id="calibre_link-1764" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>on to a second SQL view example for <a id="calibre_link-1097" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the product dimension.</p>
    <h3 id="calibre_link-76" class="heading1">Product dimension view</h3>
    <p class="fm-booktitle">As shown in the database diagram schema referenced in <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, it’s <a id="calibre_link-1765" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>recommended to provide a consolidated or <a id="calibre_link-1546" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>de-normalized dimension for datasets. In the following view (<code class="inlinecode">BI.vDim_Product</code>), three product dimension tables are joined and a logical column, <code class="inlinecode">Product Category Group</code>, is created to support a common reporting and analysis need:</p>
    <pre class="programlisting"><code class="hljs-code">SELECT
  P.ProductKey as 'Product Key'
, P.ProductAlternateKey as 'Product Alternate Key'
, P.EnglishProductName AS 'Product Name'
, ISNULL(S.EnglishProductSubcategoryName, 'Undefined') 'Product Subcategory'
, ISNULL(C.EnglishProductCategoryName, 'Undefined') AS 'Product Category'
, CASE 
  WHEN C.EnglishProductCategoryName = 'Bikes' THEN 'Bikes' 
  WHEN C.EnglishProductCategoryName IS NULL THEN 'Undefined'
  ELSE 'Non-Bikes'
  END AS 'Product Category Group'
FROM
DBO.DimProduct AS P
LEFT JOIN DBO.DimProductSubcategory AS S 
ON P.ProductSubcategoryKey = S.ProductSubcategoryKey
LEFT JOIN DBO.DimProductCategory AS C
ON S.ProductCategoryKey = C.ProductCategoryKey
</code></pre>
    <p class="fm-booktitle">In this example, it’s necessary to use <code class="inlinecode">LEFT JOIN</code> since the product dimension table in the data warehouse allows for null values in the foreign key column (<code class="inlinecode">ProductSubcategoryKey</code>). Retrieving the product rows that haven’t yet been assigned a subcategory or category is necessary for certain reports that highlight future products. For these products, an <code class="inlinecode">ISNULL()</code> function is used to replace null values with an undefined value. Additionally, similar to the <code class="inlinecode">Date</code> view, a <code class="inlinecode">CASE</code> expression is used to generate a column that groups the product rows into two categories (<code class="inlinecode">Bikes</code> and <code class="inlinecode">Non-Bikes</code>). </p>
    <p class="fm-booktitle">An additional <a id="calibre_link-1938" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>aspect of the product dimension is <a id="calibre_link-1939" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>that it is an example of a slowly changing dimension. The implications of slowly changing dimensions as related to SQL views and queries are covered in the following section.</p>
    <h2 id="calibre_link-77" class="calibre9">Slowly changing dimensions</h2>
    <p class="fm-booktitle">As discussed in <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, the historical tracking of core business entities, such as customers and products, via slowly changing dimension ETL processes is an <a id="calibre_link-1755" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>essential requirement for data warehouses. While the ability to insert and update rows based on changes in specific columns is well outside the scope of this chapter, we do wish to cover slowly changing dimensions as related to the development of Power BI data queries.</p>
    <p class="fm-booktitle">The product dimension view retrieves both the surrogate key column used for relationships in the dataset as well as the business key that uniquely identifies the given product or customer, respectively. For example, as shown in <em class="italic">Table 2.2</em>, the same product (<strong class="screentext">FR-M94B-38</strong>) is represented by three product dimension rows (<strong class="screentext">304, 305, 306</strong>) due to changes in its list price over time:</p>
    <table id="calibre_link-1940" class="table-container">
      <tbody class="calibre16">
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Product Key</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Product Alternate Key</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Product Name</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Product List Price</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Product Start Date</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Product End Date</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Product Status</strong></p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">304</p>
          </td>
          <td class="table-cell">
            <p class="normal2">FR-M94B-38</p>
          </td>
          <td class="table-cell">
            <p class="normal2">HL Mountain Frame &ndash; Black, 38</p>
          </td>
          <td class="table-cell">
            <p class="normal2">$1,191</p>
          </td>
          <td class="table-cell">
            <p class="normal2">7/1/2011</p>
          </td>
          <td class="table-cell">
            <p class="normal2">12/28/2011</p>
          </td>
          <td class="table-cell">
            <p class="normal2">NULL</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">305</p>
          </td>
          <td class="table-cell">
            <p class="normal2">FR-M94B-38</p>
          </td>
          <td class="table-cell">
            <p class="normal2">HL Mountain Frame &ndash; Black, 38</p>
          </td>
          <td class="table-cell">
            <p class="normal2">$1,227</p>
          </td>
          <td class="table-cell">
            <p class="normal2">12/29/2011</p>
          </td>
          <td class="table-cell">
            <p class="normal2">12/27/2012</p>
          </td>
          <td class="table-cell">
            <p class="normal2">NULL</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">306</p>
          </td>
          <td class="table-cell">
            <p class="normal2">FR-M94B-38</p>
          </td>
          <td class="table-cell">
            <p class="normal2">HL Mountain Frame &ndash; Black, 38</p>
          </td>
          <td class="table-cell">
            <p class="normal2">$1,350</p>
          </td>
          <td class="table-cell">
            <p class="normal2">12/28/2012</p>
          </td>
          <td class="table-cell">
            <p class="normal2">NULL</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Current</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="fm-acknowledgement">Table 2.2: Slowly changing dimension processing applied to product dimension</p>
    <p class="fm-booktitle">DAX measures reference the business key or alternate key column of these dimension tables to compute the distinct count of these entities. For dimensions without slowly changing dimension <a id="calibre_link-1941" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>processing applied, the foreign key column of the related fact table can be used to compute the distinct count of dimension values associated with the given fact or event. Greater detail on these measures is included in <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>.</p>
    <h1 id="calibre_link-78" class="heading">Summary</h1>
    <p class="fm-booktitle">In this chapter, we’ve covered a number of important concepts, design principles, data source settings, and source system preparation. This includes query folding, query design considerations per dataset mode, important Power BI Desktop configuration settings, data source privacy levels, and the layer of SQL views within a database source. </p>
    <p class="fm-booktitle">Understanding these concepts and properly preparing source systems greatly aids the process of connecting to and transforming data using Power BI.</p>
    <p class="fm-booktitle">In the next chapter, we’ll leverage the prepared source systems and design techniques described in this chapter to connect to source systems and transform their data using Power Query (M).</p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-5">
<div id="calibre_link-1942" class="calibre2">
<div id="calibre_link-1943" class="calibre3"><div id="calibre_link-1944" class="calibre4">
    <h1 class="heading">3</h1>
    <h1 id="calibre_link-79" class="mainheading">Connecting to Sources and Transforming Data with M</h1>
    <p class="fm-booktitle">This chapter follows the environment and data source preparation described in <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, by implementing <strong class="screentext">Power Query</strong> (<strong class="screentext">M</strong>) queries in a new Power BI Desktop file to retrieve the required fact and dimension tables. Power Query queries are written in a data transformation language commonly called “M” or can be generated via the <strong class="screentext">Power Query Editor</strong> user interface. These queries access data sources and optionally apply data transformation logic to prep the tables for the Power BI data model.</p>
    <p class="fm-booktitle">Power Query (M) expressions are becoming ubiquitous throughout the entire Microsoft data platform. These expressions are used with dataflows, which are reusable by multiple Power BI datasets. They are also supported by <strong class="screentext">Azure Data Factory</strong> (<strong class="screentext">ADF</strong>) meaning that data mashup processes that begin in Power BI can be scaled up if necessary. Finally, M queries underpin dataflows within <strong class="screentext">Dataverse</strong>, Microsoft’s operational data store.</p>
    <p class="fm-booktitle">The M query language includes hundreds of functions and several books have been written regarding the language and its use. The greater purpose of this chapter is to understand M queries in the context of a corporate Power BI solution that primarily leverages an IT-managed data warehouse.</p>
    <p class="fm-booktitle">In this chapter, we use SQL Server and an Excel file as primary data sources for Power Query (M) queries. Parameters and variables are used to access a set of SQL views reflecting the data warehouse tables inside a SQL Server database and the Annual Sales Plan data contained in an Excel workbook. </p>
    <p class="fm-booktitle">Additional M queries are developed to support relationships between the sales plan and dimension tables and to promote greater usability and manageability of the dataset. Examples of implementing data transformations and logic within M queries, such as the creation of a dynamic customer history segment column, are included. Finally, reusable queries called dataflows are covered, as well as tools for editing and managing M queries, such as extensions for <strong class="screentext">Visual Studio</strong> and <strong class="screentext">Visual Studio Code</strong>. </p>
    <p class="fm-booktitle">In this chapter, we cover the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">Types of Power Query M queries</li>
      <li class="bulletlist">Creating Power Query M queries</li>
      <li class="bulletlist">Power Query M query examples</li>
      <li class="bulletlist">Dataflows</li>
      <li class="bulletlist">Power Query M query editing tools</li>
    </ul>
    <p class="fm-booktitle">Let’s start by looking at the different types of M queries.</p>
    <h1 id="calibre_link-80" class="heading">Types of Power Query M queries</h1>
    <p class="fm-booktitle">In <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, SQL views were created, data sources configured, and the Power BI Desktop environment options applied. With these tasks accomplished, the dataset designer can finally<a id="calibre_link-1508" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> start developing the data retrieval queries and parameters of the dataset. Power Query (M) queries are the means by which data sources are<a id="calibre_link-1481" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> connected to and data imported into Power BI datasets. M queries are necessary to connect to data sources such as SQL views and can also perform data transformation as required. </p>
    <p class="fm-booktitle">The Power Query M language is a functional coding language more formally called the Power Query Formula Language. M includes over 700 functions that are used to connect to data and perform transformations of that data. The lines of M code that connect to and transform data are called a query.</p>
    <p class="fm-booktitle">There are a number of different types of queries that serve different purposes, including:</p>
    <ul class="calibre10">
      <li class="bulletlist">Data source parameters</li>
      <li class="bulletlist">Staging queries</li>
      <li class="bulletlist">Fact and dimension queries</li>
      <li class="bulletlist">Parameter table queries</li>
      <li class="bulletlist">Security table queries</li>
      <li class="bulletlist">Custom function queries</li>
    </ul>
    <p class="fm-booktitle">This section explores each of these types of queries in detail. However, before delving into these different<a id="calibre_link-1509" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> types of queries, it is important to understand how queries can be organized in order to achieve solutions that are more easily understood and maintained over time.</p>
    <h2 id="calibre_link-81" class="calibre9">Organizing queries</h2>
    <p class="fm-booktitle">Within the <strong class="screentext">Power Query Editor</strong> of Power BI <a id="calibre_link-1479" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Desktop, group folders are used to organize M queries into common categories <a id="calibre_link-1499" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>such as <strong class="screentext">Data Source Parameters</strong>, <strong class="screentext">Staging Queries</strong>, <strong class="screentext">Parameter Tables</strong>, <strong class="screentext">Fact Table Queries</strong>, <strong class="screentext">Dimension Table Queries</strong>, and <strong class="screentext">Bridge Table Queries</strong> as shown in <em class="italic">Figure 3.1</em>:</p>
    <figure class="mediaobject"><img src="images/000228.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.1: Power Query Editor in Power BI Desktop with group folders</p>
    <p class="fm-booktitle">New groups are created by right-clicking a query in the <strong class="screentext">Queries</strong> pane and then choosing <strong class="screentext">Move To Group</strong> and finally <strong class="screentext">New Group</strong>. Once groups are created, queries can be moved between groups by dragging and dropping or by right-clicking the query, choosing <strong class="screentext">Move to Group</strong>, and then selecting the desired group.</p>
    <p class="fm-booktitle">The parameters and queries displayed in italics are included in the refresh process of the dataset but not loaded to the dataset within Power BI Desktop. For example, the <strong class="screentext">AdWorksSQLServer</strong> query displayed in <em class="italic">Figure 3.1</em> merely exposes the objects of the SQL Server database via the <code class="inlinecode">Sql.Database()</code> M function for other queries to reference. This query, along with the data source parameters, is in italics and is used to streamline the data retrieval process such that a single change can be implemented to update many dependent queries. </p>
    <p class="fm-booktitle">Right-click a query or parameter<a id="calibre_link-1500" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> in the <strong class="screentext">Queries</strong> pane to expose the <strong class="screentext">Enable load</strong> and <strong class="screentext">Include in report refresh</strong> properties as shown in <em class="italic">Figure 3.2</em>:</p>
    <figure class="mediaobject"><img src="images/000218.png" alt="Graphical user interface, text, application  Description automatically generated" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.2: Enable load and Include in report refresh</p>
    <p class="fm-booktitle">For many datasets, the only queries that should be loaded to the data model are the dimension and fact table queries and certain parameter table queries. In addition, there may be instances where data within the source system is static, or unchanging. In these cases, there is no reason to refresh the data within the dataset after the initial load and thus the <strong class="screentext">Include in report refresh</strong> option can be unchecked in order to save system resources and reduce refresh times.</p>
    <p class="fm-booktitle">We’ll now take a detailed look at the different types of M queries, starting with data source parameters.</p>
    <h2 id="calibre_link-82" class="calibre9">Data source parameters</h2>
    <p class="fm-booktitle">In the previous section, <em class="italic">Figure 3.1</em> displayed a group called <strong class="screentext">Data Source Parameters</strong>. Parameters are special M queries that<a id="calibre_link-1492" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> do not access an external data source and only return a scalar or individual value, such as a specific date, number, or string of text characters. </p>
    <p class="fm-booktitle">The primary use case for parameters is to centrally define a common and important value, such as a server name or the name of a database, and then reference that parameter value in multiple other queries. Like global variables, parameters improve the manageability of large datasets as the dataset designer can simply revise a single parameter’s value rather than manually modify many queries individually. </p>
    <p class="fm-booktitle">Additionally, Power BI dataset authors can use parameters to only load a sample of a table’s source data to the local Power BI Desktop file and later load the entire table to the published Power BI dataset. For example, starting and ending date parameters could be created and embedded in an M expression that applies a filter condition when loading a table. </p>
    <p class="fm-booktitle">The local Power BI Desktop file could use parameter values only representing a single month or year date range, but the published dataset could load multiple years based on revised starting and ending date parameter values. The dataset author or team can manipulate the parameter values manually in the Power BI service or a script could be used that modifies the parameters via the Power BI REST API. The Power BI REST API is described in the <em class="italic">Power BI REST API and PowerShell module</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>.</p>
    <p class="fm-booktitle">Query parameters can be<a id="calibre_link-1493" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> created and modified via the <strong class="screentext">Manage Parameters </strong>dialog available on the <strong class="screentext">Home</strong> tab of the <strong class="screentext">Power Query Editor</strong>. <em class="italic">Figure 3.3</em> shows the <strong class="screentext">Manage Parameters</strong><strong class="screentext"> </strong>dialog, which identifies the six parameters defined for the SQL Server database and the Microsoft Excel workbook:</p>
    <figure class="mediaobject"><img src="images/000247.png" alt="Graphical user interface, application  Description automatically generated" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.3: Manage Parameters in Power Query Editor</p>
    <p class="fm-booktitle">For this dataset, development and production environment database parameters (for example, <strong class="screentext">ProdServer</strong> and <strong class="screentext">ProdDB</strong>) are configured with a list of valid possible values to make it easy and error-free <a id="calibre_link-1494" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>when switching data sources. For the same purpose, both the name of the Excel workbook containing the annual <strong class="screentext">Sales and Margin Plan</strong> and its file directory are also stored as parameters.</p>
    <p class="fm-booktitle">The <strong class="screentext">Suggested Values</strong> dropdown provides the option to allow any value to be entered manually, for a value to be selected from a hardcoded list of valid values, and for a query that returns a list (a value type in M, such as a table and a record) to dynamically populate a list of valid parameter values. Given the small number of valid server names in this example and the infrequency of changing production and development server names, the three suggested values have been entered manually.</p>
    <p class="fm-booktitle">Parameters are often used with <strong class="screentext">Power BI Template</strong> files to enable business users to customize their own reports with pre-defined and pre-filtered queries and measures. For example, the user would open a template and select a specific department, and this selection would be used to filter the M queries of the dataset.</p>
    <p class="fm-booktitle">Additionally, parameters can be useful in defining the values used in the filtering conditions of queries, such as the starting and ending dates, and in the calculation logic used to create custom columns in M queries. Parameters are usually only used by other queries and thus not loaded (italic font in <em class="italic">Figure 3.3</em>) but they can be loaded to the data model as individual tables with a single column and a single row. If loaded, the parameters can be<a id="calibre_link-1945" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> accessed by DAX expressions just like other tables in the model. </p>
    <p class="fm-booktitle">We’ll now turn our attention to staging queries.</p>
    <h2 id="calibre_link-83" class="calibre9">Staging queries</h2>
    <p class="fm-booktitle">With the data source parameters configured, staging queries are used to expose the data sources to the <a id="calibre_link-1505" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dimension and fact table queries of the dataset. For example, the <strong class="screentext">AdWorksSQLServer</strong> staging query merely passes the production server and production database parameter values into the <code class="inlinecode">Sql.Database()</code> M function as shown in <em class="italic">Figure 3.1</em>. This query results in a table containing the schemas and objects stored in the database, including the SQL views supporting the fact and dimension tables. </p>
    <p class="fm-booktitle">The <strong class="screentext">SalesPlanFilePath</strong> staging query used for the Annual Sales Plan Excel workbook source is very similar in that it merely references the file name and file directory parameters to form a complete file path, as shown in <em class="italic">Figure 3.4</em>:</p>
    <figure class="mediaobject"><img src="images/000238.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.4: Annual Sales Plan Staging Query&mdash;Excel Workbook</p>
    <p class="fm-booktitle">The third and final staging query, <strong class="screentext">CurrentDateQry</strong>, simply computes the current date as a date value as shown in <em class="italic">Figure 3.5</em>:</p>
    <figure class="mediaobject"><img src="images/000265.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.5: Current date staging query</p>
    <p class="fm-booktitle">Just like parameters, the results of staging queries, such as <strong class="screentext">CurrentDateQry</strong>, can be referenced by other queries, such <a id="calibre_link-1506" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as the filtering condition of a fact table. In the following sample M query, the <code class="inlinecode">Table.SelectRows()</code> function is used in the <strong class="screentext">Internet Sales</strong> query to only retrieve rows where the <code class="inlinecode">Order Date</code> column is less than or equal to the value of the <strong class="screentext">CurrentDateQry</strong> (for example <code class="inlinecode">12/29/2021</code>):</p>
    <pre class="programlisting"><code class="hljs-code">let
    Source = AdWorksSQLServer,
    ISales = Source{[Schema = "BI", Item = "vFact_InternetSales"]}[Data],
    CurrentDateFilter = Table.SelectRows(ISales, each   [Order Date] &lt;= 
    CurrentDateQry)
in
    CurrentDateFilter
</code></pre>
    <p class="fm-booktitle">In this simple example, the same filter condition can easily be built into the SQL view (<code class="inlinecode">vFact_InternetSales</code>), supporting the fact table, and this approach would generally be preferable. However, it’s important to note that the M engine is able to convert the final query variable (<code class="inlinecode">CurrentDateFilter</code>), including the reference to the staging query (<code class="inlinecode">CurrentDateQry</code>), into a single <a id="calibre_link-1570" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>SQL statement via <strong class="screentext">query folding</strong>. </p>
    <p class="fm-booktitle">In some data transformation scenarios, particularly with rapid iterations and agile project lifecycles, it may be preferable to at least temporarily utilize efficient M queries within the Power BI dataset (or Analysis Services model) rather than implement modifications to the data source (for example, data warehouse tables or views). </p>
    <p class="fm-booktitle">As covered in the <em class="italic">Query folding</em> section of <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, if it’s necessary to use M to implement query transformations or logic, the dataset designer should be vigilant in ensuring this logic is folded into a SQL statement and thus executed by the source system. This is particularly important for large queries retrieving millions of rows, given the limited<a id="calibre_link-1507" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> resources of the data gateway server (if applicable) or any provisioned capacities (hardware) with Power BI Premium.</p>
    <p class="fm-booktitle">Staging queries can also be used with DirectQuery queries.</p>
    <h3 id="calibre_link-84" class="heading1">DirectQuery staging</h3>
    <p class="fm-booktitle">It is possible to use staging queries even when working with DirectQuery. The database staging query for a DirectQuery <a id="calibre_link-909" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dataset is slightly different than an import mode dataset. For this query, an additional variable is added to the <code class="inlinecode">let</code> expression, as shown in the following example:</p>
    <pre class="programlisting"><code class="hljs-code">let
    Source = Sql.Database(ProdServer, ProdDB),
    DummyVariable = null
in
    Source
</code></pre>
    <p class="fm-booktitle">The additional variable (<code class="inlinecode">DummyVariable</code>) is ignored by the query and the same <code class="inlinecode">Sql.Database()</code> function that references the server and database parameters for the import mode dataset can also be used for the DirectQuery dataset.</p>
    <p class="fm-booktitle">With parameters and staging queries defined, we can now focus on the main data queries for our facts and dimensions.</p>
    <h2 id="calibre_link-85" class="calibre9">Fact and dimension queries</h2>
    <p class="fm-booktitle">All of the work performed<a id="calibre_link-1496" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> thus far has really been preparation work for creating the queries that connect to and import the data of interest, the tables for our facts and dimensions. </p>
    <p class="fm-booktitle">For import mode datasets, the <a id="calibre_link-971" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>M query is executed upon a scheduled refresh and the query results are loaded into a compressed, columnar format. DirectQuery mode datasets and import<a id="calibre_link-959" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> queries with the <strong class="screentext">Enable load</strong> property disabled or not set (see the <em class="italic">Organizing queries</em> section in this chapter) only define the SQL statement representing the given dimension or fact tables. The DirectQuery data source utilizes these SQL statements to create SQL queries necessary to resolve report queries, such as <a id="calibre_link-1052" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>joining the <strong class="screentext">Internet Sales</strong> query with the <strong class="screentext">Product</strong> query.</p>
    <p class="fm-booktitle">With proper preparation, most M queries should simply access a single SQL view, apply minimal to no transformations, and then expose the results of this query to the dataset as a dimension or fact table. Such queries are referred to as source reference-only queries.</p>
    <h3 id="calibre_link-86" class="heading1">Source reference only</h3>
    <p class="fm-booktitle">The following M query shown in <em class="italic">Figure 3.6</em> references<a id="calibre_link-975" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the SQL view (<code class="inlinecode">BI.vDim_Customer</code>) via the staging query (<strong class="screentext">AdWorksSQLServer</strong>) and does not apply any further transformations:</p>
    <figure class="mediaobject"><img src="images/000256.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.6: Customer dimension query</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 3.6</em>, the <strong class="screentext">Customer</strong> query accesses the unique M record associated with the schema (<code class="inlinecode">BI</code>) and SQL view (<code class="inlinecode">vDim_Customer</code>) from the table produced by the staging query (<strong class="screentext">AdWorksSQLServer</strong>). This record contains all field names of the staging table query including the <code class="inlinecode">Data</code> field that stores the SQL view. Referencing the <code class="inlinecode">Data</code> field of the M record retrieves the results of the SQL view. </p>
    <p class="fm-booktitle">Since no M transformations are applied, the M query reflects the source SQL view, and changes to the SQL view such as the removal of a column are automatically carried over to the Power BI dataset upon the next refresh. The one-to-one relationship between the SQL view and the M query is one of the primary reasons to favor implementing, or migrating, data transformation logic<a id="calibre_link-976" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to the data warehouse source rather than in the Power BI dataset.</p>
    <p class="fm-booktitle">Connecting to data warehouse databases such as Azure SQL Database or Azure SQL Managed Instance should generally result in simple M query expressions with little to no transformations required. Semi-structured and unstructured sources such as JSON and Excel files naturally require more transformations to prepare the data for analysis. We’ll next look at a more complex query resulting from connecting to an unstructured data source, Microsoft Excel.</p>
    <h3 id="calibre_link-87" class="heading1">Excel workbook &ndash; Annual Sales Plan</h3>
    <p class="fm-booktitle">As demonstrated in the previous<a id="calibre_link-972" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> section, fact and dimension queries for structured data sources such as SQL Server should generally involve source reference-only queries. However, for the import mode dataset, the annual <strong class="screentext">Sales and Margin Plan</strong> data is retrieved from a table object within an Excel workbook, an unstructured data source. </p>
    <p class="fm-booktitle">In the following fact table query shown in <em class="italic">Figure 3.7 </em>(<strong class="screentext">Sales and Margin Plan</strong>), the <strong class="screentext">SalesPlanFilePath</strong> staging query is referenced within an <code class="inlinecode">Excel.Workbook()</code> data access function:</p>
    <figure class="mediaobject"><img src="images/000283.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.7: Sales and Margin Plan query from Excel workbook source</p>
    <p class="fm-booktitle">As covered in the <em class="italic">Power BI Desktop options</em> section in <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, the automatic data type detection option for unstructured sources should be disabled. Structured data sources such as SQL Server explicitly define the data types for columns. For unstructured data sources, the automatic data type detection feature attempts to analyze <a id="calibre_link-973" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and determine the appropriate data type for each column.</p>
    <p class="fm-booktitle">With automatic data type detection disabled, it is necessary to explicitly define the appropriate data type for each column of the Excel table via the <code class="inlinecode">Table.TransformColumnTypes()</code> function. The <code class="inlinecode">Int64.Type</code>, <code class="inlinecode">Currency.Type,</code> and <code class="inlinecode">type number</code> arguments used in this function correspond to the <strong class="screentext">Whole Number</strong>, <strong class="screentext">Fixed Decimal Number</strong>, and <strong class="screentext">Decimal Number</strong> data types, respectively.</p>
    <p class="fm-booktitle">For a DirectQuery dataset, the <strong class="screentext">Sales and Margin Plan</strong> data would be retrieved from a SQL view within the same database as the other fact and dimension tables as shown in <em class="italic">Figure 3.8</em>:</p>
    <figure class="mediaobject"><img src="images/000274.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.8: Sales and Margin Plan M query for DirectQuery dataset</p>
    <p class="fm-booktitle">The cost and time required to<a id="calibre_link-1946" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> integrate the <strong class="screentext">Sales and Margin Plan</strong> data into the data warehouse database are one of the reasons that the default import mode dataset was chosen for this project. The limitation of a single database within a single data source is currently one of the primary limiting factors for DirectQuery datasets. In <em class="italic">Figure 3.9</em>, an error is thrown when trying to utilize two databases from the same database server for a DirectQuery dataset:</p>
    <figure class="mediaobject"><img src="images/000301.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.9: DirectQuery limitation &ndash; Single Database</p>
    <p class="fm-booktitle">This DirectQuery limitation can be overcome by using composite data models but this adds additional complexity that is generally unwarranted in this scenario.</p>
    <p class="fm-booktitle">Let’s next look at queries <a id="calibre_link-974" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>designed to create tables that assist with building relationships within a data model. </p>
    <h2 id="calibre_link-88" class="calibre9">Parameter tables queries</h2>
    <p class="fm-booktitle">Parameter table queries are <a id="calibre_link-1501" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>developed for usability and manageability purposes. </p>
    <p class="fm-booktitle">From a usability standpoint, the <strong class="screentext">Date Intelligence Metrics</strong> and <strong class="screentext">Adventure Works Sales</strong> serve to consolidate related measures in the Fields list that will be exposed to report authors and analysts such that these users don’t have to scroll or hunt for measures. Additionally, the <strong class="screentext">Current Date</strong> query is used to provide reports with a text message advising of the latest data refresh date. From a manageability standpoint, the <strong class="screentext">Measure Support</strong> query is used to centralize intermediate or branching DAX expressions that are referenced by many DAX measures. </p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 3.10</em>, a trivial expression is used for three of the four queries since the purpose of the query is simply to provide a table name to the data model:</p>
    <figure class="mediaobject"><img src="images/000292.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.10: Adventure Works Sales Parameter Tables query</p>
    <p class="fm-booktitle">The <strong class="screentext">Date Intelligence Metrics</strong>, <strong class="screentext">Adventure Works Sales</strong>, and <strong class="screentext">Measure Support </strong>queries all retrieve a blank value and the <strong class="screentext">Include in report refresh</strong> property is disabled. The following two chapters demonstrate how these blank tables are utilized as data model metadata, and DAX measures are added to the dataset in <em class="italic">Chapter 4</em>, <em class="italic">Designing Import and DirectQuery Data Models</em>, and <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, respectively. </p>
    <p class="fm-booktitle">The <strong class="screentext">Current Date</strong> query is the only parameter table query executed with each report refresh. The following M script for the <strong class="screentext">Current Date</strong> query produces a table with one column and one record, representing the current date as of the time of execution:</p>
    <pre class="programlisting"><code class="hljs-code">let
    RefreshDateTime = DateTime.LocalNow(),
    TimeZoneOffset = -5,
    RefreshDateTimeAdjusted = RefreshDateTime + #duration(0,TimeZoneOffset,0,0),
    RefreshDateAdjusted = DateTime.Date(RefreshDateTimeAdjusted),
    TableCreate = Table.FromRecords({[CurrentDate = RefreshDateAdjusted]}),
    DateType = Table.TransformColumnTypes(TableCreate,{"CurrentDate", type date})
in
    DateType
</code></pre>
    <p class="fm-booktitle">All reported times in Microsoft <a id="calibre_link-1502" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Azure are expressed in <strong class="screentext">Coordinated Universal Time (UTC)</strong>. Therefore, timezone adjustment logic can be<a id="calibre_link-674" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> built into the M query to ensure the last refreshed date message reflects the local timezone. </p>
    <p class="fm-booktitle">In the preceding example, five hours are reduced from the <code class="inlinecode">DateTime.LocalNow()</code> function, reflecting the variance between US Eastern Standard Time and UTC. The adjusted datetime value is then converted into a date value and a table is built based on this modified date value. </p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 3.11</em>, the <strong class="screentext">Current Date</strong> query is used by a DAX measure to advise of the last refreshed date:</p>
    <figure class="mediaobject"><img src="images/000322.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.11: Parameter Tables in Fields list and data refresh message</p>
    <p class="fm-booktitle">Calculating the current date and time in the Power BI query captures the date and time at the time of refresh and can potentially be used as a support query for other queries within the dataset. </p>
    <p class="fm-booktitle">The <code class="inlinecode">Current Date</code> DAX expression simply surfaces this information within the report while adding <a id="calibre_link-1503" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>additional context for the report viewers.</p>
    <p class="fm-booktitle">The DAX expression supporting the last refreshed message is as follows:</p>
    <pre class="programlisting"><code class="hljs-code">Last Refresh Msg = 
    VAR __CurrentDateValue = MAX('Current Date'[CurrentDate])
RETURN
    "Last Refreshed: " &amp; __CurrentDateValue
</code></pre>
    <p class="fm-booktitle">An additional example of using DAX to return a string value for title or label purposes is included in the <em class="italic">Drill-through report pages</em> section of <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>.</p>
    <p class="fm-booktitle">As datasets grow larger and more complex, BI teams or dataset designers may add or revise group names to better organize M queries. For example, the four parameter group queries in this section serve three separate functions (fields list, last refreshed date, and DAX logic centralization).</p>
    <p class="fm-booktitle">To experienced Power BI and Analysis Services Tabular developers, a parameter table is understood as a custom table of parameter values loaded to a model and exposed to the reporting interface. DAX measures can be authored to detect which value (parameter) has been selected by the user (for example, 10% growth, 20% growth) and dynamically compute the corresponding result. For this dataset, the concept of parameter tables is extended to include any query that is loaded to the data model but not related to any other table in the data model.</p>
    <p class="fm-booktitle">Most large Power BI datasets include data source parameters, staging queries, fact and dimension queries, relationship table queries, and parameter tables queries. We’ll next cover two optional types of queries, security table queries and custom function queries.</p>
    <h2 id="calibre_link-89" class="calibre9">Security table queries</h2>
    <p class="fm-booktitle">Security table queries support the<a id="calibre_link-1504" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> inclusion of tables for the express purpose of implementing <strong class="screentext">row-level security</strong> (<strong class="screentext">RLS</strong>) for the dataset. Such queries may be required in circumstances where each user should only see their own data. In these circumstances a security table can import the <strong class="screentext">user principal names</strong> (<strong class="screentext">UPNs</strong>) of users with access to reports built against the dataset. Typically the UPNs are the same values as user email addresses and the DAX function <code class="inlinecode">USERPRINCIPALNAME()</code> can be used to retrieve this value for applying security or other filtering requirement in the Power BI service.</p>
    <p class="fm-booktitle">Based on the data security needs<a id="calibre_link-1947" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> for this project described in <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, it’s not necessary to retrieve any tables for the purpose of implementing an RLS role. </p>
    <p class="fm-booktitle">As shown in the <em class="italic">Sample Power BI project template</em><em class="italic"> </em>section in <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, the sales managers and associates should only have access to their <strong class="screentext">Sales Territory</strong> groups, while the vice presidents should have global access. </p>
    <p class="fm-booktitle">With these simple requirements, the security groups of users (for example, <strong class="screentext">North America</strong>, <strong class="screentext">Europe</strong>, and the <strong class="screentext">Pacific region</strong>) can be created and assigned to corresponding RLS roles defined in the data model. See <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, for details on implementing these security roles.</p>
    <p class="fm-booktitle">In projects with more complex or granular security requirements, it’s often necessary to load additional tables to the data model such as a <strong class="screentext">Users</strong> table and a <strong class="screentext">Permissions</strong> table. For example, if users were to be restricted to specific postal codes rather than sales territory groups, a dynamic, table-driven approach that applies filters based on the user issuing the report request would be preferable to creating (and maintaining) a high volume of distinct RLS roles and security groups. </p>
    <p class="fm-booktitle">Given the importance of dynamic (user-based) security, particularly for large-scale datasets, detailed examples of implementing dynamic security for both import and DirectQuery datasets are included in <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>. </p>
    <p class="fm-booktitle">We’ll next look at another optional query type, custom function queries.</p>
    <h2 id="calibre_link-90" class="calibre9">Custom function queries</h2>
    <p class="fm-booktitle">Since the Power Query (M) language<a id="calibre_link-1491" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is a functional programming language, it is possible to create custom functions as queries. These queries allow the creation of reusable code that can be used to perform repeated data transformations, such as custom parsing, or perform calculations. In the simple example below, a custom function is defined for calculating the age of customers in the <strong class="screentext">Customer</strong> table:</p>
    <pre class="programlisting"><code class="hljs-code">let CalculateAge = (BirthDate as date) =&gt;
        Date.Year(CurrentDayQuery) - Date.Year(BirthDate)
in CalculateAge
</code></pre>
    <p class="fm-booktitle">This custom function takes a single parameter, <code class="inlinecode">BirthDate</code>, which must be a date data type. The <code class="inlinecode">Date.Year</code> function is used on both the <code class="inlinecode">CurrentDayQuery</code> reference and the <code class="inlinecode">BirthDate</code> parameter with the latter subtracted from the former in order to return the number of years. This function<a id="calibre_link-1948" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can be saved as a query called <code class="inlinecode">GetAge</code> and used within a custom column formula within the <code class="inlinecode">Customer</code> table as follows:</p>
    <pre class="programlisting"><code class="hljs-code">= GetAge([BirthDate])
</code></pre>
    <p class="fm-booktitle">Additional examples and uses for custom functions can be found in the official Microsoft documentation at the following link: <a href="https://bit.ly/33VJfRz" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/33VJfRz</span></a>.</p>
    <p class="fm-booktitle">You should now understand all of the various types of Power Query (M) queries that can be created during dataset development. We’ll next look at more specific details regarding M queries.</p>
    <h1 id="calibre_link-91" class="heading">Creating Power Query M queries</h1>
    <p class="fm-booktitle">As mentioned, the M language is a functional programming language that includes over 700 functions. Similar to other programming languages, M has its own specific syntax, structure, operators, and data<a id="calibre_link-1490" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> types that must be used when coding. Experienced Power Query (M) developers, for example, are very familiar with Lists, Records, and Tables and common use cases and M functions available for working with these specific types.</p>
    <p class="fm-booktitle">While a full exploration of the entire M language is beyond the scope of this book, there are a number of important subjects regarding M that we cover in the following sections as well as providing readers with examples of more complex M queries. For readers interested in fully understanding the M language, we refer them to the official <em class="italic">Power Query M language specification</em> found here: <a href="https://bit.ly/3vmFSyr" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3vmFSyr</span></a>.</p>
    <p class="fm-booktitle">We’ll first take a look at numeric data types in M.</p>
    <h2 id="calibre_link-92" class="calibre9">Numeric data types</h2>
    <p class="fm-booktitle">For structured data sources, such <a id="calibre_link-1497" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as SQL Server, the source column data types determine the data types applied in Power BI. For example, a currency or money data type in SQL Server results in a <strong class="screentext">Fixed Decimal Number</strong> data type in Power BI. Likewise, the integer data types in SQL Server result in a <strong class="screentext">Whole Number</strong> data type and the numeric and decimal data types in SQL Server result in <strong class="screentext">Decimal Number</strong> data types in Power BI. </p>
    <p class="fm-booktitle">When an M query is loaded to the data model in a Power BI dataset, a <strong class="screentext">Fixed Decimal Number </strong>data type is the equivalent of a (19,4) numeric or decimal data type in SQL Server. With four digits to the right of the decimal place, the use of the <strong class="screentext">Fixed Decimal Number</strong> data type avoids rounding errors. The <strong class="screentext">Decimal Number</strong> data type is equivalent to a floating point or approximate data type with a limit of 15 significant digits. </p>
    <p class="fm-booktitle">Given the potential for rounding errors with <strong class="screentext">Decimal Number</strong> data types and the performance advantage of <strong class="screentext">Fixed Decimal Number</strong> data types, if four digits of precision is sufficient, the <strong class="screentext">Fixed Decimal Number</strong> data type is recommended to store numbers with fractional components. All integer or whole number numeric columns should be stored as <strong class="screentext">Whole Number</strong> types in Power BI.</p>
    <p class="fm-booktitle">Numeric columns in M queries can be set to <strong class="screentext">Whole Number</strong>, <strong class="screentext">Fixed Decimal Number</strong>, and <strong class="screentext">Decimal Number</strong> data types via the following expressions, respectively&mdash;<code class="inlinecode">Int64.Type</code>, <code class="inlinecode">Currency.Type</code>, and <code class="inlinecode">type number</code>. The <code class="inlinecode">Table.TransformColumnTypes()</code> function is used in the following M query example to convert the data types of the <code class="inlinecode">Discount Amount</code>, <code class="inlinecode">Sales Amount</code>, and <code class="inlinecode">Extended Amount</code> columns:</p>
    <pre class="programlisting"><code class="hljs-code">let
    Source = AdWorksSQLServer,
    Sales = Source{[Schema = "BI", Item = "vFact_InternetSales"]}[Data],
    TypeChanges = Table.TransformColumnTypes(Sales,
            {
                {"Discount Amount", Int64.Type}, // Whole Number 
                {"Sales Amount", Currency.Type}, // Fixed Decimal Number
                {"Extended Amount", type number} // Decimal Number
            })
in
    TypeChanges
</code></pre>
    <p class="fm-booktitle">As M is a case-sensitive language, the data type expressions must be entered in the exact case, such as <code class="inlinecode">type number</code> rather than <code class="inlinecode">Type Number</code>. Note that single-line and multiline comments can be included in M queries. See the <em class="italic">M query examples</em> section later in this chapter for additional details.</p>
    <p class="fm-booktitle">Given the impact on performance<a id="calibre_link-1498" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and the potential for rounding errors, it’s important to check the numeric data types defined for each column of large fact tables. Additional details on data types are included in <em class="italic">Chapter 4</em>, <em class="italic">Designing Import and DirectQuery Data Models</em>.</p>
    <p class="fm-booktitle">Next, we’ll look at item (record) access using M.</p>
    <h2 id="calibre_link-93" class="calibre9">Item access in M</h2>
    <p class="fm-booktitle">Accessing records from tables, items <a id="calibre_link-1510" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>from lists, and values from records are fundamental to M query development. In the following example, the results of the <code class="inlinecode">BI.vDim_Account</code> SQL view are returned to Power BI using a slightly different M syntax than the customer dimension query from the previous section: </p>
    <pre class="programlisting"><code class="hljs-code">let
    Source = AdWorksSQLServer,
    AccountRecord = Source{[Name = "BI.vDim_Account"]},
    Account = AccountRecord[Data]
in
    Account
</code></pre>
    <p class="fm-booktitle">For this query, a record is retrieved from the <code class="inlinecode">AdWorksSQLServer</code> staging query based only on the <code class="inlinecode">Name</code> column. The <code class="inlinecode">Data</code> field of this record is then accessed in a separate variable (<code class="inlinecode">Account</code>) to return the results of the <code class="inlinecode">BI.vDim_Account</code> SQL view to Power BI. BI teams or the dataset designer can decide on a standard method for accessing the items exposed from a data source staging query.</p>
    <p class="fm-booktitle">The following sample code retrieves the <code class="inlinecode">"Cherry"</code> string value from an M list:</p>
    <pre class="programlisting"><code class="hljs-code">let
    Source = {"Apple","Banana","Cherry","Dates"},
    ItemFromList = Source{2}
in
    ItemFromList
</code></pre>
    <p class="fm-booktitle">M is a zero-based system such that <code class="inlinecode">Source{0}</code> would return the <code class="inlinecode">"Apple"</code> value and <code class="inlinecode">Source{4}</code> would return an error since there are only four items in the list. Zero-based access also applies to extracting characters from a text value. For example, the <code class="inlinecode">Text.Range("Brett",2,2)</code> M expression returns the <code class="inlinecode">et</code> characters. </p>
    <p class="fm-booktitle">The list value type in M is an ordered sequence of values. There are many functions available for analyzing and transforming list values, such as <code class="inlinecode">List.Count()</code> and <code class="inlinecode">List.Distinct()</code>. List functions that aggregate the values they contain (for example, <code class="inlinecode">List.Average()</code>) are often used <a id="calibre_link-1511" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>within grouping queries that invoke the <code class="inlinecode">Table.Group()</code> function. For a definitive list of all M functions, we refer the reader to the <em class="italic">Power Query M function reference</em> found here: <a href="https://bit.ly/3bLKJ1M" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3bLKJ1M</span></a>.</p>
    <p class="fm-booktitle">Next we’ll look at perhaps one of the most important aspects of M, query folding.</p>
    <h1 id="calibre_link-94" class="heading">Power Query M query examples</h1>
    <p class="fm-booktitle">As demonstrated in the <a id="calibre_link-1495" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>examples thus far, the combination of a mature data warehouse and a layer of SQL view objects within this source may eliminate any need for further data transformations. However, Power BI dataset designers should<a id="calibre_link-1512" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> still be familiar with the fundamentals of M queries and their most common use cases, as it’s often necessary to further extend and enhance source data. </p>
    <p class="fm-booktitle">The following sections demonstrate three common data transformation scenarios that can be implemented in M. Beyond retrieving the correct results, the M queries also generate SQL statements for execution by the source system via query folding, and comments are included for longer-term maintenance purposes. </p>
    <p class="fm-booktitle">If you’re new to M query development, you can create a blank query from the <strong class="screentext">Other</strong> category of data source connectors available within the <strong class="screentext">Get Data</strong> dialog. </p>
    <p class="fm-booktitle">Alternatively, you can duplicate an existing query via the right-click context menu of a query in the <strong class="screentext">Power Query Editor</strong> and then rename and revise the duplicate query. </p>
    <h3 id="calibre_link-95" class="heading1">Trailing three years filter</h3>
    <p class="fm-booktitle">The objective of this example is to<a id="calibre_link-1525" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> retrieve dates from three years prior to the current year through the current date. For example, on December 30th, 2021, the query should retrieve January 1st, 2018 through December 30th, 2021. This requirement ensures that three full years of historical data, plus the current year, is always available to support reporting.</p>
    <p class="fm-booktitle">The starting date and current date values for the filter condition are computed via <code class="inlinecode">Date</code> and <code class="inlinecode">DateTime</code> M functions and assigned variables names (<code class="inlinecode">StartDate, CurrentDate</code>). Since the starting date is always January 1st, it’s only necessary to compute the starting year and pass this value to the <code class="inlinecode">#date</code> constructor. </p>
    <p class="fm-booktitle">Finally, the two date<a id="calibre_link-1949" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> variables are passed to the <code class="inlinecode">Table.SelectRows()</code> function to implement the filter on the <strong class="screentext">Reseller Sales</strong> fact table view: </p>
    <pre class="programlisting"><code class="hljs-code">let
//Trailing Three Year Date Values
    CurrentDate = DateTime.Date(DateTime.LocalNow(),
    StartYear = Date.Year(CurrentDate)-3,
    StartDate = #date(StartYear,1,1), 
//Reseller Sales View
    Source = AdWorksSQLServer,
    ResellerSales = Source{[Schema = "BI", Item = "vFact_ResellerSales"]}[Data], 
//Trailing Three Year Filter
    FilterResellerSales = 
        Table.SelectRows(ResellerSales, each Date.From([OrderDate]) &gt;= StartDate and Date.From([OrderDate]) &lt;= CurrentDate)
in
    FilterResellerSales
</code></pre>
    <p class="fm-booktitle">As shown in the <strong class="screentext">View Native Query</strong> dialog available in the <strong class="screentext">Applied Steps</strong> window of the <strong class="screentext">Power Query Editor</strong>, the custom filter condition is translated into a T-SQL statement for the source SQL Server database to execute:</p>
    <pre class="programlisting"><code class="hljs-code">from [BI].[vFact_ResellerSales] as [_]
where [_].[OrderDate] &gt;= convert(datetime2, '2018-01-01 00:00:00') and [_].[OrderDate] &lt; convert(datetime2, '2021-12-31 00:00:00')
</code></pre>
    <p class="fm-booktitle">Note that the order of the variables in the expression doesn’t impact the final query. For example, the two <strong class="screentext">Reseller Sales</strong> view variables could be specified prior to the three date variables and the final <code class="inlinecode">FilterResellerSales</code> variable would still generate the same SQL query. Additionally, be advised that M is a case-sensitive language. For example, referencing the variable defined as <code class="inlinecode">StartDate</code> via the name <code class="inlinecode">Startdate</code> results in a failure.</p>
    <p class="fm-booktitle">Single-line comments can be entered in M queries following the double forward slash (<code class="inlinecode">//</code>) characters as per the trailing three years example. Multiline or delimited comments start with the (<code class="inlinecode">/*</code>) characters and end with the (<code class="inlinecode">*/</code>) characters, just like T-SQL queries for SQL Server.</p>
    <p class="fm-booktitle">If the requirement was only to retrieve<a id="calibre_link-1526" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the trailing three years of data relative to the current date (for example, December 30th, 2018 through December 30th, 2021) the <code class="inlinecode">StartDate</code> variable could be computed via the <code class="inlinecode">Date.AddYears()</code> function, as follows:</p>
    <pre class="programlisting"><code class="hljs-code">//Trailing three years (e.g. October 18th, 2018 through October 18, 2021)
   CurrentDate = DateTime.Date(DateTime.LocalNow()),
   StartDate = Date.AddYears(CurrentDate,-3)
</code></pre>
    <p class="fm-booktitle">Finally, note that the standard <strong class="screentext">AdventureWorksDW</strong> database only has reseller sales through 2013 so using the <code class="inlinecode">Date.AddYears()</code> function to subtract years from the <code class="inlinecode">CurrentDate</code> variable calculation is necessary if you wish to display results from a standard <strong class="screentext">AdventureWorksDW</strong> database.</p>
    <p class="fm-booktitle">In our next example, we use this trailing three years query but extend it so that in test and production environments all years are loaded.</p>
    <h3 id="calibre_link-96" class="heading1">Combining queries</h3>
    <p class="fm-booktitle">Multiple queries can be combined (appended) to one another through the use of the <code class="inlinecode">Table.Combine</code> function. This<a id="calibre_link-1488" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> function can be extremely useful in situations such as <strong class="screentext">Folder</strong> queries, where multiple files with the same format need to be appended together into a single table within the data model.</p>
    <p class="fm-booktitle">In this example, a parameter called <code class="inlinecode">Mode</code> has been created with a list of available parameter values of <strong class="screentext">Dev</strong>, <strong class="screentext">Test</strong>, and <strong class="screentext">Prod</strong>. The following query checks the value of this parameter. If the parameter is set to <strong class="screentext">Dev</strong>, then only the trailing three years are returned using the query from the previous example. Otherwise, the query from the previous example is combined with a table expression that retrieves all additional years. The two table expressions are appended to one another using the <code class="inlinecode">Table.Combine</code> function:</p>
    <pre class="programlisting"><code class="hljs-code">let
//Trailing Three Year Date Values
    CurrentDate = DateTime.Date(DateTime.LocalNow()),
    StartYear = Date.Year(CurrentDate)-3,
    StartDate = #date(StartYear,1,1), 
    Results = 
        if Mode = "Dev" 
            then Trailing3Years 
            else 
                Table.Combine( 
                    {   
                        Trailing3Years, 
                        Table.SelectRows(
                            AdWorksSQLServer{[Schema = "BI", Item = "vFact_ResellerSales"]}[Data], 
                            each Date.From([OrderDate]) &lt; StartDate)
                    }
                )
in
    Results
</code></pre>
    <p class="fm-booktitle">In this example, the <code class="inlinecode">Trailing3Years</code> query would be set to not load into the data model and this query would be used as the main fact table for reseller sales. By using this approach, developers can work with a much smaller local dataset and then easily include all required data when the dataset<a id="calibre_link-1489" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> moves from development to testing and production environments. Staging deployments in this manner is discussed in the <em class="italic">Staged deployments</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>.</p>
    <p class="fm-booktitle">This example also demonstrates the use of <code class="inlinecode">if</code> statements, which have an overall format of:</p>
    <pre class="programlisting"><code class="hljs-code">if &lt;true/false expression&gt; then &lt;expression&gt; else &lt;expression&gt;
</code></pre>
    <p class="fm-booktitle">In this example, the use of an <code class="inlinecode">if</code> statement prevents the query from including all rows from the <code class="inlinecode">vFact_ResellerSales</code> table when the <code class="inlinecode">Mode</code> is set to <code class="inlinecode">Dev</code>, providing faster data loading for developers and a smaller overall dataset size.</p>
    <p class="fm-booktitle">Our next example also deals with fact tables and involves incremental refresh.</p>
    <h3 id="calibre_link-97" class="heading1">Incremental refresh for fact tables</h3>
    <p class="fm-booktitle">Incremental refresh is a power Power BI<a id="calibre_link-1522" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> feature that can greatly decrease refresh times for extremely large fact tables. </p>
    <p class="fm-booktitle">Incremental refresh allows only part of the data (new and changed) within a table to be refreshed versus reloading all rows during every refresh cycle, which is the default refresh behavior for Power BI.</p>
    <p class="fm-booktitle">Using incremental refresh requires the use of two reserved parameters names, <code class="inlinecode">RangeStart</code> and <code class="inlinecode">RangeEnd</code>. These parameters must be defined as a type of date/time. In the following example, the internet sales query is modified to include filtering specific to the implementation of incremental refresh:</p>
    <pre class="programlisting"><code class="hljs-code">let
    Source = AdWorksSQLServer,
    InternetSales = Source{[Schema="BI",Item="vFact_InternetSales"]}[Data],
    FilterRows = Table.SelectRows(InternetSales, each [OrderDateKey] &gt; ConvertDateKey(RangeStart) and [OrderDateKey] &lt;= ConvertDateKey(RangeEnd))
in
    FilterRows
</code></pre>
    <p class="fm-booktitle">The code in the <code class="inlinecode">FilterRows</code> step uses the <code class="inlinecode">Table.SelectRows()</code> function in conjunction with the <code class="inlinecode">RangeStart</code> and <code class="inlinecode">RangeEnd</code> parameters as well as a custom function, <code class="inlinecode">ConvertDateKey</code>. The <code class="inlinecode">ConvertDateKey</code> function is necessary because the <code class="inlinecode">OrderDateKey</code> surrogate key column is used. The <code class="inlinecode">OrderDateKey</code> column is a surrogate key column because it stores the date as an integer value in the form of <code class="inlinecode">YYYYMMMDD</code> instead of as a date or date/time data type.</p>
    <p class="fm-booktitle">The <code class="inlinecode">ConvertDateKey</code> custom function code is provided next:</p>
    <pre class="programlisting"><code class="hljs-code">let ConvertDateKey = (DateTime as datetime) =&gt;
    Date.Year(DateTime) * 10000 + Date.Month(DateTime) * 100 + Date.Day(DateTime)
in
    ConvertDateKey
</code></pre>
    <p class="fm-booktitle">When filtering the table using the <code class="inlinecode">RangeStart</code> and <code class="inlinecode">RangeEnd</code> parameters, it is important that only one of the comparison <a id="calibre_link-1523" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>conditions contains an equal to (<code class="inlinecode">=</code>) clause. Otherwise, duplicate data may result since certain rows of data may fulfill the end condition of one refresh cycle and the start condition of the next refresh cycle.</p>
    <p class="fm-booktitle">The initial refresh cycle for that dataset loads all rows of data within the dataset and the <code class="inlinecode">RangeStart</code> parameter is set automatically by the service. The subsequent refresh cycle sets the <code class="inlinecode">RangeEnd</code> parameter to the current date and time such that only new and updated data is added to the data table.</p>
    <p class="fm-booktitle">Next, we’ll turn our attention to M query examples for dimensions, starting with the customer query.</p>
    <h3 id="calibre_link-98" class="heading1">Customer history column</h3>
    <p class="fm-booktitle">In this example, the goal is to add a column<a id="calibre_link-1513" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to the customer dimension table that groups the customers into four categories based on the date of their first purchase. Specifically, the new column needs to leverage the existing first purchase date column and assign the customer rows to one of the following four categories&mdash;<strong class="screentext">First Year Customer</strong>, <strong class="screentext">Second Year Customer</strong>, <strong class="screentext">Third Year Customer</strong>, and <strong class="screentext">Legacy Customer</strong>. </p>
    <p class="fm-booktitle">Since the column is computed daily with each scheduled refresh, it is used by the sales and marketing teams to focus their efforts on new and older customer segments.</p>
    <p class="fm-booktitle">A combination of date functions and conditional logic (<code class="inlinecode">if..then..else</code>) is used with the <code class="inlinecode">Table.AddColumn()</code> function to produce the new column:</p>
    <pre class="programlisting"><code class="hljs-code">let
// Customer History Date Bands
   CurrentDate = DateTime.Date(DateTime.LocalNow()),
   OneYearAgo = Date.AddYears(CurrentDate,-1),
   TwoYearsAgo = Date.AddYears(CurrentDate,-2),
   ThreeYearsAgo = Date.AddYears(CurrentDate,-3),
//Customer Dimension
    Source = AdWorksSQLServer,
    Customer = Source{[Schema = "BI", Item = "vDim_Customer"]}[Data],
    CustomerHistoryColumn = Table.AddColumn(Customer, "Customer History Segment", 
    each
    if [DateFirstPurchase] &gt;= OneYearAgo then "First Year Customer" 
    else if [DateFirstPurchase] &gt;= TwoYearsAgo and [Customer First Purchase Date] &lt; OneYearAgo then "Second Year Customer"
    else if [DateFirstPurchase] &gt;= ThreeYearsAgo and [Customer First Purchase Date] &lt; TwoYearsAgo then "Third Year Customer" 
else "Legacy Customer", type text)
in
    CustomerHistoryColumn
</code></pre>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 3.13</em> from the <strong class="screentext">Power Query Editor</strong>, the <strong class="screentext">Customer History Segment</strong> column produces one of four text values based on the <code class="inlinecode">DateFirstPurchase</code> column: </p>
    <p class="fm-acknowledgement"><img src="images/000312.png" alt="" class="calibre19" /></p>
    <p class="fm-acknowledgement">Figure 3.12: Customer History Segment column in Power Query Editor</p>
    <p class="fm-booktitle">Like the previous M query example of a trailing three year filter, the conditional logic for the derived customer column is<a id="calibre_link-1514" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> also translated into T-SQL via query folding:</p>
    <pre class="programlisting"><code class="hljs-code">    [_].[DateFirstPurchase] as [DateFirstPurchase],
    [_].[CommuteDistance] as [CommuteDistance],
    case
        when [_].[DateFirstPurchase] &gt;= convert(date, '2013-12-30')
        then 'First Year Customer'
        when [_].[DateFirstPurchase] &gt;= convert(date, '2012-12-30') and [_].[DateFirstPurchase] &lt; convert(date, '2013-12-30')
        then 'Second Year Customer'
        when [_].[DateFirstPurchase] &gt;= convert(date, '2011-12-30') and [_].[DateFirstPurchase] &lt; convert(date, '2012-12-30')
        then 'Third Year Customer'
        else 'Legacy Customer'
    end as [Customer History Segment]
from [BI].[vDim_Customer] as [_]
</code></pre>
    <p class="fm-booktitle">The two dynamic columns (<code class="inlinecode">Calendar Year Status</code> and <code class="inlinecode">Calendar Month Status</code>) included in the date dimension SQL view earlier in this chapter could also be computed via M functions. </p>
    <p class="fm-booktitle">We’ll now provide additional details regarding the final parameter to the <code class="inlinecode">Table.AddColumn()</code> function, in this case <code class="inlinecode">type text</code>.</p>
    <h4 class="heading2">Derived column data types</h4>
    <p class="fm-booktitle">The final parameter to the <code class="inlinecode">Table.AddColumn()</code> function is optional but should be specified to define the data type of the <a id="calibre_link-1515" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>new column. </p>
    <p class="fm-booktitle">In the Customer History Segment column example, the new column is defined as a text data type. If a whole number column was created, an <code class="inlinecode">Int64.Type</code> would be specified, such as the following example:</p>
    <pre class="programlisting"><code class="hljs-code">MyNewColumn = Table.AddColumn(Product, "My Column", each 5, <span class="code-highlight"><strong class="hljs-slc">Int64.Type</strong></span>)
</code></pre>
    <p class="fm-booktitle">If the data type of the column is not defined in the <code class="inlinecode">Table.AddColumn()</code> function or later in the query via the <code class="inlinecode">Table.TransformColumnTypes()</code> function, the new column is set as an <strong class="screentext">Any</strong> data type, as shown in the following screenshot:</p>
    <figure class="mediaobject"><img src="images/000342.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.13: Data Type of Any</p>
    <p class="fm-booktitle">Columns of the <strong class="screentext">Any</strong> data type are loaded to<a id="calibre_link-1516" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the data model as a text data type. Dataset designers should ensure that each column in every query has a data type specified. In other words, as a best practice, the <strong class="screentext">Any</strong> (that is, unknown) data type should not be allowed in M queries.</p>
    <p class="fm-booktitle">We’ll now move on to providing an additional M query example for the product dimension.</p>
    <h3 id="calibre_link-99" class="heading1">Product dimension integration</h3>
    <p class="fm-booktitle">The SQL view for the product <a id="calibre_link-1517" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dimension referenced in <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, contained the following four operations:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Join the <code class="inlinecode">Product</code>, <code class="inlinecode">ProductSubcategory</code>, and <code class="inlinecode">ProductCategory</code> dimension tables into a single query</li>
      <li class="calibre13">Create a custom product category group column (for example, Bikes versus Non-Bikes)</li>
      <li class="calibre13">Apply report-friendly column names with spaces and proper casing</li>
      <li class="calibre13">Replace any null values in the <code class="inlinecode">Product Subcategory</code> and <code class="inlinecode">Product Category</code> columns with the <code class="inlinecode">'Undefined'</code> value</li>
    </ol>
    <p class="fm-booktitle">Like almost all operations available to SQL <code class="inlinecode">SELECT</code> queries, the same query can also be created via M functions. If the SQL view<a id="calibre_link-1518" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> for the product dimension cannot be created within the data source, the following M query produces the same results:</p>
    <pre class="programlisting"><code class="hljs-code">let
    Source = AdWorksSQLServer,
//Product Dimension Table Views
    Product = Source{[Schema = "BI", Item = "vDim_Product"]}[Data],
    ProductSubCat = Source{[Schema = "BI", Item = "vDim_ProductSubcategory"]}[Data], 
    ProductCat = Source{[Schema = "BI", Item = "vDim_ProductCategory"]}[Data],
//Product Outer Joins 
    ProductJoinSubCat = Table.NestedJoin(Product,"ProductSubcategoryKey",ProductSubCat,"ProductSubcategoryKey","ProductSubCatTableCol",JoinKind.LeftOuter),
    ProductJoinSubCatCol = Table.ExpandTableColumn(ProductJoinSubCat,"ProductSubCatTableCol",{"EnglishProductSubcategoryName","ProductCategoryKey"},{"Product Subcategory", "ProductCategoryKey"}),
    ProductJoinCat = Table.NestedJoin(ProductJoinSubCatCol,"ProductCategoryKey",ProductCat,"ProductCategoryKey","ProductCatTableCol",JoinKind.LeftOuter),
    ProductJoinCatCol = Table.ExpandTableColumn(ProductJoinCat,"ProductCatTableCol", {"EnglishProductCategoryName"},{"Product Category"}),
//Select and Rename Columns
    ProductDimCols = Table.SelectColumns(ProductJoinCatCol,{"ProductKey","ProductAlternateKey","EnglishProductName","Product Subcategory","Product Category"}),
    ProductDimRenameCols = Table.RenameColumns(ProductDimCols,{
        {"ProductKey", "Product Key"},{"ProductAlternateKey","Product Alternate Key"},{"EnglishProductName","Product Name"}
    }),
//Product Category Group Column
    ProductCatGroupCol = Table.AddColumn(ProductDimRenameCols,"Product Category Group", each 
        if [Product Category] = "Bikes" then "Bikes"
        else if [Product Category] = null then "Undefined"
        else "Non-Bikes"
,type text),
//Remove Null Values 
    UndefinedCatAndSubcat = Table.ReplaceValue(ProductCatGroupCol,null,"Undefined",Replacer.ReplaceValue,{"Product Subcategory","Product Category"})
in
    UndefinedCatAndSubcat
</code></pre>
    <p class="fm-booktitle">The three product dimension tables in the <code class="inlinecode">dbo</code> schema of the data warehouse are referenced from the <code class="inlinecode">AdWorksSQLServer</code> staging query described earlier in this chapter.</p>
    <p class="fm-booktitle">The <code class="inlinecode">Table.NestedJoin()</code> function is used to execute the equivalent of the <code class="inlinecode">LEFT JOIN</code> operations from the SQL view, and the <code class="inlinecode">Table.ExpandTableColumn()</code> function extracts and renames the required <code class="inlinecode">Product Subcategory</code> and <code class="inlinecode">Product Category</code> columns. </p>
    <p class="fm-booktitle">Following the selection and renaming of columns, the <code class="inlinecode">Product Category</code> group column is created via a conditional expression<a id="calibre_link-1519" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> within the <code class="inlinecode">Table.AddColumn()</code> function. Finally, the <code class="inlinecode">Table.ReplaceValue()</code> function replaces any null values in the <code class="inlinecode">Product Category</code> and <code class="inlinecode">Product Subcategory</code> columns with the <code class="inlinecode">'Undefined'</code> text string. The <strong class="screentext">Power Query Editor</strong> provides a preview of the results as shown in <em class="italic">Figure 3.14</em>: </p>
    <figure class="mediaobject"><img src="images/000332.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.14: Power Query Editor preview of Product M query</p>
    <p class="fm-booktitle">Despite the additional steps and complexity of this query relative to the previous M query examples (trailing three years filter, <code class="inlinecode">Customer History Segment</code> column), the entire query is translated into a single SQL statement and executed by the source SQL Server database. The <strong class="screentext">View Native Query</strong> option in the <strong class="screentext">Applied Steps</strong> pane of the <strong class="screentext">Power Query Editor</strong> reveals the specific syntax of the SQL statement generated via query folding:</p>
    <pre class="programlisting"><code class="hljs-code">select [_].[ProductKey] as [Product Key],
    [_].[ProductAlternateKey] as [Product Alternate Key],
    [_].[EnglishProductName] as [Product Name],
    case
        when [_].[EnglishProductSubcategoryName] is null
        then 'Undefined'
        else [_].[EnglishProductSubcategoryName]
    end as [Product Subcategory],
    case
        when [_].[EnglishProductCategoryName] is null
        then 'Undefined'
        else [_].[EnglishProductCategoryName]
    end as [Product Category],
    case
        when [_].[EnglishProductCategoryName] = 'Bikes' and [_].[EnglishProductCategoryName] is not null
        then 'Bikes'
        when [_].[EnglishProductCategoryName] is null
        then 'Undefined'
        else 'Non-Bikes'
    end as [Product Category Group]
from  
</code></pre>
    <p class="fm-booktitle">Note that a dedicated SQL view object in the BI schema (for example, <code class="inlinecode">BI.vDim_ProductSubcategory</code>) is accessed for each of the three product dimension tables. As per the <em class="italic">SQL views</em> section of <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, it’s recommended to always access SQL views from Power BI datasets, as this declares a dependency with the source tables.</p>
    <p class="fm-booktitle">Note that the <code class="inlinecode">Table.Join()</code> function <a id="calibre_link-1520" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>could not be used in this scenario given the requirement for a left outer join and the presence of common column names. With a left outer join, the presence of common column names, such as <code class="inlinecode">ProductSubcategoryKey</code> or <code class="inlinecode">ProductCategoryKey</code>, for the tables in the join operation would cause an error. </p>
    <p class="fm-booktitle">Although a left outer join is the default behavior of the <code class="inlinecode">Table.NestedJoin()</code> function, it’s recommended to explicitly specify the join kind (for example, <code class="inlinecode">JoinKind.Inner</code>, <code class="inlinecode">JoinKind.LeftOuter</code>, or <code class="inlinecode">JoinKind.LeftAnti</code>) as per the <code class="inlinecode">ProductJoinSubCat</code> and <code class="inlinecode">ProductJoinCat</code> variables of the M query. As a refresher of the types of joins available in Power Query, please refer to the following link: <a href="https://bit.ly/3wWquJK" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3wWquJK</span></a>.</p>
    <p class="fm-booktitle">Note that, in general, if the <code class="inlinecode">Table.Join</code> function can be used then it should be preferred over <code class="inlinecode">Table.NestedJoin</code>. The reason is that <code class="inlinecode">Table.NestedJoin</code> uses local resources to perform the join operation while <code class="inlinecode">Table.Join</code> can be folded back to the source system and is thus generally more performant. It is worth noting then that the <strong class="screentext">Merge</strong> operation available in the <strong class="screentext">Power Query Editor</strong> <strong class="screentext">graphical user interface</strong> (<strong class="screentext">GUI</strong>) performs a <code class="inlinecode">Table.NestedJoin</code> by default.</p>
    <p class="fm-booktitle">Whenever any unstructured or business user-owned data sources are used as sources for a Power BI dataset, it’s usually appropriate to implement additional data quality and error-handling logic within the M query. </p>
    <p class="fm-booktitle">For example, a step that invokes the <code class="inlinecode">Table.Distinct()</code> function could be added to the <strong class="screentext">Sales and Margin Plan</strong> query that retrieves data from the Excel workbook to remove any duplicate rows. Additionally, the third parameter of the <code class="inlinecode">Table.SelectColumns()</code> function (for example, <code class="inlinecode">MissingField.UseNull</code>) can be used to account for scenarios in which source columns have been renamed or removed. </p>
    <p class="fm-booktitle">While the M language provides<a id="calibre_link-1521" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> extensive data transformation capabilities on its own, some experienced data professionals may be more comfortable with other languages like R and Python. We cover this topic in the next example.</p>
    <h3 id="calibre_link-100" class="heading1">R and Python script transformation</h3>
    <p class="fm-booktitle">It’s possible to execute an R or Python <a id="calibre_link-1524" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>script within an M query as part of a data transformation process.</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 3.15</em>, the <strong class="screentext">Run R script</strong> and <strong class="screentext">Run Python script</strong> commands are available on the <strong class="screentext">Transform</strong> tab of the <strong class="screentext">Power Query Editor</strong> in Power BI Desktop:</p>
    <figure class="mediaobject"><img src="images/000361.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.15: Run R script and Run Python script commands in Power Query Editor</p>
    <p class="fm-booktitle">To execute an R script or Python script in Power BI Desktop, R or Python need to be installed on the local machine as well as any packages used<a id="calibre_link-764" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> by the script. If the <strong class="screentext">data gateway</strong> is used, R, Python, and appropriate packages must be installed on the server running the data gateway as well. Most<a id="calibre_link-1950" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> importantly, for the scripts to work properly when the dataset is published to the Power BI service, the privacy levels for the data sources need to be set to <strong class="screentext">Public</strong>. </p>
    <p class="fm-booktitle">For most organizations, this limitation rules out the use of R and Python scripts for data transformations in Power BI. Additionally, the presence of R and Python scripts adds another layer of complexity to a solution that already includes SQL, M, and DAX.</p>
    <p class="fm-booktitle">Let’s next look at another way to create Power Query (M) queries using <strong class="screentext">dataflows</strong>.</p>
    <h1 id="calibre_link-101" class="heading">Dataflows</h1>
    <p class="fm-booktitle">Simply stated, <strong class="screentext">dataflows</strong> are Power Query M queries created in the Power BI service. For non-My Workspace workspaces, the <a id="calibre_link-759" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI service provides an interface nearly identical to the <strong class="screentext">Power Query Editor</strong> in Power BI Desktop for creating and editing Power Query queries. </p>
    <p class="fm-booktitle">Dataflows access source systems in the same manner as Power Query queries created in <strong class="screentext">Power Query Editor</strong> within Power BI Desktop. However, the data ingested from these queries for import mode dataflows is stored in Dataverse-compliant folders within an Azure Data Lake Storage Gen2 instance. Dataflows can also be created for DirectQuery access to source systems.</p>
    <p class="fm-booktitle">There are several key advantages to the use of dataflows within enterprise BI. Chief among these advantages is reusability. Once created, a dataflow can be used as a data source within multiple different Power BI Desktop files during dataset design. Power BI dataflows are an option when using the <strong class="screentext">Get data</strong> feature in both Power BI Desktop and <strong class="screentext">Power Query Editor</strong> as shown in <em class="italic">Figure 3.16</em>:</p>
    <figure class="mediaobject"><img src="images/000351.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.16: Power BI dataflows as a data source</p>
    <p class="fm-booktitle">This means that the data transformation logic within a query can be created once and leveraged across multiple different datasets, making the creation of datasets more efficient, more standardized, and less error-prone.</p>
    <p class="fm-booktitle">The second key advantage of dataflows for import mode datasets is that the dataflow isolates the source systems from the Power BI datasets. This means that refreshes from Power BI datasets pull from the Azure <a id="calibre_link-760" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Data Lake Storage Gen2 instance instead of the source systems themselves, keeping the loading of data refreshes from multiple Power BI datasets from impacting the source systems. </p>
    <p class="fm-booktitle">The dataflow can be refreshed once, and then refreshes in all Power BI datasets utilizing the dataflow only impact the highly scalable Azure Data Lake Storage Gen2 instance and not the source systems. This is even more important if the source data system accessed by the dataflow is on-premises and requires a data gateway. </p>
    <p class="fm-booktitle">Since the data pulled by Power BI Desktop datasets is in an Azure Data Lake Storage Gen2 instance, no data gateway is required for refreshing these datasets. The data gateway is only required when refreshing the dataflow itself.</p>
    <p class="fm-booktitle">The isolation of the source data systems from the Power BI datasets also has an advantage in terms of security. Instead of providing access credentials for data source systems to multiple dataset designers, the enterprise BI team can now simply provide authorization credentials to the dataflow and not the source systems.</p>
    <p class="fm-booktitle">While an idealized state for enterprise BI would include a single data warehouse and a corresponding single Power BI dataset for reporting purposes, such an idealized state is often not possible. For example, a customized product list might be stored by the marketing team in a SharePoint site<a id="calibre_link-1951" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and this data is not planned to be included in the corporate data warehouse any time soon. However, this list is applicable to multiple Power BI datasets that support sales, marketing, and supply chain. </p>
    <p class="fm-booktitle">In such a situation, a single dataflow could be created that connects to this source file and applies the necessary transforms. The sales, marketing, and supply chain datasets could then all connect to this one dataflow such that any updates to this central source naturally flow to all dependent datasets.</p>
    <p class="fm-booktitle">As mentioned, dataflows provide several key advantages. When used within Power BI Premium, additional features are exposed and available for dataflows.</p>
    <h2 id="calibre_link-102" class="calibre9">Power BI Premium dataflow features</h2>
    <p class="fm-booktitle">Power BI Premium supports <a id="calibre_link-1420" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>additional dataflow features, including the <strong class="screentext">Enhanced compute engine</strong>, <strong class="screentext">DirectQuery</strong>, <strong class="screentext">Computed entities</strong>, <strong class="screentext">Linked entities</strong>, <strong class="screentext">Incremental refresh</strong>, and machine learning capabilities in the form of <strong class="screentext">AutoML</strong>. </p>
    <p class="fm-booktitle">The enhanced compute engine can dramatically decrease refresh speeds for complex transformations such as joins, group by, filter, and distinct operations. As previously mentioned, creating dataflows for DirectQuery sources is supported but only in Premium. It is important to note that composite models that have both import and DirectQuery sources currently do not support the inclusion of dataflows as a data source within these composite models.</p>
    <p class="fm-booktitle">Computed entities allow you to perform in-storage computations, combining data from multiple dataflows into a new, merged entity or enhancing an existing entity. For example, a Product dataflow could be enhanced by adding information from Product Category and Product Subcategory dataflows.</p>
    <p class="fm-booktitle">Similar to computed entities, linked entities allow you to reference other dataflows in order to perform calculations (computed entities) or establish a table that serves as a single source of truth for other dataflows.</p>
    <p class="fm-booktitle">Finally, AutoML automates the data science behind the creation <a id="calibre_link-1088" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of <strong class="screentext">machine learning </strong>(<strong class="screentext">ML</strong>) models, enabling the automatic recognition of patterns, sentiment analysis, and other ML use cases.</p>
    <p class="fm-booktitle">To wrap up this chapter, we’ll <a id="calibre_link-1421" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>explore the different editing tools used to create M queries.</p>
    <h1 id="calibre_link-103" class="heading">Power Query M editing tools</h1>
    <p class="fm-booktitle">Similar to other languages and project types, code-editing tools are available to support the development, documentation, and version control of M queries. </p>
    <p class="fm-booktitle">In addition to the Advanced Editor within <a id="calibre_link-1480" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI Desktop and the dataflows editing interface of the Power BI service, dataset designers can use Visual Studio or Visual Studio Code to author and manage the M queries for Power BI and other Microsoft projects. These<a id="calibre_link-1482" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> tools include common development features, such as IntelliSense, syntax highlighting, and integrated source control.</p>
    <p class="fm-booktitle">We’ll explore the different tools supporting M query development in the following sections.</p>
    <h2 id="calibre_link-104" class="calibre9">Advanced Editor</h2>
    <p class="fm-booktitle">In Power BI Desktop and for dataflows in the<a id="calibre_link-1483" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Power BI service, the M code for each query can be accessed from the <strong class="screentext">Advanced Editor</strong> window within the <strong class="screentext">Power Query Editor</strong>. </p>
    <p class="fm-booktitle">With the <strong class="screentext">Power Query Editor</strong> open, select a query of interest from the list of queries on the left and click on the <strong class="screentext">Advanced Editor</strong> icon from the <strong class="screentext">Home</strong> tab to access the <strong class="screentext">Advanced Editor</strong> dialog shown in <em class="italic">Figure 3.17</em>:</p>
    <figure class="mediaobject"><img src="images/000380.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.17: Advanced Editor in Power BI Desktop</p>
    <p class="fm-booktitle">Experienced M query authors often use the data transformation icons available in the <strong class="screentext">Power Query Editor</strong> to quickly produce an initial version of one or a few of the requirements of the query. The author<a id="calibre_link-1484" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> then uses the <strong class="screentext">Advanced Editor</strong> or an external M editing tool to analyze the M code generated by the <strong class="screentext">Power Query Editor</strong> and can revise or enhance this code, such as by changing variable names or utilizing optional parameters of certain M functions.</p>
    <p class="fm-booktitle">For the most common and simple data transformation tasks, such as filtering out rows based on one value of a column (for example, <code class="inlinecode">State = "Kansas"</code>), the M code generated by the <strong class="screentext">Power Query Editor</strong> usually requires minimal revision. For more complex queries with custom or less common requirements, the <strong class="screentext">Power Query Editor</strong> graphical interface is less helpful and a greater level of direct M development is necessary.</p>
    <p class="fm-booktitle">While the Advanced Editor is convenient, it lacks proper source control integration, a deficiency that can be solved through the use of alternative tools such as Visual Studio Code.</p>
    <h2 id="calibre_link-105" class="calibre9">Visual Studio Code</h2>
    <p class="fm-booktitle">Visual Studio Code is a free, lightweight code-editing tool from Microsoft that’s available on all platforms (Windows, Mac, and Linux). An<a id="calibre_link-1487" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> extension for Visual Studio Code, <strong class="screentext">Power Query / M Language</strong>, provides code-editing support for the Power Query M language as shown in <em class="italic">Figure 3.18</em>:</p>
    <figure class="mediaobject"><img src="images/000371.png" alt="A screenshot of a computer  Description automatically generated with medium confidence" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.18: M query in Visual Studio Code</p>
    <p class="fm-booktitle">In this example, the same <code class="inlinecode">Product</code> query viewed in the Advanced Editor of Power BI Desktop has been copied into a Visual Studio Code file and saved with a (<code class="inlinecode">.pq</code>) file extension. Once saved with a supported file extension, code-editing features, such as colorization, auto-closing, and surrounding detection, are applied. M query files can be opened and saved with the following four file extensions&mdash;<code class="inlinecode">.m</code>, <code class="inlinecode">.M</code>, <code class="inlinecode">.pq</code>, and <code class="inlinecode">.PQ</code>.</p>
    <p class="fm-booktitle">It must be noted that M code developed in Visual Studio Code cannot be used directly by Power BI. The code must be copied from Visual Studio Code or a source control repository and pasted into Advanced Editor. However, experienced enterprise BI teams recognize the importance of proper version control, especially as it relates to changes to underlying data tables and data transformations.</p>
    <p class="fm-booktitle">Since the <code class="inlinecode">.pq</code> file extension is used by the Power Query SDK for Visual Studio, this file extension is recommended for storing M queries in Visual Studio Code, as well as in Visual Studio, which we’ll cover in<a id="calibre_link-1952" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the next section.</p>
    <h2 id="calibre_link-106" class="calibre9">Visual Studio</h2>
    <p class="fm-booktitle">Visual Studio is the full-featured version of the more lightweight Visual Studio Code and is a premier <strong class="screentext">integrated development environment</strong> (<strong class="screentext">IDE</strong>) in wide use throughout the technology industry. For Visual Studio 2015 and <a id="calibre_link-1485" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>later, the Power Query SDK can be used to create data connector and M query projects, as shown in <em class="italic">Figure 3.19</em>:</p>
    <figure class="mediaobject"><img src="images/000398.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.19: Power Query project types in Visual Studio</p>
    <p class="fm-booktitle">With a new PQ file solution and project in Visual Studio, the M queries of a Power BI dataset can be added as separate (<code class="inlinecode">.pq</code>) files, as shown in <em class="italic">Figure 3.20</em>: </p>
    <figure class="mediaobject"><img src="images/000389.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 3.20: Power Query project in Visual Studio 2019</p>
    <p class="fm-booktitle">Unlike the extension for Visual Studio Code, the file extension type for Power Query projects is exclusively to (<code class="inlinecode">.pq</code>. Most importantly, full M language IntelliSense is supported, making it dramatically easier to find M functions relevant to specific data transformation operations. IntelliSense is the general term for code-editing features such as code completion, content assist (parameter information), and code hinting.</p>
    <p class="fm-booktitle">Moreover, unlike the extension for Visual<a id="calibre_link-1486" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Studio Code, M queries can be executed from within Visual Studio via the Power Query SDK for Visual Studio. To execute an M query in Visual Studio, such as in the preceding example, click the <strong class="screentext">Start</strong> button on the toolbar (green play icon) or press the <em class="italic">F5</em> key. </p>
    <p class="fm-booktitle">You can also right-click the Power Query project (for example, <strong class="screentext">AdWorks Enterprise Import</strong>) to configure properties of the M query project, such as the maximum output rows to return and whether native queries can be executed. </p>
    <p class="fm-booktitle">To install the Power Query SDK for Visual Studio, access the <strong class="screentext">Visual Studio Marketplace</strong> (<strong class="screentext">Extensions | Manage Extensions</strong>) and search for the name of the extension (<strong class="screentext">Power Query SDK</strong>). </p>
    <p class="fm-booktitle">The Power Query SDK for Visual Studio enables standard integration with source control and project management tools, such as Azure DevOps services (formerly Visual Studio Team Services).</p>
    <p class="fm-booktitle">This completes our exploration of connecting to sources and transforming data with M. </p>
    <h1 id="calibre_link-107" class="heading">Summary</h1>
    <p class="fm-booktitle">In this chapter, we’ve covered many of the components of the data retrieval process used to support the dataset for this project as described in <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>. This included constructing a data access layer and retrieval process for a dataset and using M queries used to define and load the dimension and fact tables of the dataset. </p>
    <p class="fm-booktitle">In the next chapter, we’ll leverage the M queries and design techniques described in this chapter to create import and DirectQuery data models. </p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-0">
<div id="calibre_link-1953" class="calibre2">
<div id="calibre_link-1954" class="calibre3"><div id="calibre_link-1955" class="calibre4">
    <h1 class="heading">4</h1>
    <h1 id="calibre_link-108" class="mainheading">Designing Import, DirectQuery, and Composite Data Models</h1>
    <p class="fm-booktitle">This chapter utilizes the queries described in <em class="italic">Chapter 3</em>, <em class="italic">Connecting To Sources And Transforming Data With M</em>, to create import, DirectQuery, and composite data models. Relationships are created between fact and dimension tables to enable business users to analyze the fact data for both Internet Sales and Reseller Sales simultaneously by using common dimension tables and across multiple business dates. In addition, business users can compare these fact tables against the Annual Sales and Margin Plan.</p>
    <p class="fm-booktitle">This chapter also contains recommended practices for model metadata such as assigning data categories to columns and providing users with a simplified field list. Finally, we review common performance analysis tools and optimization techniques for import and DirectQuery data models. </p>
    <p class="fm-booktitle">As described in the <em class="italic">Dataset planning</em> section of <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, data models can have modes of either import, DirectQuery, or composite. The implications of the design choices for data models significantly influence many factors of Power BI solutions including optimizations applied to source systems to support DirectQuery access and the configuration of incremental data refresh for import mode fact tables.</p>
    <p class="fm-booktitle">In this chapter, we review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">Dataset layers</li>
      <li class="bulletlist">The data model</li>
      <li class="bulletlist">Relationships</li>
      <li class="bulletlist">Model metadata</li>
      <li class="bulletlist">Optimizing performance</li>
    </ul>
    <p class="fm-booktitle">We start by taking a look at the different layers within data models (datasets).</p>
    <h1 id="calibre_link-109" class="heading">Dataset layers</h1>
    <p class="fm-booktitle">As covered in <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, and<em class="italic"> Chapter 3</em>, <em class="italic">Connecting To Sources And Transforming Data With M</em>, Power BI datasets are composed of three tightly integrated layers, which <a id="calibre_link-806" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are all included within a Power BI Desktop file. </p>
    <p class="fm-booktitle">The first layer, the M queries described in <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, connect to data sources and optionally apply data cleansing and transformation processes to this source data to support the Data Model. </p>
    <p class="fm-booktitle">The second layer, the Data Model and the subject of this chapter, primarily involves the relationships defined between fact and dimension tables, hierarchies reflecting multiple levels of granularity of a dimension, and metadata properties such as the sort order applied to columns. </p>
    <p class="fm-booktitle">The final layer of datasets is discussed in <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, <strong class="screentext">Data Analysis Expressions</strong> (<strong class="screentext">DAX</strong>) measures. DAX measures leverage the Data Model to deliver <a id="calibre_link-755" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>analytical insights for presentation in Power BI and other tools.</p>
    <p class="fm-booktitle">The term <strong class="screentext">Data Model</strong> is often used instead of <strong class="screentext">dataset</strong>, particularly in the context of Analysis Services. Analysis <a id="calibre_link-776" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Services Tabular models include the same three layers as Power BI datasets. </p>
    <p class="fm-booktitle">In other contexts, however, Data Model refers exclusively to the relationships, measures, and metadata, but not the source queries. For this reason, and given the use of the term datasets in the Power BI service, the term dataset (and dataset designer) is recommended.</p>
    <p class="fm-booktitle"><em class="italic">Figure 4.1</em> summarizes the role of each of the three dataset layers:</p>
    <figure class="mediaobject"><img src="images/000418.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.1: Three layers of datasets</p>
    <p class="fm-booktitle">At the Data Model layer, all data integration and transformations should be complete. For example, while it is certainly possible to create additional columns and tables via DAX calculated <a id="calibre_link-807" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>columns and tables, other tools such as data warehouse databases, SQL view objects, and M queries are almost always better suited for this need. </p>
    <p class="fm-booktitle">Ensure that each layer of the dataset is being used for its intended role. For example, DAX measures should not contain complex logic that attempts to work around data quality issues that can be addressed at the source or in a transformation within a source query. Likewise, DAX measure expressions should not be limited by incorrect data types (for example, a number stored as text) or missing columns on the date table. Dataset designers and data source owners can work together to keep the analytical layers of datasets focused exclusively on analytics.</p>
    <p class="fm-booktitle">Before diving into an exploration of the objectives for datasets, we first update the guidance from the first edition of this book.</p>
    <h2 id="calibre_link-110" class="calibre9">Power BI as a superset of Azure Analysis Services</h2>
    <p class="fm-booktitle">In the first edition of this book, organizations would typically use Power BI for small and simple self-service datasets but provision <strong class="screentext">Azure Analysis Services</strong> (<strong class="screentext">AAS</strong>) or <strong class="screentext">SQL Server Analysis Services</strong> (<strong class="screentext">SSAS</strong>) resources for large models requiring <a id="calibre_link-1741" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>enterprise features such as partitions and <a id="calibre_link-1301" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>object-level security. Microsoft has now closed prior feature and scalability <a id="calibre_link-549" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>gaps with Analysis Services and added powerful modeling features exclusive to Power BI Premium-hosted datasets. </p>
    <p class="fm-booktitle">For example, only a Power BI dataset can be designed to blend import and DirectQuery data sources (composite models), to include one or multiple aggregation tables to accelerate performance over large sources, and only a Power BI dataset can have incremental refresh policies managed by the Power BI service. </p>
    <p class="fm-booktitle">Given the new modeling scenarios supported by Power BI exclusive features as well as the reduced management overhead provided by incremental refresh policies, new enterprise models are now typically deployed to Power BI Premium workspaces. Likewise, existing Analysis Services models are commonly migrated to Power BI Premium to take advantage of new enterprise modeling features and to align with Microsoft’s product roadmap.</p>
    <p class="fm-booktitle">We now move on to dataset objectives.</p>
    <h2 id="calibre_link-111" class="calibre9">Dataset objectives</h2>
    <p class="fm-booktitle">The intent of a Power BI dataset is to provide a central “source of truth” data source that’s easy to use <a id="calibre_link-814" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>for report authors and analysts, applies all required security policies, and reliably delivers adequate performance at the required scale. </p>
    <p class="fm-booktitle">For both Power BI projects and longer-term deployments, it’s critical to distinguish Power BI datasets from Power BI reports and dashboards. Although Power BI Desktop is used to develop both datasets and reports, a Power BI dataset is a tabular Analysis Services Data Model internally. Power BI reports, which are also saved as <code class="inlinecode">.pbix</code> files, only connect to the dataset and thus exclusively leverage Power BI Desktop’s visualization features, such as bookmarks and slicer visuals.</p>
    <p class="fm-booktitle">As per <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, datasets and reports are also associated with unique technical and non-technical skills. A Power BI report developer, for example, should understand visualization standards, the essential logic and structure of the dataset, and how to distribute this content via Power BI Apps. However, the report developer doesn’t necessarily need to know any programming languages and can iterate very quickly on reports and dashboards. </p>
    <p class="fm-booktitle">Given that the dataset serves as the bridge between data sources and analytical queries, it’s important to proactively evaluate datasets relative to longer-term objectives. Large, consolidated datasets should be designed to support multiple teams and projects and to provide a standard <a id="calibre_link-815" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>version or definition of core metrics. Although organizations may enable business users to create datasets for specific use cases, corporate BI solutions should not utilize datasets like individual reports for projects or teams.</p>
    <p class="fm-booktitle"><em class="italic">Table 4.1</em> summarizes the primary objectives of datasets and identifies the questions that can be used to evaluate a dataset in relation to each objective:</p>
    <table id="calibre_link-1956" class="table-container">
      <tbody class="calibre16">
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Objective</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Success criteria</strong></p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">User interface</p>
          </td>
          <td class="table-cell">
            <p class="normal2">How difficult is it for business users to build a report from scratch?</p>
            <p class="normal2">Are users able to easily find the measures and columns needed?</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Version control</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Do the measures align with an official, documented definition? </p>
            <p class="normal2">Are the same dimensions reused across multiple business processes?</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Data security</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Have <strong class="keyword">row-level security (RLS)</strong> roles been implemented and thoroughly tested? </p>
            <p class="normal2">Are <strong class="keyword">Azure Activity Directory (AAD)</strong> security groups used to implement security?</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Performance</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Are users able to interact with reports at the speed of thought or, at a minimum, at an acceptable level of performance? </p>
            <p class="normal2">Are the base or primary DAX measures efficient?</p>
            <p class="normal2">Has a repeatable, performance testing process with baseline queries been created?</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Scalability</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can the dataset support additional business processes and/or history?</p>
            <p class="normal2">Can the dataset support additional users and workloads?</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Analytics</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Does the dataset deliver advanced insights (out of the box)? </p>
            <p class="normal2">Are any local (report-level) measures or complex filters being used?</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Availability</p>
          </td>
          <td class="table-cell">
            <p class="normal2">What is the level of confidence in the data sources and the data retrieval process?</p>
            <p class="normal2">Are there dependencies that can be removed or potential errors that can be trapped?</p>
            <p class="normal2">Is the dataset being backed up regularly?</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Manageability</p>
          </td>
          <td class="table-cell">
            <p class="normal2">How difficult is it to implement changes or to troubleshoot issues?</p>
            <p class="normal2">Can existing data transformation and analytical logic be consolidated?</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="fm-acknowledgement">Table 4.1: Dataset objectives</p>
    <p class="fm-booktitle">Several of the objectives are self-explanatory, but others, such as availability and manageability, are sometimes overlooked. For example, the same business logic may be built into many individual DAX measures, making the dataset more difficult to maintain as requirements change. Additionally, there may be certain hardcoded dependencies within the M queries that <a id="calibre_link-816" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>could cause a dataset refresh to fail. Dataset designers and BI teams must balance the need to deliver business value quickly while not compromising the sustainability of the solution.</p>
    <p class="fm-booktitle">To simplify individual measures and improve manageability, common logic can be built into a small subset of hidden DAX measures. The DAX measures visible in the fields list can reference these hidden measures and thus automatically update if any changes are necessary. This is very similar to parameters and data source staging queries in M as per <em class="italic">Chapter 3</em>, <em class="italic">Connecting To Sources And Transforming Data With M</em>. Examples of centralizing DAX logic are provided later in this chapter within the <em class="italic">Parameter tables</em> section.</p>
    <p class="fm-booktitle">Now that we have covered dataset objectives, we next consider how objectives might compete with one another.</p>
    <h3 id="calibre_link-112" class="heading1">Competing objectives</h3>
    <p class="fm-booktitle">As a dataset is expanded to support more dimension and fact tables, advanced analytics, and more <a id="calibre_link-817" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>business users, it may be necessary to compromise certain objectives in order to deliver others. </p>
    <p class="fm-booktitle">A common example is the desire to maintain in-memory performance over very large source tables in the hundreds of millions or even billions of rows. In this case, as it may not be technically feasible or desirable to support the scalability with in-memory import mode tables, a composite model could be created containing a DirectQuery reference to the large fact table and an import (in-memory) aggregation table designed to resolve common, summary-level report queries.</p>
    <p class="fm-booktitle">In addition to competing objectives, external factors can also influence dataset design.</p>
    <h3 id="calibre_link-113" class="heading1">External factors</h3>
    <p class="fm-booktitle">Just like any other database, a well-designed Power BI dataset may still fail to deliver its objectives due to external factors. For example, Power BI reports can be created with wide, data-extract like table <a id="calibre_link-818" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visuals which result in expensive, inefficient queries given the columnar data store of Power BI datasets. Likewise, report authors may try to include 12-15 or more visualizations on the same report page resulting in throttling or performance issues as many users attempt to access this report page concurrently. </p>
    <p class="fm-booktitle">Additionally, even when the compression of an import mode dataset is maximized and the DAX measures are efficient, there may be insufficient hardware resources available to support the given reporting workload. It’s the responsibility of the Power BI admin, as described in <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, and potentially any delegated capacity administrators to utilize the monitoring capabilities of Power BI and to provision the necessary resources to ensure sufficient performance.</p>
    <p class="fm-booktitle">Now that the various design objectives, considerations, and external factors are understood, we turn our attention to the dataset or data model itself.</p>
    <h1 id="calibre_link-114" class="heading">The Data Model </h1>
    <p class="fm-booktitle">The Data Model layer of the Power BI dataset consists of the <strong class="screentext">Model view</strong>, the <strong class="screentext">Data view</strong>, and the <strong class="screentext">Fields</strong> list <a id="calibre_link-777" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>exposed in the <strong class="screentext">Report view</strong>. Each of the three views <a id="calibre_link-1144" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>in Power BI Desktop is accessible via an icon in the top-left menu <a id="calibre_link-841" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>below the toolbar, although the <strong class="screentext">Data view</strong> is exclusively available to import <a id="calibre_link-1634" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>mode and composite datasets. </p>
    <p class="fm-booktitle">Let’s first take a look at the Model view.</p>
    <h2 id="calibre_link-115" class="calibre9">The Model view</h2>
    <p class="fm-booktitle">The Model view provides the equivalent of a database diagram specific to the tables loaded to the <a id="calibre_link-779" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dataset. The relationship lines and icons identify the cardinality <a id="calibre_link-1957" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of the relationship such as the parent table (1) having a one-to-many (*) relationship with the child table. </p>
    <p class="fm-booktitle">A solid line indicates that the relationship is active, while a dotted line denotes an inactive relationship that can only be activated via the <code class="inlinecode">USERELATIONSHIP()</code> DAX expression. </p>
    <p class="fm-booktitle">The arrow icons on the relationship lines advise whether cross-filtering is single-directional (one arrow → one way) or bidirectional (two arrows). Composite models introduced the concept of limited or weak relationships. Weak relationships are displayed with breaks in the relationship line at either end and semi-circle line endings.</p>
    <p class="fm-booktitle"><em class="italic">Figure 4.2</em> displays an example of the Model view. In <em class="italic">Figure 4.2</em>, only the <strong class="screentext">Reseller</strong> to <strong class="screentext">Reseller Sales</strong> relationship is bidirectional and the relationships between all tables are active:</p>
    <figure class="mediaobject"><img src="images/000408.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.2: Model view</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 4.2</em> referencing the <strong class="screentext">Reseller Sales</strong> tab, multiple views or layouts for the model can be created in the Model view. Creating multiple layout diagrams such as one per fact table <a id="calibre_link-780" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>is a good practice similar to creating and maintaining bus <a id="calibre_link-1145" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>matrix documentation. Particularly with larger models involving many tables, the ability to quickly view a model layout to understand the tables and relationships relevant to a given scenario such as the <strong class="screentext">Reseller Sales</strong> table and its relationships makes the dataset more manageable. </p>
    <p class="fm-booktitle">Also shown in <em class="italic">Figure 4.2</em>, the bidirectional cross-filtering relationship between the <strong class="screentext">Reseller</strong> table and the <strong class="screentext">Reseller Sales</strong> table, a filter applied to the <strong class="screentext">Employee</strong> table would filter the <strong class="screentext">Reseller Sales</strong> table and then also filter the <strong class="screentext">Reseller</strong> dimension table. </p>
    <p class="fm-booktitle">Any column with a slashed circle and arc icon next to it on the right indicates that the column is not visible in the Report view. For certain tables that are only used for internal logic, such as bridge tables or measure support, the entire table can be hidden by clicking the circle and arc (“eyeball”) icon to the right of the table name. Certain settings, such as <strong class="screentext">Custom format strings</strong>, can only be accessed via the Model view’s <strong class="screentext">Properties</strong> pane.</p>
    <p class="fm-booktitle">Double-clicking a relationship line, or right-clicking the relationship line and choosing <strong class="screentext">Properties</strong>, displays the <strong class="screentext">Edit relationship</strong> dialog which displays and allows you to modify the columns defining <a id="calibre_link-781" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the relationship, the <strong class="screentext">Cardinality (One to one 1:1, One to many 1:*</strong>, <strong class="screentext">Many to one *:1, Many to many *:*)</strong>, the <strong class="screentext">Cross-filter direction (Single or Both)</strong>, and <a id="calibre_link-1146" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>whether the relationship is active or passive. The <strong class="screentext">Edit relationship</strong> dialog is shown in <em class="italic">Figure 4.3</em>.</p>
    <figure class="mediaobject"><img src="images/000013.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.3: Edit relationship dialog</p>
    <p class="fm-booktitle">The bidirectional relationship between <strong class="screentext">Reseller</strong> and <strong class="screentext">Reseller Sales</strong> from this example is only intended to <a id="calibre_link-782" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>demonstrate the graphical representation of <a id="calibre_link-1147" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>relationships in the Model view. Bidirectional relationships <strong class="screentext">(Both)</strong> should only be applied in specific scenarios, as described in the <em class="italic">Bidirectional relationships</em> section later in this chapter.</p>
    <p class="fm-booktitle"><em class="italic">Figure 4.4</em> displays the Model view for a similar data model built as a composite data model.</p>
    <figure class="mediaobject"><img src="images/000003.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.4: Composite data model</p>
    <p class="fm-booktitle">In <em class="italic">Figure 4.4</em>, the <strong class="screentext">Reseller</strong>, <strong class="screentext">Employee</strong>, <strong class="screentext">Product</strong> and <strong class="screentext">Currency</strong> tables are import mode tables. The <strong class="screentext">Reseller Sales</strong> table is a DirectQuery mode table as designated by the solid bar above the table name. Finally, the <strong class="screentext">Date</strong> table is a a <strong class="screentext">Dual</strong> mode table, meaning that this table supports both import and DirectQuery. Dual mode tables have a dashed line above their table names. </p>
    <p class="fm-booktitle">Notice that the relationship lines are broken between the <strong class="screentext">Reseller Sales</strong> table and the import mode tables. This designates a weak relationship between these tables since they are using different <strong class="screentext">Storage modes</strong>. </p>
    <p class="fm-booktitle">However, since the <strong class="screentext">Dates</strong> table is <strong class="screentext">Dual</strong> mode, its relationship with <strong class="screentext">Reseller Sales</strong> is not a weak relationship <a id="calibre_link-1958" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>since both support DirectQuery. It is important to note that <a id="calibre_link-1959" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>only DirectQuery tables can be switched to <strong class="screentext">Dual</strong> mode using the <strong class="screentext">Advanced</strong> section of the Model view’s <strong class="screentext">Properties</strong> pane. </p>
    <p class="fm-booktitle">We next explore the Data view.</p>
    <h2 id="calibre_link-116" class="calibre9">The Data view</h2>
    <p class="fm-booktitle">The <strong class="screentext">Data</strong> view provides <a id="calibre_link-842" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visibility to the imported rows for each table as well as important <a id="calibre_link-778" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>metadata, such as the count of rows and the distinct values for columns. In <em class="italic">Figure 4.5</em>, the <strong class="screentext">Freight</strong> column of the <strong class="screentext">Reseller Sales</strong> table has been selected in the <strong class="screentext">Data</strong> view, as indicated by the vertical bar to the left of the table icon at the top left:</p>
    <figure class="mediaobject"> <img src="images/000032.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.5: Data view</p>
    <p class="fm-booktitle">Metadata of the column and/or table selected is displayed at the bottom of the Data view window. For example, selecting the <strong class="screentext">Freight</strong> column as per <em class="italic">Figure 4.4</em> results in a status message noting <strong class="screentext">60,855</strong> rows for the <strong class="screentext">Reseller Sales</strong> table and <strong class="screentext">1,416</strong> distinct values for the <strong class="screentext">Freight</strong> column. If only the table name is selected from the <strong class="screentext">Fields List</strong>, only the count of rows imported to the table is displayed at the bottom.</p>
    <p class="fm-booktitle">The count of rows, and particularly the count of distinct values in a column, is of critical importance to import mode datasets. Columns with many unique values, such as primary keys or highly precise numeric columns (that is, 3.123456), consume much more memory than columns with many repeating values. Additionally, as a columnar database, the columns with a larger memory footprint also require more time to scan in order to resolve report queries. </p>
    <p class="fm-booktitle">DirectQuery datasets do not include the Data view and thus common modeling features, such as setting the data format of columns and measures, can only be accessed via the <strong class="screentext">Column tools</strong> tab in the <a id="calibre_link-1960" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Report view. The dataset designer of a DirectQuery dataset <a id="calibre_link-1961" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>would select the column or measure from the <strong class="screentext">Fields</strong> list in the Report view and then access the relevant metadata property from the <strong class="screentext">Column tools</strong> tab, such as <strong class="screentext">Data category</strong> and <strong class="screentext">Sort by column</strong>. </p>
    <p class="fm-booktitle">The availability of the Data view and its supporting metadata (for example, count of rows, discount count of values) is a modeling convenience of import mode datasets over DirectQuery datasets. In the absence of the Data view, DirectQuery modelers can use table report visuals on the Report view to sample or preview the values and formatting of columns and measures.</p>
    <p class="fm-booktitle">We now explore the final view, the <strong class="screentext">Report</strong> view.</p>
    <h2 id="calibre_link-117" class="calibre9">The Report view</h2>
    <p class="fm-booktitle">The <strong class="screentext">Report</strong> view is <a id="calibre_link-783" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>primarily used for developing visualizations, but it <a id="calibre_link-1635" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>also supports modeling features, such as the creation of user-defined hierarchies. <em class="italic">Figure 4.6</em> is a screenshot of a DirectQuery dataset where the <strong class="screentext">City</strong> column of the <strong class="screentext">Customer</strong> table is selected in the <strong class="screentext">Fields</strong> list:</p>
    <figure class="mediaobject"><img src="images/000022.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.6: Modeling options in Report view</p>
    <p class="fm-booktitle">The modeling features in the <strong class="screentext">Report</strong> view are broken up between four different tabs, the <strong class="screentext">Modeling</strong> tab, <strong class="screentext">Table tools</strong> tab, <strong class="screentext">Column tools</strong> tab, and <strong class="screentext">Measure tools</strong> tab (not shown in <em class="italic">Figure 4.6</em> but appearing instead of <strong class="screentext">Column tools</strong> when a measure is selected). </p>
    <p class="fm-booktitle">The <strong class="screentext">Column tools</strong> tab of the <strong class="screentext">Report</strong> view provides access to column metadata for both import and DirectQuery <a id="calibre_link-1962" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>tables while the <strong class="screentext">Measures tools</strong> tab provides access to similar metadata for <a id="calibre_link-1963" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures. As shown in <em class="italic">Figure 4.6</em>, the <strong class="screentext">Data Category</strong> and <strong class="screentext">Default Summarization</strong> metadata properties for the <strong class="screentext">City</strong> column have been set to <strong class="screentext">City</strong> and <strong class="screentext">Don’t summarize</strong>, respectively. </p>
    <p class="fm-booktitle">The <strong class="screentext">Modeling</strong> tab of the Report view provides import and DirectQuery datasets access to common modeling features, such as managing relationships, creating new DAX measures and columns, and accessing RLS roles, although some of these functions are available on the <strong class="screentext">Table tools</strong> and <strong class="screentext">Column tools</strong> tabs as well, such as <strong class="screentext">Manage relationships</strong>.</p>
    <p class="fm-booktitle">In terms of data modeling, the Model view and the <strong class="screentext">Manage relationships</strong> dialog shown in <em class="italic">Figure 4.7</em> are the most fundamental interfaces as these definitions impact the behavior of DAX measures and report queries:</p>
    <figure class="mediaobject"><img src="images/000052.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.7: Manage relationships dialog</p>
    <p class="fm-booktitle">Relationships can be created, edited, and deleted from the <strong class="screentext">Manage relationships</strong> dialog. For larger models <a id="calibre_link-784" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>with many tables and relationships, the dataset <a id="calibre_link-1636" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>designer can utilize both the <strong class="screentext">Manage relationships</strong> dialog and the Model view. </p>
    <p class="fm-booktitle">With the various different views explained, we next turn our attention to the different types of tables present in most data models, starting with fact tables.</p>
    <h2 id="calibre_link-118" class="calibre9">Fact tables</h2>
    <p class="fm-booktitle">There are three fact tables for this dataset&mdash;<code class="inlinecode">Internet Sales</code>, <code class="inlinecode">Reseller Sales</code>, and the <code class="inlinecode">Sales and Margin Plan</code>. The ability <a id="calibre_link-977" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to analyze and filter two or all three of these tables concurrently via common dimensions, such as <code class="inlinecode">Date</code>, <code class="inlinecode">Product</code>, and <code class="inlinecode">Sales Territory</code>, is what gives this dataset its analytical value to the business. </p>
    <p class="fm-booktitle">A Power BI report could contain visualizations comparing total Adventure Works Sales (<code class="inlinecode">Internet Sales</code> plus <code class="inlinecode">Reseller Sales</code>) to the overall <code class="inlinecode">Sales and Margin Plan</code>. This same report could also include detailed visualizations that explain higher-level outcomes, such as the growth in online customers or changes in the <code class="inlinecode">Reseller Sales</code> margin rates:</p>
    <figure class="mediaobject"><img src="images/000042.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.8: Data Warehouse Bus Matrix</p>
    <p class="fm-booktitle">Each checkmark symbol in <em class="italic">Figure 4.8</em> represents the existence of a relationship implemented either directly between the fact and dimension tables in the Data Model or, in the case of the <code class="inlinecode">Sales and Margin Plan</code>, via bridge tables. See <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, for more <a id="calibre_link-978" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>details on the Data Warehouse Bus Matrix.</p>
    <p class="fm-booktitle">The <code class="inlinecode">Sales and Margin Plan</code> is at a lower grain (less granular) than the <code class="inlinecode">Internet Sales</code> and <code class="inlinecode">Reseller Sales</code> fact tables and thus cannot be filtered directly by columns such as <code class="inlinecode">Product Name</code>. For the <code class="inlinecode">Sales and Margin Plan</code> fact table, an alternative model design, including bridge tables and conditional DAX measures, is used to support cross-filtering from the <code class="inlinecode">Product</code>, <code class="inlinecode">Sales Territory</code>, and <code class="inlinecode">Date</code> dimension tables. See the <em class="italic">Bridge tables</em> section later in this chapter for more details.</p>
    <p class="fm-booktitle">We next provide more detail related to fact table columns.</p>
    <h3 id="calibre_link-119" class="heading1">Fact table columns</h3>
    <p class="fm-booktitle">Fact tables should only contain columns that are needed for relationships to dimension tables and numeric columns that are referenced by DAX measures. In some models, an additional column <a id="calibre_link-981" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>that isn’t modeled in a dimension table and is needed for analysis, such as <code class="inlinecode">Sales Order Number</code>, may also be included in a fact table.</p>
    <p class="fm-booktitle">Given their size and central role in the dataset, fact tables often receive much greater analysis to deliver optimal performance and scalability. Extremely large fact tables may be good candidates for DirectQuery mode tables within a composite model if their size exceeds the capacity of an import mode only dataset.</p>
    <p class="fm-booktitle"><em class="italic">Figure 4.9</em> shows a T-SQL query of the <code class="inlinecode">Reseller Sales</code> source fact table where columns are computed that produce the same values as the <code class="inlinecode">ExtendedAmount</code>, <code class="inlinecode">SalesAmount</code>, and <code class="inlinecode">TotalProductCost</code> columns:</p>
    <figure class="mediaobject"><img src="images/000074.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.9: Reseller Sales fact column logic</p>
    <p class="fm-booktitle">Only the <code class="inlinecode">UnitPrice</code>, <code class="inlinecode">OrderQuantity</code>, <code class="inlinecode">DiscountAmount</code>, and <code class="inlinecode">ProductStandardCost</code> columns are needed for the import mode dataset since DAX measures can be written to embed the necessary logic (for example, <code class="inlinecode">UnitPrice * OrderQuantity</code>) for the <code class="inlinecode">ExtendedAmount</code>, <code class="inlinecode">SalesAmount</code>, and <code class="inlinecode">TotalProductCost</code> columns. </p>
    <p class="fm-booktitle">By not importing these columns to the Data Model, a significant amount of data storage is saved and query <a id="calibre_link-982" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>performance is not compromised. Columns with few unique values, such as <code class="inlinecode">OrderQuantity</code>, can be highly compressed by import mode datasets and thus are lightweight to store and fast to scan to resolve report queries. </p>
    <p class="fm-booktitle">The same three columns can also be removed from the <code class="inlinecode">Internet Sales</code> fact table. The <code class="inlinecode">SUMX()</code> function is used in the DAX measures and only references the source columns (<code class="inlinecode">OrderQuantity</code>, <code class="inlinecode">UnitPrice</code>, and <code class="inlinecode">ProductStandardCost</code>).</p>
    <p class="fm-booktitle">The $0.04 difference between the sum of the <code class="inlinecode">Sales Amount</code> column and the <code class="inlinecode">Sales Amount Calc</code> expression is caused by the <code class="inlinecode">DiscountAmount</code> column being stored as a float (approximate) data type. In almost every scenario, a variance this small ($.04 out of $80.4 M) is acceptable to obtain the scalability benefit of not importing a fact table column.</p>
    <p class="fm-booktitle">If the SQL View for the fact table is exclusively utilized by this dataset, then the three columns can be removed there. If the SQL View cannot be modified, then the three columns can be removed via an M query: </p>
    <pre class="programlisting"><code class="hljs-code"> let
    Source = Sql.Database("localhost\MSSQLSERVERDEV", "AdventureWorksDW2019"),
    BI_vFact_ResellerSales = Source{[Schema="BI",Item="vFact_ResellerSales"]}[Data],
    <span class="code-highlight"><strong class="hljs-slc">RemoveColumns = Table.RemoveColumns(BI_vFact_ResellerSales,{"ExtendedAmount", "TotalProductCost", "SalesAmount"})</strong></span>
in
    RemoveColumns
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">Table.RemoveColumns()</code> function excludes three columns from the source SQL View, as these columns only represent derived values from other columns that are included in the query. Therefore, for an import mode dataset, DAX measures can be written to efficiently implement these simple calculations via the source columns, such as <code class="inlinecode">Unit Price</code> and <code class="inlinecode">Order Quantity</code>. </p>
    <p class="fm-booktitle">However, for a DirectQuery dataset, these derived columns (for example, <code class="inlinecode">TotalProductCost</code>) would <a id="calibre_link-983" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>not be removed due to the performance advantage of the <code class="inlinecode">SUM()</code> SQL expressions referencing individual columns. The following chapter, <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, contains details on implementing these DAX measures and other measure expressions. </p>
    <p class="fm-booktitle">Along with understanding fact columns, it is also important to pay attention to fact column data types.</p>
    <h3 id="calibre_link-120" class="heading1">Fact column data types</h3>
    <p class="fm-booktitle">It’s essential that the numeric columns of fact tables are assigned to the appropriate data types. All integer <a id="calibre_link-979" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>columns, such as <code class="inlinecode">OrderQuantity</code>, should be stored as a <strong class="screentext">Whole number</strong> data type, and decimal numbers are stored as either a <strong class="screentext">Fixed decimal number</strong> or as a <strong class="screentext">Decimal number</strong>. If four decimal places is sufficient precision, a <strong class="screentext">Fixed decimal number</strong> type should be used to avoid rounding errors and the additional storage and performance costs of the <strong class="screentext">Decimal number</strong> type.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 4.10</em>, the <code class="inlinecode">Freight</code> column is stored as a <strong class="screentext">Fixed decimal number</strong> type and, thus, despite a format of six decimal places, only four significant digits are displayed to the right of the decimal place: </p>
    <figure class="mediaobject"><img src="images/000064.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.10: Fixed decimal number data type</p>
    <p class="fm-booktitle">Dataset designers should check the numeric columns of fact tables and ensure that the appropriate data type has been assigned for each column. For example, certain scientific columns may require the <a id="calibre_link-980" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>deep precision available for decimal number types (15 significant digits), while accounting or financial columns generally need to be exact and thus the internal (19, 4) data type of a <strong class="screentext">Fixed decimal number</strong> type is appropriate. </p>
    <p class="fm-booktitle">Note that the result of aggregated expressions against this fixed decimal column is a number of the same type and, therefore, to avoid overflow calculation errors, also needs to fit the (19, 4) data type. The <em class="italic">Numeric Datatypes</em> section in <em class="italic">Chapter 3</em>, <em class="italic">Connecting to Sources and Transforming Data with M</em>, provides details on the relationship between M data types and data types in the Data Model, as well as the function for converting column types in M queries. </p>
    <p class="fm-booktitle">The Data view shown in <em class="italic">Figure 4.10</em> is not available for DirectQuery datasets. For DirectQuery datasets, the data types of columns should be set and managed at the data source table level such that Power BI only reflects these types. Revising data types during report query execution, either via SQL views in the data source or the M queries in Power BI, can significantly degrade the performance of DirectQuery datasets.</p>
    <p class="fm-booktitle">Finishing our exploration of fact tables, we next explain fact-to-dimension relationships.</p>
    <h3 id="calibre_link-121" class="heading1">Fact-to-dimension relationships</h3>
    <p class="fm-booktitle">Data models often follow a star schema pattern where multiple dimension tables are related to a single <a id="calibre_link-984" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>fact table thus forming a “star” pattern when viewed visually. An example of this “star” is shown in <em class="italic">Figure 4.2</em>.</p>
    <p class="fm-booktitle">To create the Data Model relationships identified in the Data Warehouse Bus Matrix from <em class="italic">Figure 4.8</em>, follow these steps:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Click <strong class="screentext">Manage Relationships</strong> from the <strong class="screentext">Modeling</strong> tab in the <strong class="screentext">Report</strong> view.</li>
      <li class="calibre13">From the <strong class="screentext">Manage relationships</strong> dialog, click the <strong class="screentext">New…</strong> command button at the bottom to open the <strong class="screentext">Create relationship</strong> dialog. </li>
      <li class="calibre13">Choose the fact table, such as <code class="inlinecode">Internet Sales</code>, for the top table via the dropdown and then select the dimension table as shown in <em class="italic">Figure 4.11</em>:<figure class="mediaobject"><img src="images/000097.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 4.11: Creating a relationship for the import mode dataset</p>
        <p class="normal1">If the relationship columns have the same name, such as <code class="inlinecode">CurrencyKey</code> in this example, Power BI automatically selects the columns to define the relationship. Almost all relationships follow this <strong class="screentext">Many to one(*:1)</strong> or fact-to-dimension pattern with the <strong class="screentext">Cross-filter direction</strong> property set to <strong class="screentext">Single</strong> and the relationship set to active.</p>
        <p class="normal1">The two columns used for defining each relationship should be of the same data type. In most relationships, both columns are of the whole number data type as only a numeric value can be used with slowly changing dimensions. For example, a <code class="inlinecode">ProductKey</code> column could use the values 12, 17, and 27 to represent three time periods for a single product as certain attributes of the product changed over time.</p>
        <p class="normal1">As more relationships are created, it can be helpful to switch to the Model view and <a id="calibre_link-985" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>move or organize the dimension tables around the fact table. The Model view can make it clear when additional relationships need to be defined and can be useful in explaining the model to report authors and users.</p>
      </li>
      <li class="calibre13">Click the <strong class="screentext">OK</strong> button to create the relationship and repeat this process to build the planned star schema relationships for both the <code class="inlinecode">Internet Sales</code> and <code class="inlinecode">Reseller Sales</code> fact tables, as shown in <em class="italic">Figure 4.12</em>:<figure class="mediaobject"><img src="images/000086.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 4.12: Internet Sales relationships</p>
      </li>
    </ol>
    <p class="fm-booktitle">All relationships from <code class="inlinecode">Internet Sales</code> to a dimension table are active (solid line) except for two additional relationships to the <code class="inlinecode">Date</code> dimension table. </p>
    <p class="fm-booktitle">In this <a id="calibre_link-986" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dataset, the <code class="inlinecode">OrderDate</code> is used as the active relationship, but two additional inactive (dotted-line) relationships are created based on the <code class="inlinecode">DueDate</code> and <code class="inlinecode">ShipDate</code> columns of the fact table. DAX measures can be created to invoke these alternative relationships via the <code class="inlinecode">USERELATIONSHIP()</code> DAX function, as shown in the following example:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Sales (Due Date) = CALCULATE([Internet Net Sales], USERELATIONSHIP('Internet Sales'[DueDateKey],'Date'[DateKey]))

Internet Net Sales (Ship Date) = CALCULATE([Internet Net Sales],USERELATIONSHIP('Internet Sales'[ShipDateKey],'Date'[DateKey]))
</code></pre>
    <p class="fm-booktitle">The inactive relationships and their corresponding measures enable report visualizations based on a single date dimension table, such as the following table:</p>
    <figure class="mediaobject"><img src="images/000116.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.13: Measures with active and inactive relationships </p>
    <p class="fm-booktitle">In this scenario, the <code class="inlinecode">Internet Net Sales</code> measure uses the active relationship based on <strong class="screentext">Order Date</strong> by default, but the other measures override this relationship via the <code class="inlinecode">CALCULATE()</code> and <code class="inlinecode">USERELATIONSHIP()</code> functions.</p>
    <p class="fm-booktitle">A common alternative approach to inactive relationships is to load additional date dimension tables and create active relationships for each additional date column in the fact table (for example, <code class="inlinecode">DueDate</code>, <code class="inlinecode">ShipDate</code>) to these tables. The columns for these additional date tables can be named to avoid confusion with other date columns (for example, <code class="inlinecode">Ship Date Calendar Year</code>) and some teams or organizations are more comfortable with table relationships than DAX measures. </p>
    <p class="fm-booktitle">Additionally, this <a id="calibre_link-1964" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>design allows for intuitive matrix-style visualizations with two separate date dimensions (<code class="inlinecode">ShipDate</code>, <code class="inlinecode">OrderDate</code>) on the <em class="italic">x</em> and <em class="italic">y</em> axes filtering a single measure via active relationships.</p>
    <p class="fm-booktitle">For DirectQuery datasets, the <strong class="screentext">Assume referential integrity</strong> relationship property is critical for performance as this determines whether inner- or outer-join SQL statements are generated to resolve report queries. Assume referential integrity means that the column on the one side of the relationship is never null or blank and that a corresponding value always exists on the many side of the relationship.</p>
    <p class="fm-booktitle">When enabled, as shown in <em class="italic">Figure 4.14</em>, inner-join SQL queries are passed to the source system when report queries require columns or logic from both tables of the relationship:</p>
    <figure class="mediaobject"><img src="images/000107.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.14: Assume referential integrity</p>
    <p class="fm-booktitle">If <strong class="screentext">Assume referential integrity</strong> is not enabled, outer-join SQL queries are generated to ensure that all necessary rows from the fact table or many sides of the relationship are retrieved to resolve the report query. </p>
    <p class="fm-booktitle">The query optimizers within supported DirectQuery sources, such as SQL Server and Oracle, are able to produce much more efficient query execution plans when presented with inner-join SQL statements. Of course, improved performance is of no value if the outer join is necessary <a id="calibre_link-987" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to return the correct results, thus it’s essential for referential integrity violations in the source system to be addressed.</p>
    <p class="fm-booktitle">Having finished our exploration of fact tables, we next turn our attention to dimension tables.</p>
    <h2 id="calibre_link-122" class="calibre9">Dimension tables</h2>
    <p class="fm-booktitle">The columns <a id="calibre_link-902" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of dimension tables give the measures from the fact tables context, such as <code class="inlinecode">Internet Net Sales</code> by sales territory country and calendar year. More advanced dimension columns, such as the <code class="inlinecode">Customer History Segment</code> column, described in <em class="italic">Chapter 3</em>, <em class="italic">Connecting to Sources and Transforming Data with M</em>, can instantly give report visualizations meaning and insight. </p>
    <p class="fm-booktitle">In addition to their application within report visuals, such as the date axis of charts, dimension columns are frequently used to set the filter conditions of an entire report, a report page, or a specific visual of a report page. By default, Power BI lists dimension tables alphabetically in the <strong class="screentext">Fields</strong> list and also lists column names of tables alphabetically.</p>
    <p class="fm-booktitle">Just as dataset designers must ensure that all common DAX measures are included in the dataset, dataset designers must also ensure that the necessary dimension columns are available to group, filter, and generally interact with the dataset. </p>
    <p class="fm-booktitle">Two of the top usability features for dimension tables include hierarchies and custom sorting. When implemented, these features enable users to explore datasets more easily, such as drilling up, down, and through the columns of a hierarchy. </p>
    <p class="fm-booktitle">Additionally, the <strong class="screentext">Sort by column</strong> feature serves to generate logical report layouts, such as the months of the year from January through December.</p>
    <p class="fm-booktitle">Just as we provided greater detail regarding fact tables in the previous sections, additional details are <a id="calibre_link-903" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>provided about dimension tables in the following sections, starting with an explanation of hierarchies.</p>
    <h3 id="calibre_link-123" class="heading1">Hierarchies</h3>
    <p class="fm-booktitle">Dimension tables often contain hierarchical information where data in one column represents the parent of <a id="calibre_link-906" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>another column. Such constructs are referred to as hierarchies and can be seen in the <strong class="screentext">Product</strong> dimension table where the <strong class="screentext">Product Category Group</strong> column is the parent of the <strong class="screentext">Product Category</strong> column, which in turn is the parent of the <strong class="screentext">Product Subcategory</strong> column.</p>
    <p class="fm-booktitle">To create a hierarchy, select the column in the <strong class="screentext">Fields</strong> list that represents the top level of the hierarchy and use the ellipsis to the right of the column name or right-click the column and select the <strong class="screentext">Create hierarchy</strong> option, as shown in <em class="italic">Figure 4.15</em>:</p>
    <figure class="mediaobject"><img src="images/000138.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.15: Creating a hierarchy</p>
    <p class="fm-booktitle">In this example, the <code class="inlinecode">Product Category Group</code> column is the top level of the hierarchy and <code class="inlinecode">Product Category</code> is its child or lower level. Likewise, the <code class="inlinecode">Product Subcategory</code> column is a child of <code class="inlinecode">Product Category</code> and the <code class="inlinecode">Product Name</code> column is the lowest level of the hierarchy under <code class="inlinecode">Product Subcategory</code>. </p>
    <p class="fm-booktitle">To add columns to the hierarchy, click the ellipsis to the right of the given column or use the right-click context menu to choose the <strong class="screentext">Add to hierarchy</strong> option. Alternatively, the child columns can be dragged and dropped onto the name of the hierarchy by holding down the left mouse <a id="calibre_link-1965" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>button when selecting the column. The levels of the columns can also be adjusted from within the hierarchy by dragging and dropping column names.</p>
    <p class="fm-booktitle">Dimension tables often contain hierarchical data, such as dates (year, quarter, month, week, day) and geographies (country, state/province, city, zip code). As shown in the <em class="italic">Date dimension view</em> section of <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, natural date hierarchies in which each column value has only one parent (for example, <code class="inlinecode">2017-Sep</code>) are strongly recommended. Unnatural date hierarchies can be confusing in reports as it isn’t clear which parent value (<code class="inlinecode">2015, 2016, 2017</code>?) a given child value, such as <code class="inlinecode">September</code>, belongs to.</p>
    <p class="fm-booktitle">Once the hierarchy is created, a single click of the hierarchy name in the fields list adds all the columns and their respective levels to the report visualization. In <em class="italic">Figure 4.16</em>, all four columns of the <code class="inlinecode">Product Hierarchy</code> are added to the <strong class="screentext">Axis</strong> of a column chart to support drilling and interactive filter behavior in Power BI:</p>
    <figure class="mediaobject"><img src="images/000127.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.16: Hierarchy in Report visual</p>
    <p class="fm-booktitle">Certain columns or levels of the hierarchy can optionally be removed from the specific visual. For example, if <a id="calibre_link-907" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the report developer only wishes to include <code class="inlinecode">Product Category</code> and <code class="inlinecode">Product Subcategory</code> in a particular visual, the other two columns can be removed from the <strong class="screentext">Axis</strong> field well via the delete (<strong class="screentext">X</strong>) icons.</p>
    <p class="fm-booktitle">The DAX language includes a set of parent and child functions, such as <code class="inlinecode">PATH()</code> and <code class="inlinecode">PATHITEM()</code>, that can be used to create hierarchy columns when a dimension table contains a <code class="inlinecode">Parent Key</code> column. Common examples of this include an organizational structure with multiple levels of management or a chart of financial accounts. Creating these columns via DAX functions is one of the few examples when DAX-calculated columns may be <a id="calibre_link-1966" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>preferable to other alternatives.</p>
    <p class="fm-booktitle">Another topic often related to dimension tables is custom sorting, which we explore in the next section.</p>
    <h3 id="calibre_link-124" class="heading1">Custom sort</h3>
    <p class="fm-booktitle">Most dimension columns used in reports contain text values, and, by default, Power BI sorts these values alphabetically. To ensure these columns follow their logical order (for example, Jan, Feb, Mar) in report <a id="calibre_link-904" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visualizations, it’s necessary to store a corresponding numeric column in the same dimension table and at the same granularity. For example, in addition to a <code class="inlinecode">Month Name</code> column that contains the 12 text values for the names of the months, a <code class="inlinecode">Month Number</code> column is included in the <code class="inlinecode">date</code> dimension with the value of <code class="inlinecode">1</code> for every row with the <code class="inlinecode">January</code> value for <code class="inlinecode">Month Name</code>, and so forth. </p>
    <p class="fm-booktitle">To set a custom sort order for a column, select the column in the <strong class="screentext">Fields</strong> list in the <strong class="screentext">Report</strong> view and then click the dropdown for the <strong class="screentext">Sort by column</strong> icon under the <strong class="screentext">Column tools</strong> tab. Choose the <a id="calibre_link-1967" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>supporting column that contains the integer values, such as <strong class="screentext">Month Name</strong>, as shown in the following screenshot:</p>
    <figure class="mediaobject"><img src="images/000159.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.17: Sort by column</p>
    <p class="fm-booktitle">Most columns used as a <strong class="screentext">Sort by column</strong> are not needed for report visualizations and can be hidden from the fields list. Per the <em class="italic">Date dimension view</em> section in <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, sequentially increasing integer columns are recommended for natural hierarchy columns, such as <code class="inlinecode">Year Month</code>, as these columns can support both logical sorting and date intelligence calculations. </p>
    <p class="fm-booktitle">Although the <code class="inlinecode">Month Name</code> and <code class="inlinecode">Weekday Name</code> columns are the most common examples for custom sorting, other dimension tables may also require hidden columns to support a custom or logical sort order. In the following example, an integer column is added to the <code class="inlinecode">Customer</code> dimension M query to support the logical sort order of the <code class="inlinecode">Customer History Segment</code> column:</p>
    <pre class="programlisting"><code class="hljs-code"><span class="code-highlight"><strong class="hljs-slc">/*Preceding M query variables not included*/</strong></span>
//Customer History Segment Column    
    CustomerHistoryColumn = Table.AddColumn(Customer, "Customer History Segment", 
    each
    if [DateFirstPurchase] &gt;= OneYearAgo then "First Year Customer" 
    else if [DateFirstPurchase] &gt;= TwoYearsAgo and [DateFirstPurchase] &lt; OneYearAgo then "Second Year Customer"
    else if [DateFirstPurchase] &gt;= ThreeYearsAgo and [DateFirstPurchase] &lt; TwoYearsAgo then "Third Year Customer" 
    else "Legacy Customer", type text),
<span class="code-highlight"><strong class="hljs-slc">//Customer History Segment Column Sort</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">CustomerHistColSort = Table.AddColumn(CustomerHistoryColumn, "Customer</strong></span> <span class="code-highlight"><strong class="hljs-slc">History Segment Sort", each </strong></span>
    <span class="code-highlight"><strong class="hljs-slc">if [DateFirstPurchase] &gt;= OneYearAgo then 1 </strong></span>
    <span class="code-highlight"><strong class="hljs-slc">else if [DateFirstPurchase] &gt;= TwoYearsAgo and [DateFirstPurchase] &lt; OneYearAgo then 2</strong></span>
    <span class="code-highlight"><strong class="hljs-slc">else if [DateFirstPurchase] &gt;= ThreeYearsAgo and [DateFirstPurchase] &lt; TwoYearsAgo then 3 else 4, Int64.Type)</strong></span>
in
    CustomerHistColSort 
</code></pre>
    <p class="fm-booktitle">With the integer column (<code class="inlinecode">Customer History Segment Sort</code>) added to the <code class="inlinecode">Customer</code> dimension table <a id="calibre_link-905" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and the <strong class="screentext">Sort by column</strong> property of the <code class="inlinecode">Customer History Segment</code> column set to reference this column, Power BI reports visualize the <code class="inlinecode">Customer History Segment</code> column by the logical order of the four possible values (<code class="inlinecode">First Year Customer</code>, <code class="inlinecode">Second Year Customer</code>, <code class="inlinecode">Third Year Customer</code>, and <code class="inlinecode">Legacy Customer</code>) by default. </p>
    <p class="fm-booktitle">Having covered both fact and dimension tables in detail, we next explore parameter tables.</p>
    <h2 id="calibre_link-125" class="calibre9">Parameter tables</h2>
    <p class="fm-booktitle">Parameter tables are often used to store and organize measures. As such, unlike relationship tables, there <a id="calibre_link-1266" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are no relationships between the four parameter tables and any other tables in the model. </p>
    <p class="fm-booktitle"><em class="italic">Figure 4.18</em> shows the four parameter tables in the model:</p>
    <figure class="mediaobject"><img src="images/000149.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.18: Parameter tables</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 4.18</em>, the four <a id="calibre_link-1267" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>parameter tables are <code class="inlinecode">Adventure Works Sales</code>, <code class="inlinecode">Date Intelligence Metrics</code>, <code class="inlinecode">Measure</code> <code class="inlinecode">Support</code>, and <code class="inlinecode">Current</code> <code class="inlinecode">Date</code>. Let’s take a closer look at these different measure groups.</p>
    <h3 id="calibre_link-126" class="heading1">Measure groups</h3>
    <p class="fm-booktitle">The <code class="inlinecode">Date Intelligence</code> and <code class="inlinecode">Adventure Works Sales</code> tables only serve to provide an intuitive name <a id="calibre_link-1272" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>for users to find related DAX measures. For example, several of the most important DAX measures of the dataset include both <code class="inlinecode">Internet Sales</code> and <code class="inlinecode">Reseller Sales</code>. It wouldn’t make sense for consolidated measures, such as <code class="inlinecode">Total Net Sales</code>, to be found under the <code class="inlinecode">Internet Sales</code> or <code class="inlinecode">Reseller Sales</code> fact tables in the field list. </p>
    <p class="fm-booktitle">For similar usability reasons, <code class="inlinecode">Date Intelligence Metrics</code> provides an intuitive name for users and <a id="calibre_link-1273" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>report developers to find measures, such as year-to-date, prior year-to-date, and year-over-year growth. The two parameter tables, <code class="inlinecode">Date Intelligence Metrics</code> and <code class="inlinecode">Adventure Works Sales</code>, effectively serve as display folders, as shown in <em class="italic">Figure 4.19</em>, a screenshot of the <strong class="screentext">Fields</strong> list from the Report view:</p>
    <figure class="mediaobject"><img src="images/000182.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.19: Fields list with parameter tables</p>
    <p class="fm-booktitle">To obtain the calculator symbol icon in the fields list, all columns have to be hidden from the Report view and at least one DAX measure must reference the table in its <strong class="screentext">Home Table</strong> property. Once these two conditions are met, the show/hide pane arrow of the fields list highlighted in the image can be clicked to refresh the <strong class="screentext">Fields</strong> list.</p>
    <p class="fm-booktitle">In this example, the <code class="inlinecode">Adventure Works Sales</code> and <code class="inlinecode">Date Intelligence Metrics</code> tables both contain only a single column (named <code class="inlinecode">Dummy</code>) that can be hidden via the right-click context menu accessible in the Model view, the <strong class="screentext">Fields</strong> list of the <strong class="screentext">Report</strong> view, and for import datasets the Data view as well.</p>
    <p class="fm-booktitle">The columns of the three fact tables (<code class="inlinecode">Internet Sales</code>, <code class="inlinecode">Reseller Sales</code>, and <code class="inlinecode">Sales and Margin Plan</code>) are also hidden to provide users with an intuitive display of groups of measures at the top of the fields list followed by dimensions and their hierarchies. </p>
    <p class="fm-booktitle">The <strong class="screentext">Home table</strong> for a measure can be set by selecting it from the fields list and choosing a table from the <strong class="screentext">Home table</strong> dropdown on the <strong class="screentext">Modeling</strong> tab in the Report view. As shown in <em class="italic">Figure 4.20</em>, the <code class="inlinecode">Internet Net Sales (PY YTD)</code> measure is selected and <code class="inlinecode">Date Intelligence Metrics</code> is configured as its <strong class="screentext">Home table</strong>:</p>
    <figure class="mediaobject"><img src="images/000171.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.20: Home table property for DAX measures</p>
    <p class="fm-booktitle">Having <a id="calibre_link-1274" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>explored the <code class="inlinecode">Adventure Works Sales</code> and <code class="inlinecode">Date Intelligence Metrics</code> parameter tables, we next explore the <code class="inlinecode">Current Date</code> table.</p>
    <h3 id="calibre_link-127" class="heading1">Last refreshed date</h3>
    <p class="fm-booktitle">The <code class="inlinecode">Current Date</code> table, as described in the <em class="italic">Data source parameters</em> section of <em class="italic">Chapter 3</em>, <em class="italic">Connecting to Sources and Transforming Data with M</em>, contains only one column and one row, representing the date at the time the source M query was executed. With this date value computed <a id="calibre_link-1270" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>with each dataset refresh and loaded into the Data Model, a DAX measure can be written to expose the date to the Power BI report visuals. <em class="italic">Figure 4.21</em> shows a screenshot from the <strong class="screentext">Report</strong> view. A measure named <code class="inlinecode">Last Refresh Msg</code> uses a DAX variable to reference the parameter table and then passes this variable to a text string: </p>
    <figure class="mediaobject"><img src="images/000202.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.21: Last refreshed message via the parameter table</p>
    <p class="fm-booktitle">It’s common to include a last refreshed text message on at least one report page of every published report. In the event the source dataset has failed to refresh for several days or longer, the text message advises users of the issue. See <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, for more information on DAX variables. </p>
    <p class="fm-booktitle">For DirectQuery <a id="calibre_link-1271" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>datasets, the M query for the <code class="inlinecode">CurrentDate</code> parameter table uses standard SQL syntax within the <code class="inlinecode">Value.NativeQuery()</code> function, such as the following:</p>
    <pre class="programlisting"><code class="hljs-code">let Source = AdWorksSQLServer,
    View =   Value.NativeQuery(Source, "Select CAST(Current_Timestamp as date) as [CurrentDate]")
in  View
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">Source</code> variable references the <code class="inlinecode">AdWorksSQLServer</code> staging query, as described in the previous chapter. The <em class="italic">Data source parameters</em> section of <em class="italic">Chapter 3</em>, <em class="italic">Connecting to Sources and Transforming Data with M</em>, contains the M query for the <code class="inlinecode">CurrentDate</code> parameter table in the import mode datasets. </p>
    <p class="fm-booktitle">Our last parameter table is the <code class="inlinecode">Measure Support</code> table, which we detail in the following section.</p>
    <h3 id="calibre_link-128" class="heading1">Measure support logic</h3>
    <p class="fm-booktitle">The purpose of the <code class="inlinecode">Measure Support</code> table is to centralize DAX expressions that can be reused by other <a id="calibre_link-1275" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures. Since DAX variables are limited to the scope of individual measures, a set of hidden, intermediate measures avoids the need to declare variables for each measure. </p>
    <p class="fm-booktitle">The intermediate, or branching, DAX measure expressions also make it easy and less error-prone to implement a change as all dependent DAX measures are updated automatically. In this way, the <code class="inlinecode">Measure Support</code> table serves a similar function to the parameter and staging query expressions, described in the previous chapter, for M queries.</p>
    <p class="fm-booktitle">For this dataset, DAX expressions containing the <code class="inlinecode">ISFILTERED()</code> and <code class="inlinecode">ISCROSSFILTERED()</code> functions can be used to determine the granularity of the filter context for the <code class="inlinecode">Product</code>, <code class="inlinecode">Sales Territory</code>, and <code class="inlinecode">Date</code> dimension tables. If the user or report developer has applied a filter at a granularity not supported by the <code class="inlinecode">Sales and Margin Plan</code> fact table, such as an individual product or date, a blank should be returned to avoid confusion and incorrect actual versus plan comparisons. The following DAX measure tests the filter context of the <code class="inlinecode">Date</code> dimension table and returns one of two possible text values&mdash;<code class="inlinecode">Plan Grain</code> or <code class="inlinecode">Actual Grain</code>:</p>
    <pre class="programlisting"><code class="hljs-code">Date Grain Plan Filter Test = 
    SWITCH(TRUE(),
        NOT(ISCROSSFILTERED('Date')),"Plan Grain",
        ISFILTERED('Date'[Week of Year]) || 
            ISFILTERED('Date'[Date]) || 
            ISFILTERED('Date'[Weekday Name]) ||
            ISFILTERED('Date'[Calendar Yr-Wk]), "Actual Grain", 
        "Plan Grain"
    )
</code></pre>
    <p class="fm-booktitle">Similar filter test measures can be created for the <code class="inlinecode">Sales Territory</code> and <code class="inlinecode">Product</code> dimension tables. All such measures should be hidden from the Report view, and the <strong class="screentext">Home table</strong> property should be set to <code class="inlinecode">Measure Support</code>. Once these dimension-specific measures have <a id="calibre_link-1276" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>been defined, a final support measure can integrate their results, as shown in the following example:</p>
    <pre class="programlisting"><code class="hljs-code">Plan Grain Status = 
    IF(
        [Date Grain Plan Filter Test] = "Plan Grain" &amp;&amp; 
            [Product Grain Plan Filter Test] = "Plan Grain" &amp;&amp; 
            [Sales Territory Grain Plan Filter Test] = "Plan Grain", 
        "Plan Grain", 
        "Actual Grain"
    )
</code></pre>
    <p class="fm-booktitle">Given the logic built into the hidden measure support expressions, DAX measures can reference the results and deliver the intended conditional behavior in report visualizations, as shown in the following example of a variance-to-plan measure:</p>
    <p class="fm-booktitle">Internet Net Sales Var to Plan = </p>
    <pre class="programlisting"><code class="hljs-code">    IF(
        [Plan Grain Status] = "Actual Grain",
        BLANK(),
        [Internet Net Sales] - [Internet Net Sales Plan Amt]
    )
</code></pre>
    <p class="fm-booktitle">These support measures can be used to ensure that if users are operating at a granularity or <a id="calibre_link-1968" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>filter not supported by the calculations that blank values are returned versus incorrect values.</p>
    <p class="fm-booktitle">With all four parameter tables explained, we next cover an alternative method of organizing measures, <strong class="screentext">Display folders</strong>.</p>
    <h3 id="calibre_link-129" class="heading1">Display folders</h3>
    <p class="fm-booktitle">With the advent of the <strong class="screentext">Display folder</strong> metadata property for columns and measures, it is now possible to <a id="calibre_link-1268" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>use a single parameter table for all measures and also maintain an organized structure. As shown in <em class="italic">Figure 4.22</em>, the <strong class="screentext">Properties</strong> pane of the Model view can be used to set the <strong class="screentext">Display folder</strong> property:</p>
    <figure class="mediaobject"><img src="images/000192.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.22: Display folders</p>
    <p class="fm-booktitle">In <em class="italic">Figure 4.22</em>, the <strong class="screentext">Home table</strong> for all measures is a table called <strong class="screentext">Calculations</strong> and the <strong class="screentext">Display folder</strong> property for the <code class="inlinecode">Reseller Net Sales (PY YTD)</code> measure has been set to <strong class="screentext">Date Intelligence Metrics\Reseller Sales</strong>. Thus, multiple folder levels are supported through the use of the <a id="calibre_link-1969" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>backslash ( <strong class="screentext">\</strong> ) character to designate subfolders. Once a <strong class="screentext">Display folder</strong> is created, measures can be organized into the display folders by dragging and dropping the measures within the <strong class="screentext">Fields</strong> pane of the Model view. </p>
    <p class="fm-booktitle">Whether multiple parameter tables are used or display folders is a design decision and one approach may work better than another depending upon the business. </p>
    <p class="fm-booktitle">However, if display folders are used, it is recommended to keep the folder hierarchy relatively flat (only one or two levels) in order to not frustrate users by requiring them to expand many folders in order to reach a particular measure.</p>
    <p class="fm-booktitle">We have now <a id="calibre_link-1269" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>detailed all of the different types of tables within a data model as well as alternative methods for organizing measures. The next section explores the relationships between these tables.</p>
    <h1 id="calibre_link-130" class="heading">Relationships</h1>
    <p class="fm-booktitle">Relationships play a central role in the analytical behavior and performance of the dataset. Based on the filters applied at the report layer and the DAX expressions contained in the <a id="calibre_link-1586" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures, relationships determine the set of active rows for each table of the model that must be evaluated. Therefore, it’s critical that dataset designers understand how relationships drive report behavior via cross-filtering and the rules that relationships in Power BI must adhere to, such as uniqueness and non ambiguity, as discussed in the next section. </p>
    <h2 id="calibre_link-131" class="calibre9">Uniqueness </h2>
    <p class="fm-booktitle">Relationships in Power BI data models are always defined between single columns in two separate tables. While Power BI does support direct many-to-many relationships, it is recommended <a id="calibre_link-1594" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>that relationships with a cardinality of many-to-many be avoided because this implies that the related columns both contain duplicate values for the related columns. Relationships based on columns containing duplicate values on both sides of the relationship can result in poor performance and incorrect or unexpected results, and are generally indicative of poor or messy data models.</p>
    <p class="fm-booktitle">A better design practice is to instead use relationship tables with unique values in order to relate the many-to-many table relationships. Thus, a good design practice is that one of the two columns defining a relationship uniquely identifies the rows of its table, such as the <code class="inlinecode">CurrencyKey</code> column from the <code class="inlinecode">Currency</code> table in the <em class="italic">Fact-to-dimension relationships</em> section earlier in this chapter. </p>
    <p class="fm-booktitle">However, Power BI and Analysis Services tabular models do not enforce or require referential integrity as with relationship uniqueness. For example, a sales fact table can contain transactions for a customer that are not present in the customer dimension table. In such a circumstance, no error message is thrown and DAX measures that sum the sales table still result in the correct amount, including the new customer’s transactions. Instead, a blank row is added to the customer dimension table by default for these scenarios (also known as early-arriving facts) and this row is visible when the measure is grouped by columns from the customer dimension table in report visualizations. </p>
    <p class="fm-booktitle">If missing dimensions are an issue, the dataset designer can work with the data source owner and/or the data warehouse team to apply a standard foreign key value (for example, -1) to these new dimension members within an <strong class="screentext">extract-transform-load</strong> (<strong class="screentext">ETL</strong>) process and a <a id="calibre_link-968" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>corresponding row can be added to dimensions with an unknown value for each column.</p>
    <p class="fm-booktitle">In the rare event that a <a id="calibre_link-1595" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>text column is used for a relationship, note that DAX is not case-sensitive like the M language. For example, M functions that remove duplicates, such as <code class="inlinecode">Table.Distinct()</code>, may result in unique text values (from M’s perspective), such as <strong class="screentext">Apple</strong> and <strong class="screentext">APPLE</strong>. However, when these values are loaded to the data model, these values are considered duplicates. </p>
    <p class="fm-booktitle">To resolve this issue, a standard casing format can be applied to the column within a <code class="inlinecode">Table.TransformColumns()</code> function via text functions, such as <code class="inlinecode">Text.Proper()</code> and <code class="inlinecode">Text.Upper()</code>. Removing duplicates after the standard casing transformation results in a column of unique values for the data model.</p>
    <p class="fm-booktitle">Along with uniqueness, another important topic related to relationships is ambiguity, which we explore in the next section.</p>
    <h2 id="calibre_link-132" class="calibre9">Ambiguity</h2>
    <p class="fm-booktitle">Data model relationships must result in a single, unambiguous filter path across the tables of the model. In other words, a filter applied to one table must follow a single path to filter another <a id="calibre_link-1587" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>table&mdash;the filter context cannot branch off into multiple intermediate tables prior to filtering a final table. In <em class="italic">Figure 4.23</em>, the Model view only shows one of the two relationships to the <code class="inlinecode">Auto Accidents</code> fact table is allowed to be active (solid line) versus inactive (dashed line):</p>
    <figure class="mediaobject"><img src="images/000221.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.23: Ambiguous relationships avoided</p>
    <p class="fm-booktitle">When a filter is applied to the <code class="inlinecode">Auto Owners</code> table, the inactive relationship between <code class="inlinecode">Insurance Polices</code> and <code class="inlinecode">Auto Accidents</code> provides a single, unambiguous filter path from <code class="inlinecode">Auto Owners</code> to <code class="inlinecode">Auto Accidents</code> via relationships with the <code class="inlinecode">Automobiles</code> table. If the model author tries to <a id="calibre_link-1588" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>set both relationships to the <code class="inlinecode">Auto Accidents</code> table as active, Power BI rejects this relationship and advises of the ambiguity it would create, as shown in <em class="italic">Figure 4.24</em>:</p>
    <figure class="mediaobject"><img src="images/000211.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.24: Ambiguity error in the Edit relationship dialog</p>
    <p class="fm-booktitle">Given the active relationship between the <code class="inlinecode">Automobiles</code> and <code class="inlinecode">Auto Accidents</code> tables, if the relationship <a id="calibre_link-1970" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>between <code class="inlinecode">Insurance Policies</code> and <code class="inlinecode">Auto Accidents</code> was active, the <code class="inlinecode">Auto Owners</code> table would have two separate paths to filter the <code class="inlinecode">Auto Accidents</code> table (via <code class="inlinecode">Insurance Policies</code> or via <code class="inlinecode">Automobiles</code>). </p>
    <p class="fm-booktitle">With uniqueness and ambiguity understood, we now explain single-direction relationships in greater detail.</p>
    <h2 id="calibre_link-133" class="calibre9">Single-direction relationships</h2>
    <p class="fm-booktitle">Single-direction cross-filtering relationships are the most common in Power BI datasets and particularly <a id="calibre_link-1591" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>for data models with more than <a id="calibre_link-1703" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>one fact table. In this dataset, whether import or DirectQuery, all relationships are defined with single direction cross-filtering except for the relationships from <code class="inlinecode">Sales Territory</code>, <code class="inlinecode">Product</code>, and <code class="inlinecode">Date</code> to their corresponding bridge tables, as described in the following section on bidirectional relationships. </p>
    <p class="fm-booktitle"><em class="italic">Figure 4.25</em> shows a layout of the Model view that includes three of the seven dimension tables related to <code class="inlinecode">Reseller Sales</code>:</p>
    <figure class="mediaobject"><img src="images/000241.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.25: Single-direction relationships</p>
    <p class="fm-booktitle">As you can see from the arrow icons in the Model view shown in <em class="italic">Figure 4.25</em>, the filter context in single-direction relationships exclusively navigates from the one side of a relationship to the many side. </p>
    <p class="fm-booktitle">In the absence of any DAX expressions that override the default cross-filtering behavior, tables on the one <a id="calibre_link-1592" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>side of single-direction relationships <a id="calibre_link-1704" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are not filtered or impacted by filters applied to the table on the many side of the relationship. </p>
    <p class="fm-booktitle">For example, the <code class="inlinecode">Employee</code> table has 296 unique rows based on its <code class="inlinecode">EmployeeKey</code> column. A measure, such as <code class="inlinecode">Count of Employees</code>, that references this column always returns the 296 value regardless of any filters applied to other tables in the model. </p>
    <p class="fm-booktitle">There are, of course, valid business scenarios for allowing the filter context of the related fact table to impact dimension measures, such as the <code class="inlinecode">Count of Employees</code> or the <code class="inlinecode">Distinct Count of Product Subcategories</code>. </p>
    <p class="fm-booktitle">Dataset designers can support these requirements by default via bidirectional cross-filtering relationships, but in most scenarios this isn’t necessary or appropriate. Instead, for these DAX measures, the <code class="inlinecode">CROSSFILTER()</code> function can be applied to override the default single-direction cross-filtering. See <em class="italic">The CROSSFILTER Function</em> section for the function syntax and a use case example.</p>
    <p class="fm-booktitle">In the next section, we explore the implications of unnecessary complexity when defining relationships between tables.</p>
    <h3 id="calibre_link-134" class="heading1">Direct flights only</h3>
    <p class="fm-booktitle">For the most common and data-intensive report queries, always look to eliminate any unnecessary intermediate relationships between dimension tables and fact tables.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 4.26</em>, the <code class="inlinecode">Reseller</code> table must filter an intermediate table (<code class="inlinecode">Reseller Keys</code>) prior to filtering the <code class="inlinecode">Reseller Sales</code> fact table:</p>
    <figure class="mediaobject"><img src="images/000231.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.26: Anti-pattern: intermediate table relationships</p>
    <p class="fm-booktitle">Removing the intermediate table (connecting flight), <code class="inlinecode">Reseller</code> <code class="inlinecode">Keys</code> in this example, can significantly improve performance by reducing the scan operations required of the DAX query engine. The performance benefit is particularly acute with larger fact tables and dimensions with <a id="calibre_link-1593" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>many unique values. For small fact <a id="calibre_link-1705" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>tables, such as a budget or plan table of 3,000 rows, intermediate tables can be used without negatively impacting performance.</p>
    <p class="fm-booktitle">Now that we have explored single-direction relationships, we next cover bidirectional relationships.</p>
    <h2 id="calibre_link-135" class="calibre9">Bidirectional relationships</h2>
    <p class="fm-booktitle">Bidirectional <a id="calibre_link-1589" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>cross-filtering enables the filter context of a table on <a id="calibre_link-559" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the many side of a relationship to flow to the one side of the relationship. A common use case for bidirectional relationships is represented in <em class="italic">Figure 4.27</em>:</p>
    <figure class="mediaobject"><img src="images/000259.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.27: Bidirectional cross-filtering for a many-to-many relationship</p>
    <p class="fm-booktitle">In this model, a customer can have many accounts and an individual account can be associated with many <a id="calibre_link-1971" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>customers. Given the many-to-many <a id="calibre_link-1972" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>relationship between <code class="inlinecode">Customers</code> and <code class="inlinecode">Accounts</code>, a bridge table (<code class="inlinecode">CustomerAccount</code>) is created that contains the combinations of customer and account key values. </p>
    <p class="fm-booktitle">Due to the many-to one relationship between <code class="inlinecode">CustomerAccount</code> and <code class="inlinecode">Accounts</code>, a filter applied to the <code class="inlinecode">Customers</code> table only impacts the <code class="inlinecode">Transactions</code> fact table if bidirectional cross-filtering is enabled from <code class="inlinecode">CustomerAccount</code> to <code class="inlinecode">Accounts</code>. Without this bidirectional relationship, a filter applied to the <code class="inlinecode">Customers</code> table would only impact the <code class="inlinecode">CustomerAccount</code> table as single-direction relationships only flow from the one side of the relationship to the many. </p>
    <p class="fm-booktitle">Although powerful, and preferable for certain use cases, bidirectional relationships can lead to unexpected or undesired query results. Additionally, the DAX <code class="inlinecode">CROSSFILTER()</code> function makes it <a id="calibre_link-1590" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>possible to selectively implement <a id="calibre_link-560" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>bidirectional relationship behavior for specific measures.</p>
    <p class="fm-booktitle">We now explore the implications of bidirectional relationships in the context of shared dimension tables.</p>
    <h3 id="calibre_link-136" class="heading1">Shared dimensions</h3>
    <p class="fm-booktitle">In this dataset, the <code class="inlinecode">Sales Territory</code>, <code class="inlinecode">Product</code>, <code class="inlinecode">Date</code>, <code class="inlinecode">Currency</code>, and <code class="inlinecode">Promotion</code> dimension tables <a id="calibre_link-564" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are related to both the <code class="inlinecode">Internet Sales</code> and <code class="inlinecode">Reseller Sales</code> fact tables. As shown in <em class="italic">Figure 3.28</em>, these relationships <a id="calibre_link-1696" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and the three dimension tables specific to either fact table all have single-direction cross-filtering enabled:</p>
    <figure class="mediaobject"><img src="images/000250.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.28: Shared dimension tables</p>
    <p class="fm-booktitle">Unlike the shared dimensions, the <code class="inlinecode">Reseller</code> and <code class="inlinecode">Employee</code> dimension tables are exclusively related to the <code class="inlinecode">Reseller Sales</code> fact table and the <code class="inlinecode">Customer</code> dimension is exclusively related to the <code class="inlinecode">Internet Sales</code> fact table. This is a common scenario for larger models in that fact tables both share dimensions and maintain their own exclusive relationships to certain dimension tables.</p>
    <p class="fm-booktitle">In general, it’s recommended to avoid bidirectional relationships between shared dimensions and fact tables when there are also dimension tables exclusive to certain fact tables. This is because such relationships generate filter contexts that business users often don’t expect or desire and that don’t add analytical value. </p>
    <p class="fm-booktitle">For example, if the relationship between <code class="inlinecode">Promotion</code> and <code class="inlinecode">Reseller Sales</code> was revised to allow for bidirectional cross-filtering, a report that analyzed internet sales by customers would be impacted by the filter selections of the <code class="inlinecode">Reseller</code> and <code class="inlinecode">Employee</code> dimension tables even though these two tables are not related to <code class="inlinecode">Internet Sales</code>.</p>
    <p class="fm-booktitle">In this example, the filter context would flow from the <code class="inlinecode">Reseller</code> and/or <code class="inlinecode">Employee</code> tables to <code class="inlinecode">Reseller Sales</code> but then, via the bidirectional relationship with <code class="inlinecode">Promotion</code>, also filter the <code class="inlinecode">Promotion</code> table, and finally filter the <code class="inlinecode">Internet Sales</code> fact table. </p>
    <p class="fm-booktitle">In almost all <a id="calibre_link-565" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>scenarios, the business would <a id="calibre_link-1697" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>expect the <code class="inlinecode">Reseller</code> and <code class="inlinecode">Employee</code> tables to only filter the <code class="inlinecode">Reseller Sales</code> measures. For the rare cases in which this filtering behavior is useful or needed, bidirectional cross-filtering can be enabled for specific measures via the <code class="inlinecode">CROSSFILTER()</code> function. </p>
    <p class="fm-booktitle">A better use case for bidirectional relationships is between the exclusive dimension tables and their fact tables, such as from <code class="inlinecode">Reseller</code> to <code class="inlinecode">Reseller Sales</code> or from <code class="inlinecode">Customer</code> to <code class="inlinecode">Internet Sales</code>. These bidirectional relationships aren’t required given the <code class="inlinecode">CROSSFILTER()</code> function and other options available in DAX, but they allow simple measures against these dimensions, such as the count of resellers to reflect the filter selections applied to other <code class="inlinecode">Reseller Sales</code> dimensions, such as <code class="inlinecode">Sales Territory</code> and <code class="inlinecode">Product</code>.</p>
    <p class="fm-booktitle">Bidirectional cross-filtering is also not allowed for certain relationships due to the ambiguity this would create. In this dataset, Power BI Desktop rejects bidirectional relationships between the <code class="inlinecode">Sales Territory</code>, <code class="inlinecode">Product</code>, and <code class="inlinecode">Date</code> dimension tables with the <code class="inlinecode">Internet Sales</code> and <code class="inlinecode">Reseller Sales</code> fact tables because this would create more than one filter path to the <code class="inlinecode">Sales and Margin Plan</code> fact table. </p>
    <p class="fm-booktitle">For example, a bidirectional relationship between <code class="inlinecode">Sales Territory</code> and <code class="inlinecode">Reseller Sales</code> would allow the <code class="inlinecode">Product</code> table to either filter the <code class="inlinecode">Sales and Margin Plan</code> table via the <code class="inlinecode">Product Subcategory</code> bridge table, or filter the <code class="inlinecode">Reseller Sales</code> table and then utilize the new bidirectional relationship to filter the <code class="inlinecode">Sales Territory</code> table and then its bridge table to the <code class="inlinecode">Sales and Margin Plan</code> table. Rather than guess at the correct or intended filter behavior, Power BI throws an error and identifies the tables associated with the ambiguous condition.</p>
    <p class="fm-booktitle">Similar to shared <a id="calibre_link-1973" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dimensions, date dimensions also <a id="calibre_link-1974" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>deserve special consideration when it comes to bidirectional relationships and we explain this in the next section.</p>
    <h3 id="calibre_link-137" class="heading1">Date dimensions </h3>
    <p class="fm-booktitle">Relationships between fact tables and date dimension tables should always use single-direction <a id="calibre_link-561" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>cross-filtering. </p>
    <p class="fm-booktitle">If bidirectional <a id="calibre_link-843" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>cross-filtering is used with date dimension tables, then filtered selections of other dimension tables related to the given fact table, such as <code class="inlinecode">Promotion</code> or <code class="inlinecode">Product</code>, reduce the date table rows available for date intelligence calculations. </p>
    <p class="fm-booktitle">Similar to the example with shared dimensions, although this adjusted filter context is technically correct, it often produces unexpected or undesired results, such as only the dates in which internet sales transactions were associated with a specific promotion type.</p>
    <p class="fm-booktitle">Note that the bidirectional relationship with the <code class="inlinecode">Date</code> dimension table in this dataset is between the <code class="inlinecode">Date</code> table and the bridge table containing unique month values. The bridge tables are hidden from the Report view and are not used to filter the <code class="inlinecode">Date</code> table. </p>
    <p class="fm-booktitle">With the perils of bidirectional relationships understood, there are times when bidirectional filtering is appropriate. Thus, we now explain how bidirectional filtering can be implemented using the <code class="inlinecode">CROSSFILTER</code> function.</p>
    <h2 id="calibre_link-138" class="calibre9">The CROSSFILTER function</h2>
    <p class="fm-booktitle">Similar to the <code class="inlinecode">USERELATIONSHIP()</code> function that can invoke an inactive relationship for a specific DAX <a id="calibre_link-562" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measure, the <code class="inlinecode">CROSSFILTER()</code> function can be used to implement a specific cross-filtering <a id="calibre_link-675" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>behavior (single, bidirectional, none) for a specific measure. The cross-filtering behavior specified in the measure overrides the default cross-filtering behavior defined for the relationship. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 4.29</em>, an <code class="inlinecode">Employee Count</code> measure only references the <code class="inlinecode">Employee</code> dimension table and therefore is not impacted by the filter selections of the <code class="inlinecode">Sales Territory Country</code> slicer due to the single direction relationship between <code class="inlinecode">Employee</code> and <code class="inlinecode">Reseller Sales</code>: </p>
    <figure class="mediaobject"><img src="images/000277.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.29: Bidirectional cross-filtering via the DAX CROSSFILTER function</p>
    <p class="fm-booktitle">The <code class="inlinecode">Employee Count (CF)</code> measure, however, does adjust to reflect the <code class="inlinecode">Sales Territory Country</code> selections as well as any other dimension table filter selections that impact the <code class="inlinecode">Reseller Sales</code> fact table, such as the <code class="inlinecode">Date</code>, <code class="inlinecode">Product</code>, and <code class="inlinecode">Promotion</code> dimension tables. </p>
    <p class="fm-booktitle">In this example, the <code class="inlinecode">Reseller Sales</code> fact table is first filtered to the set of <code class="inlinecode">Reseller Sales</code> rows associated with the <strong class="screentext">Germany</strong> and <strong class="screentext">United Kingdom</strong> sales territory countries. This filtered set of <code class="inlinecode">Reseller Sales</code> rows is then used to filter the <code class="inlinecode">Employee</code> table resulting in three distinct employee key values. The value of <strong class="screentext">3</strong> represents the three salespeople associated with the <code class="inlinecode">Reseller Sales</code> of <strong class="screentext">Germany</strong> and <strong class="screentext">United Kingdom</strong>.</p>
    <p class="fm-booktitle">In the absence of any filter selections in the report, the <code class="inlinecode">Employee Count</code> and <code class="inlinecode">Employee Count (CF)</code> measures return the same results (that is, 290 distinct IDs). The bidirectional <a id="calibre_link-563" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>cross-filtering <a id="calibre_link-676" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>only occurs when either a filter selection has been applied to a related dimension table in the report or within the DAX measure itself.</p>
    <p class="fm-booktitle">If the intent is to only count the distinct employee IDs associated with <code class="inlinecode">Reseller Sales</code> and to respect filter selections on related dimensions, the DAX measure can be written as follows:</p>
    <pre class="programlisting"><code class="hljs-code">CALCULATE(DISTINCTCOUNT(Employee[EmployeeAlternateKey]),'Reseller Sales')
</code></pre>
    <p class="fm-booktitle">See the <em class="italic">Dimension metrics</em> section of <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, for more details.</p>
    <p class="fm-booktitle">The syntax for <code class="inlinecode">CROSSFILTER()</code> is also very similar to <code class="inlinecode">USERELATIONSHIP()</code>, as shown by the following code block:</p>
    <pre class="programlisting"><code class="hljs-code">Employee Count = DISTINCTCOUNT(('Employee'[EmployeeAlternateKey]))
Employee Count (CF) = 
    CALCULATE(
        DISTINCTCOUNT('Employee'[EmployeeAlternateKey]), 
        CROSSFILTER('Reseller Sales'[EmployeeKey],'Employee'[EmployeeKey],
        Both)
    )
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">EmployeeAlternateKey</code> column represents the business key or natural key of the employee. The <code class="inlinecode">EmployeeKey</code> column uniquely identifies each row of the <code class="inlinecode">Employee</code> table and is <a id="calibre_link-1975" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>used in the <a id="calibre_link-1976" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>relationship with <code class="inlinecode">Reseller Sales</code>. Given the slowly changing dimension process, which adds a new employee row when certain attributes of an employee change, it’s necessary to reference the <code class="inlinecode">EmployeeAlternateKey</code> column in the <code class="inlinecode">DISTINCTCOUNT()</code> measures to only count each employee once.</p>
    <p class="fm-booktitle">The third parameter to <code class="inlinecode">CROSSFILTER()</code> can be set to <code class="inlinecode">OneWay</code>, <code class="inlinecode">Both</code>, or <code class="inlinecode">None</code>. Given the potential for unexpected or undesired results when applying bidirectional cross-filtering relationships to models with multiple fact tables, it’s generally recommended to selectively enable bidirectional cross-filtering per measure, such as in the preceding example. </p>
    <p class="fm-booktitle">There may be valid use cases for both single-direction and bidirectional cross-filtering relationships, such as the two measures seen here. Including these alternative measures in the dataset doesn’t violate the version control objective but does entail additional user training and documentation. A report developer or business analyst can regularly provide brief tutorials or updated documents on these measures and other dataset customizations.</p>
    <p class="fm-booktitle">We have now completed our exploration of relationships. The next section covers another aspect of data models, model metadata.</p>
    <h1 id="calibre_link-139" class="heading">Model metadata</h1>
    <p class="fm-booktitle">Metadata is simply <a id="calibre_link-1141" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the concept of data or information about data. In Power BI, metadata is available for tables, columns, and measures within a dataset.</p>
    <p class="fm-booktitle">The consistent and complete application of metadata properties, such as <strong class="screentext">Default summarization</strong> and <strong class="screentext">Data category</strong>, greatly affect the usability of a dataset. With a solid foundation of tables, column data types, and relationships in place, dataset designers and BI teams should consider all primary metadata properties and their implications for user experience as well as any additional functionality they can provide.</p>
    <p class="fm-booktitle">In the following sections, we explore many of the most important types of model metadata, starting with the visibility of tables and columns.</p>
    <h2 id="calibre_link-140" class="calibre9">Visibility</h2>
    <p class="fm-booktitle">Data modelers can define the visibility of tables, columns, and measures within a dataset. In other <a id="calibre_link-1142" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>words, each of these elements can either be visible or hidden to report authors and business users within the Report view.</p>
    <p class="fm-booktitle">Every table, column, and measure that isn’t explicitly needed in the Report view should be hidden. This usually includes all relationship columns and any measure support tables and measure expressions. </p>
    <p class="fm-booktitle">If a column is rarely needed or only needed for a specific report, it can be temporarily unhidden to allow for this report to be developed and then hidden again to maximize usability. Numeric fact table columns that are referenced by DAX measures (for example, quantity) should be hidden from the fields list, as the measures can be used for visualizing this data.</p>
    <p class="fm-booktitle">As discussed in the <em class="italic">Parameter tables</em> section, when all columns of a table are hidden from the Report view and at least one DAX measure identifies the given table as its home table, a measure group icon (calculator symbol) appears in the fields list. </p>
    <p class="fm-booktitle">This clear differentiation between the <code class="inlinecode">measures</code> and <code class="inlinecode">dimension</code> columns (attributes) is recommended, especially if business users are developing their own reports based on the dataset. </p>
    <p class="fm-booktitle">Tables with both visible columns and measures force business users and report developers to navigate between these different elements in the fields list. This can be onerous given the volume of DAX measures for common fact tables. If it’s necessary to expose one or a few fact table columns permanently, consider migrating some or all of the DAX measures for the table to a parameter table to simplify navigation.</p>
    <p class="fm-booktitle">Visibility applies <a id="calibre_link-1143" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to tables, columns, and measures. We next look at additional metadata available to just columns and measures.</p>
    <h1 id="calibre_link-141" class="heading">Column and measure metadata</h1>
    <p class="fm-booktitle">Dataset designers should review the columns and measures of each table exposed to the Report view <a id="calibre_link-634" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and ensure that appropriate metadata properties have been <a id="calibre_link-1102" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>configured. These settings, including any custom sorting described earlier in the <em class="italic">Custom sort</em> section of this chapter, only need to be applied once and can significantly improve the usability of the dataset.</p>
    <p class="fm-booktitle">In the following sections, we explore some of the more important metadata settings for columns and measures. Some of these apply only to columns, such as the <strong class="screentext">Default summarization</strong> setting explained in the next section.</p>
    <h3 id="calibre_link-142" class="heading1">Default summarization</h3>
    <p class="fm-booktitle">As mentioned, the <strong class="screentext">Default summarization</strong> property only applies to columns and controls the default <a id="calibre_link-638" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>aggregation applied to a column such <a id="calibre_link-891" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as sum, average, first, last, and so on.</p>
    <p class="fm-booktitle">The <strong class="screentext">Default summarization</strong> property should be revised from Power BI’s default setting to the <strong class="screentext">Do not summarize</strong> value for all columns. Power BI applies a <strong class="screentext">Default summarization</strong> setting of <strong class="screentext">Sum</strong> for all columns with a numeric data type (whole number, fixed decimal number, decimal number) when a table is first loaded to the data model. </p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 4.30</em>, a summation symbol <strong class="screentext">∑</strong> appears next to the field name in the fields list if a <strong class="screentext">Default summarization</strong> other than <strong class="screentext">Do not Summarize</strong> is enabled:</p>
    <figure class="mediaobject"><img src="images/000268.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.30: Default summarization for numeric columns</p>
    <p class="fm-booktitle">As illustrated in <em class="italic">Figure 4.30</em>, the <strong class="screentext">Default summarization</strong> property for a column can be accessed via the <strong class="screentext">Column tools</strong> tab of the Data view. Additionally, as with other metadata properties, <strong class="screentext">Default summarization</strong> can also be accessed from the Report view. </p>
    <p class="fm-booktitle">As mentioned in the <em class="italic">Data view</em> section earlier, implementing metadata changes, such as <strong class="screentext">Default summarization</strong> and <strong class="screentext">Data category</strong>, via the <strong class="screentext">Column tools</strong> tab from the Report view is the only option for DirectQuery models. </p>
    <p class="fm-booktitle">If a user selects a column with <strong class="screentext">Default summarization</strong> enabled, the aggregation specified by the <a id="calibre_link-639" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>property (for example, <strong class="screentext">Sum</strong>, <strong class="screentext">Average</strong>) is returned rather than the grouping behavior of <strong class="screentext">Do not summarize</strong>. In many <a id="calibre_link-892" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>cases, the numeric column is only used to group measures, such as <code class="inlinecode">Internet Net Sales by Product Dealer Price</code>, and DAX measures can be written for any needed calculation logic. </p>
    <p class="fm-booktitle">Additionally, <strong class="screentext">Default summarization</strong><strong class="screentext"> </strong>can create confusion, such as when a user expects a sum aggregation based on the summation symbol but the model author has applied an alternative default summarization (for example, <strong class="screentext">Minimum</strong>, <strong class="screentext">Average</strong>). Alternatively, the names assigned to DAX measures, such as <strong class="screentext">Average Product Dealer Price</strong>, make it clear which aggregation is being applied.</p>
    <p class="fm-booktitle">For these reasons, it’s recommended to convert the default summarization setting to <strong class="screentext">Do not summarize</strong>. A broader concept of this recommendation is to build essential DAX measure expressions into the dataset, as described in <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, to make Power BI datasets more flexible and powerful for users and report developers.</p>
    <p class="fm-booktitle">While the <strong class="screentext">Default summarization</strong> metadata setting only applies to columns since measures <a id="calibre_link-640" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>inherently aggregate column information <a id="calibre_link-893" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>or otherwise return scalar (single) values, the <strong class="screentext">Data format</strong> setting applies to both columns and measures as explained in the next section.</p>
    <h3 id="calibre_link-143" class="heading1">Data format</h3>
    <p class="fm-booktitle">The <strong class="screentext">Data format</strong> setting controls <a id="calibre_link-761" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>how data is displayed to users when <a id="calibre_link-637" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>viewed in report visuals.</p>
    <p class="fm-booktitle">The default formatting <a id="calibre_link-1105" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI applies to columns and measures should also be revised to a corporate standard or a format applicable to the column or measure. For example, the default full date format of “Friday July 1, 2011” can be revised to the more compact (mm/dd/yyyy) format of 7/1/2011. Likewise, the currency format for measures calculating financial data can be revised to display two or no decimal places and the thousands separator can also be added to numeric measures.</p>
    <p class="fm-booktitle">In addition to standard data formats such as <strong class="screentext">Whole Number</strong>, <strong class="screentext">Currency</strong>, <strong class="screentext">Percentage</strong> and so on, <strong class="screentext">Custom</strong> formats are also supported. In the <strong class="screentext">Properties</strong> pane of the Model view under <strong class="screentext">Formatting</strong> and then <strong class="screentext">Format</strong>, you can choose to have a <strong class="screentext">Custom</strong> format. Choosing a <strong class="screentext">Custom</strong> format allows you to enter a custom display format such as <code class="inlinecode">00:00:00</code>, for example, which can be useful for displaying duration formats such as hh:mm:ss.</p>
    <p class="fm-booktitle">Business users and report developers do not have the ability to change column and measure formatting when connecting to the published dataset from Power BI or Excel. Therefore, it’s important to choose widely accepted data formats and formats that lend themselves to intuitive data visualizations.</p>
    <p class="fm-booktitle">We next explore another setting applicable to both columns and measures, the <strong class="screentext">Data category </strong>setting.</p>
    <h3 id="calibre_link-144" class="heading1">Data category</h3>
    <p class="fm-booktitle">The <strong class="screentext">Data category</strong> setting allows data modelers to tag columns and measures as specific types of information. Setting the <a id="calibre_link-757" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>data category changes the behavior <a id="calibre_link-635" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of these columns and measures within <a id="calibre_link-1103" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI.</p>
    <p class="fm-booktitle">By default, Power BI does not assign columns or measures to any of the 13 available data categories. Assigning geographic categories, such as <strong class="screentext">City</strong>, helps Power BI determine how to display these values on map visualizations. For example, certain city names, such as <strong class="screentext">Washington</strong>, are also associated with state or province names and without an assigned data category, map visuals would have to guess whether to plot the city or the state.</p>
    <p class="fm-booktitle">Currently 10 of the 13 column data categories are related to geography, including <strong class="screentext">County</strong>, <strong class="screentext">Country</strong>, <strong class="screentext">Continent</strong>, <strong class="screentext">City</strong>, <strong class="screentext">Latitude</strong>, <strong class="screentext">Longitude</strong>, <strong class="screentext">Postal code</strong>, <strong class="screentext">Address</strong>, <strong class="screentext">Place</strong>, and <strong class="screentext">State or Province</strong>. </p>
    <p class="fm-booktitle">The <strong class="screentext">Web URL</strong> <strong class="screentext">Data Category</strong> can be used to enable the initiation of emails from Power BI report visuals. In <em class="italic">Figure 4.31</em>, the <strong class="screentext">Employee Email Link</strong> column contains mailto values (that is, <a href="mailto://John@adworks.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">mailto://John@adworks.com</span></a>) and the <strong class="screentext">URL icon</strong> property under <strong class="screentext">Values</strong> has been set to <strong class="screentext">On</strong>:</p>
    <figure class="mediaobject"><img src="images/000295.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.31: Web URL data category for Employee Email Link column</p>
    <p class="fm-booktitle">Without specifying the <strong class="screentext">Web URL</strong> data category of the <strong class="screentext">Employee Email Link</strong> column, the values appear as normal text. With the <strong class="screentext">Web URL</strong> data category specified, the full mailto link is displayed in the table visual by default and this can also be used to initiate an email. Both the <strong class="screentext">Web URL</strong> data category specification and the <strong class="screentext">URL icon</strong> property (set to <strong class="screentext">On</strong>) are required to display the email icon.</p>
    <p class="fm-booktitle">The <strong class="screentext">Image URL</strong> data category can be used to expose images in report visualizations, such as with a slicer visualization set to an <strong class="screentext">Orientation</strong> of <strong class="screentext">Horizontal</strong> as shown in <em class="italic">Figure 4.32</em>:</p>
    <figure class="mediaobject"><img src="images/000286.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.32: Image URL Data Category used for Chiclet slicer visual</p>
    <p class="fm-booktitle">The <strong class="screentext">Barcode</strong> data category, the <a id="calibre_link-758" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>only other non-geographic category <a id="calibre_link-1104" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>beyond <strong class="screentext">Web URL</strong> and <strong class="screentext">Image URL</strong>, can be used by <a id="calibre_link-636" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI mobile applications to scan individual items from mobile devices. </p>
    <p class="fm-booktitle">Next, we cover another important metadata field, <strong class="screentext">Description</strong>.</p>
    <h2 id="calibre_link-145" class="calibre9">Description</h2>
    <p class="fm-booktitle">The <strong class="screentext">Description</strong> metadata <a id="calibre_link-641" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>property lets data modelers <a id="calibre_link-1106" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>provide short explanations and information <a id="calibre_link-894" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>about elements in the data model.</p>
    <p class="fm-booktitle">Descriptions can be added to the tables, columns, and measures of a data model to aid users during report development. Once descriptions have been applied and the dataset has been published to the Power BI service, users connected to the dataset via reports can view the descriptions as they hover over the fields in the fields list. This feature is particularly useful in communicating the business logic contained in measures, such as whether discounts are included or excluded in the <code class="inlinecode">Internet Net Sales</code> measure. </p>
    <p class="fm-booktitle">Although field descriptions are recommended, particularly for measures that contain custom or complex logic, they are not a substitute for the formal documentation of a dataset. In most scenarios, the field description is only used as a convenient reminder of the essential logic or meaning and thus can be more concise than the official corporate definition of the column or measure. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 4.33</em>, a report author is connected to a published Power BI dataset and has hovered over the <code class="inlinecode">Internet Gross Product Margin</code> measure:</p>
    <figure class="mediaobject"><img src="images/000315.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.33: Field descriptions as tooltips in the Fields list</p>
    <p class="fm-booktitle">The descriptions can <a id="calibre_link-1977" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>only be viewed from Power BI Desktop or <a id="calibre_link-1978" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the Power BI service. Field descriptions are exclusive to the fields list and are not displayed in visuals on the report canvas. </p>
    <p class="fm-booktitle">Descriptions can be applied by using the <strong class="screentext">Properties</strong> pane of the Model view as shown in <em class="italic">Figure 4.34</em>:</p>
    <figure class="mediaobject"><img src="images/000304.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.34: Properties pane of the Model view</p>
    <p class="fm-booktitle">Users connected to <a id="calibre_link-642" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the dataset via Live connections <a id="calibre_link-1107" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can view the descriptions via the <strong class="screentext">Properties</strong> pane. In this <a id="calibre_link-895" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>context, the <strong class="screentext">Name</strong> and <strong class="screentext">Description</strong> properties are read-only.</p>
    <p class="fm-booktitle">This completes our exploration of metadata property settings. In the following section, we provide advice around optimizing the performance of datasets.</p>
    <h1 id="calibre_link-146" class="heading">Optimizing data model performance</h1>
    <p class="fm-booktitle">One of the main <a id="calibre_link-775" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>reasons for creating a dataset, particularly an import mode dataset, is to provide a performant data source for reports and dashboards. Although Power BI supports traditional reporting workloads, such as email subscriptions and view-only usage, Power BI empowers users to explore and interact with reports and datasets. The responsiveness of visuals for this self-service workload is largely driven by fundamental data model design decisions, as explained in the following subsections. </p>
    <p class="fm-booktitle">Additional performance factors outside the scope of this chapter include the hardware resources allocated to the dataset, such as with Power BI Premium capacities (v-cores, RAM), the <a id="calibre_link-1979" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>efficiency of the DAX measures created for the dataset, the design of the Power BI reports that query the dataset, and the volume and timing of queries generated by users. </p>
    <p class="fm-booktitle">We first take a look at optimizing import mode datasets.</p>
    <h2 id="calibre_link-147" class="calibre9">Import</h2>
    <p class="fm-booktitle">The performance of an import mode dataset is largely driven by fundamental design decisions, such as <a id="calibre_link-1047" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the granularity of fact and dimension tables. For example, large dimension tables with more than a million unique values, such as customer IDs or product IDs produce much less performant report queries than small dimensions with only 100 to 1,000 unique values. </p>
    <p class="fm-booktitle">Likewise, DAX measures that access columns containing thousands of unique values perform much more slowly than measures that reference columns with only a few unique values. A simplistic but effective understanding is that higher levels of cardinality (unique values) result in greater memory consumption via reduced compression and CPUs require additional time to scan greater amounts of memory. </p>
    <p class="fm-booktitle">An import mode designer should be cautious about the performance implications of relationships to large dimension tables. Although usability is somewhat compromised, a separate but less granular dimension containing only the most common columns can be created to drive more efficient report queries. For example, business users may rarely need to access individual product <strong class="screentext">Stock Keeping Units</strong> (<strong class="screentext">SKUs</strong>) and would prefer the performance benefit <a id="calibre_link-1775" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>provided by a smaller dimension table that contains only product categories and product subcategories.</p>
    <h3 id="calibre_link-148" class="heading1">Query caching</h3>
    <p class="fm-booktitle">For Premium and <a id="calibre_link-1048" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Embedded workloads, the Power BI service supports automatic query caching that can be enabled or disabled via the <strong class="screentext">Settings</strong> page for each dataset. When enabled, this feature automatically caches the queries associated with the initial opening of a report by each user. </p>
    <p class="fm-booktitle">Query caching is only available for import mode datasets and respects personal bookmarks, persistent filters, and security rules. The query cache resets during scheduled dataset refreshes and this can result in performance degradation in the event of multiple dataset refreshes occurring simultaneously or if the capacity is heavily loaded. While it is recommended to enable this feature, enterprise BI teams should be aware <a id="calibre_link-1980" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of these considerations.</p>
    <p class="fm-booktitle">We next look at another important consideration for import mode datasets, columnar compression.</p>
    <h3 id="calibre_link-149" class="heading1">Columnar compression</h3>
    <p class="fm-booktitle">Power BI uses the xVelocity In-Memory Analytics Engine (previously known as VertiPaq) for datasets. This engine <a id="calibre_link-1041" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>applies several techniques to achieve 10X or greater data compression, thus minimizing the amount of memory required to be scanned to return query results.</p>
    <p class="fm-booktitle">To optimize columnar compression, it’s important to understand the columnar layout and internal storage of import mode datasets. Power BI creates individual segments of approximately one million rows and stores separate memory structures for column data, the dictionary of unique values for columns, relationships, and hierarchies.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 4.35</em>, three segments are used to store a fact table of 2.8 million rows:</p>
    <figure class="mediaobject"><img src="images/000335.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.35: Columnar storage of import mode datasets</p>
    <p class="fm-booktitle">Since only the columns required for a query are scanned during query execution, a relatively expensive column in terms of memory consumption (due to many unique values), such as <code class="inlinecode">Order #</code>, can be stored in the dataset without negatively impacting queries that only access other columns. </p>
    <p class="fm-booktitle">Removing fact table columns or reducing the cardinality of fact table columns that are not used in queries or relationships nonetheless benefits the storage size and resources required to refresh the dataset. Fewer fact table columns may also enable Power BI to find a more optimal sort order for compression and thus benefit the query performance. </p>
    <p class="fm-booktitle">Eliminate any DAX-calculated column on fact tables as these columns are not compressed as efficiently as imported columns. If necessary, replace DAX-calculated columns with the equivalent expression in the source M query or SQL View. </p>
    <p class="fm-booktitle">Additionally, as per the <em class="italic">Fact table columns</em> section earlier in this chapter, remove columns that can be computed within DAX measures via simple expressions (+,-,/,*). For example, the <code class="inlinecode">Sales</code> column from <em class="italic">Figure 4.36</em> can be excluded from the import dataset given the <code class="inlinecode">Price</code> and <code class="inlinecode">Qty</code> columns.</p>
    <p class="fm-booktitle">During query execution over tables with more than one segment, one CPU thread is associated per segment. This parallelization is limited by the number of CPUs available to the dataset (for example, Power BI Premium P1 with four backend v-cores), and the number of segments required to resolve the query. </p>
    <p class="fm-booktitle">Therefore, ideally, the rows of fact tables can be ordered such that only a portion of the segments are <a id="calibre_link-1042" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>required to resolve queries. Using the example of the 2.8M-row fact table, a query that’s filtered on the year 2017 would only require one CPU thread and would only scan the required column segments within <strong class="screentext">Segment 3</strong>. </p>
    <p class="fm-booktitle">The internal order of fact table rows cannot be dictated by the dataset designer as Power BI determines the optimal order that leads to the highest compression during dataset refreshes. However, dataset designers can add a sorting transformation to the M query of a fact table (<code class="inlinecode">Table.Sort()</code>) such that Power BI, at a minimum, considers this particular order during its processing. Such a sorting operation can be expensive in terms of the time taken to refresh import mode datasets but may prove beneficial to report query performance.</p>
    <p class="fm-booktitle">Whether Power BI used the particular sort order can be determined by analyzing the memory footprint of the sorted column before and after the data is loaded. If the size of the sorted column is significantly reduced following the refresh operation, Power BI took advantage of the specified sort order. </p>
    <p class="fm-booktitle">Given the importance of columnar compression for import-mode datasets, we next explain tools and techniques for analyzing the internal workings of the xVelocity In-Memory Analytics Engine <a id="calibre_link-1981" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>in greater detail via Data Management Views (DMVs) and the VertiPaq Analyzer.</p>
    <h3 id="calibre_link-150" class="heading1">Memory analysis via DMVs and the VertiPaq Analyzer</h3>
    <p class="fm-booktitle">DMVs are <a id="calibre_link-1043" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Analysis Services queries that return information about server operations, server health, and <a id="calibre_link-1045" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>data model objects at the time the queries are run.</p>
    <p class="fm-booktitle">The same DMVs that provide information about Analysis Services tabular databases are also available <a id="calibre_link-772" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>for Power BI datasets. Querying these DMVs can <a id="calibre_link-1813" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>provide schema information, such as the columns used to define relationships, the definitions of DAX measures, and the memory usage of columns and other structures. </p>
    <p class="fm-booktitle">From a memory analysis standpoint, the two most important DMVs are <code class="inlinecode">DISCOVER_STORAGE_TABLE_COLUMNS</code> and <code class="inlinecode">DISCOVER_STORAGE_TABLE_COLUMN_SEGMENTS</code>.</p>
    <p class="fm-booktitle">These and other DMVs are at the heart of VertiPaq Analyzer, a set of open-source libraries that expose statistical information about tabular models. The use of VertiPaq Analyzer within DAX Studio is shown in <em class="italic">Figure 4.36</em> with the dictionary size of each column of a Power BI dataset retrieved via the <code class="inlinecode">DISCOVER_STORAGE_TABLE_COLUMNS</code> DMV:</p>
    <figure class="mediaobject"><img src="images/000325.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.36: Dictionary size by column</p>
    <p class="fm-booktitle">The use of <a id="calibre_link-1044" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>VertiPaq Analyzer can quickly expose columns with high <strong class="screentext">Cardinality</strong> and large <strong class="screentext">Dictionary</strong> sizes <a id="calibre_link-1046" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>that may be good candidates for exclusion from the dataset.</p>
    <p class="fm-booktitle">This concludes our exploration of performance optimization for import mode datasets and we next move on to DirectQuery mode datasets.</p>
    <h2 id="calibre_link-151" class="calibre9">DirectQuery </h2>
    <p class="fm-booktitle">Dataset designers <a id="calibre_link-919" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>have less control over the performance of pure DirectQuery datasets given that data storage and query execution is the responsibility of the source system. </p>
    <p class="fm-booktitle">However, dataset designers can ensure that the DAX functions used in measures take advantage of the source system resources and can partner with source system owners and experts to test alternative data source optimizations, such as the columnstore index for SQL Server. In SQL Server, columstore indexes use column-based data storage and query processing and can achieve gains up to 10 times the query performance and 10 times the compression versus traditional row-oriented storage and uncompressed data respectively. </p>
    <p class="fm-booktitle">Additionally, as advised earlier regarding the <strong class="screentext">Assume referential integrity</strong> relationship property, performance <a id="calibre_link-528" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can be significantly improved by generating inner-join SQL statements.</p>
    <p class="fm-booktitle">Let’s now take a deeper look at optimizing DirectQuery datasets.</p>
    <h3 id="calibre_link-152" class="heading1">Columnstore and HTAP</h3>
    <p class="fm-booktitle">Business intelligence queries generated from tools such as Power BI are more suited for columnar data <a id="calibre_link-915" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>stores and most DirectQuery source <a id="calibre_link-917" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>systems offer a columnar feature to deliver <a id="calibre_link-643" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>improved query performance. For Microsoft SQL Server, the columnstore index is recommended for large fact tables and this index eliminates the need to maintain traditional B-tree indexes or to apply row or page compression. </p>
    <p class="fm-booktitle">Additionally, a combination of non-clustered columnstore indexes and in-memory table technologies <a id="calibre_link-1037" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can be used to support Hybrid Transactional and Analytical Processing (HTAP) workloads. HTAP refers to the tools and features that enable live data to be analyzed without affecting transactional operations. HTAP features include memory-optimized tables, natively compiled stored procedures, and clustered columnstore indexes.</p>
    <p class="fm-booktitle">For example, the Power BI queries against the DirectQuery dataset would utilize the columnstore index without impacting the <strong class="screentext">OnLine Transactional Processing</strong> (<strong class="screentext">OLTP</strong>) workload of the <a id="calibre_link-1168" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>database. OLTP refers to the traditional transaction operations of databases that facilitate and manage transaction-oriented applications.</p>
    <p class="fm-booktitle">The details of these features and configurations are outside the scope of this book but at a minimum the owners or experts on the DirectQuery data source should be engaged on the performance of the Power BI dataset. </p>
    <p class="fm-booktitle">The following <a id="calibre_link-1982" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>URL provides guidance on designing <a id="calibre_link-1983" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>columnstore indexes for SQL Server database <a id="calibre_link-1984" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>services (for example, Azure SQL Database, Azure SQL Data Warehouse) and on-premises SQL Server database environments: <a href="http://bit.ly/2EQon0q" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2EQon0q</span></a>.</p>
    <p class="fm-booktitle">The <em class="italic">Related Tasks</em> section of the <em class="italic">Columnstore indexes &ndash; Design guidance</em> documentation referenced in the preceding URL contains links for the T-SQL DDL statements associated with implementing the columnstore index. In most scenarios, the dataset designer in a Power BI project or the author of an Analysis Services model is not responsible for or authorized to optimize data sources using methods such as a columnstore index. </p>
    <p class="fm-booktitle">However, the dataset designer can regularly collaborate with the responsible subject matter expert or team as the demands and requirements of the dataset change. For example, the dataset designer can use tools such as DAX Studio and SQL Server Profiler, as described in <em class="italic">Microsoft Power BI Cookbook 2nd Edition</em> (<a href="https://www.amazon.com/Microsoft-Power-Cookbook-expertise-hands/dp/1801813043" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://www.amazon.com/Microsoft-Power-Cookbook-expertise-hands/dp/1801813043</span></a>), to capture the common or important SQL queries generated by Power BI reports and then share this information with the data warehouse team.</p>
    <p class="fm-booktitle">Alternatively, the database or data warehouse team can run a trace against a data source system as per the DirectQuery report execution section of <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, during a test query workload from Power BI. This trace data could be used to identify <a id="calibre_link-916" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the specific columns, tables, or expressions <a id="calibre_link-918" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>associated with slow queries and thus inform database modification decisions.</p>
    <p class="fm-booktitle">Let’s next look at automatic aggregations.</p>
    <h3 id="calibre_link-153" class="heading1">Automatic aggregations</h3>
    <p class="fm-booktitle">Automatic aggregations are a <a id="calibre_link-533" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>new feature (currently in preview) that uses <strong class="screentext">machine learning</strong> (<strong class="screentext">ML</strong>) to continuously train and optimize ML algorithms to <a id="calibre_link-1089" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>intelligently cache aggregations in memory. When enabled, automatic <a id="calibre_link-914" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>aggregations can improve query performance by reducing DirectQuery queries against the source system. </p>
    <p class="fm-booktitle">Automatic aggregations train the ML model during scheduled refreshes of the dataset at either a <strong class="screentext">Day</strong> or <strong class="screentext">Week </strong>interval. The first scheduled refresh during the specified interval thus becomes a refresh of the dataset as well as a training operation for the ML model. During these training operations, Power BI evaluates the query log in order to retrain the ML algorithms regarding which aggregations are most import to cache in memory. </p>
    <h2 id="calibre_link-154" class="calibre9">Composite</h2>
    <p class="fm-booktitle">Composite models, which blend import mode and DirectQuery mode tables, may be useful when <a id="calibre_link-651" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dealing with extremely large fact tables with potentially trillions of rows, or even millions or billions of rows, that cannot comfortably fit into an import-only data model due to memory limitations or other constraints. </p>
    <p class="fm-booktitle">Power BI has a specific feature designed to help optimize data model performance that is specific to composite data models. Dataset designers can leverage this feature, which is specifically designed to help speed up the performance of DirectQuery tables and calculations. The feature is called aggregation tables, which we explore in the following subsection.</p>
    <h3 id="calibre_link-155" class="heading1">Aggregation tables</h3>
    <p class="fm-booktitle">Aggregation tables are a <a id="calibre_link-647" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>feature of composite data <a id="calibre_link-481" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>models specifically targeted at improving the performance of the DirectQuery components of the data model. Aggregation tables allow the dataset designer to create summary tables of pre-aggregated measures that are stored locally within the data model in either import or dual storage mode. </p>
    <p class="fm-booktitle">These aggregation tables allow simple aggregations, like sums and averages, to be retrieved from the aggregation for certain levels of granularity. </p>
    <p class="fm-booktitle">Only when the granularity of the aggregation table is exceeded, such as reporting against a particular product SKU in the case of an aggregation table grouped by product category and product <a id="calibre_link-648" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>subcategory, will DirectQuery operations <a id="calibre_link-482" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>occur. In general, filtering or displaying detail columns not included in the aggregation table will cause DirectQuery operations against the source system.</p>
    <p class="fm-booktitle">While not strictly needed given the number of rows in the <code class="inlinecode">Reseller Sales</code> table, an aggregation table was created in the composite version of the data model. The aggregation table can be created using SQL or in Power Query. In this case, for demonstration purposes, we chose to use Power Query:</p>
    <pre class="programlisting"><code class="hljs-code">let
    Source = #"Reseller Sales",
    GroupRows = Table.Group(Source, {"OrderDateKey", "ResellerKey", "SalesTerritoryKey"}, {{"Sum of OrderQuantity", each List.Sum([OrderQuantity]), type nullable number}, {"Sum of Unit Price", each List.Sum([UnitPrice]), type nullable number}, {"Sum of DiscountAmount", each List.Sum([DiscountAmount]), type nullable number}, {"Count of Sales", each Table.RowCount(_), Int64.Type}}),
    ChangedType = Table.TransformColumnTypes(GroupRows,{{"Sum of Unit Price", Currency.Type}})
in
    ChangedType
</code></pre>
    <p class="fm-booktitle">It is critical to double-check the data types for the aggregation columns as they must have the same data type as the column on which the aggregation is based. The aggregation table, <code class="inlinecode">Reseller Sales Aggregation</code>, is hidden, the storage mode set to <strong class="screentext">Import</strong>, and relationships are created to the corresponding dimension tables, <code class="inlinecode">Date</code>, <code class="inlinecode">Reseller</code>, and <code class="inlinecode">Sales Territory</code>, as shown in <em class="italic">Figure 4.37</em>:</p>
    <figure class="mediaobject"><img src="images/000354.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.37: Aggregation table relationships</p>
    <p class="fm-booktitle">If not already, the dimension tables, <code class="inlinecode">Date</code>, <code class="inlinecode">Reseller</code>, and <code class="inlinecode">Sales Territory</code>, should all be set to a storage mode of <strong class="screentext">Dual</strong> as shown in <em class="italic">Figure 4.38</em>. Since these tables must operate against the DirectQuery <code class="inlinecode">Reseller Sales</code> table as well as the import mode <code class="inlinecode">Reseller Sales Aggregation</code> table, a storage mode of <strong class="screentext">Dual</strong> ensures that query performance is optimized under all circumstances. </p>
    <p class="fm-booktitle">To configure <a id="calibre_link-649" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>aggregations, use the <strong class="screentext">Fields</strong> pane of the <a id="calibre_link-483" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Model view and either from the ellipses menu to the right of the table name or by right-clicking the table name, choose <strong class="screentext">Manage aggregations</strong>. This opens the <strong class="screentext">Manage aggregations</strong> dialog as shown in <em class="italic">Figure 4.38</em>:</p>
    <figure class="mediaobject"><img src="images/000345.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 4.38: Aggregation table relationships</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 4.38</em>, in all cases, the <strong class="screentext">DETAIL TABLE</strong> and <strong class="screentext">DETAIL COLUMN</strong> settings for each aggregation table column should reflect the original source column in the corresponding fact table. Grouping columns like <code class="inlinecode">OrderDateKey</code>, <code class="inlinecode">ResellerKey</code>, and <code class="inlinecode">SalesTerritoryKey</code> should be set to a <strong class="screentext">SUMMARIZATION</strong> of <strong class="screentext">GroupBy</strong> while table row counts like <code class="inlinecode">Count of Sales</code> should be set to <strong class="screentext">Count table rows</strong>. Other aggregations should be set to their designated aggregation (<strong class="screentext">Sum</strong>, <strong class="screentext">Count</strong>, <strong class="screentext">Max</strong>, <strong class="screentext">Min</strong>).</p>
    <p class="fm-booktitle">Once aggregations are set, you can consider the aggregation table as a sort of surrogate for the actual fact table <a id="calibre_link-1985" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>for the designated aggregations <a id="calibre_link-1986" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and specified grain. Thus, queries for the aggregations contained within the local (import mode) aggregation table are used instead of querying the DirectQuery source when those aggregations are as granular as (or less than) the aggregation table. </p>
    <p class="fm-booktitle">Aggregations at a <a id="calibre_link-650" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>higher granularity (more granular) than <a id="calibre_link-484" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the aggregation table circumvent the aggregation table and directly use the DirectQuery source instead.</p>
    <p class="fm-booktitle">This concludes our analysis and advice on optimizing data model performance. As one can see, many different features are included in Power BI that allow dataset designers to optimize the performance of datasets used for analysis and reporting.</p>
    <h1 id="calibre_link-156" class="heading">Summary</h1>
    <p class="fm-booktitle">This chapter built on the queries from<em class="italic"> Chapter 3</em>, <em class="italic">Connecting To Sources And Transforming Data With M</em>, to implement import, DirectQuery, and composite analytical data models. Relationships were created between fact and dimension tables as well as between bridge tables and the <code class="inlinecode">Sales and Margin Plan</code> to enable actual versus plan reporting and analysis. </p>
    <p class="fm-booktitle">Additionally, the fundamentals of designing Power BI models were reviewed and detailed guidance on metadata and the DMVs available for analyzing memory usage was provided. Finally, guidance was provided for optimizing the performance of import, DirectQuery, and composite data models.</p>
    <p class="fm-booktitle">The following chapter continues to build on the dataset for this project by developing analytical measures and security models. The DAX expressions implemented in the next chapter directly leverage the relationships defined in this chapter and ultimately drive the visualizations and user experience demonstrated in later chapters. </p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-1">
<div id="calibre_link-1987" class="calibre2">
<div id="calibre_link-1988" class="calibre3"><div id="calibre_link-1989" class="calibre4">
    <h1 class="heading">5</h1>
    <h1 id="calibre_link-157" class="mainheading">Developing DAX Measures and Security Roles</h1>
    <p class="fm-booktitle">This chapter details the implementation of DAX measures and security roles for the dataset developed in the previous two chapters. We first create a set of base measures for each business process that represents business definitions such as gross and net sales, cost of sales, and margin percentages. These base measures are then leveraged in the development of date intelligence calculations including year-to-date (<code class="inlinecode">YTD</code>) and year-over-year (<code class="inlinecode">YOY</code>) growth. Additionally, a set of custom measures is created, including exceptions, rankings, and KPI targets, to further extract insights from the dataset and simplify report visualizations.</p>
    <p class="fm-booktitle">This chapter also contains examples of dynamic security models in which the identity of the logged-in user is used to filter the dataset. Finally, guidance is provided on testing the performance of DAX expressions with DAX Studio.</p>
    <p class="fm-booktitle">In this chapter, we’ll review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">DAX measure basics</li>
      <li class="bulletlist">Base measures</li>
      <li class="bulletlist">Date intelligence metrics</li>
      <li class="bulletlist">Calculation groups</li>
      <li class="bulletlist">Dimension metrics</li>
      <li class="bulletlist">Ranking metrics</li>
      <li class="bulletlist">Security roles</li>
      <li class="bulletlist">Performance testing</li>
    </ul>
    <p class="fm-booktitle">Minimal experience or technical skill is required to grasp the essentials of star schema dimensional modeling and to create a basic Power BI dataset containing fact-to-dim relationships and a set of basic DAX measures. However, even with a well-designed data warehouse reflecting a robust data transformation process, business requirements for more complex analytical logic and security are unavoidable. To meet these requirements, it’s essential to maintain a solid foundational knowledge of DAX and its concepts of filter context and row context. Thus, we start with a review of the basics concepts that underpin DAX measures.</p>
    <h1 id="calibre_link-158" class="heading">DAX measure basics</h1>
    <p class="fm-booktitle">All analytical expressions ranging from simple sums and averages to custom, complex statistical analyses should be implemented within DAX measures. Although it’s technically <a id="calibre_link-858" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>possible to utilize the default summarization property of columns for some basic measures, well-developed datasets should embed calculation logic into DAX measure definitions thus improving clarity and reusability.</p>
    <p class="fm-booktitle">The need for the rapid deployment of complex yet efficient and manageable DAX measures, queries, and security roles underscores earlier guidance regarding the value of an experienced Power BI dataset developer to deliver enterprise-grade solutions. Organizations are strongly advised to appreciate DAX as a functional programming language (not just Excel formulas) that is central to Power BI solutions and thus take steps to ensure that Power BI dataset developers possess the required knowledge and skills with DAX. These steps may involve certification exams, detailed technical interviews, and internal skill development and evaluation. </p>
    <p class="fm-booktitle">For example, a seasoned dataset developer should be capable of quickly translating common filtering and aggregation logic found in SQL queries and/or Excel formulas into DAX expressions that return the same numbers. Moreover, professional dataset developers utilize tools beyond Power BI Desktop such as Tabular Editor, DAX Studio, and ALM Toolkit to more productively develop, analyze, and deploy their DAX code, respectively.</p>
    <p class="fm-booktitle">Most measure expressions reference and aggregate the numeric columns of fact tables, which are hidden from the Report View, as we have seen in the previous chapter. Additional DAX measures can include filtering conditions that supplement or override any filters applied in Power BI reports, such as the net sales amount for first-year customers only. </p>
    <p class="fm-booktitle">Measures are also commonly used to count the number of dimension members that meet certain criteria such as customers who are associated with sales transactions in a given time frame. Additionally, with functions such as <code class="inlinecode">SELECTEDVALUE()</code>, DAX measures are often used to display a text value or a date value such as the name of a product currently being filtered in a report or a date reflecting when the source data was refreshed.</p>
    <p class="fm-booktitle">Just like the M query language, DAX is a rich, functional language that supports variables and external <a id="calibre_link-859" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>expression references. Multiple variables can be defined within a DAX measure to improve readability, and the results of other measures can be referenced as well, such as the <code class="inlinecode">Plan Grain Status</code> measure in <em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery, and Composite Data Models</em>. These layers of abstraction and the built-in code editing features of Power BI Desktop, including IntelliSense and colorization, enable dataset designers to embed powerful, yet sustainable, logic into datasets.</p>
    <p class="fm-booktitle">In addition to the DAX measures authored for a Power BI dataset, Power BI Desktop’s <strong class="screentext">Analytics</strong> pane can <a id="calibre_link-502" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>be used to create metrics specific to a given visual, such as a trend line, min, max, and an average of a metric on a line chart. The <strong class="screentext">Analytics</strong> pane is reviewed in <em class="italic">Chapter 8</em>, <em class="italic">Applying Advanced Report Features</em>.</p>
    <p class="fm-booktitle">We now take a detailed look at perhaps the most important topic when discussing DAX measures, filter context.</p>
    <h2 id="calibre_link-159" class="calibre9">Filter context</h2>
    <p class="fm-booktitle">Whenever there’s a question or doubt about a certain number on a Power BI report, an early step <a id="calibre_link-864" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>in troubleshooting scenarios is understanding the filter context applicable to the given number. Filter context refers to the filters applied <a id="calibre_link-998" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>during the evaluation of a measure. The filter context limits the set of rows for each table in the data model that is available to be evaluated for each value displayed in report visualizations. </p>
    <p class="fm-booktitle">For example, each value of a Power BI chart that analyzes a sales amount measured by a <code class="inlinecode">Product Category</code> column is usually unique because a different set of rows (filter context) of the sales fact table was available to the measure when calculating each value.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 5.1</em>, five distinct filters representing five dimension tables have been applied to a matrix visual of the <code class="inlinecode">Internet Gross Sales</code> measure:</p>
    <figure class="mediaobject"><img src="images/000373.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.1: Filtered Power BI report</p>
    <p class="fm-booktitle">Filters applied to the <code class="inlinecode">Promotion</code>, <code class="inlinecode">Date</code>, <code class="inlinecode">Product</code>, <code class="inlinecode">Customer</code>, and <code class="inlinecode">Sales Territory</code> dimension <a id="calibre_link-865" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>tables all flow across their relationships <a id="calibre_link-999" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to filter the <code class="inlinecode">Internet Sales</code> fact table. The <code class="inlinecode">Internet Gross Sales</code> measure is a simple <code class="inlinecode">SUMX()</code> expression described in the base measures and is thus evaluated against the <code class="inlinecode">Internet Sales</code> rows remaining from these filters.</p>
    <p class="fm-booktitle">The filters applied come from external sources (those filters not applied within the visual itself such as <strong class="screentext">Product Category</strong> and <strong class="screentext">Marital Status</strong> in <em class="italic">Figure 5.1</em>) can be viewed by clicking on the filter icon shown when a visual is selected on the canvas, as shown in <em class="italic">Figure 5.2</em>:</p>
    <figure class="mediaobject"><img src="images/000364.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.2: Filter icon</p>
    <p class="fm-booktitle">Each individual <a id="calibre_link-1000" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>value in Power BI reports is computed independently. For example, the <strong class="screentext">$242,995</strong> subtotal value shown in <em class="italic">Figure 5.1</em> is not filtered <a id="calibre_link-866" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>by the <code class="inlinecode">Product Category</code> column like other values in the matrix, and it’s not calculated as the sum of the three cells in the <code class="inlinecode">Married</code> column. </p>
    <p class="fm-booktitle">This value is computed using the <code class="inlinecode">MaritalStatus</code> column of the <code class="inlinecode">Customers</code> table with a value of <strong class="screentext">Married</strong>, as well as the other filters applied from the <code class="inlinecode">Sales Territory Group</code> slicer and the filters in the <strong class="screentext">Filters</strong> pane. See the <em class="italic">Measure evaluation process</em> section for details on the DAX engine’s execution process.</p>
    <p class="fm-booktitle">To help better explain filter context, we now look at an equivalent SQL statement for the matrix values shown in <em class="italic">Figure 5.1</em>.</p>
    <h3 id="calibre_link-160" class="heading1">SQL equivalent</h3>
    <p class="fm-booktitle">To help <a id="calibre_link-1001" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>understand filter context and to validate certain reports or DAX measures, it can be helpful to <a id="calibre_link-1739" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>compare Power BI reports to SQL statements. The following SQL statement returns the same six values of the Power BI matrix (excluding the subtotals) via standard inner joins and <code class="inlinecode">WHERE</code> clause conditions. Similar to the external filters for a visual, <code class="inlinecode">WHERE</code> clauses in SQL statements serve to filter the base set of rows in a table available for further calculations: </p>
    <pre class="programlisting"><code class="hljs-code">SELECT
  P.[Product Category]
, C.[Customer Marital Status]
, FORMAT(SUM(F.[Unit Price] * F.[Order Quantity]), '$#,###') AS [Internet Gross Sales]
FROM BI.vFact_InternetSales as F
  INNER JOIN BI.vDim_FinDate as D on F.[Order Date Key] = D.[Date Key]
  INNER JOIN BI.vDim_Promotion as Promo on F.[Promotion Key] = Promo.[Promotion Key]
  INNER JOIN BI.vDim_Product as P on F.[Product Key] = P.[Product Key]
  INNER JOIN BI.vDim_Customer as C on F.[Customer Key] = C.[Customer Key]
  INNER JOIN BI.vDim_SalesTerritory as S on F.[Sales Territory Key] = S.[Sales Territory Key]
WHERE D.[Calendar Year Status] in ('Prior Calendar Year', 'Current Calendar Year')
  and S.[Sales Territory Group] = 'Europe' and 
Promo.[Promotion Type] in ('Excess Inventory', 'Volume Discount')
GROUP BY 
  P.[Product Category], C.[Customer Marital Status]
</code></pre>
    <p class="fm-booktitle">In this example, the SQL statement’s <code class="inlinecode">WHERE</code> clause implements the Power BI report’s slicer visual <a id="calibre_link-1740" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>filter and its report- and page-level filters. The <code class="inlinecode">GROUP BY</code> clause accounts for the row and column filters of the matrix visual.</p>
    <p class="fm-booktitle">Although certain SQL concepts and examples are applicable, DAX is distinct from SQL and other <a id="calibre_link-1153" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>languages, such as <strong class="screentext">MDX</strong> (<strong class="screentext">Multi-Dimensional eXpressions</strong>). Additionally, since Power BI import mode datasets are stored in a columnar format, SQL developers experienced with row-based tables and B-tree indexes have to revise their design patterns in developing DAX measures and queries.</p>
    <p class="fm-booktitle">With filter context understood, another important and related topic with regard to DAX measures is the process by which measures are calculated.</p>
    <h2 id="calibre_link-161" class="calibre9">Measure evaluation process</h2>
    <p class="fm-booktitle">The measure <a id="calibre_link-1100" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>evaluation process defines how calculations <a id="calibre_link-862" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are performed when computing the value of measures. Each value in <em class="italic">Figure 5.1</em>, such as the $708 from the matrix visual, is computed according to the following four-step process:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Initial Filter Context<ol class="alphabeticlist">
          <li class="calibre13" value="1">This includes all filters applied within and outside the report canvas by the report author</li>
          <li class="calibre13">Selections on slicer visuals and the rows and columns of the table and matrix visuals represent on-canvas filters</li>
          <li class="calibre13">Report, page, visual, and drill-through filters represent off-canvas filters that also contribute to the initial filter context</li>
        </ol>
      </li>
      <li class="calibre13">Filter Context Modified via DAX<ol class="alphabeticlist">
          <li class="calibre13" value="1">For base measures and other simplistic expressions, the initial filter context from the report is left unchanged</li>
          <li class="calibre13">For more complex measures, the <code class="inlinecode">CALCULATE()</code> function is invoked to further modify the initial filter context</li>
          <li class="calibre13">Via <code class="inlinecode">CALCULATE()</code>, the initial filter context can be removed, replaced, or supplemented with an additional filter condition</li>
          <li class="calibre13">In the event of a conflict between the initial filter context from the report (for example, slicers, report-level filters) and the filter condition embedded in the DAX measure, by default, the DAX measure overrides the report filter condition</li>
        </ol>
      </li>
      <li class="calibre13">Relationship <a id="calibre_link-863" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Cross-Filtering<ol class="alphabeticlist">
          <li class="calibre13" value="1">With each <a id="calibre_link-1101" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>table filtered from steps 1 and 2, the filter context is transferred across cross-filtering relationships</li>
          <li class="calibre13">In most cases, the filtered dimension tables filter the related fact tables via single direction cross-filtering</li>
          <li class="calibre13">However, as described in <em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery, and Composite Data Models</em>, bidirectional cross-filtering allows the filter context to also transfer from the many side of a relationship to the one side </li>
        </ol>
      </li>
      <li class="calibre13">Measure Logic Computation<ol class="alphabeticlist">
          <li class="calibre13" value="1">The computation logic of the measure (for example, <code class="inlinecode">DISTINCTCOUNT()</code>, <code class="inlinecode">COUNTROWS()</code>) is finally evaluated against the remaining active rows for the given table or column referenced</li>
          <li class="calibre13">For common and base measures, this is simply the set of remaining or active fact table rows</li>
          <li class="calibre13">However, as shown in the following <em class="italic">Dimension metrics</em> section, other DAX measures reference dimension tables, and thus it’s important to understand how these tables are impacted by relationship filtering and DAX expressions </li>
        </ol>
      </li>
    </ol>
    <p class="fm-booktitle">This four-step process is repeated for each value of the report independently. Consequently, reports and visuals that are dense in values require more computing resources <a id="calibre_link-1990" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to refresh and update based on user filter selections. Large tabular report visuals with many columns and rows are particularly notorious for <a id="calibre_link-1991" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>slow performance, as this forces the DAX engine to compute hundreds or thousands of individual values.</p>
    <p class="fm-booktitle">Although report authors and business analysts might not create DAX measures, it’s important that they have a basic understanding of the filter context and measure evaluation processes. For example, the report author should understand the cross-filtering relationships of the data model (single or bidirectional) and how certain DAX measures impact the filters applied in reports. Similarly, business analysts should be able to explain to business users why certain report behaviors and results occur.</p>
    <p class="fm-booktitle">For example, since bidirectional cross-filtering relationships are generally avoided by dataset developers for performance and unexpected behavior reasons as described in <em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery, and Composite Data Models</em>, a common question raised by report authors and users is why a particular dimension or slicer isn’t impacted by the filter selection on another dimension or slicer. </p>
    <p class="fm-booktitle">Users may expect the list of possible product names on one slicer visual to be reduced by the selection of a fiscal year on a different slicer.</p>
    <p class="fm-booktitle">The reason and explanation are simply that the two slicers reflecting different dimension tables in the model may both filter the same fact table(s) and thus impact fact table-based measure calculations but that these filters end at the fact table and there’s no direct relationship between the two dimension tables. </p>
    <p class="fm-booktitle">We’ll next move on to explaining an additional base concept regarding measures, row context.</p>
    <h2 id="calibre_link-162" class="calibre9">Row context</h2>
    <p class="fm-booktitle">In addition to filter context, it is also important to understand the concept of row context and <a id="calibre_link-869" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the ability in DAX to transition from row context to filter context. Row context is an evaluation context that always contains a single row. Row context <a id="calibre_link-1639" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>is present for calculated columns as well as DAX iterator functions such as <code class="inlinecode">FILTER()</code> and <code class="inlinecode">SUMX()</code>, which execute their expressions per row of a given table. </p>
    <p class="fm-booktitle">The set of rows to evaluate from a table is always defined by the filter context, which was described earlier in this chapter. The expression parameter of iterating functions (aggregation functions ending in X such as <code class="inlinecode">SUMX</code> and <code class="inlinecode">AVERAGEX</code>) can aggregate the rows of a table or can invoke the filter context of the specific row being iterated upon via the <code class="inlinecode">CALCULATE()</code> function or a measure reference. Evoking filter context is further explained in the following paragraphs.</p>
    <p class="fm-booktitle">Calculated DAX columns are used to illustrate row context. In <em class="italic">Figure 5.3</em>, four calculated columns have been added to a <code class="inlinecode">Date</code> table and reference the <code class="inlinecode">Weekday Sort</code> column:</p>
    <figure class="mediaobject"><img src="images/000391.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.3: The row context in calculated columns</p>
    <p class="fm-booktitle">All four calculated columns simply add the value 1 to the <code class="inlinecode">Weekday Number</code> column, but achieve their results via distinct expressions:</p>
    <pre class="programlisting"><code class="hljs-code">Weekday Number Plus 1 (SUM) = SUM('Date'[Weekday Number]) + 1

Weekday Number Plus 1 CALC = CALCULATE(SUM('Date'[Weekday Number])) + 1

Weekday Number Plus 1 Measure = [Weekday Number Summed] + 1

Weekday Number Plus 1 = 'Date'[Weekday Number]+1
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">Weekday Number Plus 1 CALC</code> column and the <code class="inlinecode">Weekday Number Plus 1 Measure</code> column represent the concept of context transition. These two columns invoke the filter context (context transition) of the given row via the <code class="inlinecode">CALCULATE()</code> function or implicitly via the reference <a id="calibre_link-1640" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of an existing measure, respectively. Context transition <a id="calibre_link-870" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>is simply when row context is replaced with filter context. To explain this more clearly, let’s expand upon how each calculation uses row and filter context:</p>
    <ul class="calibre10">
      <li class="bulletlist"><code class="inlinecode">Weekday Number Plus 1 (SUM)</code> is calculated using row context. However, because the <code class="inlinecode">SUM</code> function evaluates all rows visible to the current filter context, this calculated column computes the sum of all rows for the <code class="inlinecode">Weekday Number</code> column plus one and repeats this value for each row.</li>
      <li class="bulletlist"><code class="inlinecode">Weekday Number Plus 1 CALC</code> embeds a <code class="inlinecode">SUM()</code> function within the <code class="inlinecode">CALCULATE()</code> function prior to adding one. As explained further in the <em class="italic">CALCULATE() function</em> section in this chapter, the <code class="inlinecode">CALCULATE()</code> function replaces or modifies the current filter context. In this case, since the <code class="inlinecode">CALCULATE()</code> function has no filter parameter, the only purpose of the <code class="inlinecode">CALCULATE()</code> function is context transition where the row context is transitioned into a filter context of a single row.</li>
      <li class="bulletlist"><code class="inlinecode">Weekday Number Plus 1 Measure</code> references an existing measure that sums the <code class="inlinecode">Weekday Number</code> column and then adds one. Referencing a measure within a DAX calculation adds an implicit <code class="inlinecode">CALCULATE()</code> and thus the same context transition occurs as with the <code class="inlinecode">Weekday Number Plus 1 CALC</code> measure.</li>
      <li class="bulletlist"><code class="inlinecode">Weekday Number Plus 1</code> references the <code class="inlinecode">Weekday Number</code> column of the <code class="inlinecode">Date</code> table and adds one. Here only row context is active and thus only the <code class="inlinecode">Weekday Number</code> column value in the current row is used in the calculation.</li>
    </ul>
    <p class="fm-booktitle">The <code class="inlinecode">Weekday Number Plus 1 (SUM)</code> expression demonstrates that aggregation functions, in the absence of <code class="inlinecode">CALCULATE()</code> or the implicit <code class="inlinecode">CALCULATE()</code> when invoking measures, ignore row context. The three other columns all operate on a per-row basis (row context) but achieve their results via three different methods. The <code class="inlinecode">Weekday Number Plus 1</code> column represents the default behavior of expressions executing in a row context such as calculated columns, <code class="inlinecode">FILTER()</code>, and other iterating DAX functions.</p>
    <p class="fm-booktitle">To develop more complex DAX measures, it can be necessary to ignore the row context of the input table, such as the <code class="inlinecode">Weekday Number Plus 1 (SUM)</code> example, or explicitly invoke the row context of the table depending upon the circumstances and desired resulting value.</p>
    <p class="fm-booktitle">Row context, filter context, and context transition can be confusing for those new to DAX and <a id="calibre_link-871" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are thus important subjects to bear in mind when <a id="calibre_link-1641" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>learning to create DAX calculated columns and measures. Similarly, another important topic is understanding the difference between DAX functions that return scalar values and tables.</p>
    <h2 id="calibre_link-163" class="calibre9">Scalar and table functions</h2>
    <p class="fm-booktitle">The majority of DAX functions return a single value based on an aggregation or a logical evaluation of <a id="calibre_link-1793" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>a table or column. For example, the <code class="inlinecode">COUNTROWS()</code> and <code class="inlinecode">DISTINCTCOUNT()</code> functions <a id="calibre_link-873" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>return individual numeric values based on a single table and a single column input parameter, respectively.</p>
    <p class="fm-booktitle">DAX functions that return individual values as their output, including information functions, such as <code class="inlinecode">ISBLANK()</code> and <code class="inlinecode">LOOKUPVALUE()</code>, are referred to as scalar functions. For relatively simple datasets and at early stages in projects, most DAX measures reference a single scalar function with no other modifications, such as the use of <code class="inlinecode">CALCULATE()</code>. </p>
    <p class="fm-booktitle">In addition to <a id="calibre_link-1653" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>scalar functions, many DAX functions return a table as the <a id="calibre_link-872" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>output value. The tables returned by these functions, such as <code class="inlinecode">FILTER()</code> and <code class="inlinecode">ALL()</code>, are used as input parameters to other DAX measure expressions to impact the filter context under which the measure is executed via the <code class="inlinecode">CALCULATE()</code> function. </p>
    <p class="fm-booktitle">The DAX language has been extended to support many powerful table functions, such as <code class="inlinecode">TOPN()</code>, <code class="inlinecode">INTERSECT()</code>, and <code class="inlinecode">UNION()</code>, thus providing further support for authoring DAX measures. It is important to note that DAX measures cannot return a table as a value.</p>
    <p class="fm-booktitle">In addition to serving as table input parameters to DAX measures, the results of DAX table functions can be returned and exposed to client reporting tools. The most common example of this is the use of the <code class="inlinecode">SUMMARIZECOLUMNS()</code> function to return a grouping of certain dataset dimension attributes and certain measures as aggregations to support a data region (e.g. table visual) in a paginated report. Paginated reports are covered in more detail in <em class="italic">Chapter 12</em>, <em class="italic">Deploying Paginated Reports</em>.</p>
    <p class="fm-booktitle">Additionally, DAX table functions can return a summarized or filtered table within a Power BI dataset based on the other tables in the dataset. Such DAX-created tables are known as <strong class="screentext">calculated tables</strong>.</p>
    <p class="fm-booktitle">As models <a id="calibre_link-580" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>grow in complexity and as model authors become more familiar with DAX, new measures increasingly leverage a combination of scalar functions (or existing measures based on scalar functions) and table functions. As per the <em class="italic">DAX variables</em> section later in this chapter, both scalar and table values (based on scalar and <a id="calibre_link-1654" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>table functions, respectively) can be stored as variables to further <a id="calibre_link-1794" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>support abstraction and readability. </p>
    <p class="fm-booktitle">With scalar and table functions understood, we’ll next turn our attention to an example of the use of DAX table functions with respect to related tables.</p>
    <h3 id="calibre_link-164" class="heading1">Related tables</h3>
    <p class="fm-booktitle">DAX measure calculations respect the row context formed by relationships between tables. Thus, it is possible <a id="calibre_link-1584" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to reference other tables in the data model from within a row context via the <code class="inlinecode">RELATED()</code> and <code class="inlinecode">RELATEDTABLE()</code> functions. </p>
    <p class="fm-booktitle"><em class="italic">Figure 5.4</em> shows the Data View of an import mode dataset where three calculated columns have been added to a <code class="inlinecode">Date</code> dimension table with expressions referencing the <code class="inlinecode">Freight</code> column of the <code class="inlinecode">Internet Sales</code> fact table:</p>
    <figure class="mediaobject"><img src="images/000382.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.4: Row context with RELATEDTABLE()</p>
    <p class="fm-booktitle">The DAX expressions used for each column are as follows:</p>
    <pre class="programlisting"><code class="hljs-code">Related Internet Freight Cost (Sum) = SUMX(RELATEDTABLE('Internet Sales'),(SUM('Internet Sales'[Freight])))

Related Internet Freight Cost Column = SUMX(RELATEDTABLE('Internet Sales'),[Freight])

Related Internet Freight Cost Measure = SUMX(RELATEDTABLE('Internet Sales'),[Internet Sales Freight Cost])
</code></pre>
    <p class="fm-booktitle">For reference, the formula for the <code class="inlinecode">Internet Sales Freight Cost</code> measure is simply:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Sales Freight Cost = SUM('Internet Sales'[Freight])
</code></pre>
    <p class="fm-booktitle">Only <code class="inlinecode">Related Internet Sales Freight Cost Column</code> and <code class="inlinecode">Related Internet Sales Freight Cost Measure</code> return the correct freight cost amount for each date. The <code class="inlinecode">Related Internet Freight Cost (Sum)</code> column computes the total freight cost on the entire <code class="inlinecode">Internet Sales</code> table and uses this value for each related row before summing the result.</p>
    <p class="fm-booktitle">For example, five rows <a id="calibre_link-1585" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>on the <code class="inlinecode">Internet Sales</code> table have a date of 12/29/2010 and the sum of the <code class="inlinecode">Freight</code> column on the <code class="inlinecode">Internet Sales</code> table is <strong class="screentext">$733,969.61</strong>. Given that the <code class="inlinecode">SUM()</code> function ignores row context, the <code class="inlinecode">SUMX()</code> function, calculates a value of <strong class="screentext">$3,669,848</strong> for that date, which is the result of five (rows) multiplied by <strong class="screentext">$733,969.61</strong>. </p>
    <p class="fm-booktitle"><code class="inlinecode">Related Internet Freight Cost Column</code> returns the correct amount since the value of the <code class="inlinecode">Freight</code> column for each row is evaluated within the row context and then the amounts in these rows are summed by the <code class="inlinecode">SUMX()</code> function. </p>
    <p class="fm-booktitle"><code class="inlinecode">Related Internet Sales Freight Cost Measure</code> also returns the correct amount, which may seem odd since <code class="inlinecode">Related Internet Freight Cost (Sum)</code> essentially simply substitutes in the formula contained within the <code class="inlinecode">Internet Sales Freight Cost</code> measure. However, recall that measures implicitly invoke <code class="inlinecode">CALCULATE()</code> and thus preserve row context via context transition.</p>
    <p class="fm-booktitle">The <code class="inlinecode">RELATEDTABLE()</code> function is used to reference tables on the many side of one-to-many relationships. Likewise, the <code class="inlinecode">RELATED()</code> function is used to reference tables on the one side of many-to-one relationships. </p>
    <p class="fm-booktitle">For example, a calculated column or the row context of an iterating function such as <code class="inlinecode">SUMX()</code> on the <code class="inlinecode">Internet Sales</code> fact table would use <code class="inlinecode">RELATED()</code> to access a dimension table and apply logic referencing the dimension table per row of the <code class="inlinecode">Internet Sales</code> table. </p>
    <p class="fm-booktitle">We now turn our attention to a specific DAX function that we briefly covered in previous sections, the <code class="inlinecode">CALCULATE()</code> function.</p>
    <h2 id="calibre_link-165" class="calibre9">The CALCULATE() function</h2>
    <p class="fm-booktitle">The <code class="inlinecode">CALCULATE()</code> function is <a id="calibre_link-581" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>perhaps the most important function in <a id="calibre_link-860" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>DAX as it enables the author to modify the filter context under which a measure is evaluated. Regardless of the fields used and filters applied in reports, the filter parameter input(s) to <code class="inlinecode">CALCULATE()</code> is applied. </p>
    <p class="fm-booktitle">Specifically, the <code class="inlinecode">CALCULATE()</code> function either adds a filter to a measure expression (for example, <code class="inlinecode">Color = "Red"</code>), ignores the filters from a table or column (for example, <code class="inlinecode">ALL(Product)</code>), or updates/overwrites the filters applied within a report to the filter parameter specified in <code class="inlinecode">CALCULATE()</code>. </p>
    <p class="fm-booktitle">The syntax of <code class="inlinecode">CALCULATE()</code> is the following:</p>
    <pre class="programlisting"><code class="hljs-code">CALCULATE(&lt;expression&gt;, &lt;filter1&gt;, &lt;filter2&gt;, …).
</code></pre>
    <p class="fm-booktitle">Any number of filter parameters can be specified including no filter parameters such as <code class="inlinecode">CALCULATE(SUM(Sales[Sales Amount]))</code>. When multiple filter parameters are specified, the function respects all of them together as a single condition via internal <code class="inlinecode">AND</code> logic. Thus, rows resulting from the specified filter context must meet the criteria of the first filter, the criteria of the second filter, and so on.</p>
    <p class="fm-booktitle">The expression parameter is evaluated based on the new and final filter context applied via the filter parameters. In the following measure, any filter applied to any column from the <code class="inlinecode">Product</code> or <code class="inlinecode">Sales Territory</code> tables are ignored by the calculation:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Sales Row Count (Ignore Product and Territory) = 
CALCULATE(COUNTROWS('Internet Sales'),ALL('Product'),ALL('Sales Territory'))
</code></pre>
    <p class="fm-booktitle">The preceding measure represents one simple example of a table function (<code class="inlinecode">ALL()</code>) being used in conjunction with a scalar function (<code class="inlinecode">COUNTROWS()</code>) via <code class="inlinecode">CALCULATE()</code>, as described in the previous section, <em class="italic">Scalar and table functions</em>. </p>
    <p class="fm-booktitle">There are multiple forms of the <code class="inlinecode">ALL()</code> function beyond <code class="inlinecode">ALL(table)</code>. The <code class="inlinecode">ALL()</code> function can be used to ignore the values from a single column or multiple columns, such as the following two examples: (<code class="inlinecode">All('Customer'[Customer City]</code>) and <code class="inlinecode">ALL('Customer'[Customer City], 'Customer'[Customer Country])</code>. </p>
    <p class="fm-booktitle">Additionally, the <code class="inlinecode">ALLEXCEPT()</code> function only allows certain columns specified to impact the filter context, and the <code class="inlinecode">ALLSELECTED()</code> function ignores filters from inside a query but allows filters from outside the query. Finally, the <code class="inlinecode">REMOVEFILTERS()</code> function allows certain filters to be removed when executing the <code class="inlinecode">CALCULATE()</code> function.</p>
    <p class="fm-booktitle">Just as the <code class="inlinecode">CALCULATE()</code> function is used to modify the filter context of scalar value expressions, the <code class="inlinecode">CALCULATETABLE()</code> function is used to modify the filter context of expressions that return tables. For example, the following expression returns all columns from <a id="calibre_link-861" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the product dimension table and <a id="calibre_link-582" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>only the rows that match the two filter parameter conditions specified:</p>
    <pre class="programlisting"><code class="hljs-code">CALCULATETABLE('Product',
'Product'[Product Category] = "Bikes",
'Product'[Product Dealer Price] &gt; 2100)
</code></pre>
    <p class="fm-booktitle">The modified table result from <code class="inlinecode">CALCULATETABLE()</code> can then be used as a parameter input to another table function such as <code class="inlinecode">FILTER()</code> or as a filter parameter to <code class="inlinecode">CALCULATE()</code>. </p>
    <h3 id="calibre_link-166" class="heading1">The FILTER() function</h3>
    <p class="fm-booktitle">The <code class="inlinecode">FILTER()</code> function is <a id="calibre_link-1002" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>one of the most important and powerful <a id="calibre_link-867" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>functions in DAX in that it allows complex logic to fully define the set of rows of a table. <code class="inlinecode">FILTER()</code> accepts a table as an input and returns a table with each row respecting its defined condition. </p>
    <p class="fm-booktitle">The <code class="inlinecode">FILTER()</code> function is almost always used as a parameter to a <code class="inlinecode">CALCULATE()</code> function and can add to the existing filter context or redefine the filter context by invoking <code class="inlinecode">ALL()</code>, <code class="inlinecode">ALLEXCEPT()</code>, or <code class="inlinecode">ALLSELECTED()</code> as its table input. The date intelligence measures described later in this chapter utilize <code class="inlinecode">FILTER()</code> to fully define the set of <code class="inlinecode">Date</code> rows for the filter context.</p>
    <p class="fm-booktitle">In the following DAX measure, the <code class="inlinecode">FILTER()</code> function is utilized against the <code class="inlinecode">Date</code> table and implements a condition based on the existing <code class="inlinecode">Internet Gross Sales</code> measure: </p>
    <pre class="programlisting"><code class="hljs-code">Days with over 15K Gross Internet Sales = 
  CALCULATE(COUNTROWS('Date'),
    FILTER('Date', [Internet Gross Sales] &gt; 15000))
</code></pre>
    <p class="fm-booktitle">With respect to the use of <code class="inlinecode">CALCULATE</code>, the ability to directly reference DAX measures is unique to the <code class="inlinecode">FILTER()</code> function. For example, the following measure expression is not allowed by the DAX engine: <code class="inlinecode">CALCULATE(COUNTROWS('Date'), [Internet Gross Sales] &gt; 15000)</code>. This is because the standard filter clause of the <code class="inlinecode">CALCULATE</code> function cannot directly reference measures. </p>
    <p class="fm-booktitle">The <code class="inlinecode">Days with over 15K Gross Internet Sales</code> measure and the <code class="inlinecode">Internet Gross Sales</code> base measure are used to create the visuals shown in <em class="italic">Figure 5.5</em>: </p>
    <figure class="mediaobject"><img src="images/000411.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.5: DAX measure with FILTER</p>
    <p class="fm-booktitle">Given that the <code class="inlinecode">FILTER()</code> function simply references the <code class="inlinecode">Date</code> table and does not remove any filters via <code class="inlinecode">ALL()</code>, the measure executes on each date contained in the matrix visual to return a 1 or a blank. When no dates are on the visual, such as the subtotal row or the card <a id="calibre_link-1003" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visual, the total number of days that meet the condition (<strong class="screentext">232</strong> for the year <strong class="screentext">2011</strong>) is returned. </p>
    <p class="fm-booktitle">If the <code class="inlinecode">Internet Gross Sales</code> measure was not included in the table visual, by default, Power BI <a id="calibre_link-868" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>would only display the dates with a <strong class="screentext">1</strong> value for the <code class="inlinecode">Days with over a 15K Gross Internet Sales</code> measure.</p>
    <p class="fm-booktitle">Given both its iterative (row-by-row) execution and the potential to apply complex measures to each row, it’s important to use the <code class="inlinecode">FILTER()</code> function carefully. For example, DAX measures should not use <code class="inlinecode">FILTER()</code> directly against large fact tables since the filter condition must be evaluated for every row of the fact table, which may be millions, billions, or even trillions of rows. Additionally, <code class="inlinecode">FILTER()</code> should not be used when it’s not needed for simple measures such as the following two examples:</p>
    <pre class="programlisting"><code class="hljs-code">CALCULATE([Internet Gross Sales],'Product'[Product Category] = "Bikes")

CALCULATE([Reseller Gross Sales],'Product'[Product Color] IN {"Red", "White"},Promotion[Discount Percentage] &gt; .25).
</code></pre>
    <p class="fm-booktitle">With two <a id="calibre_link-1992" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of the most important DAX functions, <code class="inlinecode">CALCULATE()</code> and <code class="inlinecode">FILTER()</code>, explained, we’ll <a id="calibre_link-1993" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>next cover the last important base DAX concept, variables.</p>
    <h2 id="calibre_link-167" class="calibre9">DAX variables</h2>
    <p class="fm-booktitle">Variables can be defined within DAX measures and primarily serve to improve the readability <a id="calibre_link-874" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of DAX expressions. Rather than creating and referencing separate DAX measures, variables provide an inline option, thereby limiting the volume of distinct measures in a dataset. </p>
    <p class="fm-booktitle">As a basic example of variable syntax, the <code class="inlinecode">Last Refreshed</code> measure described in the <em class="italic">Parameter tables queries</em> section of <em class="italic">Chapter 3</em>, <em class="italic">Connecting to Sources and Transforming Data with M</em>, uses a DAX variable in its expression, as follows:</p>
    <pre class="programlisting"><code class="hljs-code">Last Refresh Msg = 
    VAR __CurrentDateValue = MAX('Current Date'[CurrentDate])
RETURN
    "Last Refreshed: " &amp; __CurrentDateValue
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">VAR</code> function is used to name a variable and the <code class="inlinecode">RETURN</code> keyword allows for the variable’s result to be referenced by this name. </p>
    <p class="fm-booktitle">In this example, the <code class="inlinecode">__CurrentDateValue</code> variable retrieves the date stored in the <code class="inlinecode">CurrentDate</code> parameter table, and a string of text is concatenated with the variable to generate the text message.</p>
    <p class="fm-booktitle">Variables can sometimes improve the performance of slow measures. Variables are only evaluated once and their resulting values (a scalar value or a table) can be referenced multiple times within a measure. </p>
    <p class="fm-booktitle">Measures that produce fewer storage engine queries almost always execute faster and make better use of hardware resources. Therefore, any DAX measure or query that makes multiple references to the same expression logic can be a good candidate for DAX variables. </p>
    <p class="fm-booktitle">A common use case for DAX variables is to split up the components of an otherwise more complex DAX expression. In the following example, six DAX variables are used to produce a <a id="calibre_link-875" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>filtered distinct count of accessory products and a filtered distinct count of clothing products: </p>
    <pre class="programlisting"><code class="hljs-code">Reseller High Value Accessory and Clothing Products = 
/*
Accessory category products with over 20K in net sales and over 32% net margin since last year 
Clothing category products with over 55K in net sales and over 28% net margin since last year
Enable filtering from dimension tables related to Reseller Sales
*/
    VAR __AccessorySales = 30000 
    VAR __AccessoryNetMargin = .32
    VAR __ClothingSales = 50000 
    VAR __ClothingNetMargin = .28
//Distinct Accessory Products
    VAR __AccessoryProducts = 
    CALCULATE(
        DISTINCTCOUNT('Product'[ProductAlternateKey]),
        FILTER(
            SUMMARIZE(
                CALCULATETABLE('Reseller Sales',
                    'Date'[Calendar Year] IN {2014, 2013},
                    'Product'[Product Category] = "Accessories"
                ),
                'Product'[ProductAlternateKey]
            ),
            [Reseller Net Margin %] &gt;= __AccessoryNetMargin &amp;&amp; [Reseller Net Sales] &gt;= __AccessorySales
        )
    )
    //Distinct Clothing Products
    VAR __ClothingProducts = 
    CALCULATE(
        DISTINCTCOUNT('Product'[ProductAlternateKey]),
        FILTER(
            SUMMARIZE(
                CALCULATETABLE('Reseller Sales',
                    'Date'[Calendar Year] IN {2014, 2013},
                    'Product'[Product Category] = "Clothing"
                ),
                'Product'[ProductAlternateKey]
            ),
        [Reseller Net Margin %] &gt;= __ClothingNetMargin &amp;&amp; [Reseller Net Sales] &gt; __ClothingSales
        )
    )
RETURN
    __AccessoryProducts + __ClothingProducts
</code></pre>
    <p class="fm-booktitle">With the variables named and evaluated, the <code class="inlinecode">RETURN</code> keyword simply adds the results of the two distinct count expressions contained within the <code class="inlinecode">__AccessoryProducts</code> and <code class="inlinecode">__ClothingProducts</code> variables. The multi-line comment at the top of the expression denoted by <code class="inlinecode">/*</code> and <code class="inlinecode">*/</code> makes the DAX measure easier to understand in the future. </p>
    <p class="fm-booktitle">Single-line comments have been added using <code class="inlinecode">//</code> to precede the distinct accessory and clothing products. With the variables declared in this structure, it becomes very easy to adjust the <a id="calibre_link-876" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measure to different input thresholds such as a higher or lower net sales value or net margin rates.</p>
    <p class="fm-booktitle">The most efficient filtering conditions of measures should be implemented in measures first. Efficient filter conditions are those that don’t require the <code class="inlinecode">FILTER()</code> function, such as the <code class="inlinecode">Calendar Year</code> and <code class="inlinecode">Product Category</code> filter conditions in the <code class="inlinecode">Reseller High Value Accessory and Clothing Products</code> measure. </p>
    <p class="fm-booktitle">Simple filters that do not require the <code class="inlinecode">FILTER()</code> function are known as Boolean (true/false) expressions. Boolean <a id="calibre_link-576" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>expressions are more efficient because import mode datasets consist of tables represented by in-memory column stores, which are explicitly optimized to efficiently filter columns based upon Boolean expressions.</p>
    <p class="fm-booktitle">However, Boolean expressions come <a id="calibre_link-577" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>with a number of restrictions. Namely Boolean expressions cannot:</p>
    <ul class="calibre10">
      <li class="bulletlist">Compare columns to other columns</li>
      <li class="bulletlist">Reference a measure</li>
      <li class="bulletlist">Use nested <code class="inlinecode">CALCULATE()</code> functions</li>
      <li class="bulletlist">Use functions that scan or return a table</li>
    </ul>
    <p class="fm-booktitle">Once sufficient filters have been applied, more-complex but less-performant filtering conditions can operate on smaller sets of data, thus limiting their impact on query performance.</p>
    <p class="fm-booktitle">A Power BI report can leverage the measure in a visual-level filter to only display the specific products that meet the criteria of the measure. In <em class="italic">Figure 5.6</em>, only six products (two accessories, four clothing) are displayed given the filter on the <code class="inlinecode">Reseller High Value Accessory and Clothing Products</code> measure:</p>
    <figure class="mediaobject"><img src="images/000401.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.6: Variable-based DAX measure as a visual-level filter</p>
    <p class="fm-booktitle">The filter <a id="calibre_link-877" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>context of the <code class="inlinecode">Reseller Sales</code> fact table is respected via the <code class="inlinecode">SUMMARIZE()</code> function. Just like bidirectional cross-filtering via the <code class="inlinecode">CROSSFILTER()</code> function and bidirectional relationships, other dimensions related to the <code class="inlinecode">Reseller Sales</code> fact table can be used for filtering the measure. For example, a filter on the <code class="inlinecode">SalesTerritoryCountry</code> column for the <strong class="screentext">United States</strong> would result in only five products.</p>
    <p class="fm-booktitle">It’s necessary to reference the alternate key of the product dimension given the implementation of slowly changing dimension logic, as described in <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, since a single product can have multiple rows in its dimension table, reflecting various changes such as with list prices and product weight. These unique product keys would be reflected in the fact table, and so using the product key column would result in counting different versions of the same product multiple times.</p>
    <p class="fm-booktitle">In addition to scalar values like DAX measures, DAX variables can also store table values such as a specific set of customer key values or filter a set of product rows. DAX measures can then reference and apply aggregation functions against this set of tables.</p>
    <p class="fm-booktitle">In the following example, two distinct sets of customer keys (tables) are computed via variables and then combined via the <code class="inlinecode">UNION()</code> function to drive the filter context of the measure: </p>
    <pre class="programlisting"><code class="hljs-code">Internet Sales Married and Accessory Customers = 
    VAR __MarriedCustomers = 
        SUMMARIZE(
            CALCULATETABLE('Internet Sales',
                'Customer'[MaritalStatus] = "Married"),
        'Customer'[CustomerAlternateKey])
    VAR __AccessoryCustomersThisYear = 
        SUMMARIZE(
            CALCULATETABLE('Internet Sales',
                'Date'[Calendar Year] = 2013,'Product'[Product Category] = "Accessories"),
            'Customer'[CustomerAlternateKey])
    VAR __TargetCustomerSet = DISTINCT(UNION(__MarriedCustomers,__AccessoryCustomersThisYear))
RETURN
    CALCULATE(DISTINCTCOUNT('Customer'[CustomerAlternateKey]),
__TargetCustomerSet)
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">DISTINCT()</code> function is <a id="calibre_link-878" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>applied against the result of the <code class="inlinecode">UNION()</code> function since duplicate rows are retained by the <code class="inlinecode">UNION()</code> function in DAX. Note that the <code class="inlinecode">UNION()</code> function simply appends two or more tables together, returning a single table. The <code class="inlinecode">DISTINCT()</code> function returns a table of unique values (either unique rows in a table or the unique values in a single column).</p>
    <p class="fm-booktitle">Just like the previous example with variables, the <code class="inlinecode">SUMMARIZE()</code> function is used to both embed filter conditions and respect the filter context of the <code class="inlinecode">Internet Sales</code> fact table. In this example, <code class="inlinecode">SUMMARIZE()</code> allows selections on dimension tables related to the <code class="inlinecode">Internet Sales</code> fact table, such as <code class="inlinecode">Sales Territory</code> to also impact the measure.</p>
    <p class="fm-booktitle"><em class="italic">Figure 5.7</em> shows a matrix visual in a Power BI report where the <code class="inlinecode">Sales Territory Country</code> column from the <code class="inlinecode">Sales Territory</code> dimension is used as the column header and the results from the measure reflect each individual country:</p>
    <figure class="mediaobject"><img src="images/000006.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.7: Table-valued DAX variable-based measure</p>
    <p class="fm-booktitle">The filter context embedded into both variables (<code class="inlinecode">__MarriedCustomers</code> <code class="inlinecode">and</code> <code class="inlinecode">__AccessoryCustomersThisYear</code>) of the measure provides the equivalent behavior of bidirectional cross-filtering between <code class="inlinecode">Internet Sales</code> and the <code class="inlinecode">Customer</code> dimension. The <code class="inlinecode">SUMMARIZE()</code> function is used rather than <code class="inlinecode">CROSSFILTER()</code> when given a performance advantage. See the <em class="italic">Performance testing</em> section later in this chapter for additional details on performance testing. </p>
    <p class="fm-booktitle">The combination of table-valued DAX variables and set-based DAX functions such as <code class="inlinecode">UNION()</code>, <code class="inlinecode">INTERSECT()</code>, and <code class="inlinecode">EXCEPT()</code> supports a wide variety of analytical operations. Authors of DAX <a id="calibre_link-879" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures should familiarize themselves with the essentials of DAX as a query language, particularly the <code class="inlinecode">SUMMARIZE()</code> and <code class="inlinecode">SUMMARIZECOLUMNS()</code> functions. Custom tables resulting from DAX queries are often needed by DAX measure expressions and can also be used in other applications such as SSRS.</p>
    <p class="fm-booktitle">This completes our exploration of all of the base concepts with respect to DAX measures. Next, we use the knowledge from this section to develop the base measures for our dataset.</p>
    <h1 id="calibre_link-168" class="heading">Base measures</h1>
    <p class="fm-booktitle">Before any custom or complex DAX measures can be developed, a set of relatively simple base measures <a id="calibre_link-557" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>must be implemented first. These measures represent the metrics from the <em class="italic">Define the facts</em> section of <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, and thus contain validated and approved business definitions. </p>
    <p class="fm-booktitle">For Adventure Works, a set of base measures related to sales, cost, and margins are applicable to both the <code class="inlinecode">Internet Sales</code> and <code class="inlinecode">Reseller Sales</code> fact tables, such as the following:</p>
    <pre class="programlisting"><code class="hljs-code">Reseller Gross Sales = SUMX('Reseller Sales', 'Reseller Sales'[UnitPrice] * 'Reseller Sales'[OrderQuantity])
Reseller Sales Discounts = SUM('Reseller Sales'[DiscountAmount])
Reseller Net Sales = [Reseller Gross Sales] - [Reseller Sales Discounts]
Reseller Sales Product Cost = SUMX('Reseller Sales', 'Reseller Sales'[OrderQuantity] * 'Reseller Sales'[ProductStandardCost])  
Reseller Sales Freight Cost = SUM('Reseller Sales'[Freight])
Reseller Cost of Sales = [Reseller Sales Product Cost] + [Reseller Sales Freight Cost]
Reseller Gross Product Margin = [Reseller Gross Sales] - [Reseller Sales Product Cost]
Reseller Gross Product Margin % = DIVIDE([Reseller Gross Product Margin],[Reseller Gross Sales])
Reseller Net Product Margin = [Reseller Net Sales] - [Reseller Sales Product Cost]
Reseller Net Product Margin % = DIVIDE([Reseller Net Product Margin],[Reseller Net Sales])
Reseller Gross Margin = [Reseller Gross Sales] - [Reseller Cost of Sales]
Reseller Gross Margin % = DIVIDE([Reseller Gross Margin],[Reseller Gross Sales])
Reseller Net Margin = [Reseller Net Sales] - [Reseller Cost of Sales]
Reseller Net Margin % = DIVIDE([Reseller Net Margin],[Reseller Net Sales])
</code></pre>
    <p class="fm-booktitle">As shown in the <em class="italic">Fact table columns</em> section from <em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery, and Composite Data Model</em><em class="italic">s</em>, three fact table columns (<code class="inlinecode">ExtendedAmount, SalesAmount</code>, and <code class="inlinecode">TotalProductCost</code>) were excluded from the Power BI fact table to save resources. The <code class="inlinecode">SUMX()</code> function is used to compute the equivalent values from these three columns to support the <code class="inlinecode">Gross Sales, Net Sales</code>, and <code class="inlinecode">Product Cost</code> measures, respectively.</p>
    <p class="fm-booktitle">Sales discounts <a id="calibre_link-558" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and freight costs, both simple sums of their respective fact table columns, are the two measures that create differences among the base measures. Discounts separate gross sales from net sales and freight costs separate the cost of sales from product costs only. The distinct definitions of the base measures support common analysis needs, such as the profitability (margin) of sales inclusive or exclusive of freight costs.</p>
    <p class="fm-booktitle">With base measures created for both the <code class="inlinecode">Reseller Sales</code> and <code class="inlinecode">Internet Sales</code> fact tables, an additional set of base measures can be created for Adventure Works as an organization. Several of these measures can simply sum the <code class="inlinecode">Reseller Sales</code> and <code class="inlinecode">Internet Sales</code> measures as shown in the following examples:</p>
    <pre class="programlisting"><code class="hljs-code">AdWorks Net Sales = [Internet Net Sales] + [Reseller Net Sales]
AdWorks Cost of Sales = [Internet Cost of Sales] + [Reseller Cost of Sales]
AdWorks Net Margin = [AdWorks Net Sales] - [AdWorks Cost of Sales]
AdWorks Net Margin % = DIVIDE([AdWorks Net Margin],[AdWorks Net Sales])
</code></pre>
    <p class="fm-booktitle">Additional DAX measures with specific filtering or evaluation logic such as date intelligence metrics can reference the base measures in their expressions. Via this measure branching, any subsequent changes to the definition of the base measures are automatically reflected in other dependent measures. Additionally, the readability of the custom measures is improved, as these expressions only contain their specific logic.</p>
    <p class="fm-booktitle">With our base measures created, we can next create supporting measures.</p>
    <h2 id="calibre_link-169" class="calibre9">Measure support expressions</h2>
    <p class="fm-booktitle">Large and complex Power BI datasets with many measures may have one or multiple measure <a id="calibre_link-556" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>support tables. As shown in the previous chapters, these hidden tables don’t contain data and aren’t refreshed with the dataset, but serve as the home table for commonly used DAX expressions. </p>
    <p class="fm-booktitle">Unlike DAX variables, hidden DAX measure expressions are globally available to other DAX measures and queries. Measure support expressions, therefore, serve as a staging and consolidation layer to simplify DAX measures. </p>
    <p class="fm-booktitle">The measure support table may contain any of the following types of expressions: </p>
    <ul class="calibre10">
      <li class="bulletlist">KPI targets</li>
      <li class="bulletlist">Current and prior periods</li>
      <li class="bulletlist">Filter context information</li>
    </ul>
    <p class="fm-booktitle">The two measures described in the <em class="italic">Measure support logic</em> section of <em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery, and Composite Data Models</em>, represent the filter context information type of measure support. </p>
    <p class="fm-booktitle">These measures typically use the <code class="inlinecode">ISFILTERED()</code> or <code class="inlinecode">ISCROSSFILTERED()</code> functions and are referenced within conditional expressions of other measures. Additionally, the <code class="inlinecode">USERPRINCIPALNAME()</code> function is a good candidate for the <code class="inlinecode">Measure Support</code> table if dynamic RLS is needed, or if other, user-based functionality is built into the dataset. The <code class="inlinecode">USERPRINCIPALNAME()</code> function is covered in more detail in the <em class="italic">Dynamic row-level security</em> section later in this chapter.</p>
    <p class="fm-booktitle">The <code class="inlinecode">ISFILTERED()</code> function is used to test whether an individual column or a table is directly filtered only. The <code class="inlinecode">ISCROSSFILTERED()</code> function, however, tests whether an individual column or a table is either directly filtered or if it’s filtered via its relationship to another table in the model,</p>
    <p class="fm-booktitle">Let’s now look at the first of our support measures, a target for a KPI visual.</p>
    <h3 id="calibre_link-170" class="heading1">KPI targets</h3>
    <p class="fm-booktitle">The standard <strong class="screentext">Key Performance Indicator</strong> (<strong class="screentext">KPI</strong>) visual in Power BI Desktop compares an indicator <a id="calibre_link-965" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measure relative to a specified target value, which may also be a measure. The variance between the indicator and the target is displayed in the visual and is used to drive the color formatting (for example, red = bad; green = good). </p>
    <p class="fm-booktitle">For many measures, a corresponding target measure may need to be created that applies some <a id="calibre_link-1057" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>calculation logic to an existing measure. The following measure is simply 10% greater than the previous year’s year-to-date net sales:</p>
    <pre class="programlisting"><code class="hljs-code">Target: 10% Above PY YTD Internet Sales = [Internet Net Sales (PY YTD)] * 1.10
</code></pre>
    <p class="fm-booktitle">In a standard KPI visual, the target measure is displayed as the goal and used to calculate the variance percentage between the indicator and the target. In <em class="italic">Figure 5.8</em>, a $16.35M indicator value for <code class="inlinecode">Internet Net Sales (YTD)</code> is 154.43% higher than the 10% growth target measure of $6.43M:</p>
    <figure class="mediaobject"><img src="images/000421.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.8: Standard KPI visual</p>
    <p class="fm-booktitle">Several other common visuals in Power BI benefit from target measures, including the bullet chart and the gauge visual. Several of these visuals can use multiple target measures to define alternative thresholds, such as the min and max values displayed.</p>
    <p class="fm-booktitle">In certain scenarios, a dedicated table of corporate target measures can be added to a dataset. For example, a table may contain columns for expected or target customer counts, products sold, and other metrics at a given date’s granularity. Target measures can be created to access the values of this table via utility functions, such as <code class="inlinecode">LOOKUPVALUE()</code>. </p>
    <p class="fm-booktitle">The <code class="inlinecode">LOOKUPVALUE()</code> function returns a scalar value from a single column that results from filtering rows of a table based on specified criteria. In other words, <code class="inlinecode">LOOKUPVALUE()</code> provides the means to return a single “cell,” similar to Excel’s <code class="inlinecode">VLOOKUP</code> function. <code class="inlinecode">LOOKUPVALUE()</code> is particularly useful because it ignores the current filter context. </p>
    <p class="fm-booktitle">As shown in <a id="calibre_link-966" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the examples in the following section, the <code class="inlinecode">LOOKUPVALUE()</code> function can be relied on to provide the same input value to other measures, such as a <a id="calibre_link-1058" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>date or a number referring to specific date rows, regardless of any filters applied in the report.</p>
    <p class="fm-booktitle">Let’s take a look at using the <code class="inlinecode">LOOKUPVALUE()</code> function for current and prior period support measures.</p>
    <h3 id="calibre_link-171" class="heading1">Current and prior periods</h3>
    <p class="fm-booktitle">A common requirement of date intelligence metrics is to compare the <code class="inlinecode">YTD</code> total for a measure <a id="calibre_link-962" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>versus the equivalent time period of the prior year. For example, on November 14, 2017, the visual would compare January through October of 2017 versus January through October of 2016. </p>
    <p class="fm-booktitle">Without any <a id="calibre_link-680" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>external filtering, however, a standard <code class="inlinecode">YTD</code> measure would include the 14 days of November in 2017 and would capture the entire year of 2016 if the <a id="calibre_link-1541" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>year 2016 was in the filter context. To deliver equivalent or apples-to-apples comparisons of equal time periods, the filter context of measures can be further customized. </p>
    <p class="fm-booktitle">The following measures retrieve the year-to-date net sales through the prior calendar month and prior calendar week. For example, throughout the month of November, the <code class="inlinecode">YTD Last Month</code> measure would, at most, only retrieve the net sales through the month of October. Likewise, the <code class="inlinecode">YTD Last Week</code> measure would, at most, only include the net sales through the end of the prior week of the year (45):</p>
    <pre class="programlisting"><code class="hljs-code">Prior Calendar Month Number = 
    VAR __CurrentDay = TODAY()
RETURN
    IF (LOOKUPVALUE('Date'[Month Number],'Date'[Date],__CurrentDay) = 1,
        12,
        LOOKUPVALUE('Date'[Month Number],'Date'[Date],__CurrentDay)-1
    ) 
Prior Calendar Week Number = 
    VAR __CurrentDay = TODAY()
RETURN
    IF(LOOKUPVALUE('Date'[Week of Year],'Date'[Date],__CurrentDay) = 1, 
        CALCULATE(MAX('Date'[Week of Year]),FILTER(ALL('Date'),'Date'[Calendar Year] = MAX('Date'[Calendar Year]) - 1)),
        LOOKUPVALUE('Date'[Week of Year],'Date'[Date],__CurrentDay)-1
    )
Internet Net Sales (YTD Last Month) = 
    IF([Prior Calendar Month Number] &lt;&gt; 12,
        CALCULATE([Internet Net Sales], FILTER(ALL('Date'),'Date'[Calendar Year] = MAX('Date'[Calendar Year]) &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date]) &amp;&amp; 'Date'[Month Number] &lt;= [Prior Calendar Month Number])),
        CALCULATE([Internet Net Sales], FILTER(ALL('Date'), 'Date'[Calendar Year] = MAX('Date'[Calendar Year])-1 &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date]) &amp;&amp; 'Date'[Month Number] &lt;= [Prior Calendar Month Number]))
    )
Internet Net Sales (YTD Last Week) = 
    VAR __CurrentWeek = LOOKUPVALUE('Date'[Week of Year],'Date'[Date],TODAY())
RETURN
    IF(__CurrentWeek &lt;&gt; 1,
        CALCULATE([Internet Net Sales], FILTER(ALL('Date'),'Date'[Calendar Year] = MAX('Date'[Calendar Year]) &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date]) &amp;&amp; 'Date'[Week of Year] &lt;= [Prior Calendar Week Number])),
        CALCULATE([Internet Net Sales], FILTER(ALL('Date'),'Date'[Calendar Year] = MAX('Date'[Calendar Year])-1 &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date]) &amp;&amp; 'Date'[Week of Year] &lt;= [Prior Calendar Week Number]))
    )
</code></pre>
    <p class="fm-booktitle">For any prior <a id="calibre_link-963" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>calendar year in the filter context, the (<code class="inlinecode">YTD Last Month</code>) measure would only include January through October for <a id="calibre_link-1542" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>this given year. Likewise, the (<code class="inlinecode">YTD Last Week</code>) measure would only <a id="calibre_link-681" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>include weeks 1 through 45 of the given year. By embedding this dynamic filtering logic, it’s possible to use these measures in report visuals without applying any additional filters.</p>
    <p class="fm-booktitle">The <code class="inlinecode">TODAY()</code> function combined with the <code class="inlinecode">LOOKUPVALUE()</code> function makes it possible to retrieve values at query time relative to the current date. In the previous example, the month and week number columns of the current year (for example, October = 10) are queried via <code class="inlinecode">LOOKUPVALUE()</code> based on the current date. </p>
    <p class="fm-booktitle">With these values retrieved, subtracting one from the results provides the value associated with the prior month and prior week, respectively. These measures are then referenced in the <code class="inlinecode">FILTER()</code> function of their respective year-to-date measures.</p>
    <p class="fm-booktitle">Similar <a id="calibre_link-682" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to this simple example, dynamically computed dates and other values <a id="calibre_link-1543" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>make it possible to create measures for the current date and yesterday:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Sales (Today) = CALCULATE([Internet Net Sales], FILTER(ALL('Date'),'Date'[Date] = TODAY()))

Internet Net Sales (Yesterday) = CALCULATE([Internet Net Sales], FILTER(ALL('Date'),'Date'[Date] = TODAY()-1)) 
</code></pre>
    <p class="fm-booktitle">Along with <a id="calibre_link-964" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the date intelligence metrics described in the following section, a rich set of date-based metrics gives users of Power BI reports and dashboards visibility for both short- and long-term results.</p>
    <h1 id="calibre_link-172" class="heading">Date intelligence metrics</h1>
    <p class="fm-booktitle">Date intelligence metrics are typically the first set of measures to be added to a dataset following <a id="calibre_link-847" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>base measures. These measures reference the base measures and add a custom filtering condition to the <code class="inlinecode">Date</code> dimension table, thus providing visibility to multiple distinct time intervals, such as year-to-date and the previous year-to-date. </p>
    <p class="fm-booktitle">Given their built-in date filtering logic, Power BI reports and dashboards can be developed faster and without manual maintenance costs of updating date filter conditions.</p>
    <p class="fm-booktitle">The following four measures apply custom filter contexts to either return the current year, month, and week by default, or the latest of these time intervals given the date filters applied in a report:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Sales (CY) = CALCULATE([Internet Net Sales],FILTER(ALL('Date'), 'Date'[Calendar Year] = MAX('Date'[Calendar Year]) &amp;&amp; 'Date'[Date] &gt;= MIN('Date'[Date]) &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date])))

Internet Net Sales (YTD) = CALCULATE([Internet Net Sales], FILTER(ALL('Date'),'Date'[Calendar Year] = MAX('Date'[Calendar Year]) &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date])))

Internet Net Sales (MTD) = CALCULATE([Internet Net Sales], FILTER(ALL('Date'),'Date'[Year Month Number] = MAX('Date'[Year Month Number]) &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date])))

Internet Net Sales (WTD) = CALCULATE([Internet Net Sales], FILTER(ALL('Date'),'Date'[Year Week Number] = MAX('Date'[Year Week Number]) &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date])))
</code></pre>
    <p class="fm-booktitle">As explained in the <em class="italic">Row context</em><em class="italic"> </em>section of this chapter, the use of the <code class="inlinecode">MIN()</code> and <code class="inlinecode">MAX()</code> functions within the <code class="inlinecode">FILTER()</code> function invokes the filter context of the report query. For example, if a report page is filtered to the second quarter of 2016 (2016-Q2), the <code class="inlinecode">CY</code> measure only returns the sales from these three months while the <code class="inlinecode">YTD</code> measure includes both the first <a id="calibre_link-848" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and second quarter of 2016. The month-to-date (<code class="inlinecode">MTD</code>) and week-to-date (<code class="inlinecode">WTD</code>) measures return the sales for June of 2016 and week 27 of 2016, the last month and week in the filter context.</p>
    <p class="fm-booktitle">The <code class="inlinecode">Date</code> dimension table only contains rows through the current date. Therefore, in the absence of any other date filters applied in a report, these measures default to the current <code class="inlinecode">YTD</code>, <code class="inlinecode">MTD</code>, and <code class="inlinecode">WTD</code> totals for net sales as per <em class="italic">Figure 5.9</em>:</p>
    <figure class="mediaobject"><img src="images/000026.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.9: Date intelligence metrics for the last full year in the dataset (2013)</p>
    <p class="fm-booktitle">The <code class="inlinecode">CY</code> measure returns the same value as the <code class="inlinecode">YTD</code> measure when no other date filters are applied. </p>
    <p class="fm-booktitle">The MTD and WTD measures both reference a numeric column on the <code class="inlinecode">Date</code> table that corresponds to the given granularity. For example, December of 2013 and January of 2014 are represented by the values 108 and 109 in the <code class="inlinecode">Year Month Number</code> column. As shown in the previous chapter, these sequential columns are critical for date intelligence and are also used by the <code class="inlinecode">Sort By</code> column property.</p>
    <p class="fm-booktitle">The following set of DAX measures return the prior year, month, and week given the filter context of the report: </p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Sales (PY) = CALCULATE([Internet Net Sales],FILTER(ALL('Date'), CONTAINS(VALUES('Date'[Prior Year Date]),'Date'[Prior Year Date],'Date'[Date])))

Internet Net Sales (PYTD) = CALCULATE([Internet Net Sales], FILTER(ALL('Date'),'Date'[Calendar Year] = MAX('Date'[Calendar Year])-1 &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Prior Year Date])))

Internet Net Sales (PMTD) = CALCULATE([Internet Net Sales], FILTER(ALL('Date'),'Date'[Year Month Number] = MAX('Date'[Year Month Number])-1 &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Prior Month Date])))

Internet Net Sales (PWTD) = CALCULATE([Internet Net Sales], FILTER(ALL('Date'),'Date'[Year Week Number] = MAX('Date'[Year Week Number])-1 &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Prior Week Date])))
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">Calendar Year</code>, <code class="inlinecode">Year Month Number</code>, and <code class="inlinecode">Year Week Number</code> columns used by the current period <a id="calibre_link-849" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures are also referenced by the prior period measures. However, the prior period measures subtract a value of one from the result of the <code class="inlinecode">MAX()</code> function to navigate to the given preceding period. </p>
    <p class="fm-booktitle">In the <code class="inlinecode">Internet Net Sales (PY)</code> measure, the <code class="inlinecode">CONTAINS()</code> function used within the filtering parameter of the <code class="inlinecode">FILTER()</code> function returns a <code class="inlinecode">true</code> or <code class="inlinecode">false</code> value for each prior calendar year date based on the date column. The <code class="inlinecode">CONTAINS()</code> function returns <code class="inlinecode">true</code> if the date column reflects the filter context of the report query and thus only the corresponding prior year dates are passed to <code class="inlinecode">FILTER()</code> as the modified filter context.</p>
    <p class="fm-booktitle">DAX provides a number of functions dedicated to date intelligence, such as <code class="inlinecode">DATEADD()</code> and <code class="inlinecode">SAMEPERIODLASTYEAR()</code>. These functions are much less verbose than the techniques from these examples, but they’re also generally limited to standard calendars. The approach described in this section leveraging DAX functions, such as <code class="inlinecode">FILTER()</code> and <code class="inlinecode">ALL()</code>, can also be applied to financial calendars. Additionally, the filter navigation (for example, <code class="inlinecode">MAX() - 1</code>) implemented in the prior period measures is applicable to more advanced date intelligence expressions. </p>
    <p class="fm-booktitle">Each prior period measure references a column containing date values that have been adjusted relative to the date column. <em class="italic">Figure 5.10</em> of the <code class="inlinecode">Date</code> dimension query in Power Query Editor highlights these three columns relative to the date column:</p>
    <figure class="mediaobject"><img src="images/000016.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.10: Prior date columns in the date dimension</p>
    <p class="fm-booktitle">Given the value of date intelligence measures and the relatively static nature of the date dimension, it’s recommended to develop a robust date dimension table. If the necessary columns cannot <a id="calibre_link-850" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>be implemented in the source database itself, the columns can be computed within the SQL view or the M query of the <code class="inlinecode">Date</code> table. </p>
    <p class="fm-booktitle">Sample M query examples are available in the companion PBIX files for this book on GitHub (<a href="https://github.com/PacktPublishing/-Mastering-Microsoft-Power-BI-Second-Edition" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://github.com/PacktPublishing/-Mastering-Microsoft-Power-BI-Second-Edition</span></a>) and detailed instructions are provided in <em class="italic">Chapter 6</em> of <em class="italic">Power BI Cookbook, 2nd Edition</em>.</p>
    <p class="fm-booktitle">Let’s now look at a different type of date intelligence measure that compares prior years.</p>
    <h2 id="calibre_link-173" class="calibre9">Current versus prior and growth rates</h2>
    <p class="fm-booktitle">With <a id="calibre_link-851" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>date intelligence <a id="calibre_link-683" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures developed for the current <a id="calibre_link-1544" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and prior periods, growth or variance measures <a id="calibre_link-853" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can be added to the dataset, comparing the two values. In the following example, a year-over-year (<code class="inlinecode">YOY</code>) and a year-over-year year-to-date (<code class="inlinecode">YOY</code> <code class="inlinecode">YTD</code>) measure have been created based on the current year and prior year measures from the preceding section:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Sales (YOY) = [Internet Net Sales (CY)] - [Internet Net Sales (PY)] 

Internet Net Sales (YOY YTD) = [Internet Net Sales (YTD)] - [Internet Net Sales (PYTD)]
</code></pre>
    <p class="fm-booktitle">Finally, growth percentage measures can be added, which express the variance between the current <a id="calibre_link-852" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and prior <a id="calibre_link-854" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>period measures as a percentage of the prior <a id="calibre_link-1545" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>period. The following measures reference <a id="calibre_link-684" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the above <code class="inlinecode">YOY</code> measures as the numerator within a <code class="inlinecode">DIVIDE()</code> function:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Sales (YOY %) = DIVIDE([Internet Net Sales (YOY)],[Internet Net Sales (PY)])

Internet Net Sales (YOY YTD %) = DIVIDE([Internet Net Sales (YOY YTD)],[Internet Net Sales (PYTD)])
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">DIVIDE()</code> function returns a blank value if the denominator is zero or a blank value by default. The divide operator (<code class="inlinecode">/</code>), however, returns an infinity value when dividing by zero or a blank. Given the superior error-handling behavior and performance advantages of <code class="inlinecode">DIVIDE()</code>, the <code class="inlinecode">DIVIDE()</code> function is recommended for computing division in DAX.</p>
    <p class="fm-booktitle">Another popular category of date intelligence measures deals with rolling date periods so let’s look at those next.</p>
    <h2 id="calibre_link-174" class="calibre9">Rolling periods</h2>
    <p class="fm-booktitle">Rolling periods, sometimes <a id="calibre_link-855" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>referred to as trailing <a id="calibre_link-1637" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>averages, are very <a id="calibre_link-1809" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>common in datasets, as they help to smooth out individual outliers and analyze longer-term trends. For example, a significant business event or variance 10 months ago has a relatively small impact on a trailing 12-month total. Additionally, this variance does not impact trailing 30-day or 3-, 6-, and 9-month rolling period measures.</p>
    <p class="fm-booktitle">The following two measures capture the trailing 60 days of sales history and the 60 days of history prior to the trailing 60 days:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Sales (Trailing 60 Days) = 
    VAR __MaxDate = MAX('Date'[Date])
    VAR __StartDate = __MaxDate - 59
RETURN
    CALCULATE([Internet Net Sales],FILTER(ALL('Date'),'Date'[Date] &gt;= __StartDate &amp;&amp; 'Date'[Date] &lt;= __MaxDate)) 
Internet Net Sales Trailing (60 to 120 Days) = 
    VAR __MaxDate = MAX('Date'[Date])
    VAR __EndDate = __MaxDate - 60
    VAR __StartDate = __EndDate - 59
RETURN
    CALCULATE([Internet Net Sales],FILTER(ALL('Date'), 'Date'[Date] &gt;= __StartDate &amp;&amp; 'Date'[Date] &lt;= __EndDate)) 
</code></pre>
    <p class="fm-booktitle">The two 60-day measures compute the dates for the filter condition within DAX variables <a id="calibre_link-856" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and then pass these values into the <code class="inlinecode">FILTER()</code> function. The two <a id="calibre_link-1638" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures help to answer the question “Is Internet sales growth accelerating?” With this logic, the value for the trailing 60 days measure on November 15th, 2013 includes Internet sales since September 17th, 2013. The 60-to-120-days measure, however, includes sales history from July 19th, 2013 through September 16th, 2013.</p>
    <p class="fm-booktitle">Rolling period or trailing average measures generally require the sequential numeric date dimension columns in the date suggested in both previous chapters. Very similar to the prior period measures from the previous section (for example, <code class="inlinecode">PY YTD</code>), rolling period measures can reference sequential columns for the given granularity and modify the date filter by adding or subtracting values.</p>
    <p class="fm-booktitle">In the next section, we take a look at a different way to create groups of measures called <em class="italic">calculation groups</em>.</p>
    <h1 id="calibre_link-175" class="heading">Calculation groups</h1>
    <p class="fm-booktitle">Calculation groups are a data modeling feature that enable common expression logic to be centralized <a id="calibre_link-583" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and leveraged by other measures when needed in reports. In this section, we cover the creation of the same basic date intelligence from the previous section, <em class="italic">Date intelligence metrics</em>, but use calculation groups.</p>
    <p class="fm-booktitle">In the previous section, we covered the creation of basic date intelligence metrics for <code class="inlinecode">Internet Net Sales</code>. However, supporting eight common date intelligence expressions for each of 24 base measures would imply adding 192 (8*24) distinct measures to the dataset, thus adding both development time and complexity for report authors and analysts. Calculation groups address this issue by allowing report authors to reuse common expressions such as year-to-date for whichever base measure it’s needed for. </p>
    <p class="fm-booktitle">Calculation groups allow the creation of general calculation formulas that can be applied to any explicit measure within the data model. Thus, a single set of 8 basic date intelligence metrics could be created (<code class="inlinecode">CY</code>, <code class="inlinecode">YTD</code>, <code class="inlinecode">MTD</code>, <code class="inlinecode">WTD</code>, <code class="inlinecode">PY</code>, <code class="inlinecode">PYTD</code>, <code class="inlinecode">PMTD</code>, <code class="inlinecode">PWTD</code>) as a calculation group and this calculation group could be applied to all 24 base measures.</p>
    <p class="fm-booktitle">Calculation groups <a id="calibre_link-1994" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and certain other dataset objects such as <strong class="screentext">detail-row expressions</strong> can only <a id="calibre_link-896" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>be created in external tools (outside of Power BI Desktop) such as Tabular Editor. Detail row expressions enable custom drillthrough actions in MDX-based client tools such as via PivotTables in Excel. </p>
    <p class="fm-booktitle">For example, the <code class="inlinecode">SELECTCOLUMNS()</code> function could be used in a Detail Rows Expression to select the dimension attributes most valued in a drillthrough scenario such as Customer ID and Sales Order Number. Excel report users are able to simply double-click values in their Excel PivotTables to access a table containing the detail row expression attributes for the given filters applied. </p>
    <p class="fm-booktitle"><em class="italic">Figure 5.11</em> shows a calculation group being created in Tabular Editor v2:</p>
    <figure class="mediaobject"><img src="images/000046.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.11: Creating a calculation group in Tabular Editor</p>
    <p class="fm-booktitle">Once deployed <a id="calibre_link-584" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to the model, calculation groups appear as a table in the <strong class="screentext">Fields</strong> pane with a single named column. This column represents the collection of <strong class="screentext">calculation items </strong>defined for the calculation group. </p>
    <p class="fm-booktitle"><em class="italic">Figure 5.12</em> shows a matrix with a calculation group used with four different base measures simultaneously. In each case, the specified calculations are performed on each measure separately.</p>
    <figure class="mediaobject"><img src="images/000036.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.12: Calculation group used with multiple measures in a matrix</p>
    <p class="fm-booktitle">The equivalent <a id="calibre_link-585" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>calculation items for the basic date intelligence metrics covered earlier in this chapter are as follows:</p>
    <pre class="programlisting"><code class="hljs-code">Current Year
CALCULATE(SELECTEDMEASURE(),FILTER(ALL('Date'), 'Date'[Calendar Year] = MAX('Date'[Calendar Year]) &amp;&amp; 'Date'[Date] &gt;= MIN('Date'[Date]) &amp;&amp;     'Date'[Date] &lt;= MAX('Date'[Date])))
Year to Date
CALCULATE(SELECTEDMEASURE(), FILTER(ALL('Date'),'Date'[Calendar Year] = MAX('Date'[Calendar Year]) &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date])))
Month to Date
CALCULATE(SELECTEDMEASURE(), FILTER(ALL('Date'),'Date'[Year Month Number] = MAX('Date'[Year Month Number]) &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date])))
Week to Date
CALCULATE(SELECTEDMEASURE(), FILTER(ALL('Date'),'Date'[Year Week Number] = MAX('Date'[Year Week Number]) &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date])))
Previous Year
CALCULATE(SELECTEDMEASURE(),FILTER(ALL('Date'), CONTAINS(VALUES('Date'[Prior Year Date]),'Date'[Prior Year Date],'Date'[Date])))
Previous Year to Date
CALCULATE(SELECTEDMEASURE(), FILTER(ALL('Date'),'Date'[Calendar Year] = MAX('Date'[Calendar Year])-1 &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Prior Year Date])))
Previous Month to Date
CALCULATE(SELECTEDMEASURE(), FILTER(ALL('Date'),'Date'[Year Month Number] = MAX('Date'[Year Month Number])-1 &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Prior Month Date])))
Previous Week to Date
CALCULATE(SELECTEDMEASURE(), FILTER(ALL('Date'),'Date'[Year Week Number] = MAX('Date'[Year Week Number])-1 &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Prior Week Date])))
</code></pre>
    <p class="fm-booktitle">As you can see, in each instance, the explicit measure such as <code class="inlinecode">Internet Net Sales</code> has been replaced with the DAX function <code class="inlinecode">SELECTEDMEASURE()</code>. The <code class="inlinecode">SELECTEDMEASURE()</code> function is a placeholder that represents the current measure in the context of the calculation item. Three additional special functions are available to calculation items including <code class="inlinecode">SELECTEDMEASURENAME</code>, <code class="inlinecode">ISSELECTEDMEASURE</code>, and <code class="inlinecode">SELECTEDMEASUREFORMATSTRING</code>. </p>
    <p class="fm-booktitle"><code class="inlinecode">SELECTEDMEASURENAME</code> is used to determine the measure in context by name. <code class="inlinecode">ISSELECTEDMEASURE</code> is used to determine if the measure in context is contained within a list of measures. <code class="inlinecode">SELECTEDMEASUREFORMATSTRING</code> is used to retrieve the format string of the measure in context.</p>
    <p class="fm-booktitle">Each calculation <a id="calibre_link-586" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>item in a calculation group can only operate on a single explicit measure. In addition, calculation item formulas do not support the use of <code class="inlinecode">VAR</code> and <code class="inlinecode">RETURN</code> statements. That said, the <code class="inlinecode">YOY</code> and <code class="inlinecode">YOY%</code> calculations can be added to the calculation group with the following equations:</p>
    <pre class="programlisting"><code class="hljs-code">YOY
CALCULATE(SELECTEDMEASURE(),FILTER(ALL('Date'), 'Date'[Calendar Year] = MAX('Date'[Calendar Year]) &amp;&amp; 'Date'[Date] &gt;= MIN('Date'[Date]) &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date]))) 
- 
CALCULATE(SELECTEDMEASURE(),FILTER(ALL('Date'), CONTAINS(VALUES('Date'[Prior Year Date]),'Date'[Prior Year Date],'Date'[Date]))) 
YOY%
DIVIDE(CALCULATE(SELECTEDMEASURE(),FILTER(ALL('Date'), 'Date'[Calendar Year] = MAX('Date'[Calendar Year]) &amp;&amp; 'Date'[Date] &gt;= MIN('Date'[Date]) &amp;&amp; 'Date'[Date] &lt;= MAX('Date'[Date]))), CALCULATE(SELECTEDMEASURE(),FILTER(ALL('Date'), CONTAINS(VALUES('Date'[Prior Year Date]),'Date'[Prior Year Date],'Date'[Date]))))
</code></pre>
    <p class="fm-booktitle">Data modelers should consider calculation groups for repetitive measures such as date intelligence metrics. However, because calculation items can only refer to a single measure within their formulas, calculation groups are limited in their utility. Furthermore, the appearance of calculation groups as a table and the inability to see their formulas within Power BI Desktop or Excel can be confusing to report authors and business users unfamiliar with the functionality.</p>
    <p class="fm-booktitle">Even with calculation groups handling common expressions (<code class="inlinecode">YTD</code>, <code class="inlinecode">YOY</code>), given the volume of distinct business questions that datasets and specifically DAX measures are tasked with addressing, it can be challenging to avoid the development of hundreds or even thousands of DAX measures. Over time such a high volume of DAX measures can make a dataset more difficult to support and, even with a thoughtful display folder structure, can complicate the user experience of report authors and analysts. </p>
    <p class="fm-booktitle">Report-scoped <a id="calibre_link-587" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures in Power BI reports are one method that organizations can use to avoid an excessive volume of DAX measures within datasets. If a certain calculation or set of calculations is only applicable to a particular report or a few reports and isn’t expected to be used in the future for self-service analysis or other reports then it may be preferable to implement these DAX measures in the report rather than the Power BI dataset. </p>
    <p class="fm-booktitle">In these instances, depending on the complexity of the measure(s) and the experience and comfort level of the report author with DAX, either the report author or the dataset developer could obtain access to the Power BI report file (<code class="inlinecode">.pbix</code>) to add the measures. </p>
    <p class="fm-booktitle">This completes our exploration of calculation groups. We’ll next move on to exploring measures that make calculations based upon dimension tables.</p>
    <h1 id="calibre_link-176" class="heading">Dimension metrics</h1>
    <p class="fm-booktitle">The majority of DAX measures apply aggregating functions to numeric columns of fact tables. However, several <a id="calibre_link-897" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of the most important metrics of a dataset are those that focus on dimension tables, such as the count of customers who’ve purchased and those who haven’t. </p>
    <p class="fm-booktitle">It can also be necessary to count the distinct values of a dimension column such as the number of postal codes sold to or the number of distinct marketing promotions over a period of time.</p>
    <p class="fm-booktitle">In the dataset for this project, the customer dimension table is exclusive to the <code class="inlinecode">Internet Sales</code> fact table, and the measure should only count customers with internet sales history. </p>
    <p class="fm-booktitle">Additionally, slowly changing dimension logic has been implemented so that a single customer defined by the <code class="inlinecode">CustomerAlternateKey</code> column could have multiple rows defined by the <code class="inlinecode">CustomerKey</code> column.</p>
    <p class="fm-booktitle">The following two DAX measures count the number of unique customers and products with internet sales history:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Sales Customer Count = CALCULATE(DISTINCTCOUNT('Customer'[CustomerAlternateKey]), 'Internet Sales')

Internet Sales Products Sold Count = CALCULATE(DISTINCTCOUNT('Product'[ProductAlternateKey]),'Internet Sales') 
</code></pre>
    <p class="fm-booktitle">By invoking the <code class="inlinecode">Internet Sales</code> fact table as a filtering parameter to <code class="inlinecode">CALCULATE()</code>, any filter applied to a related dimension table such as <code class="inlinecode">Sales Territory</code> also impacts the measure. </p>
    <p class="fm-booktitle">This behavior is the same <a id="calibre_link-898" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as bidirectional cross-filtering between the <code class="inlinecode">Internet Sales</code> and <code class="inlinecode">Customer</code> tables. However, in the event that no filters have been applied in the reporting tool (for example, Power BI or Excel), the <code class="inlinecode">Internet Sales</code> table filter ensures that only customers with <code class="inlinecode">Internet Sales</code> histories are counted.</p>
    <p class="fm-booktitle">Let’s next look at an additional aspect of measures focused on dimensions, missing dimensions.</p>
    <h2 id="calibre_link-177" class="calibre9">Missing dimensions</h2>
    <p class="fm-booktitle">Missing dimension measures are commonly used in churn and exception reporting and analyses. Missing dimension <a id="calibre_link-899" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>metrics attempt to <a id="calibre_link-1133" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>identify what dimension values are not present within a given set of fact table rows.</p>
    <p class="fm-booktitle">For example, a report may be needed that displays the specific products that haven’t sold or the past customers who haven’t made a purchase in a given filter context. Additionally, missing dimension measures give greater meaning to other dimension measures. For instance, the count of products sold in a period may not be as useful without knowing how many products were not sold over this same period. </p>
    <p class="fm-booktitle">The following DAX measures count the number of unique customers without <code class="inlinecode">Internet Sales</code> history:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Sales Customers Missing = CALCULATE(DISTINCTCOUNT('Customer'[CustomerAlternateKey]), FILTER(VALUES('Customer'[CustomerAlternateKey]),
ISEMPTY(RELATEDTABLE('Internet Sales'))))

Internet Sales Products Missing = CALCULATE(DISTINCTCOUNT('Product'[ProductAlternateKey]), FILTER(VALUES('Product'[ProductAlternateKey]), ISEMPTY(RELATEDTABLE('Internet Sales'))))
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">Internet Sales Customers Missing</code> measure references the <code class="inlinecode">Internet Sales</code> fact table like <a id="calibre_link-900" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the customer count measure does, but only within the <code class="inlinecode">ISEMPTY()</code> function. The <code class="inlinecode">ISEMPTY()</code> function operates as the filter parameter <a id="calibre_link-1134" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of the <code class="inlinecode">FILTER()</code> function and returns a <code class="inlinecode">true</code> or a <code class="inlinecode">false</code> value for each distinct <code class="inlinecode">CustomerAlternateKey</code> provided by the <code class="inlinecode">VALUES()</code> function. Only the customer rows without any related rows in the <code class="inlinecode">Internet Sales</code> fact table are marked as <code class="inlinecode">true</code> and this filtered set of customer rows is passed to the <code class="inlinecode">DISTINCTCOUNT()</code> function. The same methodology is applied to the <code class="inlinecode">Internet Sales Products Missing</code> measure.</p>
    <p class="fm-booktitle">The following matrix visual shown in <em class="italic">Figure 5.13</em> has been filtered to five calendar quarters and broken out by the <code class="inlinecode">Sales Territory Group</code>:</p>
    <figure class="mediaobject"><img src="images/000067.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.13: Internet Sales Customers and Customers Missing</p>
    <p class="fm-booktitle">Any other dimension table with a relationship to the <code class="inlinecode">Internet Sales</code> fact table, such as <code class="inlinecode">Promotion</code> and <code class="inlinecode">Product</code>, could also be used to filter the metrics. </p>
    <p class="fm-booktitle">In this dataset, the customer dimension has 18,484 unique customers as defined by the <code class="inlinecode">CustomerAlternateKey</code>. Therefore, the sum of the customer count and customers missing measures is always equal to 18,484. </p>
    <p class="fm-booktitle">As explained in the <em class="italic">Filter context</em> section of this chapter, the subtotal values execute in their own filter context. For example, only 549 customers did not make an online purchase in any of the four quarters, while over 12,000 customers did not make a purchase in each of the four quarters.</p>
    <p class="fm-booktitle">Once core <a id="calibre_link-901" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dimension metrics have been established <a id="calibre_link-1135" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>such as in the previous examples, additional metrics can be developed that leverage their logic. The following measures identify the count of first-year internet sales customers and the count of accessories products that have not sold online, respectively:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Sales First Year Customer Count = CALCULATE([Internet Sales Customer Count],'Customer'[Customer History Segment] = "First Year Customer")

Internet Sales Products Missing (Accessories) = CALCULATE([Internet Sales Products Missing],'Product'[Product Category] = "Accessories")
</code></pre>
    <p class="fm-booktitle">Dimension metrics, just like the base measures described earlier, may be used in reporting by themselves or may be referenced by other measures. This branching of measures underlines the importance of clearly defining, documenting, and testing the foundational measures of a dataset.</p>
    <p class="fm-booktitle">In the next section we look at another common category of measures, those that deal with ranking.</p>
    <h1 id="calibre_link-178" class="heading">Ranking metrics</h1>
    <p class="fm-booktitle">Many reports <a id="calibre_link-1577" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and analyses are built around the ranking of dimensions relative to measures, such as the top 10 salespeople based on YTD sales. Ranking measures can also help deliver cleaner and more intuitive report visualizations as they substitute small integer values for large numbers and decimal places. Ranking measures can be as simple as specifying a column and a measure, or more complex with unique ranking logic applied in distinct filter contexts.</p>
    <p class="fm-booktitle">Ranking measures in DAX are implemented via the <code class="inlinecode">RANKX()</code> function, which is an iterator like <code class="inlinecode">SUMX()</code> and <code class="inlinecode">FILTER()</code>. As an iterating function, two required input parameters include a table and the expression to be evaluated for each row of the table. The following two measures rank products based on the <code class="inlinecode">Internet Net Sales</code> measure:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Sales Product Rank = RANKX(ALL('Product'[ProductAlternateKey]),[Internet Net Sales],,DESC,Skip)

Internet Net Sales Product Rank (All Products) = 
    VAR __ProdRankTable = ALL('Product'[ProductAlternateKey],'Product'[Product Name],'Product'[Product Category Group],'Product'[Product Category],'Product'[Product Subcategory],'Product'[Product Name])
RETURN
    RANKX(__ProdRankTable, [Internet Net Sales],,DESC,Skip)
</code></pre>
    <p class="fm-booktitle">As with date <a id="calibre_link-1578" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>intelligence and other measures, <code class="inlinecode">ALL()</code> is used to remove the filters applied to a table. The <code class="inlinecode">ALL()</code> function both removes a filter and returns a table that can then be evaluated by other functions. <code class="inlinecode">ALL()</code> can remove filters from an entire table, multiple columns of the same table, or a single column from a table. Additionally, the <code class="inlinecode">ALLEXCEPT()</code> function can be used to remove filters from the current and any future columns of a table, except for one or a specific set of columns.</p>
    <p class="fm-booktitle">In the <code class="inlinecode">Internet Net Sales Product Rank</code> measure, the <code class="inlinecode">ALL()</code> function returns a table of the unique product’s alternate key values. Since only a single column is referenced by <code class="inlinecode">ALL()</code> in this measure, other columns from the <code class="inlinecode">Product</code> dimension table are allowed into the filter context. </p>
    <p class="fm-booktitle">For example, in <em class="italic">Figure 5.14</em>, the <code class="inlinecode">Product Category</code> column impacts the <code class="inlinecode">Internet Net Sales Product Rank</code> measure so that the <strong class="screentext">HL-U509-R</strong> product is ranked first given that it’s the highest-selling product in the <strong class="screentext">Accessories</strong> category: </p>
    <figure class="mediaobject"><img src="images/000056.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.14: Ranking measures</p>
    <p class="fm-booktitle">The <code class="inlinecode">Internet Net Sales Product Rank (All Products)</code> measure, however, ranks the product relative to all other products including products in the <code class="inlinecode">Bikes</code> category. The group of columns specified in the <code class="inlinecode">ALL()</code> function (the table parameter to <code class="inlinecode">RANKX()</code>) defines the set of rows that the ranking expression is evaluated against.</p>
    <p class="fm-booktitle">For ranking <a id="calibre_link-1995" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and certain other scenarios, it’s necessary to apply alternative logic for subtotals. For example, the total row of the previous table visual would show a ranking value of 1 without any modification to the DAX. A common pattern to address subtotal values is to check whether an individual item of a column is in the filter context via <code class="inlinecode">HASONEVALUE()</code>. </p>
    <p class="fm-booktitle">The following revised measure uses an <code class="inlinecode">IF()</code> conditional function to apply the ranking for individual products, but otherwise returns a blank value: </p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Sales Product Rank (Revised) = IF(HASONEVALUE('Product'[ProductAlternateKey]), RANKX(ALL('Product'[ProductAlternateKey]),[Internet Net Sales],,DESC,Skip),BLANK())
</code></pre>
    <p class="fm-booktitle">As shown in this example, it’s essential to understand the intended ranking logic and it may be necessary to store alternative ranking measures to suit the requirements of different reports and projects.</p>
    <p class="fm-booktitle">The <code class="inlinecode">RANKX()</code> function has five parameters, but only the first two&mdash;the table and the expression to evaluate&mdash;are required. In this example, the third parameter is skipped via the comma and the measure is set to rank in descending order of the expression. </p>
    <p class="fm-booktitle">Additionally, the final parameter (<code class="inlinecode">Skip</code> or <code class="inlinecode">Dense</code>) determines how tie values are treated. For example, if two products are tied for the highest sales, both products are ranked 1, and the next-highest <a id="calibre_link-1579" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>product is ranked 3. Descending order and the skip tie behavior are both defaults, but it’s a good practice to explicitly define these settings in the measures.</p>
    <p class="fm-booktitle">We next look at a specific type of ranking measure that can dynamically calculate ranks based upon how the user interacts with the report.</p>
    <h2 id="calibre_link-179" class="calibre9">Dynamic ranking measures</h2>
    <p class="fm-booktitle">The ranking measures in the previous section are specific to individual products. These measures <a id="calibre_link-1580" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>cannot be used, for example, to rank product subcategories or product categories. Rather than develop many separate <a id="calibre_link-941" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures targeted at one specific column, logic can be embedded in DAX measures to dynamically adjust to the columns in the filter context.</p>
    <p class="fm-booktitle">In the following measure, a ranking is applied based on the filter context from three levels of a product hierarchy: </p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Sales Product Rank (Conditional) = 
    VAR __ProductFilter = ISFILTERED('Product'[Product Name])
    VAR __SubCatFilter = ISFILTERED('Product'[Product Subcategory])
    VAR __CatFilter = ISFILTERED('Product'[Product Category])
RETURN
    SWITCH(TRUE(),
    __ProductFilter = TRUE(), RANKX(ALL('Product'[Product Name]),[Internet Net Sales],,DESC,Skip),
    __SubCatFilter = TRUE(), RANKX(ALL('Product'[Product Subcategory]),[Internet Net Sales],,DESC,Skip),
    __CatFilter = TRUE(), RANKX(ALL('Product'[Product Category]),[Internet Net Sales],,DESC,Skip),
    BLANK())
</code></pre>
    <p class="fm-booktitle">The measure checks for the existence of a filter on the <code class="inlinecode">Product Name</code>, <code class="inlinecode">Product Subcategory</code>, and <code class="inlinecode">Product Category</code> columns within a <code class="inlinecode">SWITCH()</code> function via the <code class="inlinecode">ISFILTERED()</code> function. The first logical condition to evaluate as <code class="inlinecode">true</code> results in the corresponding <code class="inlinecode">RANKX()</code> expression being executed. If no condition is found to be <code class="inlinecode">true</code>, then the <code class="inlinecode">BLANK()</code> value is returned. </p>
    <p class="fm-booktitle">The dynamic ranking measure can be used in report visuals that drill up/down through the product hierarchy or in separate visuals dedicated to specific columns. Drilling within Power BI is covered in later chapters. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 5.15</em>, distinct table visuals representing the three levels of the product hierarchy utilize the <code class="inlinecode">Internet Net Sales Product Rank (Conditional)</code> measure:</p>
    <figure class="mediaobject"><img src="images/000089.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.15: Dynamic ranking measure</p>
    <p class="fm-booktitle">For the visuals in the preceding table, a shorter and more intuitive name was used instead of the full measure name (<code class="inlinecode">Internet Net Sales Product Rank (Conditional)</code>). </p>
    <p class="fm-booktitle">To change <a id="calibre_link-942" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the name of a measure or column used in a report visual, double-click the name of the measure or column in the <strong class="screentext">Values</strong> bucket of the <strong class="screentext">Visualizations</strong> pane. The revised name only applies to the specific visual, and hovering <a id="calibre_link-1581" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>over the revised name identifies the source measure or column.</p>
    <p class="fm-booktitle">Similar to the <code class="inlinecode">Internet Net Sales Product Rank</code> measure from the previous section, the conditional measure allows for other columns to impact the filter context. For example, if both the <code class="inlinecode">Product Category</code> and <code class="inlinecode">Product Subcategory</code> columns are included in the same table visual, the conditional measure ranks the subcategories relative to other subcategories of the same <code class="inlinecode">Product Category</code>. </p>
    <p class="fm-booktitle">With this dataset, the <strong class="screentext">Tires and Tubes</strong> subcategory, which is ranked fourth overall as per the above table, would be ranked number one for the <strong class="screentext">Accessories</strong> product category. Next, we wrap up our coverage of different types of measures with a section on report-scoped measures.</p>
    <h1 id="calibre_link-180" class="heading">Security roles</h1>
    <p class="fm-booktitle">In addition <a id="calibre_link-1665" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to DAX’s utility for creating measures, DAX is also required when defining security roles within a dataset. Per <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, the required data security for this project is to limit the visibility of the Adventure Works sales team users to their respective <code class="inlinecode">sales territory</code> groups. There are three <code class="inlinecode">sales territory</code> groups (<strong class="screentext">North America Sales Group</strong>, <strong class="screentext">Europe Sales Group</strong>, and <strong class="screentext">Pacific Sales Group</strong>), and, as described in the previous chapter, cross-filtering relationships exist between the <code class="inlinecode">Sales Territory</code> dimension table and all three fact tables (<code class="inlinecode">Internet Sales</code>, <code class="inlinecode">Reseller Sales</code>, and <code class="inlinecode">Sales and Margin Plan</code>). </p>
    <p class="fm-booktitle">Therefore, security roles with a filter condition on the given <code class="inlinecode">sales territory</code> group also filter <a id="calibre_link-1996" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the fact tables, and business users mapped to these roles only see data associated with their <code class="inlinecode">Sales Territory</code> group.</p>
    <p class="fm-booktitle">Security roles are defined in Power BI Desktop via the <strong class="screentext">Manage roles</strong> dialog of the <strong class="screentext">Modeling</strong> tab as shown in <em class="italic">Figure 5.16</em>:</p>
    <figure class="mediaobject"> <img src="images/000078.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.16: Managing security roles</p>
    <p class="fm-booktitle">In this example model, the <code class="inlinecode">Sales Territory</code> dimension table has a single-direction one-to-many relationship with the <code class="inlinecode">Internet Sales</code> and <code class="inlinecode">Reseller Sales</code> fact tables. For the <code class="inlinecode">Sales and Margin Plan</code> fact table, the <code class="inlinecode">Sales Territory</code> filter first flows to the bridge table and then uses a bidirectional cross-filtering relationship from the <code class="inlinecode">Sales Territory</code> bridge to <code class="inlinecode">Sales and Margin Plan</code>. Therefore, a user mapped to the <strong class="screentext">Europe Sales Group</strong> role only has access to the <code class="inlinecode">Internet Sales, Reseller Sales</code>, and <code class="inlinecode">Sales Plan</code> data associated with Europe. </p>
    <p class="fm-booktitle">Just like a filter selection on a column of the <code class="inlinecode">Sales Territory</code> table in a report, a security filter also flows across the cross-filtering relationships of the data model. However, unlike report filters, security filters cannot be overridden by DAX measures. Security filters are applied to all report queries for the given dataset and any additional filtering logic or DAX expression respects the security role definition.</p>
    <p class="fm-booktitle">Given the <a id="calibre_link-1666" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>automatic filtering of security role conditions, it’s important to implement efficient security filters and to test the performance of security roles. For example, a complex filter condition applied against a large dimension table could significantly degrade the performance of reports and dashboards for users or groups mapped to this security role.</p>
    <p class="fm-booktitle">In addition to defining security roles, security roles can also be tested in Power BI Desktop via the <strong class="screentext">View as roles</strong> command on the <strong class="screentext">Modeling</strong> tab. In <em class="italic">Figure 5.17</em>, a chart that displays sales by the sales territory country is only displaying the countries associated with the <strong class="screentext">Europe Sales Group</strong> due to the <strong class="screentext">View as roles</strong> selection:</p>
    <figure class="mediaobject"><img src="images/000110.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.17: View as roles in Power BI Desktop</p>
    <p class="fm-booktitle">Similar to the <strong class="screentext">View as roles</strong> feature in Power BI Desktop, a <strong class="screentext">Test as role</strong> option is available in the Power BI service. This feature can be accessed from the ellipsis next to each <strong class="screentext">Row Level Security</strong> (<strong class="screentext">RLS</strong>) role in the <strong class="screentext">Security</strong> dialog for the dataset. </p>
    <p class="fm-booktitle">Additionally, other users <a id="calibre_link-1644" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can test the security roles by connecting to published Power BI apps. In this testing scenario, the user would not be a member of the <a id="calibre_link-547" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>workspace, but a member of an <strong class="screentext">Azure Active Directory Security Group</strong>, which is mapped to a security role of the dataset. The reason why test users should not be a member of a workspace is covered in detail in <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>.</p>
    <p class="fm-booktitle">For this project, and as a <a id="calibre_link-537" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>strongly recommended general practice, <strong class="screentext">Azure Active Directory</strong> (<strong class="screentext">AAD</strong>) security groups should be created for the users accessing Power BI content. AAD security groups are the enterprise solution for controlling security <a id="calibre_link-1667" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>across all systems that authenticate with AAD. While it is possible to use Microsoft 365 groups with security roles, Microsoft 365 groups are not a replacement for AAD security groups. </p>
    <p class="fm-booktitle"><em class="italic">Figure 5.18</em> displays the properties of a&nbsp;<code class="inlinecode">North America Sales</code>&nbsp;security group:</p>
    <figure class="mediaobject"><img src="images/000100.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.18: The Azure Active Directory security group</p>
    <p class="fm-booktitle">Users can be added or removed from AAD security groups in the Azure portal or via PowerShell scripts. PowerShell and other administration topics are covered in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>.</p>
    <p class="fm-booktitle">The <strong class="screentext">Assigned</strong> membership type can be used but alternatively, a Dynamic User membership type can be created based on a membership rule query. With Dynamic User AAD security groups, a user can be automatically added or removed from groups as their role in the organization changes. </p>
    <p class="fm-booktitle">The AAD security <a id="calibre_link-1668" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>groups can then be mapped to their respective security roles for the published dataset in Power BI. In <em class="italic">Figure 5.19</em>, the <strong class="screentext">North America Sales</strong> AAD security group is recognized as a potential group to be added as a member of the <strong class="screentext">North America Sales Group</strong> RLS role:</p>
    <figure class="mediaobject"><img src="images/000131.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.19: Member assignment to row-level security roles</p>
    <p class="fm-booktitle">With the AAD security groups created and mapped to their corresponding RLS roles of the Power BI dataset, security filters are applied based on the user’s membership to the AAD group. When RLS roles have been applied to a dataset, the users accessing the reports and dashboards based on that dataset need to be mapped to at least one of the roles. </p>
    <p class="fm-booktitle">For example, if a Power BI app is distributed to a user who is not included in one of the AAD security groups mapped to one of the RLS roles, and this user account is not mapped individually to one of these RLS roles, the user receives an error message in the Power BI service as shown in <em class="italic">Figure 5.20</em>:</p>
    <figure class="mediaobject"><img src="images/000120.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.20: Error message: User not mapped to an RLS role</p>
    <p class="fm-booktitle">In the event that <a id="calibre_link-1669" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>a user is mapped to multiple RLS roles, such as both the <strong class="screentext">North America Sales Group</strong> and the <strong class="screentext">Europe Sales Group</strong>, that user sees data for both <code class="inlinecode">Sales Territory</code> groups (and not <strong class="screentext">Pacific Sales Group</strong>). For users that require access to the entire dataset, such as administrators or executives, an RLS role can be created on the dataset that doesn’t include any filters on any of the tables. </p>
    <p class="fm-booktitle"><em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>, and <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>, contain additional details on AAD’s relationship to Power BI and the role of security groups in securely distributing Power BI content to users. </p>
    <h2 id="calibre_link-181" class="calibre9">Dynamic row-level security</h2>
    <p class="fm-booktitle">The security model discussed thus far relies on users being a member of static groups or security roles. While appropriate for many datasets, other scenarios require a more user-specific <a id="calibre_link-1670" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>methodology in which the identity <a id="calibre_link-943" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of the report user is determined dynamically and this value is used to apply filter conditions.</p>
    <p class="fm-booktitle">Dynamic row level security implementations involve defining a single security role which uses the <code class="inlinecode">USERPRINCIPALNAME()</code> DAX function to retrieve the identity (the UPN) of the connected user. This identity value is then used to filter a typically hidden table in the model which maps individuals to the dimensions they’re allowed to access.</p>
    <p class="fm-booktitle">For example, a user and a permissions table could be added to the dataset (and hidden) so that the user table would first filter the permissions table, and the permissions table would then filter the dimension to be secured, such as a <code class="inlinecode">Sales Territory Country</code>. </p>
    <p class="fm-booktitle"><em class="italic">Figure 5.21</em> shows an example of a permissions table where Jen Lawrence is associated with <code class="inlinecode">Germany</code>, <code class="inlinecode">Australia</code>, and the <code class="inlinecode">United States</code>, and thus should only have visibility to these countries in any Power BI report or dashboard built on top of the dataset: </p>
    <figure class="mediaobject"><img src="images/000153.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.21: User permissions table</p>
    <p class="fm-booktitle">The other <a id="calibre_link-1671" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>two tables in the <code class="inlinecode">Security Table Queries</code> query group <a id="calibre_link-944" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>include a <code class="inlinecode">Users</code> query with a distinct list of <strong class="screentext">User Principal Names </strong>(UPNs) and a <code class="inlinecode">SalesTerritoryCountries</code> query that contains a distinct list of the values in the <code class="inlinecode">SalesTerritoryCountry</code> column in the <code class="inlinecode">Sales Territory</code> query. The <code class="inlinecode">SalesTerritoryCountries</code> table is necessary because the <code class="inlinecode">Sales Territory</code> dimension table is more granular than the country one. </p>
    <p class="fm-booktitle">The <code class="inlinecode">SalesTerritoryCountry</code> table receives the filter context from the permissions table and uses a simple one-to-many cross-filtering relationship with the <code class="inlinecode">Sales Territory</code> dimension table to filter the fact tables.</p>
    <p class="fm-booktitle">The dynamic RLS role is defined with the <code class="inlinecode">User Principal Name</code> column of the <code class="inlinecode">Users</code> table equal to the <code class="inlinecode">USERPRINCIPALNAME()</code> function. </p>
    <pre class="programlisting"><code class="hljs-code">[User Principal Name] = USERPRINCIPALNAME()
</code></pre>
    <p class="fm-booktitle">The relationships, and, more specifically, the cross-filtering from the <code class="inlinecode">Sales Country Permissions</code> table, deliver the intended filter context for the given user. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 5.22</em>, a bidirectional cross-filtering relationship is defined between <code class="inlinecode">Sales Country Permissions</code> and <code class="inlinecode">SalesTerritoryCountries</code> so that only the countries associated with the user filter the <code class="inlinecode">Sales Territory</code> dimension table: </p>
    <figure class="mediaobject"><img src="images/000142.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.22: Dynamic RLS model relationships</p>
    <p class="fm-booktitle">The <strong class="screentext">Apply security filter in both directions</strong> property of the bidirectional relationship between <code class="inlinecode">Sales Country Permissions</code> and <code class="inlinecode">SalesTerritoryCountries</code> should be enabled. This property <a id="calibre_link-1672" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and the relationships-based <a id="calibre_link-945" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>filtering design are applicable to both import and DirectQuery datasets. All three security tables should be hidden from the Report View.</p>
    <p class="fm-booktitle">With users or groups assigned to the dynamic security role in the Power BI service, the role can be tested via the <strong class="screentext">Test as role</strong> feature in Power BI. In <em class="italic">Figure 5.23</em>, the user Brett is able to test the dynamic role as himself (<strong class="screentext">Canada</strong>, <strong class="screentext">United States</strong>), but can also view the dynamic role as though any other user is logged in, viewing the reports:</p>
    <figure class="mediaobject"><img src="images/000175.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.23: Testing dynamic row-level security in Power BI</p>
    <p class="fm-booktitle">It can be useful to create a dedicated security testing report that can be leveraged as security roles <a id="calibre_link-1997" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are created and modified. The report <a id="calibre_link-1998" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>may contain multiple pages of visualizations representing all primary tables and any sensitive metrics or columns from across the dataset. </p>
    <p class="fm-booktitle">On this project, a business analyst or a QA tester can be mapped onto the security role and use the report to confirm that the filter context from the security role has been implemented successfully.</p>
    <p class="fm-booktitle">We’ll now move on to discussing how to performance test DAX calculations.</p>
    <h1 id="calibre_link-182" class="heading">Performance testing</h1>
    <p class="fm-booktitle">Given that DAX measures can implement complex business logic and are dynamically calculated <a id="calibre_link-476" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as users interact with reports, the performance of these calculations is a critical component of providing a good user experience.</p>
    <p class="fm-booktitle">There are often many available methods of implementing business logic and custom filter contexts into DAX measures. Although these alternatives deliver the essential functional requirements, they can have very different performance characteristics, which can ultimately impact user experience and the scalability of a dataset. </p>
    <p class="fm-booktitle">When migrating a self-service dataset to a corporate solution or preparing a large and highly utilized dataset, it’s always a good practice to test common queries and the DAX measures used by those queries.</p>
    <p class="fm-booktitle">For example, the same common dimension grouping (for example, <code class="inlinecode">Product Category</code> and <code class="inlinecode">Year</code>) and the same filter context (<code class="inlinecode">Year = 2018</code>) could produce dramatically different performance results based on the measures used in the query, such as <code class="inlinecode">Internet Net Sales versus Count of Customers</code>. The alternative performance statistics associated <a id="calibre_link-1999" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>with different measures such as duration and the count of storage engine queries generated could then be used to focus performance tuning efforts. </p>
    <p class="fm-booktitle">In some cases, the DAX measures associated with slow queries cannot be significantly improved, but the data obtained from the performance testing results can drive other changes. </p>
    <p class="fm-booktitle">For example, report authors could be advised to only use certain measures in less performance-intensive visuals such as <strong class="screentext">cards</strong>, or in reports that have been substantially filtered. In a DirectQuery model, the data source owner of the dataset may be able to implement changes to the specific columns accessed via the slow-performing measures.</p>
    <p class="fm-booktitle">Let’s first look at how to use the <strong class="screentext">Performance analyzer</strong> within Power BI Desktop in order to collect performance statistics about DAX calculations.</p>
    <h2 id="calibre_link-183" class="calibre9">Performance analyzer</h2>
    <p class="fm-booktitle">The performance of DAX measures in the context of report queries reflecting Power BI visualizations <a id="calibre_link-1282" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>is essential to the scalability of the dataset and the user experience. To assist with troubleshooting and testing performance, the Performance Analyzer has been added to Power BI Desktop thus making it easy to quickly isolate and analyze slow performing queries and metrics. </p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 5.24</em>, the <strong class="screentext">Performance analyzer</strong> pane can be accessed from the <strong class="screentext">View</strong> menu of the ribbon in Power BI Desktop.</p>
    <figure class="mediaobject"><img src="images/000164.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 5.24: Performance analyzer in Power BI Desktop</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 5.23</em>, once the <strong class="screentext">Performance analyzer</strong> pane is activated, you can click the <strong class="screentext">Start recording</strong> link to begin capturing performance statistics as you interact with the report. In <em class="italic">Figure 5.23</em>, performance recording was started and then the <strong class="screentext">Refresh visuals</strong> link was pressed. The statistics for this action were recorded in the <strong class="screentext">Refreshed visual</strong> section of the <strong class="screentext">Performance analyzer</strong>. After that a value was selected in the slicer visual. The statistics <a id="calibre_link-1283" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>for this action were recorded in the <strong class="screentext">Changed a slicer</strong> section of the <strong class="screentext">Performance analyzer</strong>.</p>
    <p class="fm-booktitle">The <strong class="screentext">Performance analyzer</strong> logs the duration of report user interactions with the report in <strong class="screentext">milliseconds (ms)</strong>. Clicking on an individual performance item within the <strong class="screentext">Performance analyzer</strong> log highlights (selects) the visual within the report. The individual item can be expanded to see more detailed statistics including the timings for the <strong class="screentext">DAX query</strong>, <strong class="screentext">Visual display</strong>, and <strong class="screentext">Other</strong>. The underlying DAX query sent to the data model can be copied to the clipboard using the <strong class="screentext">Copy query</strong> link.</p>
    <p class="fm-booktitle">The entire <strong class="screentext">Performance analyzer</strong> log can be exported to a JSON file by clicking the <strong class="screentext">Export</strong> link. This exported JSON file can then be easily imported into DAX Studio via the <strong class="screentext">Load Perf Data</strong> icon on its <strong class="screentext">Home</strong> tab for further evaluation and testing. Once you are finished collecting performance information, you can stop recording performance statistics by clicking on the <strong class="screentext">Stop</strong> link.</p>
    <p class="fm-booktitle">Using the <strong class="screentext">Performance analyzer</strong> pane, data modelers and report authors can quickly understand the <a id="calibre_link-2000" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures and visuals that are creating performance issues within the report including how user interactions affect performance. In addition, studying the underlying DAX queries sent to the data model is an excellent way to learn optimal DAX coding strategies.</p>
    <p class="fm-booktitle">While the Performance analyzer is powerful, there are still times when external tools such as DAX Studio provide additional performance insights. </p>
    <h2 id="calibre_link-184" class="calibre9">DAX Studio</h2>
    <p class="fm-booktitle">DAX Studio is a lightweight, open source client tool for executing DAX queries against Power BI datasets <a id="calibre_link-880" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and other sources that share the Microsoft Analysis Services Tabular database engine, such as SSAS in Tabular mode and Azure Analysis Services. </p>
    <p class="fm-booktitle">DAX Studio exposes the metadata of the source model (for example, tables, measures, hierarchies), includes <a id="calibre_link-940" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>reference panes for DAX functions and Tabular <strong class="screentext">Dynamic Management Views</strong> (<strong class="screentext">DMVs</strong>), and also provides query formatting, syntax highlighting, and IntelliSense for developing DAX queries. </p>
    <p class="fm-booktitle">Additionally, DAX Studio supports performance tuning as it can execute traces against its data sources and displays useful performance statistics, as well as the query plans used to execute the query.</p>
    <p class="fm-booktitle">The <strong class="screentext">Server timings</strong> and <strong class="screentext">Query plan</strong> panes in DAX Studio expose the <strong class="screentext">storage engine</strong> and <strong class="screentext">formula engine</strong> query plans, respectively. The formula engine processes data but cannot retrieve data from the tables of a dataset. Within tabular models, the storage engine is solely responsible for data retrieval.</p>
    <p class="fm-booktitle">In most performance testing scenarios, the storage engine versus formula engine results of a trace (for example, 50 ms in the storage engine, 10 ms in the formula engine) lead the user to focus on either the slowest storage engine queries or the most expensive operations in the formula engine. </p>
    <p class="fm-booktitle">For these reasons, despite improvements to DAX authoring in <strong class="screentext">SQL Server Management Studio</strong> (<strong class="screentext">SSMS</strong>), DAX Studio <a id="calibre_link-1743" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>is very commonly used by Microsoft BI developers in Analysis Services and Power BI environments. Specifically, BI developers store the DAX queries created within DAX Studio as <code class="inlinecode">.dax</code> or <code class="inlinecode">.msdax</code> files and later open these files from DAX Studio for performance testing or troubleshooting scenarios. </p>
    <p class="fm-booktitle">For example, a team <a id="calibre_link-2001" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>may have a DAX query that returns the count of rows for three fact tables of a data model by calendar date and use this query to troubleshoot issues related to a data-loading process. Additionally, just as M queries saved within <code class="inlinecode">.pq</code> files can be added to version control systems, DAX query files can be added to version control systems, such as Azure DevOps.</p>
    <p class="fm-booktitle">DAX Studio <a id="calibre_link-881" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can be downloaded from <a href="http://daxstudio.org" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://daxstudio.org</span></a>.</p>
    <h1 id="calibre_link-185" class="heading">Summary</h1>
    <p class="fm-booktitle">This chapter developed and described several common classes of DAX measures, including base measures, date intelligence metrics, dimension metrics, and ranking metrics. These measures utilized the fact and dimension tables developed in previous chapters.</p>
    <p class="fm-booktitle">In addition to detailed measure examples, the primary concepts of the DAX were reviewed and standard row-level security (RLS) and dynamic RLS (DRLS) models were shared. Finally, performance testing and tuning tools, including the Performance analyzer pane and DAX Studio were presented.</p>
    <p class="fm-booktitle">In the following chapter, Power BI reports are created, which leverage the dataset that has been incrementally developed since <em class="italic">Chapter 2 </em>and<em class="italic"> 3</em>. Report-authoring features, such as the visualization types in Power BI Desktop, access the DAX measures from this chapter and the dimensions from previous chapters to deliver business insights and intuitive, self-service functionality.</p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-4">
<div id="calibre_link-2002" class="calibre2">
<div id="calibre_link-2003" class="calibre3"><div id="calibre_link-2004" class="calibre4">
    <h1 class="heading">6</h1>
    <h1 id="calibre_link-186" class="mainheading">Planning Power BI Reports</h1>
    <p class="fm-booktitle">Effective and sustainable Power BI reports and Power BI solutions more generally reflect thoughtful planning and process. To this end, this chapter contains foundational concepts and features to support the design of Power BI reports including visualization best practices, report filter scopes, and Live connections to Power BI datasets.</p>
    <p class="fm-booktitle">In this chapter, we review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">Report planning process</li>
      <li class="bulletlist">Visualization best practices</li>
      <li class="bulletlist">Choosing the right visual</li>
      <li class="bulletlist">Visual interactions</li>
      <li class="bulletlist">Drillthrough report pages</li>
      <li class="bulletlist">Report filter scopes</li>
      <li class="bulletlist">Bookmarks</li>
      <li class="bulletlist">Live connections to Power BI datasets</li>
      <li class="bulletlist">Report design summary</li>
    </ul>
    <p class="fm-booktitle">Before jumping into creating visuals, it is important to properly plan reports in order to ensure a good user experience and maximize the value to the business. Thus, we’ll first take a look at the report planning process.</p>
    <h1 id="calibre_link-187" class="heading">Report planning process</h1>
    <p class="fm-booktitle">Power BI reports can take on <a id="calibre_link-1615" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>a variety of forms and use cases, ranging from executive-level dashboard layouts to highly detailed and focused reports. </p>
    <p class="fm-booktitle">Prior to designing and developing Power BI reports, some level of planning and documentation is recommended to ensure that the reports are well aligned with the needs of the users and the organization. </p>
    <p class="fm-booktitle">Effective report <a id="calibre_link-1629" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>planning can be encapsulated in the following six steps:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Identify the audience</li>
      <li class="calibre13">Define the business questions to answer</li>
      <li class="calibre13">Confirm that the dataset supports the business questions</li>
      <li class="calibre13">Determine interactivity</li>
      <li class="calibre13">Define access and distribution</li>
      <li class="calibre13">Sketch the report layout</li>
    </ol>
    <p class="fm-booktitle">Let’s look at each of these steps in turn, starting with identifying report users.</p>
    <h2 id="calibre_link-188" class="calibre9">Identify the audience</h2>
    <p class="fm-booktitle">When developing reports, the report author should have a clear understanding of the different consumers of the report <a id="calibre_link-1617" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and their priorities and use cases. </p>
    <p class="fm-booktitle">For example, analysts often place a high value on the ability of the report to help them tell a story about the data. Storytelling refers to the ability to focus on a key KPI or data element and then explain how and why that KPI is lower or higher than expected, an outlier compared to previous years, or represents a significant trend. Therefore, analysts often require significant flexibility to filter and interact with more detailed reports. Thus, reports used by analysts generally include more slicer visuals and may include table or matrix visuals as well.</p>
    <p class="fm-booktitle">Conversely, senior managers generally prefer less self-service interactivity and value simple, intuitive visuals, such as KPIs. Senior managers are less focused on storytelling and more focused on the ability to manage their business area or organization from a “single pane of glass.” The term “single pane of glass” is the theoretical ability to distill and expose all of the important information regarding complex systems to a single report or tool.</p>
    <p class="fm-booktitle">Separating reports by user role or group serves to keep reports focused for users and more manageable for BI teams. In many scenarios, an organizational hierarchy provides a natural demarcation such that reports can be designed for specific roles or levels within an organization. </p>
    <p class="fm-booktitle">In the project example for the Adventure Works sales team, reports could align with the <code class="inlinecode">Sales Territory</code> hierarchy (<code class="inlinecode">SalesTerritoryGroup | SalesTerritoryCountry | SalesTerritoryRegion</code>). </p>
    <p class="fm-booktitle">The vice president of group sales generally values high-value corporate-wide metrics and intuitive dashboard reports. A sales analyst in the United States, however, likely <a id="calibre_link-1618" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>needs to break out individual regions and even analyze specific ZIP codes or individual products.</p>
    <p class="fm-booktitle">We’ll now move on to defining the business questions that the report should answer.</p>
    <h2 id="calibre_link-189" class="calibre9">Define the business questions to answer</h2>
    <p class="fm-booktitle">In addition to knowing<a id="calibre_link-1619" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> one’s audience, it is also critical to understand the exact questions the report should be able to answer for the business.</p>
    <p class="fm-booktitle">Confirm with the business user(s) or project sponsors that the report has the correct scope and the appropriate focus. A report architecture diagram described in the subsequent section, <em class="italic">Report architecture diagram</em>, can support this communication. For example, the user could be advised that a particular business question or metric is included in a different report but featured on the same dashboard and is easily accessible within the same Power BI app.</p>
    <p class="fm-booktitle">The most important business question (for example, what were our sales?) is addressed in the top-left corner of the report, likely with a KPI or similar visual. Similar to separating reports by user role or group, a report should not attempt to resolve widely disparate business questions. </p>
    <p class="fm-booktitle">A single report certainly can contain visuals reflecting distinct fact tables and business processes such as customer service interactions, product inventories, and shipping or delivery orders. However, for most reports it’s best that the visuals within the report align to the same or very similar business processes such as Internet Sales and Reseller Sales. The need to summarize and integrate visuals from multiple business processes is often best addressed by Power BI dashboards, not reports, as described in <em class="italic">Chapter 9, </em><em class="italic">Designing Dashboards</em>.</p>
    <p class="fm-booktitle">Once the business questions are verified, the next step is to confirm that the dataset supports the desired questions.</p>
    <h2 id="calibre_link-190" class="calibre9">Confirm that the dataset supports the business questions</h2>
    <p class="fm-booktitle">The report author should <a id="calibre_link-1620" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>ensure that the dataset includes necessary measures such as <code class="inlinecode">year-over-year</code> (<code class="inlinecode">YOY</code>) sales and the dimension columns (for example, <code class="inlinecode">Product</code> <code class="inlinecode">Category</code>) necessary to visualize the business questions.</p>
    <p class="fm-booktitle">In order to both develop an accurate report and to support questions from consumers of the report, report authors should have a solid understanding of the Power BI dataset. This knowledge includes the logic and business definitions of DAX measures, the relationships defined between fact and dimension tables, and any data transformation logic applied to the source data. </p>
    <p class="fm-booktitle">In many projects, report authors regularly collaborate with business stakeholders or project sponsors in gathering requirements and demonstrating report iterations. Therefore, the authors need to explain the values and behaviors of Power BI reports as well as any current limitations in the dataset, such as the years of history supported and any DAX logic or measures not yet created.</p>
    <p class="fm-booktitle">If a gap exists between the dataset and the measures required for the report, the team can determine whether the dataset should be extended or whether the measure should be created local to the report. For example, with Power BI Live connections, only measures can be created within Power BI Live connection reports. Any new columns, tables, or modifications to existing tables or columns must be implemented within the source dataset.</p>
    <p class="fm-booktitle">The set of base measures described in <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, as well as the dynamic date dimension columns described in <em class="italic">Chapter 2</em>, <em class="italic">Connecting to Sources and Transforming Data with M</em> (for example, <code class="inlinecode">Calendar Month Status = 'Prior Calendar Month'</code>), should support the most common needs of reports. </p>
    <p class="fm-booktitle">If a measure required for a report is considered to be common to other future reports, and if the measure doesn’t violate the single corporate definition of an existing measure, the measure should generally be added to the dataset. However, if the report requirement is considered rare or if a measure definition has been approved only for the specific report, then the measure(s) can be created local to the report. </p>
    <p class="fm-booktitle">For version control and manageability reasons, report authors should not have to implement complex filtering logic or develop many local report measures. Report authors should communicate with dataset designers and the overall team if a significant gap exists or is developing between reports and the dataset.</p>
    <p class="fm-booktitle">Once the dataset is confirmed to support the desired business questions, the next step is to determine the<a id="calibre_link-1621" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report type and mobile features based on the desired report interactions and access methods.</p>
    <h2 id="calibre_link-191" class="calibre9">Determine interactivity</h2>
    <p class="fm-booktitle">Although Power BI<a id="calibre_link-1622" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> reports developed in Power BI Desktop are increasingly the default report type for new reports given their modern user experience and relative ease of development, Power BI also fully supports paginated reports, formerly <strong class="screentext">SQL Server Reporting Services</strong> (<strong class="screentext">SSRS</strong>) reports, as well as Excel-based reports.</p>
    <p class="fm-booktitle">In many instances, particularly when reports are being migrated from legacy systems and/or business processes, the features of these alternative report types more closely align with the requirements and priorities of the report users. </p>
    <p class="fm-booktitle">Choosing the incorrect report type can lead to delayed delivery timelines and frustrated stakeholders who may assume that features from current or past BI tools are supported by Power BI reports.</p>
    <p class="fm-booktitle">For example, if printing or distributing multiple pages of report data is a top priority, then a paginated report developed in Power BI Report Builder would be the appropriate report type. Similarly, if the intent is to support an existing Excel report that contains significant cell-level formatting and logic such as a financial statement, it would make sense to continue to leverage Excel but switch the data source to a Power BI dataset. </p>
    <p class="fm-booktitle">In many cases a combination of the features of multiple report types is needed or valued such as both visual interaction and exporting out multiple pages of details. In these scenarios, report authors and BI teams should consider options of providing Power BI apps containing multiple report types as well as integrated reports via the paginated report visual discussed in <em class="italic">Chapter 7</em> ,<em class="italic"> </em><em class="italic">Creating and Formatting Visuals</em>.</p>
    <p class="fm-booktitle">Conversely, Power BI reports created in Power BI Desktop are visually interactive by default and report authors have many options to empower report users to analyze and explore the data in reports to derive their own insights. Thus, if a high degree of interactivity and exploration are the priority, then reports developed in Power BI Desktop are likely the correct choice.</p>
    <p class="fm-booktitle">Report authors and BI teams should be transparent with users and stakeholders about the differences and trade-offs between the different report types. In scenarios in which one of the three report types isn’t the clear choice, the BI/IT team and the primary stakeholders can reach a consensus on the type of report to be developed. Alternatively, it can be determined that multiple report types will be required, such as an interactive<a id="calibre_link-1623" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Power BI report as well as a paginated report, and possibly an Excel report too.</p>
    <p class="fm-booktitle">After the interactivity of the report is determined, the next step is to define the access and distribution.</p>
    <h2 id="calibre_link-192" class="calibre9">Define access and distribution</h2>
    <p class="fm-booktitle">Power BI report content can be accessed from a variety of form factors ranging from smartphones and tablets up to large screens in conference rooms and office hallways. Additionally, report content<a id="calibre_link-1616" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can be integrated within PowerPoint slide decks and delivered to end users via email subscriptions and data-based alerts thus limiting or avoiding the need for users to navigate to relevant content in the Power BI service. </p>
    <p class="fm-booktitle">Report authors should be familiar with the rich mobile layout features available in Power BI Desktop as well as options for email subscriptions such delivering paginated report data as attached CSV or Excel files via subscriptions.</p>
    <p class="fm-booktitle">Once the access and distribution methods are confirmed, the final step is to create a sketch of the report layout.</p>
    <h2 id="calibre_link-193" class="calibre9">Sketch the report layout</h2>
    <p class="fm-booktitle">It is often beneficial to create a <a id="calibre_link-1627" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>sketch of the basic layout of a report. Such a sketch should be completed for at least the primary page of the report and should document the position and relative size of visuals on the report canvas (page). </p>
    <p class="fm-booktitle"><em class="italic">Figure 6.1</em> shows a sample sketch created within a PowerPoint presentation file via the standard shape objects:</p>
    <figure class="mediaobject"><img src="images/000196.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.1: Sample report layout sketch</p>
    <p class="fm-booktitle">As per the sample layout, the critical sales and margin measures are located in the top-left corner of the report page. Slicer (filter) visuals are planned for below these KPI or card visuals and other <a id="calibre_link-2005" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visuals add further context. Greater space is allocated to the two visuals in the middle of the page given their importance to the report.</p>
    <p class="fm-booktitle">The report layout sketch can be used exclusively for planning purposes or can be set as the background for a report page. For example, a PowerPoint slide of the same shapes, background shading, and borders can be saved to a network directory as a PNG file. </p>
    <p class="fm-booktitle">In Power BI Desktop, the PNG file can be imported via the <strong class="screentext">Image</strong> <strong class="screentext">formatting</strong> option under <strong class="screentext">Canvas background</strong> on the <strong class="screentext">Format</strong> pane or via the insert an image icon on the <strong class="screentext">Home</strong> tab in <strong class="screentext">Report</strong> view. Page background images with proper alignment, spacing, and colors can expedite quality report development.</p>
    <p class="fm-booktitle">Be willing to modify a report layout or even start afresh with a new layout based on user feedback. Unlike dataset development, which can require significant time and expertise (for example, DAX, M, and SQL), reports can be developed in a rapid, agile delivery methodology. Report authors can engage directly with users on these iterations and, although recommended practices and corporate standards can be communicated, ultimately, the functional value to the user is the top priority. </p>
    <p class="fm-booktitle">It’s important to distinguish flexibility in report layout and visualization from the report’s target users and business questions. Second and third iterations of reports should not, for example, call for fundamentally different measures or new report pages to support different user groups. </p>
    <p class="fm-booktitle">Report authors and BI teams can work with users and project sponsors to maintain the scope of IT-supported reports. The interactivity built into Power BI reports and the self-service capabilities <a id="calibre_link-1628" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>provided by Power BI Pro licenses can broaden the reach of projects without requiring new or additional reports.</p>
    <p class="fm-booktitle">This completes the report planning process. Next, we’ll look at a tool that can aid in the report planning process &ndash; a report architecture diagram.</p>
    <h2 id="calibre_link-194" class="calibre9">Report architecture diagram</h2>
    <p class="fm-booktitle">Similar to the data<a id="calibre_link-1624" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> warehouse bus matrix described in <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, a report architecture diagram can be helpful in planning and communicating Power BI projects with both business and IT stakeholders. This diagram serves to maintain the scope and focus of individual reports. </p>
    <p class="fm-booktitle">For example, certain business questions or entities (such as <code class="inlinecode">Customer</code>, <code class="inlinecode">Product</code>) can be assigned to dedicated reports and the individual pages of these reports can visualize these questions or entities at varying levels of detail.</p>
    <p class="fm-booktitle">Most commonly, a single report page, such as that represented in <em class="italic">Figure 6.1</em>, addresses the top priority of a report at a summary level. This page includes cards and/or KPI visuals at the top left of the page and charts rather than tables or matrices that visualize these metrics at a high level. </p>
    <p class="fm-booktitle">Additional report pages, usually a maximum of 3-4, are designed to provide a greater level of detail supporting the summary page. With this report structure, a user can naturally start their analysis from an intuitive and visually appealing summary page and then, if necessary, navigate to pages exposing greater levels of detail.</p>
    <p class="fm-booktitle">In addition to supporting report pages with greater detail, drillthrough report pages can be designed to display the details for an individual item, such as a specific product or a combination of items, for example, the year 2018 and a specific product. </p>
    <p class="fm-booktitle">Drillthrough report pages are simply report pages that include drillthrough filters and are detailed in the <em class="italic">Drillthrough report pages</em> section of this chapter, which provides details and examples of this feature.</p>
    <p class="fm-booktitle">In the absence of a report architecture or diagram, reports can quickly become less user-friendly as many report pages are added that address unrelated business questions. Additionally, the lack of scope or focus for a report can lead to duplicated efforts with the same business question being visualized in multiple reports.</p>
    <p class="fm-booktitle">Guidance from<a id="calibre_link-1625" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> stakeholders on the visuals to be included in or featured on a dashboard can strongly inform the report design process. For example, in the case where several dashboard tiles are closely related (such as profitability %), then it’s likely that a separate report with 3-4 pages should be designed to support further analysis of each tile. </p>
    <p class="fm-booktitle">Conversely, if only one dashboard tile relates to a particular business question or entity, such as resellers, then the supporting report may only need 1-2 pages and provide relatively less detail.</p>
    <p class="fm-booktitle">In the basic example shown in <em class="italic">Figure 6.2</em>, four reports and one dashboard are planned for the German sales team:</p>
    <figure class="mediaobject"><img src="images/000186.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.2: Sample report architecture diagram</p>
    <p class="fm-booktitle">In the example shown in <em class="italic">Figure 6.2</em>, report visuals contained in four Germany sales reports are pinned as tiles in the <strong class="screentext">Germany Sales and Margin</strong> dashboard. By default, this would link the reports to the dashboard such that a user could access the details of any of the four reports by clicking on a related dashboard tile. </p>
    <p class="fm-booktitle">Visuals from a single report can be pinned as tiles to multiple dashboards. Additionally, a dashboard tile can be linked to a separate dashboard or to a separate report in the Power BI service. <em class="italic">Chapter 9</em>, <em class="italic">Designing Dashboards</em>, includes additional details and examples of Power BI report and dashboard architectures. </p>
    <p class="fm-booktitle">The four reports and the dashboard from the preceding example could be included in a dedicated app workspace for the German sales team or within a broader workspace that supports multiple sales teams and related content (for example, marketing) in the organization. </p>
    <p class="fm-booktitle">Information on workspaces and content distribution via apps is provided in <em class="italic">Chapter 10</em>, <em class="italic">Managing Application Workspaces and Content</em>, and <em class="italic">Chapter 14</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>. The following section describes Live connection reports to Power BI datasets published to the Power BI service.</p>
    <p class="fm-booktitle">It’s important to<a id="calibre_link-1626" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> understand and communicate the differences between Power BI reports and dashboards. Although Power BI report pages can appear as “dashboards” to users, dashboards created in the Power BI service serve an important and distinct role of providing a single pane of glass to highlight key performance indicators and the most important visuals for an organization.</p>
    <p class="fm-booktitle">Simply stated, dashboards are a feature of the Power BI service that allow visuals from multiple reports to be pinned to a single canvas. Dashboards are covered in detail in <em class="italic">Chapter 9</em>, <em class="italic">Designing Dashboards</em>.</p>
    <p class="fm-booktitle">This completes the report planning section and we’ll now turn our attention to additional considerations when designing reports, starting with visualization best practices.</p>
    <h1 id="calibre_link-195" class="heading">Visualization best practices</h1>
    <p class="fm-booktitle">Effective reports are<a id="calibre_link-1823" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> much more than simply answering documented business questions with the available measures and columns of the dataset. Reports also need to be visually appealing and provide a logical structure that aids in navigation and readability. Business users of all backgrounds appreciate a report that is clear, concise, and aesthetically pleasing.</p>
    <p class="fm-booktitle">Now that the report planning phase described is complete, the following list of 15 visualization best practices can guide the report development process: </p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">Avoid clutter and minimize non-essential details</strong>: Each visual should align with the purpose of the report&mdash;to gain insight into a business question. Visualizations should not represent wild guesses or functionality that the author finds interesting. <p class="normal1">Eliminate report elements that aren’t essential for improving understanding. Gridlines, legends, axis labels, text boxes, and images can often be limited or removed. The report should be understandable at a glance, without supporting documentation or explanation.</p>
        <p class="normal1">A simple but helpful test is to view a Power BI report on a laptop screen from a distance of 12 to 15 feet, such as from the opposite end of a conference room. </p>
        <p class="normal1">At this distance, it is impossible to read any small text, and only the shapes, curves, and colors are useful for deriving meaning. If the report is still<a id="calibre_link-1824" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> meaningful, this suggests the report is effectively designed visually.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Provide simple, clear titles on report pages and visuals</strong>: Text boxes can be used to name or describe the report, report page, and provide the last-refreshed date.</li>
      <li class="calibre13"><strong class="screentext">For chart visuals, use the length of lines and the two-dimensional position of points to aid visual comprehension</strong>: On line charts, users can easily perceive trends and the divergence of lines relative to each other. On column or bar charts, users can easily distinguish relative differences in the length of bars. On scatter charts, users can quickly interpret the two-dimensional position of data points relative to each other.<p class="normal1">The purpose of these two attributes (line length and 2-D position) as the primary communication mechanism is to guide the user to an accurate assessment with minimal effort. Other visual attributes, such as color, shape, and size, can also be beneficial, particularly when these properties are driven by the data, such as with conditional formatting (data-driven colors/formatting) and KPIs. </p>
        <p class="normal1">However, line length and 2-D position (X, Y coordinates) have a natural advantage in visual perception. For example, the differences between three items on a clustered column chart are much more obvious than the same three items presented on a pie chart.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Position and group visuals to provide logical navigation across the canvas</strong>: The most important visuals should be positioned in the top-left corner of each report page. If multiple visuals are closely related, consider grouping them within a shape object.</li>
      <li class="calibre13"><strong class="screentext">Use soft, natural colors for most visuals</strong>: Avoid overwhelming users with highly saturated bright or dark colors. Only use more pronounced colors when it’s necessary to make an item stand out, such as conditional formatting.<p class="normal1">Note that some <a id="calibre_link-2006" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>organizations may have standards that require colorblind-friendly color schemes or other color and formatting requirements for visually impaired viewers such as requiring both a symbol and a color.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Only apply distinct colors to items in chart visuals when the colors convey meaning</strong>: For example, three colors might be useful for the data points of three separate product categories.</li>
      <li class="calibre13"><strong class="screentext">Align visuals to common horizontal and vertical pixel positions</strong>: For example, if a visual in the top-left corner of a page has horizontal and vertical coordinate position values of 20 and 40, respectively, then other visuals on the left side of the canvas should also have a horizontal position of 20. Likewise, the top visual(s) on the right side of the canvas should align with the left visuals at a vertical position of 40. </li>
      <li class="calibre13"><strong class="screentext">Distribute visuals vertically and horizontally to create an equal amount of space between visuals</strong>: The amount of spacing should be adequate to clearly distinguish the visuals as separate entities. With one or multiple visuals selected in Power BI Desktop, a <strong class="screentext">Format</strong> tab appears on the ribbon as per <em class="italic">Figure 6.3</em>:<figure class="mediaobject"><img src="images/000214.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 6.3: Alignment, distribution, and Z-order format options</p>
        <p class="normal1">The format options (<strong class="screentext">Bring forward </strong>and<strong class="screentext"> Send backward</strong> (Z-order)), as well as the <strong class="screentext">Align </strong>option, are consistent with common MS Office applications, such as Excel and PowerPoint. Between these formatting options and the four properties available under the <strong class="screentext">General</strong> sub-pane of the <strong class="screentext">Visualizations</strong> pane for all visuals (<strong class="screentext">Horizontal</strong> position, <strong class="screentext">Vertical</strong> position, <strong class="screentext">Width</strong>, and <strong class="screentext">Height</strong>), report authors can ensure that visuals are properly aligned and spaced. The <strong class="screentext">Gridlines</strong> and <strong class="screentext">Snap to grid</strong> options under the <strong class="screentext">View</strong> tab also support alignment. </p>
        <p class="normal1">The <strong class="screentext">Selection</strong> setting displays the <strong class="screentext">Selection</strong> pane, allowing report authors to set layer order, show or <a id="calibre_link-1825" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>hide visuals, and set the tab order. When multiple visuals are selected simultaneously (by selecting visuals while holding down the <em class="italic">Ctrl</em> key) the <strong class="screentext">Group</strong> feature becomes active, allowing visuals to be grouped together and thereafter moved around the canvas as a single unit.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Choose a page background color that naturally contrasts with visuals, such as the default white background.</strong></li>
      <li class="calibre13"><strong class="screentext">For column and bar charts, sort visuals by their measure to provide an implicit ranking by the given measure</strong>: This sorting is only applicable to nominal categories, such as product categories, when the individual items in the category don’t need to follow a custom sort order.</li>
      <li class="calibre13"><strong class="screentext">Fill the available report canvas space; avoid large blank spaces on report pages</strong>.</li>
      <li class="calibre13"><strong class="screentext">Provide supporting context via tooltips and additional lines in charts, such as target values and the min, max, and average</strong>: Several measures related to a given visual can be displayed via tooltips without incurring performance penalties. The <strong class="screentext">Analytics</strong> pane provides several support lines, including a trend line and a predictive forecast line.</li>
      <li class="calibre13"><strong class="screentext">All report pages should follow a common design theme and color palette</strong>: Preferably, all reports in a project and even for an organization should follow the same basic design guidelines. A <strong class="screentext">Themes</strong> area is available on the <strong class="screentext">View</strong> tab when in <strong class="screentext">Report</strong> view within Power BI Desktop and exposes options for importing a report theme or customizing the current theme, as shown in <em class="italic">Figure 6.4</em>:<figure class="mediaobject"><img src="images/000205.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 6.4: Themes</p>
        <p class="normal1">Custom report themes allow organizations to apply a custom set of formatting properties to Power BI reports. For example, an organization can embed its corporate colors into a report theme (a JSON file) to apply this set of colors to all <a id="calibre_link-1826" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI reports. Additionally, more elaborate formatting properties can be specified in report themes to standardize report development, such as the font family and font sizes. </p>
        <p class="normal1">Existing report themes are available for download from the Power BI Report Theme Gallery (<a href="http://bit.ly/2pyUKpl" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2pyUKpl</span></a>). Additionally, there are other community tools for customizing themes, as covered in the article <em class="italic">Power BI Theme Generators</em> (<a href="https://community.powerbi.com/t5/Community-Blog/Power-BI-Theme-Generators/ba-p/2265899" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://community.powerbi.com/t5/Community-Blog/Power-BI-Theme-Generators/ba-p/2265899</span></a>). </p>
      </li>
      <li class="calibre13"><strong class="screentext">The quantitative scale for column and bar charts should start at zero</strong>: Custom quantitative scales, such as from 12% to 15%, can be applied to line, scatter, and bubble charts to emphasize specific ranges of values. However, this is generally not a good idea.<p class="normal1">Consider two items, Product A and Product B, of a clustered column chart with margin percentage values of 32% and 34%, respectively. With a base of zero, the two items would correctly appear similar for the given measure. However, if the base value of the visual starts at 31% and the maximum value of the scale is set to 35%, Product B would visually appear as a dramatically higher value. This distortion is the reason that quantitative scales for column and bar charts should start at zero.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Lines should only be used to connect interval scale data points, such as time series and ordered bins of values</strong>: A line should not, for example, represent the<a id="calibre_link-2007" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> sales for different product categories. A line should, however, represent the sales of products by unit price bins (for example, $0 to $10, or $10 to $20).</li>
    </ol>
    <p class="fm-booktitle">In addition to visualization best practices, there are also certain practices to avoid. Thus, next, we will explore visualization anti-patterns.</p>
    <h1 id="calibre_link-196" class="heading">Choosing the right visual</h1>
    <p class="fm-booktitle">With the report planning phase completed, an essential task of the report author is to choose the visual(s) best suited to gain insight into the particular questions within the scope of the report. The choice of the visualization type, such as a column chart or a matrix visual, should closely align with the most important use case, the message to deliver, and the data relationship to represent.</p>
    <p class="fm-booktitle">Visualization types<a id="calibre_link-1837" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> have distinct advantages in terms of visual perception and types of data relationships such as part-to-whole and comparisons. Additionally, although several formatting options are common to all visuals, certain options such as the line style (solid, dashed, or dotted) of a line chart are exclusive to specific visuals. </p>
    <p class="fm-booktitle">A standard visual selection process is <a id="calibre_link-1839" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as follows:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Plan and document the business question(s) and related measures and dimension columns</li>
      <li class="calibre13">Determine whether a table, a chart, or both are needed to best visualize this data</li>
      <li class="calibre13">If a chart is needed, choose the chart visual that’s best aligned with the relationship (for example, trend, comparison, or correlation)</li>
    </ol>
    <p class="fm-booktitle">Following these three steps helps to ensure that effective reports are developed with efficient resources. Many other visualization and analysis features can be used to further enhance reports, but these should only supplement report planning and design.</p>
    <p class="fm-booktitle">Power BI currently supports 40 standard visualizations, and hundreds of custom visualizations are available in <strong class="screentext">AppSource</strong>, Microsoft’s online marketplace. The standard visuals are aligned <a id="calibre_link-1838" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>with the most common analytical representations, including trend, rankings, part-to-whole, exceptions, geospatial, and distribution. Several of these visuals can be further enhanced via the <strong class="screentext">Analytics</strong> pane. </p>
    <p class="fm-booktitle">Finally, advanced visualizations are included that support machine learning elements, Power Platform integration, paginated reports, Q&amp;A capabilities, and integration with R and Python. Refer to the following chapter for additional details on basic, custom, and advanced visuals.</p>
    <p class="fm-booktitle">Let’s first take a look at when to use tables and matrices versus charts.</p>
    <h2 id="calibre_link-197" class="calibre9">Tables and matrices versus charts</h2>
    <p class="fm-booktitle">An initial step in the <a id="calibre_link-1795" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visualization selection process is to determine whether a table, a chart, or a combination of both is most appropriate. Power BI’s table visual provides simple row groups of dimension values and measures, and the matrix visual supports both row and column field inputs similar to pivot tables in Excel. Both the table and matrix visuals have<a id="calibre_link-1099" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> been significantly enhanced to<a id="calibre_link-626" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> provide granular controls over layouts, subtotals, field formatting, and more. </p>
    <p class="fm-booktitle">Both the table and the<a id="calibre_link-627" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> matrix visuals are superior to charts in enabling users<a id="calibre_link-1798" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to look up specific data points. However, despite conditional formatting options available to table and matrix visuals, charts are superior to table and matrix visuals in displaying trends, comparisons, and large volumes of distinct data points.</p>
    <p class="fm-booktitle">The following matrix visual shown in <em class="italic">Figure 6.5</em> breaks down the <code class="inlinecode">AdWorks Net Sales</code> measure by two product dimension columns and two promotion dimension columns:</p>
    <figure class="mediaobject"><img src="images/000234.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.5: Matrix visual</p>
    <p class="fm-booktitle">The product hierarchy created in <em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery, and Composite Data Models</em>, is used as the rows’ input and a promotion table hierarchy is used as the columns’ input. Via the expand all down feature for both the rows and the columns, the matrix provides easy access to specific data points, including subtotals by both product categories and promotion types. </p>
    <p class="fm-booktitle">Although it’s possible to <a id="calibre_link-1799" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visualize the same data with a chart, a matrix visual (or a table visual) makes it easy to locate individual values and to display the exact values with no rounding.</p>
    <p class="fm-booktitle">Additionally, if a table or <a id="calibre_link-1831" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>matrix is needed to reference individual values, but less precision is required, the field formatting card in the formatting pane allows the report author to define the display units (for example, thousands (K) or millions (M)) and the number of decimal places for the measure. The <a id="calibre_link-1796" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>same two formatting properties (display units and value decimal places) are also accessible for chart visuals via the data labels formatting card in the formatting pane.</p>
    <p class="fm-booktitle">Matrix features, such as showing values (for example, multiple metrics) as individual rows, as a percentage of column or row totals, and full control over subtotals positions Power BI matrix visuals as an alternative to many Excel pivot tables and matrix displays in paginated reports. </p>
    <p class="fm-booktitle">Additionally, table and matrix visuals are interactive such that user selections on a row, a specific value, or a row or column header filter other visuals or can even drillthrough to other report pages. </p>
    <p class="fm-booktitle">The following line chart visual, <em class="italic">Figure 6.6</em>, breaks down the <code class="inlinecode">AdWorks</code><strong class="bold-italic"> </strong><code class="inlinecode">Net</code> <code class="inlinecode">Sales</code> measure according to the calendar year week:</p>
    <p class="fm-booktitle"><img src="images/000224.png" alt="" class="calibre20" /></p>
    <p class="fm-acknowledgement">Figure 6.6: Line chart visual</p>
    <p class="fm-booktitle">With 21 different data points displayed, the periodic spikes of the line help to identify the specific weeks with relatively higher net sales. The drawback or trade-off of this visual relative to the prior matrix visual is the lack of subtotals and the loss of precision given the rounding to<a id="calibre_link-1800" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> one decimal place. </p>
    <p class="fm-booktitle">Line charts are uniquely advantaged to call out patterns, trends, and exceptions in measures across time. More generally, chart visualizations (for example, bar, column, and scatter) are<a id="calibre_link-1830" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> recommended over table and matrix visuals when the shape or position of the data, such as trends, comparisons, correlations, and exceptions, is more valuable than the individual values.</p>
    <p class="fm-booktitle">With a date hierarchy or the <a id="calibre_link-1797" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>date columns in the chart axis input field, the concatenate labels property in the <em class="italic">x</em> axis formatting card should be turned off to provide the grouped layout as per the preceding line chart example. Additionally, also included in the line chart example visual, the vertical gridlines can be turned on to separate the parent values (for example, <code class="inlinecode">2013-Feb</code>). </p>
    <p class="fm-booktitle">Let’s now turn our attention to chart selection.</p>
    <h2 id="calibre_link-198" class="calibre9">Chart selection</h2>
    <p class="fm-booktitle">Within Power BI Desktop, there <a id="calibre_link-623" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are many different types of charts, including line, column, bar, scatter, bubble, pie, doughnut, waterfall, and funnel. Different charts are better at displaying different types of information to report viewers.</p>
    <p class="fm-booktitle">Chart visuals can broadly be categorized into the following four types of data relationships:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">Comparison</strong>: How items<a id="calibre_link-792" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> compare against each other or over time</li>
      <li class="calibre13"><strong class="screentext">Relationship</strong>: How items<a id="calibre_link-795" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> relate (or correlate) to one another across multiple variables</li>
      <li class="calibre13"><strong class="screentext">Distribution</strong>: The most<a id="calibre_link-794" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> common values for a variable and the concentration of values within a range</li>
      <li class="calibre13"><strong class="screentext">Composition</strong>: The<a id="calibre_link-793" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> portion of a total that an item represents relative to other items, possibly over time</li>
    </ol>
    <p class="fm-booktitle">The following table, <em class="italic">Table 6.1</em>, associates <a id="calibre_link-624" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>specific visuals with these categories and briefly describes their top use cases:</p>
    <table id="calibre_link-2008" class="table-container">
      <tbody class="calibre16">
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Chart</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Category</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Notes</strong></p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Line</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2">Comparison</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">Display the fluctuation and trend of a value over time.</li>
              <li class="bulletlist">Compare the trends of multiple items over time.</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Column and bar</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2">Comparison</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">Rank items based on a value and display precise data points.</li>
              <li class="bulletlist">Use a bar chart if there are many items or if item data labels are long.</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Combination</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2">Comparison</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">Compare items against two values with different scales.</li>
              <li class="bulletlist">For example, display sales by country as columns across time, but also show the margin % as a line on the secondary axis.</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Scatter and bubble</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2">Relationship</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">Display the relative position of items (data points) on two values, such as products by sales and sales growth %.</li>
              <li class="bulletlist">Optionally drive the size of data points by a third variable.</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Histograms</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2">Distribution</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">Display a frequency distribution such as the count of items sold by different list prices or list price bins on the <em class="italic1">x</em> axis.</li>
              <li class="bulletlist">In Power BI, use a column chart, line chart, or custom visual.</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Pie and doughnut</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2">Composition</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">Commonly used for part-to-whole relationships.</li>
              <li class="bulletlist">Column, bar, and stacked columns and bar charts are recommended alternatives.</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Waterfall and funnel</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2">Composition</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">Use waterfall charts to break out the changes in a value over time by category.</li>
              <li class="bulletlist">Use funnel charts to display variances in the stages of a process.</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="fm-acknowledgement">Table 6.1: Chart visuals by category</p>
    <p class="fm-booktitle">As a table of chart<a id="calibre_link-625" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> types, map visuals, and the three standard single number visuals provided in Power BI Desktop&mdash;Cards, Gauge, and KPI&mdash;are excluded as these visuals are generally used for different purposes. For example, single number visuals are commonly used in dashboards, mobile-optimized reports, and in the top-left section of report pages to deliver easy access to important individual metrics. </p>
    <p class="fm-booktitle">The standard single number visuals (Card, Gauge, and KPI) can also be used to create data alerts when these visuals are pinned to Power BI dashboards. Alerts can be created and managed in both the Power BI service and on the Power BI mobile application. With an alert set on a dashboard tile representing one of these visuals, whenever the number of the visual crosses a defined condition (for example, above 100), a notification is raised and optionally an email can be sent as well.</p>
    <p class="fm-booktitle">Details on standard map visuals are included in the <em class="italic">Map visuals</em> section of <em class="italic">Chapter 7</em>, <em class="italic">Creating and Formatting Visualizations</em>, and the ArcGIS Map visual for Power BI is reviewed in <em class="italic">Chapter 8</em>, <em class="italic">Applying Advanced Report Features</em>. </p>
    <p class="fm-booktitle">There are several publicly available resources on visualization practices and visual selection. The <em class="italic">Chart Suggestions</em> diagram from Extreme Presentation (<a href="http://bit.ly/1xlXh1x" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/1xlXh1x</span></a>) provides additional details on the visuals and visual categories described in this section. </p>
    <p class="fm-booktitle">Additionally, the SQL BI team provides a Power BI Visuals reference (<a href="http://bit.ly/2ndtcZj" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2ndtcZj</span></a>) that categorizes visuals at a more granular level than the table in this section. Finally, Zebra BI provides an interactive Power BI report for chart selection (<a href="https://zebrabi.com/chart-selector/" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://zebrabi.com/chart-selector/</span></a>).</p>
    <p class="fm-booktitle">The next subject related to report design deals with how visuals interact with one another.</p>
    <h2 id="calibre_link-199" class="calibre9">Visualization anti-patterns</h2>
    <p class="fm-booktitle">In addition to report <a id="calibre_link-1827" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>planning and generally aligning reports with visualization best practices, it can be helpful to acknowledge and avoid several common visualization anti-patterns. Anti-patterns are common practices that negatively impact the quality, usability, performance, and other aspects of a report. </p>
    <p class="fm-booktitle">For many reports, particularly when report development time and Power BI experience are limited, simply avoiding these anti-patterns coupled with adequate planning and appropriate visual type choices is sufficient to deliver quality, sustainable content.</p>
    <p class="fm-booktitle">The most common visualization <a id="calibre_link-1828" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>anti-patterns include the following:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">A cluttered interface of many visuals and report elements that are complex or difficult to interpret</strong>: This is often the result of too many visuals per report page or too high a precision being displayed. Report visuals should be separated across distinct reports, report pages, and bookmarks to both improve usability as well as limit the volume of concurrent queries.</li>
      <li class="calibre13"><strong class="screentext">A lack of structure, order, and consistency</strong>: Each report page should naturally guide the user from the essential top-left visuals to the supporting visuals. A failure to align visuals or to provide proper spacing and borders can make reports appear disorganized. Mixing widely disparate grains of detail on the same report page can be disorienting to users.</li>
      <li class="calibre13"><strong class="screentext">High-density and/or high-detail visualizations, such as large table visuals or thousands of points on a scatter chart or map</strong>: The need for a scrollbar is a strong indication that a visual contains too many values. A table visual should not be used as a raw data extract of many columns and rows. High-density visuals, such as line and scatter charts with thousands of data points, can cause poor performance.<p class="normal1"><em class="italic">Figure 6.7</em>, showing a table visual with seven dimension columns and three measures, is an example of a data extract anti-pattern:</p>
        <figure class="mediaobject"><img src="images/000253.png" alt="Graphical user interface, text, application, email  Description automatically generated" class="calibre15" /></figure>
        <p class="packt_figref">Figure 6.7: Data extract anti-pattern</p>
        <p class="normal1">The small scrollbar on the right indicates that many rows are not displayed. Additionally, the <strong class="screentext">Export data</strong> option available from the ellipses (…) menu of the visual prompts the warning message (<strong class="screentext">Data exceeds the limit</strong>), suggesting the visual contains too much data.</p>
      </li>
      <li class="calibre13"><strong class="screentext">The excessive use of fancy or complex visuals and images</strong>: Reports can be aesthetic and engaging, but the priority should be to inform users, not to impress them. For example, a column chart or a stacked column chart is usually more effective than a treemap.</li>
      <li class="calibre13"><strong class="screentext">Suboptimal visual choices such as pie charts, donut charts, and gauges</strong>: Column or bar charts are easier to interpret than the circular shapes of pie and donut charts. KPI visuals provide more context than gauge visuals, including the trend of the indicator value. Additionally, report authors sometimes utilize table and matrix visuals when a column or line chart would better highlight the differences between items or the overall trend.</li>
      <li class="calibre13"><strong class="screentext">The misuse of colors, such as utilizing more than five colors and overwhelming users with highly saturated colors</strong>: Colors should be used selectively and only when the few alternative colors convey meaning.</li>
      <li class="calibre13"><strong class="screentext">A high volume of report pages such as 10 or more</strong>: Reports with many pages are generally less focused and more difficult to browse by end users. Report authors should consider dividing report pages into more focused or targeted reports <a id="calibre_link-1829" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and using bookmarks and buttons to further reduce the volume of report pages.</li>
    </ol>
    <p class="fm-booktitle">Just as important as following visualization best practices and avoiding visualization anti-patterns is choosing the right visualization.</p>
    <h1 id="calibre_link-200" class="heading">Visual interactions</h1>
    <p class="fm-booktitle">Power BI reports are highly<a id="calibre_link-1819" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> interactive by nature, allowing users to click on data points within visuals and cross-filter or highlight other filters on the page. When planning and designing reports, it is important to keep this default behavior in mind and consider whether or not the default visual interaction behavior should be changed. </p>
    <p class="fm-booktitle">By default, the filter selections applied to a single visual, such as clicking a bar on a column chart or a row on a table, impact all other data visualizations on the given report page with relationships to the selection.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.8</em>, the bar representing the <strong class="screentext">United States</strong> sales territory country has been selected and this causes the product category chart to highlight the portion of each product category related to the <strong class="screentext">United States</strong> sales territory country ($45M):</p>
    <figure class="mediaobject"><img src="images/000244.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.8: Visual interactions &ndash; Highlighting</p>
    <p class="fm-booktitle">Multiple values from<a id="calibre_link-1820" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the same column can be selected (for example, <strong class="screentext">France</strong> and <strong class="screentext">Canada</strong>) by holding down the <em class="italic">Ctrl</em> key and the values from separate columns of the same visual, such as the dimension columns of a table visual, can also cross-filter other visuals on the report page. The ability to drive visual interactions from the selections of two or more visuals (for example, <strong class="screentext">United States</strong> and <strong class="screentext">Bikes</strong>) is also supported.</p>
    <p class="fm-booktitle">The highlight interaction option from the preceding example is available and enabled by default for column, bar, treemap, pie, and donut charts. Only the filter and the no interaction options are available for cards, KPIs, and line and scatter chart visuals.</p>
    <p class="fm-booktitle">As per prior chapters, the <code class="inlinecode">Sales Territory</code>, <code class="inlinecode">Product</code>, and <code class="inlinecode">Date</code> dimension tables are related to all three fact tables&mdash;<code class="inlinecode">Internet Sales</code>, <code class="inlinecode">Reseller Sales</code>, and <code class="inlinecode">Sales and Margin Plan</code>. Therefore, the filters and selections applied to the columns of these tables simultaneously impact measures from other fact tables. </p>
    <p class="fm-booktitle">This integration within the dataset supports robust analyses but can also require some training or explanation to users as users may not initially expect or understand the cross-filtering behavior. If this is the case, or if a different interaction between visuals is desired, report authors can modify the default behavior by editing the interactions.</p>
    <h2 id="calibre_link-201" class="calibre9">Editing interactions</h2>
    <p class="fm-booktitle">Report authors can<a id="calibre_link-1821" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> modify the visual interaction behavior such that selections (user clicks) on certain visuals don’t impact other visuals or only impact certain visuals. Additionally, for the visuals set to the highlight interaction by default, report authors can revise the interaction behavior to filter.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.9</em>, the United States selection in the middle bar chart has no impact on the multi-row car visual but causes a filter interaction (rather than highlight) on the product category chart:</p>
    <figure class="mediaobject"><img src="images/000271.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.9: Edit interactions in Power BI Desktop</p>
    <p class="fm-booktitle">To edit visual interactions, select the visual that receives the selections and then enable the <strong class="screentext">Edit interactions</strong> command under the <strong class="screentext">Format</strong> tab in Power BI Desktop. In this example, the <strong class="screentext">None</strong> interaction icon has been selected for the multi-row card visual as indicated by the circle with a slash through it below the visual. The <strong class="screentext">Filter</strong> interaction icon has been selected for the <strong class="screentext">Product Category</strong> column chart as similarly indicated by the left-most icon below the visual. To disable editing interactions, simply return to the <strong class="screentext">Format</strong> tab and click the <strong class="screentext">Edit interactions</strong> command again.</p>
    <p class="fm-booktitle">Like the preceding example, it’s often appropriate to disable visual interactions from impacting cards or KPIs. These values can be impacted exclusively by the filters defined outside of the report canvas, such as report- and page-level filters, and do not change during user sessions like other visuals on the page.</p>
    <p class="fm-booktitle">Regardless of the design decision, if users regularly interact with reports, such as clicking on slicers and other visuals, it’s important to briefly review or explain the visual interaction behavior. This is especially necessary with new users and with more customized designs, such as two or three visuals with interactions enabled and two or three visuals with interactions disabled.</p>
    <p class="fm-booktitle">In addition to<a id="calibre_link-1822" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> interactions between visuals on the same page, visuals can also interact with one another between different report pages via drillthrough report pages.</p>
    <h1 id="calibre_link-202" class="heading">Drillthrough report pages</h1>
    <p class="fm-booktitle">A well-designed Power BI report of summary-level visualizations may itself sufficiently address user questions. However, it’s <a id="calibre_link-928" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>often the case that users need the ability to view the details behind particular data points of interest, such as the sales orders for a specific product, customer, or fiscal period that seems high or low relative to expectations. </p>
    <p class="fm-booktitle">Drillthrough report pages are typically hidden by default and accessed via the right-click context menu of visuals for items of interest, such as an individual bar on a bar chart. These report pages enable users to continue and often complete their own analysis at a detailed level and thus can reduce the need to create or support traditional paginated or extract-like detail reports.</p>
    <p class="fm-booktitle">As per <em class="italic">Figure 6.10</em>, a report page has been designed with a drillthrough filter set to the <strong class="screentext">Product Name</strong> column. This drillthrough page automatically applies filters from the source report page’s <strong class="screentext">Product Name</strong> column, such as <strong class="screentext">Road-250 Black, 44</strong>. </p>
    <figure class="mediaobject"><img src="images/000262.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.10: Drillthrough report page </p>
    <p class="fm-booktitle">Drillthrough filters are set at the bottom of the <strong class="screentext">Visualizations</strong> pane in the <strong class="screentext">Drill through</strong> section of the <strong class="screentext">Build visual</strong> sub-pane, as shown in <em class="italic">Figure 6.10</em>. </p>
    <p class="fm-booktitle">With the drillthrough report page configured, when<a id="calibre_link-929" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the <strong class="screentext">Product Name</strong> column is exposed on a separate page within the report, the user has a right-click option to drill to this page as per <em class="italic">Figure 6.11</em>:</p>
    <figure class="mediaobject"><img src="images/000289.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.11: Drillthrough source page</p>
    <p class="fm-booktitle">Only the column or columns specified in the <strong class="screentext">Drill through</strong> section of the <strong class="screentext">Visualizations</strong> pane (drillthrough filters) can be used as drill columns. </p>
    <p class="fm-booktitle">For example, even if the <strong class="screentext">ProductAlternateKey</strong> column has a 1-to-1 relationship with the <strong class="screentext">Product Name</strong> column, the drillthrough option is not available to visuals based on the <strong class="screentext">ProductAlternateKey</strong> column unless <strong class="screentext">ProductAlternateKey</strong> is also specified as a drillthrough filter, like the <strong class="screentext">Product Name</strong> column. Therefore, if some report visuals use <strong class="screentext">Product Name</strong> and others use <strong class="screentext">ProductAlternateKey</strong>, both columns can be configured as <strong class="screentext">Drill through</strong> filters on the drillthrough<a id="calibre_link-927" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report page to support both scenarios.</p>
    <p class="fm-booktitle">In the preceding example, the user has drilled down through the four levels of the product hierarchy created in <em class="italic">Chapter 4</em>, <em class="italic">Designing Import and DirectQuery Data Models</em> (<code class="inlinecode">Product Category Group</code>, <code class="inlinecode">Product Category</code>, <code class="inlinecode">Product Subcategory</code>, and <code class="inlinecode">Product Name</code>), to display a bar chart by the <code class="inlinecode">Product Name</code> column. </p>
    <p class="fm-booktitle">The same right-click drillthrough option is exposed via table, matrix, and other chart visuals, including<a id="calibre_link-2009" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> scatter charts, stacked column and bar charts, column charts, and bar charts. </p>
    <p class="fm-booktitle">The bottom-level column of a hierarchy, such as the preceding <code class="inlinecode">Product Name</code> example, is often a good candidate to support a drillthrough report page. </p>
    <p class="fm-booktitle">For example, a common analysis pattern is to apply a few slicer selections and then drill down through the hierarchy levels built into chart and matrix visuals. Each level of the hierarchy provides supporting context for its parent value, but ultimately, the report user wants to investigate a specific value (for example, <strong class="screentext">Customer 123</strong>) or a specific combination of values (<strong class="screentext">Customer 123</strong> and <strong class="screentext">Calendar Year 2018</strong>).</p>
    <p class="fm-booktitle">The use of drillthrough report pages can create certain challenges with regard to navigation by report viewers. In addition, users unfamiliar with Power BI Desktop may not intuitively understand the context in which they are viewing a report page. Both of these issues are addressed in the next section.</p>
    <h2 id="calibre_link-203" class="calibre9">Custom labels and the back button</h2>
    <p class="fm-booktitle">Two of the most important<a id="calibre_link-932" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> components of the drillthrough report page shown in <em class="italic">Figure 6.10</em> include the custom <strong class="screentext">Product Name</strong> label and back button image<a id="calibre_link-930" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> at the top of the report page. The <strong class="screentext">Product Name</strong> message at the top of the page uses the following DAX measure expression:</p>
    <pre class="programlisting"><code class="hljs-code">Selected Product Name = 
    VAR __ProdName = SELECTEDVALUE('Product'[Product Name], "Multiple Product Names")
RETURN 
    "Product Name: " &amp; __ProdName
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">SELECTEDVALUE()</code> function returns either the single value currently selected for a given column or an alternative expression if multiple values have been selected. For drillthrough report pages, it’s a given that the drill column only has a single value as each drillthrough column is limited to a single value. </p>
    <p class="fm-booktitle">To provide a dynamic label or title to the page, the DAX variable containing the <code class="inlinecode">Product Name</code> expression is concatenated with a text string. In this example, the <strong class="screentext">Selected Product Name</strong> measure is displayed in a <a id="calibre_link-2010" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>card visual. Alternatively, the <strong class="screentext">Selected Product Name</strong> measure could be used as a dynamic title for the visual. Although card visuals can be used to display text messages and dates, a text box also supports DAX measures and importantly provides much greater formatting control to <a id="calibre_link-2011" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>define how the message appears on the canvas.</p>
    <p class="fm-booktitle">The custom back button image was added to the report via the insert image command on the <strong class="screentext">Insert</strong> tab of <strong class="screentext">Report</strong> view. Once positioned in the top left of the page, selecting the image exposes the image formatting cards. As per <em class="italic">Figure 6.12</em>, the <strong class="screentext">Action</strong> card is enabled, and <strong class="screentext">Type</strong> is set to <strong class="screentext">Back</strong>:</p>
    <figure class="mediaobject"><img src="images/000280.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.12: Back button image formatting</p>
    <p class="fm-booktitle">Power BI Desktop adds a back button arrow shape by default when a drillthrough page is created, but this shape is less intuitive for users than the custom image. With the back button configured, <em class="italic">Ctrl +</em> click is used to return to the source page in Power BI Desktop. Only a single click is needed to use the back button in the Power BI service.</p>
    <p class="fm-booktitle">The single-row table at the bottom of the drillthrough report page shown in <em class="italic">Figure 6.10</em> has been filtered to only display the current, active values of the product. As described in the <em class="italic">Slowly changing dimensions</em> section of <em class="italic">Chapter 2</em>, <em class="italic">Connecting to Sources and Transforming Data with M</em>, the <code class="inlinecode">Products</code> table contains multiple rows per product, representing different points in time. </p>
    <p class="fm-booktitle">To ensure that only<a id="calibre_link-933" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> one row is displayed by the table visual, a<a id="calibre_link-931" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> visual-level filter was applied, setting the <code class="inlinecode">Product Status</code> column equal to <strong class="screentext">Current</strong>. Alternatively, the visual-level filter condition could specify that the <code class="inlinecode">Product End Date</code> column is <strong class="screentext">Blank</strong> via an advanced filter condition.</p>
    <p class="fm-booktitle">Thus far, we have covered drillthrough report pages consisting of a single drillthrough column. However, it is possible to include multiple columns in drillthrough report pages.</p>
    <h2 id="calibre_link-204" class="calibre9">Multi-column drillthrough</h2>
    <p class="fm-booktitle">In many scenarios, a <a id="calibre_link-934" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>more specific filter context is needed for drillthrough report pages to resolve analyses. For example, the user may be interested in one specific year for a given <code class="inlinecode">Product Subcategory</code> column. </p>
    <p class="fm-booktitle">To support these needs, multiple columns can be added as drillthrough page filters. When one or both columns are exposed in a report visual on a separate page, the drillthrough right-click option can be used to apply multiple filter selections to the drillthrough page.</p>
    <p class="fm-booktitle">In the stacked column chart of <strong class="screentext">Internet Sales by Year and Product Subcategory</strong> shown in <em class="italic">Figure 6.13</em>, right-clicking on the <strong class="screentext">Road Bikes</strong> column for 2011 ($5.7M) exposes the <strong class="screentext">Drill through</strong> option to the <em class="italic">Figure 6.13</em> drillthrough report page: </p>
    <figure class="mediaobject"><img src="images/000309.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.13: Drillthrough by multiple columns</p>
    <p class="fm-booktitle">The <strong class="screentext">Drill through</strong> report page filters for both the <code class="inlinecode">Year</code> and <code class="inlinecode">Product Subcategory</code> columns. Report visuals that only expose one of these two columns can still drill to this multi-column drillthrough<a id="calibre_link-935" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report page. In this scenario, no filter would be applied to the column not contained in the source visual.</p>
    <p class="fm-booktitle">Executing the drillthrough action from the preceding chart results in the drillthrough report page filtered for both column values. As shown in <em class="italic">Figure 6.14</em>, with <strong class="screentext">Keep all filters</strong> toggled on, all filters from the source visual are passed to the drillthrough report page, including the most specific filters for <code class="inlinecode">Product Subcategory</code> of <strong class="screentext">Road Bikes</strong> and <code class="inlinecode">Year</code> of <strong class="screentext">2011</strong>:</p>
    <figure class="mediaobject"><img src="images/000298.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.14: Multi-column drillthrough report page</p>
    <p class="fm-booktitle">The drillthrough report page in this scenario is designed to display the values of the two drill-through columns and provide supporting analysis for this given filter context. The choice to keep all filters should be considered carefully as this may confuse users who do not understand that this<a id="calibre_link-936" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> behavior preserves all existing source visual filters, including those outside of the specific, user-chosen context when drilling.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.15</em>, $3M of the $5.7M of <code class="inlinecode">Internet Net Sales</code> from the source page occurs in the second half of the year, as identified in a card visual and also visualized by the last 6 calendar months of <strong class="screentext">2011</strong> in a stacked column chart to break out the product models for the <strong class="screentext">Road Bikes</strong> subcategory: </p>
    <figure class="mediaobject"><img src="images/000329.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.15: Multi-column drillthrough report page</p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.15</em>, the user obtains details on both <code class="inlinecode">Internet Net Sales</code> and <code class="inlinecode">Reseller Net Sales</code> for the given <code class="inlinecode">Year</code> and <code class="inlinecode">Product Subcategory</code>. Visuals that utilize measures from any fact table (for example, <code class="inlinecode">Sales Plan</code>) with a cross-filtering relationship to the drillthrough column tables can be added to the drillthrough report page to provide additional context.</p>
    <p class="fm-booktitle">In addition to stacked <a id="calibre_link-937" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>column charts, matrix visuals are also a common choice for initiating a drillthrough action based on two columns. For example, the <code class="inlinecode">Year</code> column could be the columns input and the <code class="inlinecode">Product Subcategory</code> could be the rows input for a matrix visual. Additionally, a pie chart with the two columns used in the legend and detailed input fields can also be used to drill through based on two columns. </p>
    <p class="fm-booktitle">With the concept of drillthrough filters explained, we can delve further into the subject of the different types of filters and filter scopes available in reports.</p>
    <h1 id="calibre_link-205" class="heading">Report filter scopes</h1>
    <p class="fm-booktitle">Within Power BI Desktop, the <strong class="screentext">Filters</strong> pane provides access to three different filter scopes, filters on all <a id="calibre_link-1603" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>pages, filters on the current page, and filters on the current visual. In addition, a fourth filter scope can be set in the <strong class="screentext">Visualizations</strong> pane, using drillthrough filters. </p>
    <p class="fm-booktitle">Filter scopes simply refer to what is impacted by the filter, either just the visual, the whole report page, the entire report, or only when drilling into a visual’s information. A fundamental skill and practice in Power BI report development is utilizing the report filter scopes and the filter conditions available to each scope. </p>
    <p class="fm-booktitle">For example, a report intended for the European sales team can be filtered at the report level for the European sales territory group and specific report pages can be filtered for France, Germany, and the United Kingdom. Reports can be further customized by implementing filter conditions to specific visuals, applying more complex filter conditions, and providing drillthrough report pages to reflect the details of a unique item, such as a product or a customer.</p>
    <p class="fm-booktitle">Report filter scopes are defined outside of the report canvas and therefore provide report authors with the option to eliminate or reduce the need for on-canvas user selections as well as the canvas space associated with slicer visuals. This can provide a better user experience with less interaction required by users as well as larger visuals with easier-to-read font sizes.</p>
    <p class="fm-booktitle">In addition to meeting functional requirements and delivering a simplified user experience, report filter scopes can also benefit performance. Using the European sales report as an example, the simple filter conditions of <strong class="screentext">Sales Territory Group = Europe</strong> (Report-level filter) and <strong class="screentext">Sales Territory Country = France</strong> (Page-level filter) are efficiently implemented by the Power BI in-memory engine (import mode) and almost all the DirectQuery data sources. Even if the DAX measures used on the report page for France are complex, the report filters contribute to acceptable or good performance.</p>
    <p class="fm-booktitle">With a visual selected on the canvas in <strong class="screentext">Report</strong> view, the <strong class="screentext">Filters</strong> and <strong class="screentext">Visualizations</strong> panes present the following four input field wells:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">Filters on all pages</strong>: The filter conditions defined impact all visuals on all report pages. The scope of these filters is the entire report</li>
      <li class="calibre13"><strong class="screentext">Filters on this page</strong>: The filter conditions defined impact all visuals on the given report page. The scope of these filters is a single page. Report-level filter conditions are respected by the page-level filters as well. Any drillthrough filter conditions defined for the report page are also respected.</li>
      <li class="calibre13"><strong class="screentext">Filters on this visual</strong>: The filter conditions defined only impact the specific visual selected. The scope of these filters is a single visual. Report- and page-level filter conditions are respected by the visual-level filters as well. Any drillthrough filter conditions defined for the report page of the given visual are also respected.</li>
      <li class="calibre13"><strong class="screentext">Drill-through</strong>: The filter condition, a single value from a column, impacts all visuals on the given report page. The scope of these filters is the entire page. Report-level filter conditions are respected by the drillthrough filters as well. Any page- and visual-level filter conditions are also respected.</li>
    </ol>
    <p class="fm-booktitle">As per prior <a id="calibre_link-1604" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>chapters, filters are applied to Power BI visuals via the relationships defined in the dataset (via single or bidirectional cross-filtering) as well as any filtering logic embedded in DAX measures. All four of the preceding filters (<strong class="screentext">Report</strong>, <strong class="screentext">Page</strong>, <strong class="screentext">Visual</strong>, and <strong class="screentext">Drill through</strong>) contribute to the initial filter context, as described in the <em class="italic">Measure evaluation process section</em> of <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>. </p>
    <p class="fm-booktitle">Therefore, just like filters applied on the report canvas (for example, <strong class="screentext">Slicers</strong>), the filter logic of DAX measures can supplement, remove, or replace these filters’ conditions. In the event of a conflict between any report filter and a DAX measure expression that utilizes the <code class="inlinecode">CALCULATE()</code> function, the DAX expression supersedes or overrides the report filter.</p>
    <p class="fm-booktitle">Let’s now explore the different filter conditions that can be applied to each scope.</p>
    <h2 id="calibre_link-206" class="calibre9">Report filter conditions</h2>
    <p class="fm-booktitle">Different types of filter conditions can <a id="calibre_link-1605" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>be defined for the distinct filter scopes. For example, report- and page-level filters are limited to relatively simple filter conditions that reference individual columns of a dataset. However, more complex and powerful conditions, such as filtering by the results of a DAX measure and top N filters (such as the three largest or five smallest values), can be applied via visual-level filters.</p>
    <p class="fm-booktitle">The following outline and matrix (filter conditions by filter scope) summarize the filtering functionality supported:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">Basic</strong>: A single equality condition for a column to a single value or set of values, such as “is North America or Europe”; a single inequality condition for a column to a single value or set of values, such as “is not $25 or $35.”</li>
      <li class="calibre13"><strong class="screentext">Advanced</strong>: Several condition<a id="calibre_link-2012" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> rules per data type, such as “starts with” for text and “is greater than or equal to” for numbers; supports filtering for blank and non-blank values; optionally, apply multiple conditions per column via logical operators (and, or).</li>
      <li class="calibre13"><strong class="screentext">Relative Date</strong>: Supports three filter condition rules (is in this, is in the last, and is in the next) for days, weeks, months, and years. Partial period and complete period filter conditions can be defined. The same filter condition rules are available to slicers with date data type columns.</li>
      <li class="calibre13"><strong class="screentext">Top N</strong>: Filter a visual to a defined number of top or bottom values of a column based on their values for a measure. For example, the top 10 products based on net sales can be set as a visual-level filter condition. </li>
      <li class="calibre13"><strong class="screentext">Filter by Measure</strong>: Filter a visual by applying advanced filtering conditions to the results of a DAX measure. For example, greater than 45% on the <strong class="screentext">Internet Net Margin %</strong> measure can be set as a visual-level filter condition.</li>
    </ol>
    <p class="fm-booktitle"><em class="italic">Table 6.2</em> summarizes the preceding filter conditions available to each of the three primary report filter scopes:</p>
    <table id="calibre_link-2013" class="table-container">
      <tbody class="calibre16">
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Filter Conditions</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Report Level</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Page Level</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Visual Level</strong></p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Basic</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Advanced</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Relative Date</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Top N</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2">No</p>
          </td>
          <td class="table-cell">
            <p class="normal2">No</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Filter by Measure</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2">No</p>
          </td>
          <td class="table-cell">
            <p class="normal2">No</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Yes</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="fm-acknowledgement">Table 6.2: Filter conditions by filter scope</p>
    <p class="fm-booktitle">Multiple filter conditions can be defined per report filter scope. For example, a report-level filter could include two basic filter conditions and an advanced filter condition. Additionally, the same column can be used in multiple filter scopes, such as a report-level filter and a page-level filter on the <code class="inlinecode">product</code> <code class="inlinecode">subcategory</code> column. </p>
    <p class="fm-booktitle">All defined filter conditions are applied to the visuals within their scope provided that the DAX measures included in the visuals don’t contain filtering logic in conflict with the report filter conditions. Additionally, the columns and measures referenced in the filter conditions do not need to be displayed in the report visuals. For the top N filtering condition, the column to be filtered only has to be displayed in the visual when the filter condition is initially defined. </p>
    <p class="fm-booktitle">A good indicator of <a id="calibre_link-1606" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI development and solution-specific knowledge is the ability to accurately interpret the filters being applied to a given visual on a report page. This includes all Power BI report filters (report-level, page-level, and visual-level), any slicer selections or cross-highlighting, the filter logic of the DAX measures, the cross-filtering applied via relationships in the data model, and any filter logic built into the M queries of the dataset. Complex reports and datasets utilize all or many of these different layers in various combinations to ultimately affect the values displayed in report visuals.</p>
    <p class="fm-booktitle">BI teams generally want to limit the complexity built into reports, both for users and the report authors or developers responsible for the reports. For example, if visual-level filter conditions are applied to many visuals of a report, the filter condition for each visual must be modified if the requirement(s) of the report change or the columns or measures used by the filter condition change. Dataset designers and data warehouse teams can often implement changes or enhancements to simplify the filter conditions needed by report authors.</p>
    <p class="fm-booktitle">As one example, a filter condition implemented in multiple reports that specifies several product categories (hardcoded) could be replaced with a new column in the product dimension table. The new column would distinguish the group of product categories that meet the desired criteria relative to those that don’t, and logic could be built into the data source or retrieval process to dynamically include additional product categories that later meet the given criteria. </p>
    <p class="fm-booktitle">Drillthrough filters, which are used to define drillthrough report pages as described in the previous section, are unique in that they can be used to implement basic filtering conditions at the page level as well as their more common filtering of a single column value. This can enable a report page to serve a dual purpose, both as a standard report page as well as a drillthrough page.</p>
    <p class="fm-booktitle">For example, three countries can be selected in a drillthrough filter condition and the visuals on the report page reflect these three countries. Such a page may be useful for displaying European countries such as the United Kingdom, France, and Germany. </p>
    <p class="fm-booktitle">However, a user can only drill to the report page from the context of a single column value. The source drillthrough value (for example, <strong class="screentext">Germany</strong>), replaces the three countries in the previous filter condition on the drillthrough page when the drillthrough action is executed. </p>
    <p class="fm-booktitle">Additionally, multiple<a id="calibre_link-1607" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> columns can be used as drillthrough filters and the values of both columns from a separate report page are applied to the drillthrough page when a drillthrough action is executed. If only one value is present from the source report page, the drillthrough action only filters this column and removes any filter defined for the other drillthrough filter column.</p>
    <h2 id="calibre_link-207" class="calibre9">Report and page filters</h2>
    <p class="fm-booktitle">Report- and page-level filters (<strong class="screentext">Filters on all pages</strong> and <strong class="screentext">Filters on this page</strong> from the <em class="italic">Report filter scopes</em> section) are most commonly used to apply the fundamental filter context for the report. Columns <a id="calibre_link-1610" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>with few unique values, such as <code class="inlinecode">SalesTerritoryCountry</code>, are good candidates for report-level filters, while more granular columns such as <code class="inlinecode">SalesTerritoryRegion</code> are better suited for page-level filters. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.16</em>, the individual report pages are named according to the report and page filters applied:</p>
    <figure class="mediaobject"><img src="images/000319.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.16: Power BI report pages</p>
    <p class="fm-booktitle">In the absence of any custom DAX measures that retrieve the filter selections applied, users of the report do not typically see the applied report-, page-, and visual-level filters. Therefore, it’s important to assign intuitive names to each report page as per <em class="italic">Figure 6.16</em> and to include a brief title for each report page via a text box.</p>
    <p class="fm-booktitle"><em class="italic">Figure 6.17</em> shows the <strong class="screentext">Report</strong> and <strong class="screentext">Page</strong> filters applied to the <strong class="screentext">Northeast</strong> report page of a <strong class="screentext">United States</strong> sales report:</p>
    <figure class="mediaobject"><img src="images/000358.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.17: Report- and page-level filters</p>
    <p class="fm-booktitle">Each report page is filtered for a different sales territory region except the <strong class="screentext">USA</strong> page, which would only contain a <strong class="screentext">Country</strong> page filter since the USA page covers multiple sales territories (<strong class="screentext">Northeast</strong>, <strong class="screentext">Northwest</strong>, <strong class="screentext">Central</strong>, <strong class="screentext">Southeast</strong>, and<strong class="screentext"> Southwest</strong>). </p>
    <p class="fm-booktitle">The <strong class="screentext">Year Status</strong> column, as described in the <em class="italic">Date dimension view</em> section of <em class="italic">Chapter 2</em>, <em class="italic">Preparing Data Sources</em>, restricts all visuals to only the current and prior year. One or two years of history is sufficient for many reports given the pace of change in business environments and <a id="calibre_link-1611" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>strategies. Additionally, the report-level date filter promotes both query performance and low maintenance since the dates filtered reflect the latest dataset refresh. </p>
    <p class="fm-booktitle">Report filters are not a long-term substitute for poor data quality or a suboptimal dataset (data model or retrieval queries). If it’s necessary to implement many filter conditions or complex filtering conditions within reports to return accurate results, the dataset or the source system itself should likely be revised. </p>
    <p class="fm-booktitle">Similarly, if many filter conditions or complex filter conditions are needed to retrieve the desired results, the dataset can likely be enhanced (for example, a new column, new measure) to simplify or eliminate these report filter conditions. </p>
    <p class="fm-booktitle">Power BI report authors should communicate to the dataset designer(s) and BI team whenever complex or convoluted report filters are being applied. Given limited team resources, it may be sufficient to use report filters to support rare or uncommon reports. For common reporting needs, however, it’s generally appropriate to build or revise the necessary logic in the data source or dataset.</p>
    <p class="fm-booktitle">We’ll now move on to<a id="calibre_link-2014" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> exploring the use cases for relative date filtering within Power BI reports.</p>
    <h2 id="calibre_link-208" class="calibre9">Relative date filtering</h2>
    <p class="fm-booktitle">Relative date filtering <a id="calibre_link-1608" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>refers to the ability to enable date filters relative to the current date and time. Relative date filtering is available for date columns at all filter scopes (report, page, and visual) and for slicer visuals. </p>
    <p class="fm-booktitle">These dynamic filter<a id="calibre_link-1596" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> conditions, such as the last 30 days (relative to the current date), promote both data freshness and query performance since the minimal amount of history required can be retrieved. Additionally, relative date filters can often avoid the need to add dynamically computed columns to a date dimension table or implement date filter conditions in DAX measures.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.18</em>, five report pages are dedicated to a specific relative date filter condition:</p>
    <figure class="mediaobject"><img src="images/000368.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.18: Relative date filter conditions per page</p>
    <p class="fm-booktitle">A page-level filter is used for each report page with the following conditions, as per <em class="italic">Figure 6.19</em>:</p>
    <figure class="mediaobject"><img src="images/000386.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.19: Relative date filter condition</p>
    <p class="fm-booktitle">As of 1/23/2022 (the current date when the report was viewed), the five report pages are filtered to the following date ranges with the <strong class="screentext">Include today</strong> option enabled:</p>
    <ul class="calibre10">
      <li class="bulletlist">Is in the last 12 months, 1/24/2021 through 1/23/2022</li>
      <li class="bulletlist">Is in the last 12 weeks, 11/1/2021 through 1/23/2022</li>
      <li class="bulletlist">Is in this month, 1/1/2022 through 1/31/2022</li>
      <li class="bulletlist">Is in the next 12 months, 1/23/2022 through 1/22/2023</li>
      <li class="bulletlist">Is in the next 12 weeks, 1/23/2022 through 4/16/2022</li>
    </ul>
    <p class="fm-booktitle">A report design such<a id="calibre_link-1609" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> as this would make it simple for<a id="calibre_link-1597" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> users to analyze immediate, near-term, and longer-term trends and issues. </p>
    <p class="fm-booktitle">Three types of relative date filter conditions can be set:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">is in the last</strong></li>
      <li class="calibre13"><strong class="screentext">in this</strong></li>
      <li class="calibre13"><strong class="screentext">is in the next</strong></li>
    </ol>
    <p class="fm-booktitle">Each of these filter conditions supports <strong class="screentext">days</strong>, <strong class="screentext">weeks</strong>, <strong class="screentext">months</strong>, and <strong class="screentext">years</strong> intervals. For the <strong class="screentext">is in the last</strong> and <strong class="screentext">is in the next</strong> filter conditions, <strong class="screentext">calendar weeks</strong>, <strong class="screentext">calendar months</strong>, and <strong class="screentext">calendar years</strong> conditions can also be specified. These last three intervals represent full or completed calendar periods only. </p>
    <p class="fm-booktitle">For example, as of <strong class="screentext">January 23, 2022</strong>, the last one-calendar month and last one-calendar year would include all dates of December 2021 and all dates of 2021, respectively. The week of 1/16/2022 through 1/22/2022 would represent the last one-calendar week. </p>
    <p class="fm-booktitle">In the next section, we explore filters scoped to individual visuals or visual-level filtering.</p>
    <h2 id="calibre_link-209" class="calibre9">Visual-level filtering</h2>
    <p class="fm-booktitle">Visual-level filters (<em class="italic">Filters on this visual</em> from the <em class="italic">Report filter scopes</em> section) provide the most powerful filter<a id="calibre_link-1612" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> conditions in Power BI exclusive of custom filter <a id="calibre_link-1835" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>conditions specified in DAX expressions. </p>
    <p class="fm-booktitle">Unlike report- and page-level filters, DAX measures can be used in visual-level filter conditions, such as net sales greater than $5,000. Additionally, top N filter conditions can be implemented referencing a column and measure that are included or excluded from the visual as per the <em class="italic">Top N visual-level filters</em> section following this example.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.20</em>, a table visual of customers has been filtered according to the <strong class="screentext">Internet Net Sales</strong> and <strong class="screentext">Internet Sales Orders</strong> measures:</p>
    <figure class="mediaobject"><img src="images/000377.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.20: Table with visual-level filters applied</p>
    <p class="fm-booktitle">Specifically, the visual only displays items (customers) with more than $12,000 in <strong class="screentext">Internet Net Sales</strong> and more than five <strong class="screentext">Internet Sales Orders</strong>. As per the <strong class="screentext">Customer Sales Rank</strong> measure, certain customers that meet the net sales condition are excluded based on the sales order<a id="calibre_link-2015" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> condition. </p>
    <p class="fm-booktitle">Unlike the top N visual-level filter condition, filters based on measures, such as the conditions shown in <em class="italic">Figure 6.20</em>, are only applied when items (for example, customers or products) are displayed on the visual.</p>
    <p class="fm-booktitle">By removing the customer columns, the remaining measures (<code class="inlinecode">Internet Sales Orders and Internet Net Sales</code>) would not be filtered by the visual-level filter conditions. In other words, the visual-level filters based on measures are only applied against the dimension column or columns in the visual, such as <code class="inlinecode">CustomerAlternateKey</code> or <code class="inlinecode">FirstName</code>. </p>
    <p class="fm-booktitle">Although analytically powerful, report authors should exercise caution with visual-level filters. From a usability standpoint, reports can become confusing when visuals on the same report page reflect different filter conditions. If used, report authors should include the visual-level filters as part of the visual’s <strong class="screentext">Title</strong>, such as “Customers with Internet Net Sales greater than 12K and more than 5 orders.”</p>
    <p class="fm-booktitle">Additionally, executing complex filter conditions against large or dense report visuals can result in performance degradation. If a complex filter condition is repeatedly needed at the visual level, it’s likely the case that the dataset should be modified to include some or all of this logic.</p>
    <p class="fm-booktitle">We complete our look at visual-level filtering with an example of the use of <strong class="screentext">Top N</strong> filtering.</p>
    <h3 id="calibre_link-210" class="heading1">Top N visual-level filters</h3>
    <p class="fm-booktitle">In <em class="italic">Figure 6.21</em>, a table visual is filtered <a id="calibre_link-1836" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>based on the top five products for the <strong class="screentext">Internet Net Sales </strong>(<strong class="screentext">PYTD</strong>) measure:</p>
    <figure class="mediaobject"><img src="images/000395.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.21: Top N visual-level filter</p>
    <p class="fm-booktitle">For this visual, the <strong class="screentext">Internet Net Sales </strong>(<strong class="screentext">PYTD</strong>) measure used for the filter condition is not one of the three measures displayed. Nonetheless, the <strong class="screentext">Top N</strong> condition filters out all products, including some of the top-selling products for the current year that weren’t one of the top five products in the prior year.</p>
    <p class="fm-booktitle">With a <strong class="screentext">Top N</strong> filter defined between a column and a measure, the report author can optionally remove the column being filtered from the visual or replace it with a different column. For example, the <strong class="screentext">$3,193,810</strong> in <strong class="screentext">Internet Net Sales </strong>(<strong class="screentext">YTD</strong>) associated with the top five products from the prior year could be visualized by <strong class="screentext">Occupation</strong> instead of <strong class="screentext">Product Name</strong>. </p>
    <p class="fm-booktitle">Alternatively, all columns except the <strong class="screentext">Internet Net Sales </strong>(<strong class="screentext">YTD</strong>) measure could be removed from the table visual, and a card or KPI visual could be used to visualize the <strong class="screentext">$3,193,810</strong> value. The column referenced by the <strong class="screentext">Top N</strong> filter condition only needs to be included in the visual when the filter condition is originally defined.</p>
    <p class="fm-booktitle">The <code class="inlinecode">TOPN()</code> DAX function emulates top N filtering by returning a filtered table based on an expression (such as a net sales measure). As a table, the results of this function can be passed as a filter argument to <code class="inlinecode">CALCULATE()</code> in a separate measure. For example, a measure could be created to compute the sales for the top 100 customers based on <strong class="screentext">Internet Net Sales</strong> (<strong class="screentext">PYTD</strong>).</p>
    <p class="fm-booktitle">In addition to filtering scopes, another report planning and design consideration involves the use of bookmarks.</p>
    <h1 id="calibre_link-211" class="heading">Bookmarks</h1>
    <p class="fm-booktitle"><strong class="screentext">Bookmarks</strong> enable report authors to save specific states of reports for easy access and sharing with others. For example, an<a id="calibre_link-566" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> important or common view of a report page that involves filter conditions across several columns can be saved as a bookmark for easy access at a later time via a command button, the bookmark navigator control, or the bookmark dropdown in the Power BI service. </p>
    <p class="fm-booktitle">By persisting the exact state of a report page, such as whether a visual is visible, bookmarks enable report authors to deliver application-like experiences for their users. For example, rather than expecting or asking users to navigate to separate report pages or to apply certain filters, bookmarks containing these different visuals and filter contexts could be readily available to the user.</p>
    <p class="fm-booktitle">By default, bookmarks represent the entire state of a report page, including all filter selections and the properties of the visuals (for example, hidden or not). However, bookmarks can also optionally be associated with only a few visuals on a report page. Additionally, report authors can choose to avoid persisting any filter or slicer selections and rather only save visual properties on the page. These granular controls, along with the <strong class="screentext">Selections</strong> pane and linking support from images and shapes, enable report authors to create rich and compelling user experiences.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.22</em>, 12 bookmarks have been created for a European sales report:</p>
    <figure class="mediaobject"><img src="images/000405.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.22: Bookmarks pane</p>
    <p class="fm-booktitle">Bookmarks are created via the <strong class="screentext">Add</strong> icon at the top of the <strong class="screentext">Bookmarks</strong> pane. With the <strong class="screentext">Bookmarks</strong> pane visible via the <strong class="screentext">View</strong> tab in <strong class="screentext">Report</strong> view, a report author can develop a report page with the filters and visual layout required and then click the <strong class="screentext">Add</strong> icon to save these settings as a bookmark. As per <em class="italic">Figure 6.22</em>, the ellipsis at the right of the bookmark’s name can be used to <strong class="screentext">Update</strong> bookmarks to reflect the current state and to <strong class="screentext">Rename</strong> and <strong class="screentext">Delete</strong> bookmarks. Additionally, bookmarks can be grouped together. For example, all of the <strong class="screentext">United Kingdom</strong> bookmarks are grouped into a single folder that can be expanded or collapsed. </p>
    <p class="fm-booktitle">The second group<a id="calibre_link-567" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of bookmark options, underneath the <strong class="screentext">Group</strong> option, allows report authors to customize what is stored by the bookmark. The <strong class="screentext">Data</strong> category includes the report-, page-, and visual-level filters, slicer selections, the drill location if a visual has been drilled into, any cross-highlighting of other visuals, and any sort of orders applied to visuals. The <strong class="screentext">Display</strong> category includes whether a visual is hidden or not, the <strong class="screentext">Spotlight</strong> property, <strong class="screentext">Focus mode</strong>, and the <strong class="screentext">Show Data</strong> view. By disabling the <strong class="screentext">Data</strong> category for a bookmark, a user’s selections on slicers or other visuals are not overridden when the bookmark is accessed. Finally, the <strong class="screentext">Current page</strong> option determines whether the user is automatically navigated to the current page.</p>
    <p class="fm-booktitle">The third group of bookmark options, immediately beneath the <strong class="screentext">Current page</strong> option, controls the scope of the bookmark to either apply to <strong class="screentext">All visuals</strong> on the page or only to specific, <strong class="screentext">Selected visuals</strong>. These options provide the report author with flexibility when creating the report and are often used in storytelling to walk others through interesting insights.</p>
    <p class="fm-booktitle">The creative use of bookmarks can help reduce the number of report pages and duplicate visuals required for reports. For example, all 12 of the bookmarks shown in <em class="italic">Figure 6.7</em> reference the same page. Thus, instead of creating 4 pages with duplicate visuals and the only difference being the country, bookmarks allow a single page to service an overall summary of all of <strong class="screentext">Europe</strong> as well as each individual country &ndash; <strong class="screentext">France</strong>, <strong class="screentext">Germany</strong>, and the <strong class="screentext">United Kingdom</strong>.</p>
    <h2 id="calibre_link-212" class="calibre9">Selection pane and the Spotlight property</h2>
    <p class="fm-booktitle">The <strong class="screentext">Selection</strong> pane <a id="calibre_link-570" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and the <strong class="screentext">Spotlight</strong> property for visuals are both closely related <a id="calibre_link-571" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>features to <strong class="screentext">Bookmarks</strong>. The <strong class="screentext">Selection</strong> pane is accessed via the <strong class="screentext">View</strong> tab in <strong class="screentext">Report</strong> view and displays all objects of the selected<a id="calibre_link-2016" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report page, including visuals, images, and shapes. Although most commonly used with <strong class="screentext">Bookmarks</strong>, the <strong class="screentext">Selection</strong> pane is also <a id="calibre_link-1673" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>helpful when developing report pages that contain many visuals and objects. Selecting an object from the <strong class="screentext">Selection</strong> pane provides access to the properties associated with that object (for example, field inputs and formatting cards) as though the object was selected on the report canvas.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.23</em>, the <strong class="screentext">Slicer</strong> visuals originally used to create the bookmarks are hidden for each bookmark since the bookmarks handle filtering to the correct <code class="inlinecode">Country</code> and <code class="inlinecode">Product Category</code> selections:</p>
    <figure class="mediaobject"><img src="images/000235.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.23: Selection pane and the Bookmarks pane</p>
    <p class="fm-booktitle">In the <strong class="screentext">Selection</strong> pane, the icons next to the visuals toggle between <strong class="screentext">Show</strong> (eye symbol) and <strong class="screentext">Hide</strong> (eye symbol with slash). The ellipses menu next to the Show/Hide toggle icon provides the ability to <strong class="screentext">Group</strong> visuals as well as a <strong class="screentext">Summarize</strong> feature. Grouping allows visuals to be organized together. For example, in <em class="italic">Figure 6.23</em>, the <strong class="screentext">Slicer</strong> visuals have been grouped into a <strong class="screentext">Hidden</strong> group. The Show/Hide toggle can then be set for the entire group instead of each visual independently. The <strong class="screentext">Summarize</strong> option generates a <strong class="screentext">Smart narrative</strong> visual for the selected visual. </p>
    <p class="fm-booktitle">The <strong class="screentext">Spotlight</strong> property, accessed via the ellipsis in the corner of any visual, draws attention to the<a id="calibre_link-572" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> specific visual by making all other visuals on the report page fade into the background.</p>
    <p class="fm-booktitle"><strong class="screentext">Spotlight</strong> is particularly <a id="calibre_link-1738" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>useful in supporting presentations via <strong class="screentext">Bookmarks</strong>. For example, in the <strong class="screentext">View</strong> mode described later in this section, one bookmark could display a report page of visuals normally and the following bookmark could highlight a single visual to call out a specific finding or an important trend or result. <strong class="screentext">Spotlight</strong> may also be helpful for presenters in explaining more complex visuals with multiple metrics and/or dimension columns.</p>
    <p class="fm-booktitle">As an alternative to <strong class="screentext">Spotlight</strong>, <strong class="screentext">Focus mode</strong> can also be saved as a bookmark. <strong class="screentext">Focus mode</strong> can be applied via the diagonal arrow icon in the corner of chart visuals and fills the entire report canvas with a single visual. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.24</em>, the <strong class="screentext">Spotlight</strong> property has been enabled for a scatter chart on the Europe report page:</p>
    <figure class="mediaobject"><img src="images/000338.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.24: Report page with Spotlight enabled on the scatter chart</p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.24,</em> the other visuals (four cards and a bar chart) are still visible, but the scatter chart is emphasized via the <strong class="screentext">Spotlight</strong> property. With <strong class="screentext">Spotlight</strong> enabled, the report author could add a bookmark with an intuitive name (for example, <strong class="screentext">Europe Summary: Customer Segment and Country Scatter</strong>) to save this specific view. Referencing this bookmark in a meeting or presentation makes it easier to explain the meaning and insights of the scatter chart. </p>
    <p class="fm-booktitle">While bookmarks<a id="calibre_link-573" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> are useful on their own for preserving the state of visuals and filtering, bookmarks can also be used as an aid to navigate within a set of report pages.</p>
    <h2 id="calibre_link-213" class="calibre9">Custom report navigation</h2>
    <p class="fm-booktitle">Bookmarks can also <a id="calibre_link-568" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>be assigned as links to shapes and images. With multiple bookmarks created across multiple report pages, a visual table of contents can be created to aid the user’s navigation of a report. Rather than opening and browsing the <strong class="screentext">Bookmarks</strong> pane, users can simply click images or shapes associated with specific bookmarks, and a back button can be used to return to the <strong class="screentext">Table of contents</strong> page.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.25</em>, nine images have been positioned within a rectangle shape and linked to bookmarks in the report:</p>
    <figure class="mediaobject"><img src="images/000415.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.25: Custom navigation to bookmarks</p>
    <p class="fm-booktitle">Three rectangle shapes and three line shapes are used to form the matrix of icons and three text boxes display the headers. Shapes, images, and text boxes can be added from the <strong class="screentext">Insert</strong> tab of <strong class="screentext">Report</strong> view. With a shape, image, or text box selected, the <strong class="screentext">Format</strong> tab appears in the ribbon, allowing the author to align and distribute the objects, as well as moving certain objects forward or backward on the canvas. Grouping similar objects within shapes is a common practice for improving usability.</p>
    <p class="fm-booktitle">In addition to the <strong class="screentext">Format</strong> tab, when a shape, image, or text box is selected, the <strong class="screentext">Visualizations</strong> pane is replaced with a <strong class="screentext">Format shape</strong>, <strong class="screentext">Format image</strong>, and <strong class="screentext">Format text box</strong> pane, respectively. </p>
    <p class="fm-booktitle">With an image or a shape selected, an <strong class="screentext">Action</strong> formatting card can be enabled to choose between <strong class="screentext">Back</strong>, <strong class="screentext">Bookmark</strong>, <strong class="screentext">Page navigation</strong>, <strong class="screentext">Q&amp;A</strong>, or <strong class="screentext">Web URL</strong> actions. In <em class="italic">Figure 6.26</em>, the France flag image positioned under the <strong class="screentext">Bikes Only</strong> heading is linked to the <strong class="screentext">France: Bikes Only</strong> bookmark: </p>
    <figure class="mediaobject"><img src="images/000215.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.26: Link formatting card for images and shapes</p>
    <p class="fm-booktitle">The combination of custom navigation and bookmarks representing many specific views or reports pages contributes to an easier, more productive experience for users. When designed properly, the <a id="calibre_link-569" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>user often doesn’t need to know which page or bookmark to navigate to or which filters to apply as this logic is already built into the report. </p>
    <p class="fm-booktitle">In addition to using bookmarks for report navigation via images, shapes, and buttons, a special view mode exists, which is especially useful for presentations.</p>
    <h2 id="calibre_link-214" class="calibre9">View mode</h2>
    <p class="fm-booktitle">The <strong class="screentext">View</strong> icon in the <strong class="screentext">Bookmarks</strong> pane can be used in both Power BI Desktop and in the Power BI service to navigate <a id="calibre_link-574" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>between visuals similar to a slideshow. When <strong class="screentext">View</strong> mode is enabled, a navigation bar similar to that shown in <em class="italic">Figure 6.27</em> appears at the bottom of the<a id="calibre_link-1816" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> canvas and the user can close other panes and/or launch full-screen mode in the Power BI service to further support the presentation:</p>
    <figure class="mediaobject"><img src="images/000176.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.27: View mode navigation</p>
    <p class="fm-booktitle">As per <em class="italic">Figure 6.27</em>, the number and order of bookmarks, bookmark names, and navigation arrows are included in the <strong class="screentext">View</strong> mode navigation. Bookmarks are ordered based on their position in the <strong class="screentext">Bookmarks</strong> pane from the top to the bottom. To revise the order, drag and <a id="calibre_link-575" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>drop bookmarks to higher or lower positions in the <strong class="screentext">Bookmarks</strong> pane, or select a bookmark and use the up and down arrow icons to adjust the order of the bookmark.</p>
    <p class="fm-booktitle">We now consider report development using Live connections to Power BI datasets.</p>
    <h1 id="calibre_link-215" class="heading">Live connections to Power BI datasets</h1>
    <p class="fm-booktitle">An optional but very important report planning and design decision is whether or not to develop the data <a id="calibre_link-1375" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>model and report visuals within the same Power BI Desktop file or to separate the report from the dataset into separate files. As a general <a id="calibre_link-1083" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>recommendation, if there’s any possibility that additional reports will be needed in the future based on the same dataset, the dataset and report should be separated into separate files and likely separate workspaces as well.</p>
    <p class="fm-booktitle">With Live connections to Power BI datasets, report authors can develop reports in Power BI Desktop files containing only the visualization layer (report pages of visuals) while leveraging a single, “golden” dataset. Increasingly organizations will isolate these source datasets, which are typically maintained by an IT or BI department, into Power BI workspaces that only the IT or BI organization has edit rights to. Report authors and users of these source datasets are granted read and optionally build permission to these dataset.</p>
    <p class="fm-booktitle">The dataset (data layer) already includes the data retrieval supporting tables and columns, the data model relationships, and the DAX measures or calculations as described in previous chapters. Once the Live connection report is developed and published to Power BI, it maintains its connection to the source dataset and is refreshed with the refresh schedule configured for the dataset.</p>
    <p class="fm-booktitle">In the absence of using Live connection reports to Power BI datasets, users within teams would be forced to create multiple versions of the same dataset in order to create different reports. As both a report and a dataset, each individual report would require its own scheduled refresh process (in import mode), its own data storage, and would create version control problems as the report author could modify the underlying dataset.</p>
    <p class="fm-booktitle">Live connection reports therefore<a id="calibre_link-2017" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> severely reduce resource requirements and promote a single version of the truth. Moreover, Live connection reports facilitate the isolation of report design and development from dataset design and development. </p>
    <p class="fm-booktitle">Most Power BI<a id="calibre_link-1376" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report authors are not interested in, or responsible for, dataset design topics, such as data retrieval with M queries, data modeling, and DAX measures. Likewise, a dataset designer is often less interested in, or responsible for, visualization best practices and engagement with the actual users of reports and dashboards. </p>
    <p class="fm-booktitle">As advised in <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, the alternative roles (dataset designer and report author) need to collaborate regularly, such as identifying measures or columns that need to be added to the dataset to support reports and dashboards. </p>
    <p class="fm-booktitle">To create a Live connection report with a published Power BI dataset as the source, the report author needs a Power BI Pro license. Additionally, the tenant setting <strong class="screentext">Allow live connections</strong> under the <strong class="screentext">Export and sharing settings</strong> section must be enabled. Finally, if the tenant setting <strong class="screentext">Use datasets across workspaces</strong> under the <strong class="screentext">Workspace settings</strong> section is configured, then the Live connection reports can be published to a different workspace than where the underlying dataset is published.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.28</em>, the report author can Live connect to datasets in many different workspaces:</p>
    <figure class="mediaobject"><img src="images/000225.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.28: Creating a Live connection to the Power BI dataset</p>
    <p class="fm-booktitle">After selecting the <strong class="screentext">Power BI datasets</strong> from the list of <strong class="screentext">Power Platform</strong> sources within the <strong class="screentext">Get Data</strong> dialog, the list of the<a id="calibre_link-1084" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> workspaces of which the report author is a member is prompted. </p>
    <p class="fm-booktitle">In this example, either <a id="calibre_link-1377" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>double-clicking a dataset or selecting a dataset and clicking the <strong class="screentext">Create</strong> button establishes the Live connection as per the status bar (lower right-hand corner) in Power BI Desktop, as shown in <em class="italic">Figure 6.29</em>:</p>
    <figure class="mediaobject"><img src="images/000339.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.29: Live connection status bar</p>
    <p class="fm-booktitle">When connected in Live mode, the <strong class="screentext">Fields</strong> pane that lists the columns, measures, and tables in the dataset is exposed in <strong class="screentext">Report</strong> view and the tables and relationships are shown in the <strong class="screentext">Relationship</strong> view. However, the <strong class="screentext">Data</strong> view is not available. </p>
    <p class="fm-booktitle">In the past, Live reports were always limited to a single data model as a source. However, with the advent of composite models and DirectQuery for Power BI datasets, a local model can be added to a Live connection report, as discussed in <em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery, and Composite Data Models</em>.</p>
    <p class="fm-booktitle">It’s possible to create reports based on Power BI datasets within the Power BI online service. However, the <code class="inlinecode">.pbix</code> files for these reports cannot be downloaded and thus, all edits must be implemented<a id="calibre_link-2018" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> within the service without version history. Additionally, several important report authoring features in Power BI Desktop are not supported in the service, including the alignment of objects and local report measures. </p>
    <p class="fm-booktitle">Given these considerations, Power BI Desktop is recommended for any report development beyond <a id="calibre_link-2019" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>personal or ad hoc use. Guidance on version history for Power BI Desktop files (reports and datasets) is included in <em class="italic">Chapter 10</em>, <em class="italic">Managing Application Workspaces and Content</em>. </p>
    <p class="fm-booktitle">We continue our exploration of Live connection reports by reviewing the ability to customize such reports.</p>
    <h2 id="calibre_link-216" class="calibre9">Customizing Live connection reports</h2>
    <p class="fm-booktitle">Although data <a id="calibre_link-1081" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>modeling and retrieval capabilities are removed in purely Live connection reports (non-composite model), report authors can create new measures specific to the given report via the <strong class="screentext">New measure</strong> icon under the <strong class="screentext">Modeling</strong> and <strong class="screentext">Table tools</strong> tabs. </p>
    <p class="fm-booktitle">Additionally, report authors can change the names of measures and columns displayed in reports using the field wells for visualization in the <strong class="screentext">Visualizations</strong> pane. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 6.30</em>, the <code class="inlinecode">Internet Net Sales</code> measure and the <code class="inlinecode">SalesTerritoryCountry</code> column have been renamed to <code class="inlinecode">Net Sales</code> and <code class="inlinecode">Country</code>, respectively:</p>
    <figure class="mediaobject"><img src="images/000172.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.30: Renamed measure and column in visual</p>
    <p class="fm-booktitle">Double-clicking the name of the column or measure in the field well(s) for the visual exposes an input box for the revised name. As per the preceding diagram, the revised names appear in the report visual and the <strong class="screentext">Tooltips</strong> in the field wells indicate the source column or measure. In this example, the <code class="inlinecode">Internet Net Sales</code> measure, with a home table of the <code class="inlinecode">Internet Sales</code> fact table, is the source for the <code class="inlinecode">Net Sales</code> alias name.</p>
    <p class="fm-booktitle">Although the flexibility to<a id="calibre_link-1082" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> create measures and apply names within reports is helpful and appropriate in certain scenarios, these revisions can create complexity and version control issues. For example, users can become accustomed to specific measures and names that the dataset designer is not aware of and that may conflict with other measures or names in the dataset. Therefore, it’s generally recommended to incorporate the necessary measure logic and standard names into the source dataset. </p>
    <p class="fm-booktitle">Next, we look at two different scenarios involving switching between or to Live datasets, starting with switching from one Live source dataset to another.</p>
    <h2 id="calibre_link-217" class="calibre9">Switching Live source datasets</h2>
    <p class="fm-booktitle">In many project<a id="calibre_link-1079" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> scenarios, a Power BI report is initially built against a development or testing dataset. After this report has been validated or received the proper approvals, the report’s source dataset can be switched to a production dataset and the report can then be published to the production workspace used for distributing Power BI content to users.</p>
    <p class="fm-booktitle">To switch the Power BI dataset of a Live connection report, click <strong class="screentext">Data Source settings</strong> under the <strong class="screentext">Transform data</strong> drop-down menu on the <strong class="screentext">Home</strong> tab, as shown in <em class="italic">Figure 6.31</em>:</p>
    <figure class="mediaobject"><img src="images/000183.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 6.31: Data source settings for a Live connection report</p>
    <p class="fm-booktitle">The same dialog is presented as shown in <em class="italic">Figure 6.28</em>. Simply select a different dataset and click the <strong class="screentext">Create</strong> button. See <em class="italic">Chapter 10</em>, <em class="italic">Managing Application Workspaces and Content</em>, for details on Power BI project life cycles, such as migrating from development to production environments and version control.</p>
    <p class="fm-booktitle">Next, we look at<a id="calibre_link-1080" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> another dataset switching scenario, this time between an import mode dataset and a Live source dataset.</p>
    <h2 id="calibre_link-218" class="calibre9">Switching between import mode and Live mode datasets</h2>
    <p class="fm-booktitle">Another common <a id="calibre_link-1374" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>scenario is that report development begins with an import mode dataset for creating report visuals as a <strong class="screentext">proof-of-concept</strong> (<strong class="screentext">POC</strong>). Subsequently, as the project progresses, it becomes advantageous to separate data modeling from report development. </p>
    <p class="fm-booktitle">It’s possible to convert an import mode dataset that contains report visuals in the same file into two separate artifacts, a dataset and a report connected to this dataset, using the following procedure: </p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Publish the dataset with the report to a workspace in the Power BI service.</li>
      <li class="calibre13">Make a copy of the PBIX file containing the dataset and the report visuals. </li>
      <li class="calibre13">In the copied PBIX file, open Power Query Editor and delete all source queries. Ensure that all dataset tables are removed from the file.</li>
      <li class="calibre13">Exit Power Query Editor and return to Power BI Desktop. The report visuals should now (temporarily) return an error. </li>
      <li class="calibre13">On the <strong class="screentext">Home</strong> tab of <strong class="screentext">Report</strong> view, click <strong class="screentext">Power BI Datasets</strong> in the <strong class="screentext">Data</strong> section of the ribbon and connect your file to the dataset published as part of <em class="italic">step 1</em>. </li>
    </ol>
    <p class="fm-booktitle">The report visuals should load normally as though the data was still local to the file and now the report has a Live connection to the Power BI dataset.</p>
    <p class="fm-booktitle">This concludes our advice regarding Live connections to Power BI datasets. We’ll next explore the topic of some best practices with regard to visualizations.</p>
    <h1 id="calibre_link-219" class="heading">Report design summary</h1>
    <p class="fm-booktitle">As a data<a id="calibre_link-1601" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> visualization and analytics platform, Power BI provides a vast array of features and functionality for report authors to develop compelling content that helps users to derive insights. </p>
    <p class="fm-booktitle">Given the volume of features and possible formatting configurations, report authors and BI teams generally want to follow a set of report planning and design practices to ensure that report content of a consistent quality is delivered to stakeholders. These practices include report planning in terms of scope, users, and use cases, data visualization practices, and the selection of visuals. </p>
    <p class="fm-booktitle">The <em class="italic">Report planning process, Visualization best practices</em>, and <em class="italic">Choosing the right visual</em> sections earlier in this chapter provided details on many of the recommended practices to develop effective and sustainable report content. As a standard summary-level review of report creation, at the conclusion of a development phase and prior to deployment, the following list of questions should be asked:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Does the report have a clear scope and use case?<p class="normal1">The report addresses specific business questions of value to specific users or teams that consume the report. The relationship and distinction between this report and other reports or dashboards that the users have access to are understood. The pages of the report naturally relate to one another to address the same or closely related business questions, perhaps at alternative levels of detail.</p>
      </li>
      <li class="calibre13">Have standard visualization practices been followed?<p class="normal1">The visuals have proper spacing, alignment, and symmetry. The reports use colors selectively and there are clear titles on report pages and visuals. The report is intuitive and not cluttered with unnecessary details</p>
      </li>
      <li class="calibre13">Have the right visuals been chosen to represent the data?<p class="normal1">Tables and matrices were used when cross-referencing or looking up individual values was necessary. The type of data relationship to represent (for example, comparison) and the relative advantages of the different visuals, such as line charts for the trends of a value, drove the visual choice.</p>
      </li>
      <li class="calibre13">Does the report enable the user to easily apply filters and explore the data?<p class="normal1">Slicer visuals for common or important columns have been utilized and are easily accessible to users. The filtering and cross-highlighting interactions between the visuals on the report pages have been considered and configured appropriately. Hierarchies of columns have been built into certain visuals to allow a simple drill-up and drill-down experience</p>
      </li>
      <li class="calibre13">Does the report aid the user in identifying insights or exceptions?<p class="normal1">Dynamic formatting, such as with KPI visuals and conditional formatting rules and techniques, has been applied. Tooltips have been added to report visuals to provide the user with additional context by hovering over the visual, such as the columns in a column chart or the data points in a line chart.</p>
      </li>
      <li class="calibre13">Have simple and sustainable filter conditions been applied at the appropriate scope?<p class="normal1">Report- and page-level filter scopes have been applied to minimize the resources required by the queries generated by the report. Visual-level filters are only<a id="calibre_link-1602" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> used when the visual needs to reflect an alternative filter context of the report- and page-level filter scopes. Report filter conditions are not being used to address issues with data quality or the source dataset. Efforts have been made (or will be made) to enhance the source dataset to better support the report. Filter conditions on the date dimension are dynamic and sustainable (for example, <strong class="screentext">Current Year</strong> and <strong class="screentext">Prior Year</strong>) rather than hardcoded values (for example, <strong class="screentext">2018</strong> and <strong class="screentext">2017</strong>).</p>
      </li>
    </ol>
    <p class="fm-booktitle">This concludes our exploration of the report planning process and other important concepts related to report planning and design.</p>
    <h1 id="calibre_link-220" class="heading">Summary</h1>
    <p class="fm-booktitle">In this chapter, we walked through the fundamental components of Power BI report planning and design, including visualization best practices, Live connections to Power BI datasets, and the filter scopes available in Power BI Desktop. We also reviewed the overall report planning process and introduced the report architecture diagram as a tool to aid in that planning.</p>
    <p class="fm-booktitle">The following chapter is also dedicated to report development, but goes well beyond the fundamental design concepts and features introduced in this chapter. The next chapter explores the basics of report authoring, including an exploration of the different visuals and formatting features available during report development. </p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-1877">
<div id="calibre_link-2020" class="calibre2">
<div id="calibre_link-2021" class="calibre3"><div id="calibre_link-2022" class="calibre4">
    <h1 class="heading">7</h1>
    <h1 id="calibre_link-221" class="mainheading">Creating and Formatting Visualizations</h1>
    <p class="fm-booktitle">With the report planning and design phases described in the previous chapter completed, this chapter dives into report development. This includes the creation and formatting of standard Power BI visuals such as slicers, cards, and maps as well as supporting elements such as text boxes, buttons, shapes, and images.</p>
    <p class="fm-booktitle">Visualizations are the building blocks of reports. A combination of distinct visuals, each with their own formatting and data represented at different granularities and filter contexts, enables Power BI reports to generate insights and to support data story telling. The ability to create and apply formatting to visualizations is fundamental knowledge for all report authors.</p>
    <p class="fm-booktitle">In this chapter, we review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">The <strong class="screentext">Visualizations</strong> pane</li>
      <li class="bulletlist">Slicers</li>
      <li class="bulletlist">Single-value visuals</li>
      <li class="bulletlist">Map visuals</li>
      <li class="bulletlist">Waterfall charts</li>
      <li class="bulletlist">Power Platform visuals</li>
      <li class="bulletlist">Premium visuals</li>
      <li class="bulletlist">Elements</li>
      <li class="bulletlist">Formatting visualizations</li>
    </ul>
    <p class="fm-booktitle">We start with a brief overview of the Visualizations pane.</p>
    <h1 id="calibre_link-222" class="heading">The Visualizations pane</h1>
    <p class="fm-booktitle">While in the <strong class="screentext">Report view</strong>, the <strong class="screentext">Visualizations</strong> pane <a id="calibre_link-1833" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>provides the primary interface for creating and formatting visuals. The <strong class="screentext">Visualizations</strong> pane includes three sub-panes, the <strong class="screentext">Build visual</strong>, <strong class="screentext">Format</strong>, and <strong class="screentext">Analytics</strong> panes, as shown in <em class="italic">Figure 7.1</em>:</p>
    <figure class="mediaobject"><img src="images/000023.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.1: The Visualizations pane’s sub-panes</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.1</em>, the <strong class="screentext">Build visual</strong> sub-pane is located on the left, the <strong class="screentext">Format</strong> sub-pane in the center, and the <strong class="screentext">Analytics</strong> sub-pane on the right. The <strong class="screentext">Analytics</strong> sub-pane is discussed in greater depth in the next chapter.</p>
    <p class="fm-booktitle">The <strong class="screentext">Build visual</strong> sub-pane, as its name suggests, is used for creating visuals. By default, 40 icons representing different visualization types are displayed and can be used to create visuals. In addition, when a visual is selected on the report page, the <strong class="screentext">Build visual</strong> sub-pane presents one or more <strong class="screentext">field wells</strong> used to configure the visual as shown in <em class="italic">Figure 7.2</em>:</p>
    <figure class="mediaobject"><img src="images/000033.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.2: Field wells</p>
    <p class="fm-booktitle">Field wells are simply areas where columns and measures from the <strong class="screentext">Fields</strong> pane can be dragged and dropped. In <em class="italic">Figure 7.2</em>, a column chart visual has three main field wells, <strong class="screentext">Axis</strong>, <strong class="screentext">Legend</strong>, and <strong class="screentext">Values</strong>. Depending on the visual, field wells accept one or multiple columns and/or measures.</p>
    <p class="fm-booktitle">Once a visualization is created <a id="calibre_link-1834" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and selected on the report canvas, the <strong class="screentext">Format</strong> sub-pane provides two tabs, <strong class="screentext">Visual </strong>and <strong class="screentext">General</strong>, used to configure various properties such as size, position, colors, and font sizes as shown in <em class="italic">Figure 7.3</em>:</p>
    <figure class="mediaobject"><img src="images/000043.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.3: Format sub-pane</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.3</em>, each tab includes multiple sections, such as the <strong class="screentext">Properties</strong> section, and each section includes one or more format cards such as <strong class="screentext">Size</strong> and <strong class="screentext">Position</strong>. The <strong class="screentext">Format</strong> sub-pane is explored in greater depth in <em class="italic">the Formatting visualizations</em> section later in this chapter.</p>
    <p class="fm-booktitle">With a basic overview of the <strong class="screentext">Visualizations</strong> pane complete, we move on to an exploration of specific visualization types, starting with slicers.</p>
    <h1 id="calibre_link-223" class="heading">Slicers</h1>
    <p class="fm-booktitle">Slicer visuals are interactive controls added <a id="calibre_link-1711" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to the report canvas to enable report users to apply their own filter selections to an individual report page. Given their power and flexible support for multiple data types, slicers have been a staple of Power BI interactive reports for years.</p>
    <p class="fm-booktitle">Slicers are a central element of self-service functionality in Power BI in addition to the visual interaction behavior described in the previous chapter. The standard slicer visual displays the unique values of a single column enabling report users to apply their own filter selections to all or some visuals on a report page. </p>
    <p class="fm-booktitle">However, although slicer visuals are still fully supported and a great addition to many reports, Power BI now also supports a <strong class="screentext">Filters</strong> pane<a id="calibre_link-1004" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> that can be exposed to users to deliver essential self-service filtering without requiring additional report canvas space or additional queries. Given the availability and advantages of the <strong class="screentext">Filters</strong> pane, report authors should only use slicers for the most common or frequently used fields for filtering. Fields that are less<a id="calibre_link-1712" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> frequently used to apply filters can be added to the <strong class="screentext">Filters</strong> pane.</p>
    <p class="fm-booktitle">Power BI Desktop provides several formatting and filter condition options available based on the data type of the column. <em class="italic">Figure 7.4</em> contains three sample slicer visuals with each slicer representing a different data type (text, number, date):</p>
    <figure class="mediaobject"><img src="images/000053.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.4: Slicer visuals</p>
    <p class="fm-booktitle">In this example, the three slicers filter for two sales territory countries (<strong class="screentext">Australia</strong> and <strong class="screentext">France</strong>), a range of product list prices <strong class="screentext">($500</strong> to <strong class="screentext">$2,500</strong>), and the last <strong class="screentext">30 Days</strong> inclusive of the current date (12/25/2021 to 1/23/2022). Filter condition rules are available for numeric and date columns in slicers, such as greater than or equal to $500 and after 5/1/2021, respectively. </p>
    <p class="fm-booktitle">See the <em class="italic">Report filter conditions</em> and <em class="italic">Relative date filtering</em> sections from the previous chapter for additional details on relative date filters.</p>
    <p class="fm-booktitle">By default, <strong class="screentext">Multi-select with CTRL</strong> is enabled on the <strong class="screentext">Selection</strong> card of <strong class="screentext">Slicer settings</strong>. This setting requires users to hold down the <em class="italic">Ctrl</em> key to select multiple items. For slicer visuals with many unique values, and when users regularly need to exclude only one or a few items, enabling the <strong class="screentext">Show “Select all” option</strong> can improve usability.</p>
    <p class="fm-booktitle">Additionally, for slicers based on text data-type columns, users can search for values via the ellipsis menu (<strong class="screentext">…</strong>) that appears at the top right or bottom right of the visual. Alternatively, a search box can be activated by toggling the <strong class="screentext">Search</strong> settings to <strong class="screentext">On</strong> in the <strong class="screentext">Options</strong> card of <strong class="screentext">Slicer settings</strong>.</p>
    <p class="fm-booktitle">To preserve space on the report canvas, the<a id="calibre_link-2023" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> slicer visual supports a drop-down option for all column data types. In <em class="italic">Figure 7.5</em>, a single value is selected for the country and date slicers but multiple values are selected for the price slicer:</p>
    <figure class="mediaobject"><img src="images/000065.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.5: Slicer visuals as dropdown</p>
    <p class="fm-booktitle">The drop-down option is most applicable for columns with many unique values. In addition, it’s recommended to group slicer visuals together near the edge of a report page. </p>
    <p class="fm-booktitle">Slicers are most commonly aligned on the left side of the page below the visuals in the top-left corner. If vertical canvas space is limited, slicers displayed in list format can be presented horizontally rather than vertically. The <strong class="screentext">Orientation</strong> formatting property (<strong class="screentext">Vertical</strong> or <strong class="screentext">Horizontal</strong>) is available on the <strong class="screentext">General</strong> formatting card. </p>
    <p class="fm-booktitle">One of the most powerful features of slicers is the ability to filter both the current report page and optionally other report pages from a single slicer visual. The details of utilizing this feature, referred to as <strong class="screentext">Slicer synchronization</strong>, are included in the following section. </p>
    <h2 id="calibre_link-224" class="calibre9">Slicer synchronization</h2>
    <p class="fm-booktitle">By default, slicer visuals only filter the other<a id="calibre_link-1721" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> visuals on the same report page. However, via the <strong class="screentext">Sync slicers</strong> pane, report designers can synchronize a slicer visual to also filter all other report pages or only specific report pages. This feature eliminates the need to include the same slicer on multiple report pages and thus simplifies the user experience. </p>
    <p class="fm-booktitle">For example, a common report may utilize three slicers (for example, Year, Product Category, Sales Country) and include four report pages. With slicer synchronization configured, the report user would only need to select values from these slicers on a single report page and the visuals from all four report pages would be updated to reflect these selections.</p>
    <p class="fm-booktitle">The <strong class="screentext">Sync slicers</strong> pane can be accessed from the <strong class="screentext">View</strong> tab of the ribbon in the <strong class="screentext">Report view</strong> as shown in <em class="italic">Figure 7.6</em>:</p>
    <figure class="mediaobject"><img src="images/000075.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.6: Sync slicers pane</p>
    <p class="fm-booktitle">Once selected as per <em class="italic">Figure 7.6</em>, the <strong class="screentext">Sync slicers</strong> pane <a id="calibre_link-1722" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>appears to the right of the report page. A slicer visual from the current report page can then be selected to configure its synchronization with other pages. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 7.7</em>, the <strong class="screentext">SalesTerritoryGroup</strong> slicer has been selected but has not yet been synchronized with other report pages:</p>
    <figure class="mediaobject"><img src="images/000087.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.7: Sync slicers pane with slicer selected</p>
    <p class="fm-booktitle">To quickly synchronize the slicer to all other report pages, simply click the <strong class="screentext">Add and sync with all pages</strong> link above the <strong class="screentext">Sync</strong> (double arrows) and <strong class="screentext">Visible</strong> (eyeball) icons. In this example, the <strong class="screentext">Add and sync with all pages</strong> command would apply checkmarks under the <strong class="screentext">Sync</strong> and <strong class="screentext">Visible</strong> icons for all four report pages. You could then uncheck the <strong class="screentext">Visible</strong> icons for the different pages. The <strong class="screentext">Sales Territory Group</strong> slicer would now filter all report pages but would only be visible on pages where the <strong class="screentext">Visible</strong> icon is checked.</p>
    <p class="fm-booktitle">Several other report design features <a id="calibre_link-2024" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are accessible from the <strong class="screentext">View</strong> tab, such as the <strong class="screentext">Bookmarks</strong> and <strong class="screentext">Selection</strong> panes, show <strong class="screentext">Gridlines</strong>, and <strong class="screentext">Snap to grid</strong>. The <strong class="screentext">Gridlines</strong> and <strong class="screentext">Snap to grid</strong> features simply aid in the positioning and alignment of visuals on the report canvas while the <strong class="screentext">Bookmarks</strong> and the <strong class="screentext">Selection</strong> panes are described in the <em class="italic">Bookmarks</em> section of <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>.</p>
    <p class="fm-booktitle">For reports with several report pages and common slicers, a single report page can be dedicated to slicer selections and not contain any other visuals. </p>
    <p class="fm-booktitle">Report designers can configure synchronization for each slicer on this page and instruct users to only use this page for applying their filter selections for all pages on the report. </p>
    <p class="fm-booktitle">Moreover, a back button can be added to report pages allowing the user to easily navigate back to the dedicated slicer report page. An example of using a back button is included in the <em class="italic">Drillthrough report pages</em> section of <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>, and additional information is included in the <em class="italic">Embellishments</em> section of this chapter.</p>
    <p class="fm-booktitle">Next, we look at a distinct use case<a id="calibre_link-1723" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> for slicers involving custom slicer parameters.</p>
    <h2 id="calibre_link-225" class="calibre9">Custom slicer parameters</h2>
    <p class="fm-booktitle">A powerful use case for slicer<a id="calibre_link-1713" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> visuals is to expose a custom list of parameter values <a id="calibre_link-692" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and drive one or multiple DAX measures based on the user’s selection. In the example shown in <em class="italic">Figure 7.8</em>, a slicer visual contains six date intelligence periods, and a custom DAX measure used in the central <strong class="screentext">Card</strong> visual, <strong class="screentext">User Selected Internet Net Sales</strong>, references the date intelligence measure corresponding to the user’s selection:</p>
    <figure class="mediaobject"><img src="images/000098.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.8: Slicer as a measure parameter</p>
    <p class="fm-booktitle">The table used for the slicer values could be defined within a source system and retrieved during data refresh like other tables. Alternatively, since the parameter values are unlikely to change, the table could be <a id="calibre_link-960" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>created within Power BI Desktop using an <strong class="screentext">Enter data</strong> query and loaded to the model but not included in a data refresh. Like all parameter tables, no relationships would be defined with other tables.</p>
    <p class="fm-booktitle">The custom measure <code class="inlinecode">User Selected Internet Net Sales</code> utilizes the <code class="inlinecode">SELECTEDVALUE()</code> and <code class="inlinecode">SWITCH()</code> functions to retrieve the user selection and then apply the appropriate date intelligence measure. </p>
    <p class="fm-booktitle">In this implementation, a DAX variable is used to store the period selection value, as per the following expression:</p>
    <pre class="programlisting"><code class="hljs-code">User Selected Internet Net Sales = 
    VAR __PeriodSelection = SELECTEDVALUE('Date Parameter'[Date Period Selection], "Year to Date")
RETURN
    SWITCH(TRUE(),
        __PeriodSelection = "Week to Date", [Internet Net Sales (WTD)],
        __PeriodSelection = "Month to Date", [Internet Net Sales (MTD)],
        __PeriodSelection = "Year to Date", [Internet Net Sales (YTD)],
        __PeriodSelection = "Prior Week to Date", [Internet Net Sales (PWTD)],
        __PeriodSelection = "Prior Month to Date", [Internet Net Sales (PMTD)],
        __PeriodSelection = "Prior Year to Date", [Internet Net Sales (PYTD)]
    )
</code></pre>
    <p class="fm-booktitle">The second parameter to the <code class="inlinecode">SELECTEDVALUE()</code> function ensures that the <strong class="screentext">Year to Date</strong> measure is used if multiple values have been<a id="calibre_link-693" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> selected or if no values have been selected. In <em class="italic">Figure 7.8</em>, the radio buttons indicate that the <strong class="screentext">Single select</strong> option has been set to <strong class="screentext">On</strong> in the <strong class="screentext">Selection</strong> card of the <strong class="screentext">Slicer settings</strong> in order to avoid multiple selections. The <strong class="screentext">Single select</strong> option disables the default behavior of allowing multiple selections<a id="calibre_link-1714" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> within a slicer. </p>
    <p class="fm-booktitle">If several additional DAX measures are driven by the parameter selection, a dedicated measure could be created that only retrieves the selected value. This supporting measure would then eliminate the need for the variable since the support measure could be referenced directly within the <code class="inlinecode">SWITCH()</code> function.</p>
    <p class="fm-booktitle">See <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, for example expressions of date intelligence measures as well as measure support expressions. Of course, it’s possible to fully define each date intelligence expression within the parameter-driven measure but, for manageability reasons, it’s almost always preferable to leverage an existing measure. This is particularly the recommendation when the required measures represent common logic, such as month-to-date.</p>
    <p class="fm-booktitle">In addition to using source system tables or <strong class="screentext">Enter data</strong> queries to create parameter tables, Power BI provides an alternative means known as <strong class="screentext">What-if parameters</strong>.</p>
    <h2 id="calibre_link-226" class="calibre9">What-if parameters</h2>
    <p class="fm-booktitle"><strong class="screentext">What-if parameters</strong> provide a user<a id="calibre_link-1718" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> interface for more easily creating parameter tables than the custom slicer parameter demonstrated in the previous section. This option is<a id="calibre_link-1844" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> currently limited to numeric parameter values but automatically creates a single-column table, slicer, and DAX measure that retrieves the slicer’s input value.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 7.9</em>, two <strong class="screentext">What-if parameters</strong> are used to calculate alternative unit price and unit cost values thereby driving a hypothetical product margin % measure:</p>
    <figure class="mediaobject"><img src="images/000108.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.9: What-if parameters applied in report visuals</p>
    <p class="fm-booktitle">By adjusting the two slider bars, a user is able to quickly model an alternative gross product margin % scenario, as illustrated by the dotted line in <em class="italic">Figure 7.9</em>. The slider bar for modifying a single value is unique to slicers for <strong class="screentext">What-if parameter</strong> columns.</p>
    <p class="fm-booktitle">To create a <strong class="screentext">What-if parameter</strong>, click the <strong class="screentext">New parameter</strong> icon on the <strong class="screentext">Modeling</strong> tab in the <strong class="screentext">Report view</strong> to launch the dialog shown in <em class="italic">Figure 7.10</em>:</p>
    <figure class="mediaobject"><img src="images/000117.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.10: Creating a What-if parameter</p>
    <p class="fm-booktitle">Based on the minimum, maximum, and<a id="calibre_link-1845" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> increment input values specified, a new table with a single column of values is created within the Power BI dataset. For the <code class="inlinecode">Internet Sales Unit Price Growth</code> parameter, this column has 21 rows from 0 to .2 with each value<a id="calibre_link-1719" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> representing a full percentage point (for example, 0%, 1%, 2%...20%). These tables are actually calculated tables created using DAX with formulas as follows:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Sales Unit Price Growth = GENERATESERIES(CURRENCY(0), CURRENCY(0.2), CURRENCY(0.01))
Internet Sales Unit Cost Growth = GENERATESERIES(CURRENCY(0), CURRENCY(0.2), CURRENCY(0.01))
</code></pre>
    <p class="fm-booktitle">Additionally, a new DAX measure is created automatically to retrieve the user selection, as per the following expressions: </p>
    <pre class="programlisting"><code class="hljs-code">Internet Sales Unit Price Growth Value = SELECTEDVALUE('Internet Sales Unit Price Growth'[Internet Sales Unit Price Growth], 0)
Internet Sales Unit Cost Growth Value = SELECTEDVALUE('Internet Sales Unit Cost Growth'[Internet Sales Unit Cost Growth], 0)
</code></pre>
    <p class="fm-booktitle">With the second argument to both functions set to <code class="inlinecode">0</code>, both growth values return zero if a selection hasn’t been made or if multiple values have been selected. The only remaining step is to create one or more <a id="calibre_link-1846" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures that reference the parameter values in their calculation logic. </p>
    <p class="fm-booktitle">In this example, the <strong class="screentext">Unit Price</strong> and <strong class="screentext">Unit Cost</strong> growth parameters are applied to gross sales and product cost scenario measures, respectively. These two scenario measures are then used to compute a <a id="calibre_link-1720" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>product margin scenario measure and a product margin % scenario measure, per the following expressions:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Gross Sales Scenario = [Internet Gross Sales] * (1 + [Internet Sales Unit Price Growth Value])

Internet Sales Product Cost Scenario = [Internet Cost of Sales] * (1 + [Internet Sales Unit Cost Growth Value])

Internet Gross Product Margin Scenario = [Internet Gross Sales Scenario] - [Internet Sales Product Cost Scenario]

Internet Gross Product Margin % Scenario = DIVIDE([Internet Gross Product Margin Scenario], [Internet Gross Sales Scenario])
</code></pre>
    <p class="fm-booktitle">Although it’s possible and sometimes necessary to create parameter columns and measures manually, the What-if parameter feature in Power BI Desktop can simplify this process for many modeling scenarios. Additionally, the slider bar slicer exclusive to the <strong class="screentext">What-if parameter </strong>columns is the most user-friendly option for selecting parameter values. </p>
    <p class="fm-booktitle">To change the range of values available to the parameter, select the <strong class="screentext">Parameter </strong>column in the <strong class="screentext">Fields</strong> pane and modify the min, max, or increment arguments to the <code class="inlinecode">GENERATESERIES()</code> function.</p>
    <p class="fm-booktitle">Considering that both slicers and the <strong class="screentext">Filters</strong> pane covered in the previous chapter can both filter an entire report page, you may be curious as to when to use one or the other, so we explore that topic in the next section.</p>
    <h2 id="calibre_link-227" class="calibre9">Page filter or slicer?</h2>
    <p class="fm-booktitle">Slicer visuals can serve as an<a id="calibre_link-1005" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> alternative to distinct or dedicated report pages. With a slicer, a <a id="calibre_link-1715" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>user has the flexibility to select one or multiple values on the same report page, such as Northeast and Southwest sales territories, without needing to navigate to a dedicated page. Additionally, by consolidating dedicated report pages, slicers can simplify report development and management.</p>
    <p class="fm-booktitle">Slicers are often the best choice when there’s nothing unique to the different values of the slicer. For example, if all sales regions are always analyzed by the same measures, dimensions, and visuals, it may be unnecessary to duplicate these pages of visuals. Slicers are also very helpful or necessary when users regularly need to analyze the data by the same dimensions or by custom dimensions, such as price and date ranges.</p>
    <p class="fm-booktitle">While the <strong class="screentext">Filters</strong> pane can be exposed to users and serve the same function as slicers, this can be less intuitive and require more training for end users. Conversely, the benefit of utilizing the <strong class="screentext">Filters</strong> pane for this function is that more report canvas space is available for non-slicer visuals.</p>
    <p class="fm-booktitle">In general, slicer visuals that consume a small amount of canvas, such as dropdowns, are preferable for dimensions that the user is expected to regularly apply filters on. Less common or “nice to have” filters can generally be added to the filter pane rather than slicer visuals to preserve canvas space and to avoid unnecessary queries.</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.11</em>, the <strong class="screentext">Filters</strong> pane allows filters to be hidden or locked by report authors via the circle and arc (eyeball) icon and lock icon respectively:</p>
    <figure class="mediaobject"><img src="images/000128.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.11: Filter pane filter locking and hiding</p>
    <p class="fm-booktitle">Dedicated report pages are valuable for supporting email subscriptions, data alerts, and dashboard visuals specific to a particular value such as a sales region. As shown in <em class="italic">Figure 7.12</em>, when in the Power BI service, an email subscription can be set to any of the report pages within the <strong class="screentext">USA SALES AND MARGIN</strong> report:</p>
    <figure class="mediaobject"><img src="images/000139.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.12: Email subscription in Power BI</p>
    <p class="fm-booktitle">As one example, the visuals from the <strong class="screentext">Northeast</strong> report page could potentially be pinned to a <strong class="screentext">Northeast</strong> dashboard (or another dashboard) and used in data alerts and notifications for the <strong class="screentext">Northeast</strong> team as<a id="calibre_link-1006" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> well. These region-specific capabilities are made possible by the distinct report pages of visuals filtered for the given <a id="calibre_link-1716" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>sales territory region.</p>
    <p class="fm-booktitle">If using dedicated report pages, it is likely that the report author will want to hide the <strong class="screentext">Filters</strong> pane entirely as shown in <em class="italic">Figure 7.13</em> or, alternatively, lock all of the filters within the <strong class="screentext">Filters</strong> pane.</p>
    <figure class="mediaobject"><img src="images/000150.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.13: Hiding the Filters pane when viewing report</p>
    <p class="fm-booktitle">This completes our review of slicers. We <a id="calibre_link-1007" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>next turn our attention to visuals <a id="calibre_link-1717" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>designed to primarily feature single number values.</p>
    <h1 id="calibre_link-228" class="heading">Single-value visuals</h1>
    <p class="fm-booktitle">Single-value visuals are a class of visuals <a id="calibre_link-1706" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>which prominently display an important value such as the YTD Sales or the % Variance to Plan. These visuals are typically positioned at the top and left sections of report pages and are commonly pinned to dashboards in the Power BI service. Though simple relative to other visuals, single value visuals are often the first visuals users perceive and these values relative to their expectations determine whether or not other visuals in the report are analyzed.</p>
    <h2 id="calibre_link-229" class="calibre9">The Card visual</h2>
    <p class="fm-booktitle"><strong class="screentext">Card</strong> visuals present a single <strong class="screentext">Fields</strong> field well that <a id="calibre_link-1707" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>accepts a single column or measure. <strong class="screentext">Card</strong> visuals are most often used to prominently display a single numeric<a id="calibre_link-621" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> value, such as an important business metric. While perhaps more limited and visually unappealing than the <strong class="screentext">KPI</strong> and <strong class="screentext">Gauge</strong> visual, <strong class="screentext">Card</strong> visuals are valued for their simplicity and ability to drive data alerts within the Power BI service. </p>
    <p class="fm-booktitle">That said, <strong class="screentext">Card</strong> visuals do include the ability to conditionally format the color for the displayed value and label, providing the ability to serve as a rudimentary KPI visual displaying different colors depending upon the overall health of the chosen metric.</p>
    <p class="fm-booktitle">Additionally, <strong class="screentext">Card</strong> visuals can also display text. This is a powerful feature when combined with measures, as demonstrated in the <em class="italic">Drillthrough report pages</em> section of the previous chapter.</p>
    <p class="fm-booktitle">Note that a version of the <strong class="screentext">Card</strong> visual exists <a id="calibre_link-1159" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>for displaying multiple numeric or text values called the <strong class="screentext">Multi-row card</strong> visual. The <strong class="screentext">Multi-row card</strong> visual also includes a single <strong class="screentext">Fields</strong> field well but accepts multiple columns and/or measures.</p>
    <p class="fm-booktitle">We now turn our attention to the standard KPI visual.</p>
    <h2 id="calibre_link-230" class="calibre9">The KPI visual</h2>
    <p class="fm-booktitle">The standard KPI visual packs <a id="calibre_link-1059" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>a tremendous amount of information within a single visual. The KPI visual is <a id="calibre_link-1709" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>popular for displaying key business metrics given its ability to display the current value of a business metric, the metric’s trend over time, and progress towards a specified goal all within a compact form factor.</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.14</em>, the KPI visual presents three field wells for <strong class="screentext">Indicator</strong>, <strong class="screentext">Trend axis</strong>, and <strong class="screentext">Target goals</strong>:</p>
    <figure class="mediaobject"><img src="images/000160.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.14: KPI visual</p>
    <p class="fm-booktitle">The <strong class="screentext">Indicator</strong> field well accepts a single column or measure and is displayed as the large numeric value in the center of the visual. The <strong class="screentext">Trend axis</strong> field well accepts a single numeric or date column and drives the shaded, sloping area behind the <strong class="screentext">Indicator</strong> value. Both the <strong class="screentext">Indicator</strong> and <strong class="screentext">Trend axis</strong> field wells must be populated for the KPI visual to display.</p>
    <p class="fm-booktitle">Optionally, the <strong class="screentext">Target goals</strong> field well accepts one or more columns and/or measures. Most often, a single goal is used. Including a <strong class="screentext">Target goal</strong> provides conditional color formatting based on whether the current Indicator value is higher, the same as, or lower than the <strong class="screentext">Target goal</strong>. In addition, the value of the <strong class="screentext">Target goal</strong> is displayed beneath the <strong class="screentext">Indicator</strong> value as well as the <a id="calibre_link-2025" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>variance (%) between the <strong class="screentext">Indicator</strong> and <strong class="screentext">Target goal</strong>.</p>
    <p class="fm-booktitle">Similar to the KPI visual, we next take a look at the <strong class="screentext">Gauge</strong> visual.</p>
    <h2 id="calibre_link-231" class="calibre9">Gauge visual</h2>
    <p class="fm-booktitle">The <strong class="screentext">Gauge</strong> visual is similar to the KPI <a id="calibre_link-1708" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visual in that a particular metric can be <a id="calibre_link-1020" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>compared against a target value. The <strong class="screentext">Gauge</strong> visual may be preferred over the KPI visual in the event that an appropriate trend axis is unavailable. However, a downside to the <strong class="screentext">Gauge</strong> visual is that it takes up a large amount of space relative to the amount of information presented.</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.15</em>, the <strong class="screentext">Gauge</strong> visual presents five field wells:</p>
    <figure class="mediaobject"><img src="images/000173.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.15: Gauge visual</p>
    <p class="fm-booktitle">Of the five field wells displayed in <em class="italic">Figure 7.15</em>, only the <strong class="screentext">Value</strong> field well is required. The column or measure in the <strong class="screentext">Value</strong> field well is shown as the central number within the <strong class="screentext">Gauge</strong> visual ($5.0M). </p>
    <p class="fm-booktitle">Adding a <strong class="screentext">Target value</strong> adds a line on the gauge and displays the target value ($3.22M). Alternatively, the column or measure used as the <strong class="screentext">Target value</strong> can instead be used as the <strong class="screentext">Maximum value</strong> so that the gauge is completely full once the target value is reached. </p>
    <p class="fm-booktitle">Power BI automatically selects minimum and maximum values for the gauge if the <strong class="screentext">Minimum value</strong> and <strong class="screentext">Maximum value</strong> field wells are left unconfigured. An optional <strong class="screentext">Tooltips</strong> field well is available for the <strong class="screentext">Gauge</strong> visual. <strong class="screentext">Tooltips</strong> are covered in greater detail in the <em class="italic">Formatting visualizations</em> section of this chapter.</p>
    <p class="fm-booktitle">We now move on from <a id="calibre_link-2026" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>single number visuals to explore the various map visuals available within Power <a id="calibre_link-2027" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>BI Desktop.</p>
    <h1 id="calibre_link-232" class="heading">Map visuals</h1>
    <p class="fm-booktitle">Power BI currently provides five map <a id="calibre_link-1092" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visuals including the <strong class="screentext">Map</strong>, <strong class="screentext">Filled map</strong>, <strong class="screentext">Shape map</strong> (in preview), <strong class="screentext">Azure map</strong> (in preview), and the <strong class="screentext">ArcGIS Maps for Power BI</strong>. </p>
    <p class="fm-booktitle">The <strong class="screentext">map visual</strong> plots location points as bubbles over a world map and varies the size of the bubbles based on a value. The bubbles on these maps can also be broken out across a dimension to provide additional context. </p>
    <p class="fm-booktitle">The <strong class="screentext">Filled map</strong> and <strong class="screentext">Shape map</strong> visuals are<a id="calibre_link-1683" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> forms of heat maps that use color <a id="calibre_link-995" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and color intensity to distinguish specific areas of a map by a value, such as postal codes by population. </p>
    <p class="fm-booktitle">The <strong class="screentext">Azure map</strong> visual is<a id="calibre_link-551" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> similar to the <strong class="screentext">map visual</strong> in that it displays bubbles on a world map. The <strong class="screentext">Azure map</strong> supports different base layers like satellite and road as well as many different settings including a display of live traffic data. While still in preview, continued enhancements to this visual could position the Azure Map as the standard for geospatial analysis in Power BI.</p>
    <p class="fm-booktitle">The <strong class="screentext">ArcGIS map</strong> visual is the most <a id="calibre_link-523" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>powerful of the available geospatial visualizations and several custom map visuals are available in the App Store including the Globe Map, Flow Map, Icon Map, Mapbox Visual, Drilldown Choropleth, Drilldown Cartogram, Route map, and Google Maps for Power BI. See <em class="italic">Chapter 8</em>, <em class="italic">Applying Advanced Analytics</em>, for details on the <strong class="screentext">ArcGIS map</strong> visual and using custom visuals. </p>
    <p class="fm-booktitle">The <strong class="screentext">Shape map</strong> and <strong class="screentext">Azure map</strong> visuals are currently still in preview and thus should only be used for testing purposes. The <a id="calibre_link-1684" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>following URL provides documentation on the <strong class="screentext">Shape map</strong> visual: <a href="http://bit.ly/2zS2afU" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2zS2afU</span></a>. The following URL provides documentation<a id="calibre_link-552" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> on the <strong class="screentext">Azure map</strong> visual: <a href="https://bit.ly/3H3kEIL" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3H3kEIL</span></a>.</p>
    <p class="fm-booktitle">As per the <em class="italic">Data category</em> section in <em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery, and Composite Data Models</em>, it’s important to assign geographic data categories to columns. This information aids the map visuals in plotting the correct location when a value is associated with multiple locations (ambiguous locations). </p>
    <p class="fm-booktitle">Data categories can be assigned to <a id="calibre_link-2028" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>columns from the <strong class="screentext">Column tools</strong> tab in the <strong class="screentext">Data view</strong> or the <strong class="screentext">Report view</strong>. For DirectQuery datasets, these metadata properties can only be assigned from the <strong class="screentext">Report view</strong>. Report authors should engage the dataset designer or BI team responsible for a dataset if data categories have not been assigned to columns needed for report development.</p>
    <p class="fm-booktitle">Additionally, for bubble and <strong class="screentext">Filled map</strong> visuals, hierarchies can be added to the <strong class="screentext">Location</strong> field well to avoid ambiguous results. For example, by adding the hierarchy shown in <em class="italic">Figure 7.16</em> to the <strong class="screentext">Location</strong> field well, the map visuals only use the locations associated with their parent values, such as only the states of Australia. </p>
    <figure class="mediaobject"><img src="images/000184.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.16: Geographic hierarchies in map visuals</p>
    <p class="fm-booktitle">For greater precision and performance with map visuals (excluding the <strong class="screentext">Shape map</strong>), latitude and longitude input field wells are available as alternative inputs to <strong class="screentext">Location</strong>.</p>
    <p class="fm-booktitle">We now take a more detailed look at the <strong class="screentext">Bubble map</strong> visual.</p>
    <h2 id="calibre_link-233" class="calibre9">Bubble map</h2>
    <p class="fm-booktitle">Bubble maps are particularly useful <a id="calibre_link-1090" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>when embedding an additional dimension column or category to the legend input. When a geographic boundary column, such as country or <a id="calibre_link-578" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>postal code, is used as the location input, the added dimension converts the bubbles to pie charts of varying sizes. Larger pie charts reflect the measure used for the <strong class="screentext">Size</strong> input field and the components of each pie are color-coded to a value from the legend column providing even greater context.</p>
    <p class="fm-booktitle">The <strong class="screentext">map visual</strong> shown in <em class="italic">Figure 7.17</em> uses the postal code as the location input, the <code class="inlinecode">Internet Net Sales</code> measure as the size input, and the <code class="inlinecode">Customer History Segment</code> column as the legend input:</p>
    <figure class="mediaobject"><img src="images/000193.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.17: Map visual</p>
    <p class="fm-booktitle">For this map, the <strong class="screentext">Grayscale</strong> theme is applied from the <strong class="screentext">Style</strong> card in the <strong class="screentext">Map settings</strong> category. The bubble map also includes <a id="calibre_link-579" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>a color saturation input to help distinguish bubbles <a id="calibre_link-1091" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>beyond their relative sizes. This input, however, can only be used when the <strong class="screentext">legend</strong> field well is not used. </p>
    <p class="fm-booktitle">See the <em class="italic">Customer history column</em> section of <em class="italic">Chapter 3</em>, <em class="italic">Connecting to Sources and Transforming Data with M</em>, for details on creating a history segment column within an M query. </p>
    <p class="fm-booktitle">Next, we explore the <strong class="screentext">Filled map</strong> visual.</p>
    <h2 id="calibre_link-234" class="calibre9">Filled map</h2>
    <p class="fm-booktitle">A <strong class="screentext">Filled map</strong> visual includes<a id="calibre_link-1093" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> several of the same formatting properties of a bubble map but utilizes color<a id="calibre_link-996" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> as its primary means to contrast locations. In the <strong class="screentext">Filled map</strong> example shown in <em class="italic">Figure 7.18</em>, a gradient color scheme has been applied via the <strong class="screentext">Colors</strong> card in the <strong class="screentext">Fill colors</strong> category of the <strong class="screentext">Format</strong> pane to highlight individual states based on the <code class="inlinecode">Internet Net Sales</code> measure:</p>
    <figure class="mediaobject"><img src="images/000203.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.18: Filled map visual with gradient colors</p>
    <p class="fm-booktitle">Exactly like the color scheme described in the <em class="italic">column and line chart conditional formatting</em> section later in this chapter, three distinct numeric values and colors are assigned to the <strong class="screentext">Minimum</strong>, <strong class="screentext">Center</strong>, and <strong class="screentext">Maximum</strong> properties. For this visual, the values of $1M, $2M, and $3M are associated <a id="calibre_link-2029" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>with red, yellow, and green respectively; causing the <strong class="screentext">South Australia</strong> state to appear as red (low value) while the <strong class="screentext">New South Wales</strong> state is green (high value). </p>
    <p class="fm-booktitle">Additionally, like the previous <a id="calibre_link-2030" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>bubble map example, a grayscale map-style theme has been applied and the auto-zoom property has been disabled. </p>
    <p class="fm-booktitle">Other map themes, such as dark, light, road, and aerial, are also available for filled and bubble maps. These alternative themes, particularly when contrasted with the bright or rich colors of a <strong class="screentext">Filled map</strong>, can significantly add to the aesthetic appeal of a report.</p>
    <p class="fm-booktitle">As per the drill-up/down icons above the visual, a hierarchy of geographical columns (Country, State, City) has been added to the <strong class="screentext">Location</strong> field well. These additional columns help the Bing Maps API to display the correct location, such as only Victoria in Australia. Note that whenever a hierarchy is included in an appropriate visualization’s field well, the drill-up/down icons allow report viewers to move between the various levels of the hierarchy.</p>
    <p class="fm-booktitle">To ensure that Bing Maps respects the parent column (for example, Country) when plotting child locations (for example, States/Provinces), the user can enable the drill mode via the <strong class="screentext">drill-down</strong> button in the top-right corner of the visual. With drill mode enabled, the user can click the specific parent value on the map, such as the <strong class="screentext">United States</strong>, and Bing plots states by only searching for states within the United States.</p>
    <p class="fm-booktitle">Alternatively, with drill mode not enabled, the user can click the <strong class="screentext">expand all down one level</strong> icon at the top left of the<a id="calibre_link-1094" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> visual. From the initial state of the parent value (country), this also plots the states within each parent value. The other drill option at the top <a id="calibre_link-997" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>left of the visual, the go to the next level drill, only plots the child values without the context of the parent value.</p>
    <p class="fm-booktitle">Moving on from map visuals, we next expound upon the <strong class="screentext">Waterfall chart</strong> visual.</p>
    <h1 id="calibre_link-235" class="heading">Waterfall chart</h1>
    <p class="fm-booktitle">The waterfall chart is one of the<a id="calibre_link-1841" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> most powerful standard visuals in Power BI given its ability to compute and format the variances of individual items between two periods by default. </p>
    <p class="fm-booktitle">The items representing the largest variances are displayed as columns of varying length, sorted and formatted with either an increase (green), no change (yellow), or decrease (red) color. This built-in logic and conditional formatting make waterfall charts both easy to create and intuitive for users.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 7.19</em>, the <code class="inlinecode">Internet Net Sales</code> of the last two completed months are broken down by <code class="inlinecode">SalesTerritoryCountry</code>: </p>
    <figure class="mediaobject"><img src="images/000212.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.19: Waterfall chart with breakdown</p>
    <p class="fm-booktitle">The waterfall chart in <em class="italic">Figure 7.19</em> was created by placing the <code class="inlinecode">Internet Net Sales</code> measure applied to the <strong class="screentext">Values</strong> field well, and placing the <code class="inlinecode">Year Month</code> and <code class="inlinecode">SalesTerritoryCountry</code> columns into the <strong class="screentext">Category</strong> and <strong class="screentext">Breakdown</strong> input fields, respectively. The waterfall chart naturally walks the user from the starting point category on the left (2013-Nov) to the ending point category on the right (2013-Dec). </p>
    <p class="fm-booktitle">As per <em class="italic">Figure 7.19</em>, hovering the cursor over a bar results in the details for this item being displayed as a tooltip. In this <a id="calibre_link-1842" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>example, hovering over the ($52K) green bar for Australia displays <code class="inlinecode">Internet Net Sales</code> for both months, the variance, and the variance as a percentage. These four tooltip values are provided by default and report authors can optionally add measures to the <strong class="screentext">Tooltips</strong> field well to deliver even greater context.</p>
    <p class="fm-booktitle">We now turn our attention to another powerful analytical visual, the <strong class="screentext">Key influencers</strong> visualization.</p>
    <h1 id="calibre_link-236" class="heading">Power Platform visuals</h1>
    <p class="fm-booktitle">Power BI is part of a larger suite <a id="calibre_link-1477" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of products known as the <strong class="screentext">Power Platform</strong>. In addition to Power BI, the <strong class="screentext">Power Platform</strong> is comprised of <strong class="screentext">Power Apps</strong>, <strong class="screentext">Power Automate</strong>, and <strong class="screentext">Power Virtual Agents</strong>.</p>
    <p class="fm-booktitle">The <strong class="screentext">Power Platform</strong> is designed to support low-code and no code development by business analysts familiar with MS Office tools like Excel but is also extensible to support complex, custom solutions involving application development skills and processes. <strong class="screentext">Power Automate</strong> is used to design and run workflows and <strong class="screentext">Robotic Process Automation </strong>(<strong class="screentext">RPA</strong>). Finally, <strong class="screentext">Power Virtual Agents</strong> provides a platform for creating intelligent, automated agents. </p>
    <p class="fm-booktitle">Over the last few years, Microsoft has worked steadily to create seamless integration between the various <strong class="screentext">Power Platform</strong> tools as well as <strong class="screentext">Dataverse</strong>, Microsoft’s business data object/entity store. In terms of Power BI, this has meant the introduction of standard visuals for <strong class="screentext">Power Apps</strong> and <strong class="screentext">Power Automate</strong>, thus enabling Power BI report users to act based on their analyses without ever leaving Power BI. </p>
    <p class="fm-booktitle">For example, after analyzing recent sales trends on one report page, a user could increase the sales budget via an integrated <strong class="screentext">Power App</strong> that contains budget information on a separate report page. Likewise, a button could be added to a Power BI report page that enables a user to trigger a <strong class="screentext">Power Automate</strong> workflow that refreshes a Power BI dataset.</p>
    <p class="fm-booktitle">We start by looking at an example <a id="calibre_link-1478" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of using the <strong class="screentext">Power Apps</strong> visual in Power BI Desktop.</p>
    <h2 id="calibre_link-237" class="calibre9">Power Apps for Power BI</h2>
    <p class="fm-booktitle">As mentioned, <strong class="screentext">Power Apps</strong> allows for<a id="calibre_link-1290" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the creation of low-code/no-code applications and web portals. <strong class="screentext">Power Apps</strong> is a cloud-first environment and the latest of a long line of forms-based collaboration technologies that include Exchange Forms, Outlook Forms, and SharePoint. </p>
    <p class="fm-booktitle"><em class="italic">Figure 7.20</em> shows the <strong class="screentext">Power Apps for Power BI</strong> visual after being configured to have the <code class="inlinecode">ResellerName</code> column from the <code class="inlinecode">Resellers</code> table in the <strong class="screentext">PowerApps Data</strong> field well within the <strong class="screentext">Visualizations</strong> pane.</p>
    <figure class="mediaobject"><img src="images/000222.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.20: Power Apps for Power BI visual</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.20</em>, the <strong class="screentext">Dataverse</strong> environment for the app can be selected in the upper-right corner of the visual, in this case, the <strong class="screentext">coe</strong> environment. Existing <strong class="screentext">Power Apps</strong> can be chosen by clicking the <strong class="screentext">Choose app</strong> option or a new <strong class="screentext">Power App</strong> can be created using the <strong class="screentext">Create new</strong> option. In either case, the data included in the <strong class="screentext">PowerApps Data</strong> field well for the visual is available to the <strong class="screentext">Power App</strong>.</p>
    <p class="fm-booktitle">Choosing the <strong class="screentext">Create new</strong> option launches a browser window that navigates to the <a href="http://make.powerapps.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">make.powerapps.com</span></a> website and allows the report author to create a new <strong class="screentext">Power App</strong>. The new <strong class="screentext">Power App</strong> includes a default screen with a gallery control as shown in <em class="italic">Figure 7.21</em>.</p>
    <figure class="mediaobject"><img src="images/000232.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.21: Power app displayed in the Power Apps for Power BI visual</p>
    <p class="fm-booktitle">Details regarding creating a <strong class="screentext">Power App</strong> are beyond the scope of this book but <em class="italic">Chapter 13</em> of <em class="italic">Power BI Cookbook 2nd Edition</em> provides a more complete example. </p>
    <p class="fm-booktitle">Once the <strong class="screentext">Power App</strong> is created or chosen, the <strong class="screentext">Power App</strong> can be saved and shared with others. Once this is done, the <strong class="screentext">Power App</strong> is displayed within the <strong class="screentext">Power App for Power BI</strong> visual within Power BI<a id="calibre_link-1291" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Desktop.</p>
    <p class="fm-booktitle">Moving on, we next take a look at the <strong class="screentext">Power Automate</strong> visual for Power BI.</p>
    <h2 id="calibre_link-238" class="calibre9">Power Automate for Power BI</h2>
    <p class="fm-booktitle"><strong class="screentext">Power Automate</strong> is Microsoft’s cloud-based workflow <a id="calibre_link-1292" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and RPA platform. The <strong class="screentext">Power Automate for Power BI </strong>allows <strong class="screentext">Power Automate</strong> flows to be initiated from Power BI Desktop. These flows can utilize data from the Power BI model exposed to the <strong class="screentext">Power Automate for Power BI</strong> visual. </p>
    <p class="fm-booktitle"><em class="italic">Figure 7.22</em> shows the <strong class="screentext">Power Automate for Power BI</strong> visual after adding the visual to the report page and placing the <code class="inlinecode">EmailAddress</code> column from the <code class="inlinecode">Customer</code> table into the <strong class="screentext">Power Automate data</strong> field well within the <strong class="screentext">Visualizations</strong> pane.</p>
    <figure class="mediaobject"><img src="images/000242.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.22: Power Automate for Power BI visual</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.22</em>, once data fields are added to the <strong class="screentext">Power Automate data</strong> field well, the ellipses menu is used to <strong class="screentext">Edit</strong> the <strong class="screentext">Power Automate</strong> flow. Choosing the <strong class="screentext">Edit</strong> option exposes the interface<a id="calibre_link-1293" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> shown in <em class="italic">Figure 7.23</em>, allowing the user to choose an existing flow or create an entirely new flow from a template.</p>
    <figure class="mediaobject"><img src="images/000251.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.23: Power Automate for Power BI visual Edit screen</p>
    <p class="fm-booktitle">The <strong class="screentext">New</strong> menu shown in <em class="italic">Figure 7.23</em> provides two options, <strong class="screentext">Template</strong> and <strong class="screentext">Instant cloud flow</strong>. In this case, the <strong class="screentext">Instant cloud flow</strong> option<a id="calibre_link-2031" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> was selected and a simple flow was created to send links to a web-based survey. This flow is shown in <em class="italic">Figure 7.24</em>.</p>
    <figure class="mediaobject"><img src="images/000260.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.24: Power Automate for Power BI visual Edit screen</p>
    <p class="fm-booktitle">In <em class="italic">Figure 7.24</em>, the <code class="inlinecode">EmailAddress</code> data exposed to the <strong class="screentext">Power Automate for Power BI</strong> visual via the <strong class="screentext">Power Automate data</strong> field well is used as the <strong class="screentext">To</strong> address for the email. Note the tooltip indicates that the <a id="calibre_link-1294" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>email will be sent to each selected email address. The simple flow includes a <strong class="screentext">Subject</strong> and an email <strong class="screentext">Body</strong> that includes a link to a <strong class="screentext">survey</strong>. </p>
    <p class="fm-booktitle">Once the flow is saved and shared, the <strong class="screentext">Power Automate for Power BI</strong> visual displays a button that can be used by Power BI report viewers as shown in <em class="italic">Figure 7.25</em>.</p>
    <figure class="mediaobject"><img src="images/000269.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.25: Power Automate for Power BI visual configured</p>
    <p class="fm-booktitle">Like other Power BI visuals, the <strong class="screentext">Power Automate for Power BI</strong> visual is interactive and filtered by other report visuals. This means that the report viewer can select data appearing in other visuals on the report page and this cross-filters the <strong class="screentext">Power Automate for Power BI</strong> visual, meaning<a id="calibre_link-1295" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> that upon clicking <strong class="screentext">Send Survey Email</strong>, an email is generated for each customer email address.</p>
    <p class="fm-booktitle">In addition to integration with other Power Platform offerings, Microsoft has also introduced visuals specific to Premium (capacity-based) offerings, and we take a look at these next.</p>
    <h1 id="calibre_link-239" class="heading">Premium visuals</h1>
    <p class="fm-booktitle">As Microsoft’s Power BI Premium <a id="calibre_link-1536" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>offering has matured, Microsoft has added two standard Power BI visuals that support features exclusive to capacity-based Power BI licenses, including Power BI <strong class="screentext">Premium and Premium Per User</strong> (<strong class="screentext">PPU</strong>). These visuals are the <strong class="screentext">Scorecard</strong> visual and the <strong class="screentext">Paginated report</strong> visual. </p>
    <p class="fm-booktitle">We begin by looking at the <strong class="screentext">Scorecard</strong> visual.</p>
    <h2 id="calibre_link-240" class="calibre9">Scorecard</h2>
    <p class="fm-booktitle"><strong class="screentext">Scorecards</strong> are a relatively recent <a id="calibre_link-1539" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>addition to Power BI that support the display and tracking of <strong class="screentext">Goals</strong> within Power BI Premium and PPU. <strong class="screentext">Goals</strong> allow you to create and track<a id="calibre_link-1662" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> multiple key business metrics and objectives in a single place via a <strong class="screentext">Scorecard</strong>. Both <strong class="screentext">Goals</strong> and <strong class="screentext">Scorecards</strong> are covered in more detail in later chapters. </p>
    <p class="fm-booktitle"><em class="italic">Figure 7.26</em> shows an unconfigured <strong class="screentext">Scorecard</strong> visual added to a Power BI report page.</p>
    <figure class="mediaobject"><img src="images/000278.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.26: Scorecard visual</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.26</em>, two options are present, <strong class="screentext">Create new scorecard</strong> and <strong class="screentext">Connect to an existing scorecard</strong>. <em class="italic">Figure 7.27</em> shows the same visual after being configured to <strong class="screentext">Connect to an existing scorecard</strong>.</p>
    <figure class="mediaobject"><img src="images/000287.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.27: Configured Scorecard visual</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.27</em>, a simple scorecard consisting of two goals is displayed in the <strong class="screentext">Scorecard</strong> visual. The <strong class="screentext">Scorecard</strong> visual is <a id="calibre_link-1540" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>completely interactive, allowing the report viewer to interact with the scorecard as if viewing the scorecard in the Power BI service. Options <a id="calibre_link-1663" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are included to <strong class="screentext">Edit</strong> the scorecard, <strong class="screentext">Replace scorecard</strong>, and open the scorecard in the Power BI service.</p>
    <p class="fm-booktitle">In addition to the <strong class="screentext">Scorecard</strong> visual, another premium visual is the <strong class="screentext">Paginated report</strong> visual.</p>
    <h2 id="calibre_link-241" class="calibre9">Paginated reports</h2>
    <p class="fm-booktitle">Paginated reports have a long and storied <a id="calibre_link-1537" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>history at Microsoft, having <a id="calibre_link-1746" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>first appeared in <strong class="screentext">SQL Server Reporting Services</strong> (<strong class="screentext">SSRS</strong>) in 2004. Paginated reports use an XML-based language called <strong class="screentext">Report Definition Language</strong> (<strong class="screentext">RDL</strong>). With the paginated<a id="calibre_link-1264" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report visual now available in Power BI Desktop, the unique benefits of paginated reports<a id="calibre_link-1598" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> such as exporting high volumes of data and multi-page report documents can be integrated within Power BI reports.</p>
    <p class="fm-booktitle">While Power BI reports are optimized to be highly interactive and allow self-service exploration of data by users, paginated reports allow pixel-perfect formatting that report designers can optimize for screens, printing, and PDF generation. Paginated reports are explored in greater detail in <em class="italic">Chapter 12</em>, <em class="italic">Deploying Paginated Reports</em>.</p>
    <p class="fm-booktitle"><em class="italic">Figure 7.28</em> shows an unconfigured <strong class="screentext">Paginated report</strong> visual added to a Power BI Desktop report page.</p>
    <figure class="mediaobject"><img src="images/000296.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.28: Configured Scorecard visual</p>
    <p class="fm-booktitle">Clicking on the <strong class="screentext">Connect to report</strong> button within the <strong class="screentext">Paginated report</strong> visual as shown in <em class="italic">Figure 7.28</em> opens the <strong class="screentext">Embed a paginated report</strong> dialog shown in <em class="italic">Figure 7.29</em>.</p>
    <figure class="mediaobject"><img src="images/000305.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.29: Select paginated report</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.29</em>, any paginated<a id="calibre_link-1599" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> reports published in the Power BI service to which the report author has permissions is displayed in the <strong class="screentext">Embed a paginated report</strong> interface. Selecting a paginated report <a id="calibre_link-1538" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>activates the <strong class="screentext">Set Parameters</strong> button. </p>
    <p class="fm-booktitle">Parameters are an optional feature of paginated reports that allow a single report to display different data, such as for <a id="calibre_link-1265" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>a specific customer or division. Once parameters, if any, are set the report can be displayed using a button.</p>
    <p class="fm-booktitle">Moving on from premium visuals, we next explore reporting elements such as text boxes, shapes, images, and buttons.</p>
    <h1 id="calibre_link-242" class="heading">Elements</h1>
    <p class="fm-booktitle">In addition to visuals, Power BI Desktop<a id="calibre_link-1613" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> includes the ability to add elements such as text boxes, shapes, images, and buttons to report pages. </p>
    <p class="fm-booktitle">Elements can be added to report pages using the <strong class="screentext">Insert</strong> tab of the ribbon when in the <strong class="screentext">Report view</strong> as shown in <em class="italic">Figure 7.30</em>:</p>
    <figure class="mediaobject"><img src="images/000316.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.30: Select paginated report</p>
    <p class="fm-booktitle">Elements share common traits and features. For example, buttons, shapes, and images all include the ability to activate a bookmark when clicked on as demonstrated in the <em class="italic">Custom labels and the back button</em> and <em class="italic">Custom report navigation</em> sections of the previous chapter. </p>
    <p class="fm-booktitle">In addition, selecting a text box, button, shape, or image on a report page replaces the <strong class="screentext">Visualizations</strong> pane with a <strong class="screentext">Format text box</strong>, <strong class="screentext">Format button</strong>, <strong class="screentext">Format shape</strong>, and <strong class="screentext">Format image</strong> pane respectively. This pane works identically to the <strong class="screentext">Format</strong> sub-pane of the <strong class="screentext">Visualizations</strong> pane as described in the <em class="italic">Visualizations pane</em> section earlier in this chapter.</p>
    <p class="fm-booktitle">Elements are often used as navigation features between pages in a report due to the ability to configure the <strong class="screentext">Action</strong> format card for buttons, shapes, and images for settings such as <strong class="screentext">Back</strong>, <strong class="screentext">Bookmark</strong>, <strong class="screentext">Drill through</strong>, and <strong class="screentext">Page navigation</strong> in addition to <strong class="screentext">Q&amp;A</strong> and <strong class="screentext">Web URL</strong> actions. </p>
    <p class="fm-booktitle">In fact, the <strong class="screentext">Buttons</strong> element includes a special <strong class="screentext">Navigator</strong> feature that allows the report author to automatically add multiple buttons for each page or each bookmark in a report as shown in <em class="italic">Figure 7.31</em>:</p>
    <figure class="mediaobject"><img src="images/000326.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.31: Navigator button options</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.31</em>, there are nine different buttons available. However, realize that the only difference between these buttons is the icon and default <strong class="screentext">Action</strong> configured, both of which can be changed after creating the button.</p>
    <p class="fm-booktitle">Other uses for elements include stylizing the report to more clearly separate report areas, such as the example from the <em class="italic">Custom report navigation</em> section of the previous chapter. In addition, text boxes are often used to display static text such as a report title or other instructional information for report viewers. </p>
    <p class="fm-booktitle">There are many other creative <a id="calibre_link-1614" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>ways that elements can be used within Power BI reports such as referencing a DAX measure from a text box in order to display a custom message or value such as a title or date refreshed. Readers are encouraged to explore blog articles and other online materials for additional ideas and inspiration.</p>
    <p class="fm-booktitle">With many of the default visualizations and elements explained, we next discuss formatting visualizations.</p>
    <h1 id="calibre_link-243" class="heading">Formatting visualizations</h1>
    <p class="fm-booktitle">One of the final steps in<a id="calibre_link-1832" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report development is configuring the formatting options for<a id="calibre_link-1010" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> each visual. Several of these options, such as data labels, background colors, borders, and titles are common to all visuals and are often essential to aid comprehension. Several other formatting options, such as fill point for scatter charts, are exclusive to particular visuals and report authors are well served to be familiar with these features.</p>
    <p class="fm-booktitle">In addition to giving reports a<a id="calibre_link-2032" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> professional appearance, features such as tooltips can be used to provide visuals with additional or supporting context. Furthermore, formatting <a id="calibre_link-2033" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>features can be used to implement conditional logic to dynamically drive the color of data points by their values. </p>
    <p class="fm-booktitle">We start by exploring how <strong class="screentext">Tooltips</strong> can aid in providing additional context and insights to report viewers.</p>
    <h2 id="calibre_link-244" class="calibre9">Tooltips</h2>
    <p class="fm-booktitle">Chart and map visuals include a <strong class="screentext">Tooltips</strong> field well in the <strong class="screentext">Visualizations</strong> pane to allow report authors to define additional <a id="calibre_link-1018" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures that display when<a id="calibre_link-1805" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the user hovers over the items in the visual. These tooltip values reflect the same filter context of the data labels for the visual and thus provide the user with additional context. In <em class="italic">Figure 7.32</em>, five measures have been added to the <strong class="screentext">Tooltips</strong> field well for a column chart:</p>
    <figure class="mediaobject"><img src="images/000336.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.32: Additional measures displayed as tooltips</p>
    <p class="fm-booktitle">By hovering over the column for online net sales in October of 2013, the tooltip is displayed, which includes both the <code class="inlinecode">Internet Net Sales</code> measure used for the chart as well as the five tooltip measures. In the absence of the tooltips, the user may have to search for other reports or <a id="calibre_link-1806" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visuals to find this information or may miss important insights related to the visual.</p>
    <p class="fm-booktitle">Tooltips are a great way to enhance the <a id="calibre_link-1019" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>analytical value of a visual without adding complexity or clutter. Additionally, given the features of the DAX query engine, such <a id="calibre_link-857" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as <strong class="screentext">DAX fusion</strong>, the additional measures displayed as tooltips generally do not negatively impact performance. <strong class="screentext">DAX fusion</strong> occurs automatically when the measures displayed are based on the same fact table and the DAX query engine can optimize the query plan to generate a single storage engine query for all measures.</p>
    <p class="fm-booktitle">Next, we take a look at a special type of tooltip, report page tooltips.</p>
    <h3 id="calibre_link-245" class="heading1">Report page tooltips</h3>
    <p class="fm-booktitle">The standard tooltips described in the <a id="calibre_link-1807" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>previous section may be sufficient for most reporting scenarios. However, Power BI Desktop also provides report page tooltips that allow report authors to display a custom page of report visuals as an alternative to the default tooltips. The following steps can be used to configure a report page tooltip:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Add a new blank report page to a report. </li>
      <li class="calibre13">On the <strong class="screentext">Format</strong> pane for the report page, enable the <strong class="screentext">Allow use as tooltip</strong> property under the <strong class="screentext">Page information</strong> formatting card. </li>
      <li class="calibre13">Also on the <strong class="screentext">Format</strong> pane, specify a <strong class="screentext">Type</strong> of <strong class="screentext">Tooltip</strong> under <strong class="screentext">Canvas settings</strong> as per <em class="italic">Figure 7.33</em>:<figure class="mediaobject"><img src="images/000346.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 7.33: Report page tooltip</p>
      </li>
      <li class="calibre13">On the tooltip page from <em class="italic">step 3</em>, set <strong class="screentext">Page view</strong> to <strong class="screentext">Actual size</strong> via the <strong class="screentext">Page view</strong> icon on the <strong class="screentext">View</strong> tab.</li>
      <li class="calibre13">From the <strong class="screentext">Fields</strong> pane of the tooltip page, drag a measure or multiple measures to the tooltip <strong class="screentext">Fields</strong> field well. Columns can also be specified as tooltip fields (for example, <strong class="screentext">Product Name</strong>).</li>
      <li class="calibre13">Create report visuals on the tooltip report page that relate to the <strong class="screentext">Tooltip</strong> field well measure(s) or column(s). For example, if the tooltip page supports a sales measure, consider building visuals that display sales versus plan, budget, or sales growth measures. Given the limited size of the tooltip report page, KPI and <strong class="screentext">Card</strong> visuals are recommended.</li>
    </ol>
    <p class="fm-booktitle">By default, other visuals in the report that utilize the measure(s) or column(s) specified as tooltip fields in <em class="italic">step 5</em> display the<a id="calibre_link-1808" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> tooltip report page when the user hovers over the items of the visual.</p>
    <p class="fm-booktitle">The <strong class="screentext">Type</strong> of <strong class="screentext">Tooltip</strong> from <em class="italic">step 3</em> is not required for utilizing tooltip report pages. However, this property makes the purpose of the page clear to the other report authors and has been provided by the Power BI team as a good starting point for most report page tooltips. Likewise, viewing the report page tooltip in <strong class="screentext">Actual size</strong> as per <em class="italic">step 4</em> is technically not required but is very helpful in designing these pages as the report author can better gauge how the tooltip will be displayed to end users.</p>
    <p class="fm-booktitle">Alternatively, a <strong class="screentext">Tooltips</strong> formatting card is available on the <strong class="screentext">General</strong> tab of the <strong class="screentext">Format</strong> pane for charts and map visuals. This <a id="calibre_link-2034" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>formatting card can be used to specify a particular tooltip report page for the given visual or to disable tooltips. The <strong class="screentext">Type</strong> of tooltip can be specified such as a <strong class="screentext">Report page</strong> or <strong class="screentext">Default</strong>. If <strong class="screentext">Default</strong> is selected, the visual displays the default tooltips as described in the previous section. </p>
    <p class="fm-booktitle">We next take a closer look at formatting column and line charts.</p>
    <h2 id="calibre_link-246" class="calibre9">Column and line charts</h2>
    <p class="fm-booktitle">Line, column, and bar charts are<a id="calibre_link-632" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the most common chart visualization types given their advantages in visual perception, as explained in the <em class="italic">Visualization best practices</em> section of this <a id="calibre_link-1076" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>chapter. Power BI includes clustered and stacked versions of column and bar charts in addition to two combination charts that display both a line and <a id="calibre_link-1011" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>either a clustered or stacked column.</p>
    <p class="fm-booktitle">Note that the difference between clustered and stacked charts involves how the <strong class="screentext">Legend</strong> impacts the columns and bars. With clustered charts, the <strong class="screentext">Legend</strong> adds additional columns or bars to the axis within the axis groupings. Conversely, with stacked charts, the <strong class="screentext">Legend</strong> creates groups within a single bar or column for each axis group.</p>
    <p class="fm-booktitle">The ribbon chart visualization represents a variation of the stacked column chart. Unlike the stacked column chart, the ribbon chart sorts the category items within each column based on their values and connects the items across columns with a ribbon.</p>
    <p class="fm-booktitle"><em class="italic">Figure 7.34</em> shows an example of a ribbon chart. Four product subcategories are displayed across months by <code class="inlinecode">Internet Net Sales</code>:</p>
    <figure class="mediaobject"><img src="images/000355.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.34: Ribbon chart</p>
    <p class="fm-booktitle">The <strong class="screentext">Tires and Tubes</strong> subcategory overtook the <strong class="screentext">Helmets</strong> subcategory in July 2013 to become the top-selling product subcategory in the visual. As per the tooltip included in the preceding image, hovering over the curved ribbon connecting the months on the X-axis displays the values for each<a id="calibre_link-633" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> month, the variance and percentage change between<a id="calibre_link-1077" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the months, and the change in rank for the given category (for example, from second to first for <strong class="screentext">Tires and Tubes</strong>). Insights into the rankings of<a id="calibre_link-1012" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> categories and their changes across periods wouldn’t be as easily identified in a standard stacked column chart.</p>
    <p class="fm-booktitle">The ribbons formatting card allows for spacing, transparency, and a border to further aid comprehension. As shown in <em class="italic">Figure 7.34</em>, the ribbon <strong class="screentext">Border</strong> is enabled, the <strong class="screentext">Connector transparency</strong> of the ribbon is set to <strong class="screentext">50%</strong>, and the ribbon <strong class="screentext">Spacing</strong> is set to <strong class="screentext">5</strong>. Currently, unlike the stacked column chart, the ribbon chart doesn’t include a Y-axis to identify the total value of each column. Additionally, the individual ribbons are currently distinguished by color.</p>
    <p class="fm-booktitle">Let’s next take a look at conditional formatting for these charts.</p>
    <h3 id="calibre_link-247" class="heading1">Column and line chart conditional formatting</h3>
    <p class="fm-booktitle">Column and line charts are two <a id="calibre_link-1072" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of the most common visuals in reports given their flexibility <a id="calibre_link-655" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and advantages in <a id="calibre_link-630" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visualizing comparisons and trends. However, these classic visuals don’t have to be static or simple&mdash;report authors can embed custom rules to dynamically drive formatting properties based on source data. </p>
    <p class="fm-booktitle">Similar to tooltips, conditional<a id="calibre_link-657" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> formatting techniques help users more quickly derive insights from visuals without the added complexity of more data points <a id="calibre_link-1073" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>or additional visuals, so let’s start by exploring <a id="calibre_link-631" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>conditional formatting for column charts.</p>
    <h4 class="heading2">Column chart conditional formatting</h4>
    <p class="fm-booktitle">To apply conditional formatting, use <a id="calibre_link-656" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the <strong class="screentext">fx</strong> formatting option in the <strong class="screentext">Colors</strong> format<a id="calibre_link-2035" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> card under the <strong class="screentext">Columns</strong> section. In <em class="italic">Figure 7.35</em>, the <code class="inlinecode">Internet Net Margin %</code> measure is used as the <strong class="screentext">Colors</strong> setting with a <strong class="screentext">Format</strong> style of <strong class="screentext">Gradient</strong>:</p>
    <figure class="mediaobject"><img src="images/000365.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.35: Diverging data color formatting</p>
    <p class="fm-booktitle">With the <strong class="screentext">Add a middle color</strong> property enabled, this rule associates three colors (red, yellow, and green) with <strong class="screentext">Minimum</strong>, <strong class="screentext">Middle</strong>, and <strong class="screentext">Maximum</strong> values. This rule makes it easy for users to distinguish the columns, such as fiscal periods or product categories, associated with low, average, and high product margins.</p>
    <p class="fm-booktitle">By switching <strong class="screentext">Format style</strong> to <strong class="screentext">Rules</strong>, a rule can be specified for only a minimum and a maximum value. This can be useful to change the color of a column only when a threshold is reached. In other words, the chart displays, at most, two distinct colors with one of the colors (for example, red) flagging the exceptions.</p>
    <p class="fm-booktitle">Note that the <strong class="screentext">fx</strong> option for driving the conditional formatting for colors applies to many other visuals than just column and line <a id="calibre_link-2036" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>charts and the interface is identical to that shown in <em class="italic">Figure 7.35</em>. However, conditional formatting for line charts works <a id="calibre_link-2037" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>differently so let’s look at that next.</p>
    <h4 class="heading2">Line chart conditional formatting</h4>
    <p class="fm-booktitle">Conditional formatting can<a id="calibre_link-1074" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> be applied to line charts by applying distinct colors to <a id="calibre_link-658" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>separate DAX measures. In the following example, a DAX measure is created that only returns the sales per order value when its value is below $325,000:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Sales Below $325K = 
VAR __Sales = [Internet Net Sales]
RETURN
IF(__Sales &lt; 325000,__Sales,BLANK())
</code></pre>
    <p class="fm-booktitle">Using this measure and the <code class="inlinecode">Internet Net Sales</code> measure on the same line chart allows for separate colors to be applied as shown in <em class="italic">Figure 7.36</em>: </p>
    <figure class="mediaobject"><img src="images/000374.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.36: Contrasting colors for line chart measures</p>
    <p class="fm-booktitle">For this example, a green color is used for the <code class="inlinecode">Internet Net Sales</code> measure and red for the <code class="inlinecode">Internet Net Sales Below $325K</code> measure. Additionally, the below $325K line can be formatted with a slightly larger stroke width and a dashed line style via the <strong class="screentext">Shape</strong> card as shown in <em class="italic">Figure 7.36</em>. The line chart appears as a single line that changes colors and styles when it goes below $325K.</p>
    <p class="fm-booktitle">The stroke width, join type, line style, and marker shape formatting properties provide a wide range of options for<a id="calibre_link-659" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> contrasting lines beyond their colors. These <a id="calibre_link-1075" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>additional properties are recommended to aid general comprehension and to support users who cannot easily distinguish colors.</p>
    <p class="fm-booktitle">Let’s next take a look at formatting for table and matrix visuals.</p>
    <h2 id="calibre_link-248" class="calibre9">Table and matrix visuals</h2>
    <p class="fm-booktitle">As per the <em class="italic">Choosing the visual</em> section earlier<a id="calibre_link-1784" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> in this chapter, table and matrix visuals are best suited for identifying and displaying precise values. A classic example of a matrix visual is when a user needs to view the values of a metric at multiple levels of a hierarchy such as the sales dollars for individual products, product subcategory, and category. </p>
    <p class="fm-booktitle">While Power BI reports are most <a id="calibre_link-1015" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>known for their graphically rich visualizations, the table and matrix visuals have also received significant enhancements over the past few years to give report authors granular control over the layout and formatting of these visuals. </p>
    <p class="fm-booktitle">For example, a matrix visual can be designed in a Power BI report to generally replicate and potentially improve upon a PivotTable report in Excel or a matrix data region in a <strong class="screentext">SQL Server</strong> <strong class="screentext">Reporting Services</strong> (<strong class="screentext">SSRS</strong>) report. </p>
    <p class="fm-booktitle">Table and matrix visuals also support the same <strong class="screentext">Display units</strong> and <strong class="screentext">Value decimal places</strong> formatting properties as other visuals. In <em class="italic">Figure 7.37</em>, both measures have been formatted to display their values in terms of millions with one decimal place:</p>
    <figure class="mediaobject"><img src="images/000383.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.37: Display units and Value decimal places for table and matrix visuals</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.37</em>, these properties are available within the <strong class="screentext">Specific column</strong> category of the <strong class="screentext">Format</strong> pane. <strong class="screentext">Display units</strong> options range from <strong class="screentext">Thousands (K)</strong> to <strong class="screentext">Trillions (T)</strong>. By default, the <strong class="screentext">Display units</strong> property is set to <strong class="screentext">None</strong> for table and matrix visuals and <strong class="screentext">Value decimal places</strong> is blank.</p>
    <p class="fm-booktitle">Prior to the availability of the <strong class="screentext">Display units</strong> and <strong class="screentext">Value decimal places</strong> properties, it was necessary to use the <code class="inlinecode">FORMAT()</code> function in separate DAX measures to display custom formats in table or matrix visuals. The <a id="calibre_link-1785" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>following two measures<a id="calibre_link-1016" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> apply a custom rounded currency format to the results of the <code class="inlinecode">Internet Net Sales</code> measure:</p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Sales (Format Thousands) = FORMAT([Internet Net Sales],"$0,.0K")

Internet Net Sales (Format Millions) = FORMAT([Internet Net Sales],"$0,,.0M")
</code></pre>
    <p class="fm-booktitle">Both measures use the <code class="inlinecode">FORMAT()</code> function to convert the input value (the <code class="inlinecode">Internet Net Sales</code> measure) to a string in a custom, rounded format. Specifically, the comma or commas immediately to the left of the decimal are used to divide the value by 1,000 and round as necessary. The zero to the right of the decimal displays a digit or a zero. For example, the $541,613 value would be displayed as $541.6K and $0.5M by the format thousands and format millions<a id="calibre_link-1786" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of measures, respectively. </p>
    <p class="fm-booktitle">In addition to the visual <a id="calibre_link-1017" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>format settings and <code class="inlinecode">FORMAT()</code> function, another method is available to precisely control how values are displayed, custom format strings.</p>
    <h3 id="calibre_link-249" class="heading1">Custom format strings</h3>
    <p class="fm-booktitle">The obvious disadvantage of using the <code class="inlinecode">FORMAT()</code> function is that numeric values are converted to text. However, while still an intern at Microsoft, Chelsie Eiden implemented <strong class="screentext">custom format strings</strong>. </p>
    <p class="fm-booktitle">Custom format strings accept the <a id="calibre_link-1781" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>same kinds of format strings as used in the <code class="inlinecode">FORMAT()</code> function (such as <code class="inlinecode">"$0,,.0M"</code> for millions and <code class="inlinecode">"mmmm"</code> for long month <a id="calibre_link-689" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>names like January) but preserve the underlying data type of the column or measure. </p>
    <p class="fm-booktitle">Custom format strings can be entered into the <strong class="screentext">Format</strong> dropdown while in the <strong class="screentext">Report view</strong> on the <strong class="screentext">Column tools</strong> or <strong class="screentext">Measure tools</strong> tabs. Alternatively, while in the <strong class="screentext">Model view</strong>, select a column or measure and in the <strong class="screentext">Properties</strong> pane, in the <strong class="screentext">Formatting</strong> section, set <strong class="screentext">Format</strong> to <strong class="screentext">Custom</strong> and then enter a <strong class="screentext">Custom format</strong> as shown in <em class="italic">Figure 7.38</em>:</p>
    <figure class="mediaobject"><img src="images/000392.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.38: Display units and decimal places for table and matrix visuals</p>
    <p class="fm-booktitle">Custom format strings can be used for a variety of purposes, such as displaying numbers in duration format (hh:mm:ss). The following measure takes a column called <code class="inlinecode">Duration</code> given in seconds and applies a transformation to locate hours, minutes, and seconds in particular orders of ten. This code can be used with a custom format string of <code class="inlinecode">00:00:00</code> in order to display a duration in hh:mm:ss format.</p>
    <pre class="programlisting"><code class="hljs-code">Chelsie Eiden's Duration = 
// Duration formatting 
// * @konstatinos 1/25/2016
// * Given a number of seconds, returns a format of "hh:mm:ss"
//
// We start with a duration in number of seconds
VAR __SecondsDuration = SUM([Duration])
    VAR __Sign = SIGN(__SecondsDuration)
    VAR __Duration = ABS(__SecondsDuration)
// There are 3,600 seconds in an hour
VAR __Hours = INT (__Duration / 3600)
// There are 60 seconds in a minute
VAR __Minutes = INT ( MOD( __Duration - ( __Hours * 3600 ),3600 ) / 60)
// Remaining seconds are the remainder of the seconds 
// divided by 60 after subtracting out the hours 
// We round up here to get a whole number
VAR __Seconds = ROUNDUP(MOD ( MOD( __Duration - ( __Hours * 3600 ),3600 ), 60 ),0) 
RETURN
// We put the hours, minutes and seconds into the proper "place"
(__Hours * 10000 + __Minutes * 100 + __Seconds) * __Sign
</code></pre>
    <p class="fm-booktitle">Additional uses of custom<a id="calibre_link-1782" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> format strings can allow otherwise <a id="calibre_link-690" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>seemingly impossible things such as displaying dates and date-time values in the Y-axis of a chart. Such a chart is useful, for example, when attempting to chart at what time of day certain events occur across multiple days or on what days events occurred across years or months.</p>
    <p class="fm-booktitle">The following column definition using a <code class="inlinecode">Date</code> column as input can be used with a custom format string of <code class="inlinecode">00\/00\/0000</code> in order to display dates on the Y-axis.</p>
    <pre class="programlisting"><code class="hljs-code">DatesInY = MONTH([Date]) * 1000000 + DAY([Date]) * 10000 + YEAR([Date])
</code></pre>
    <p class="fm-booktitle">Since the Y-axis of charts only supports numeric values, custom format strings such as this are required in order to display dates and date times within the Y-axis.</p>
    <p class="fm-booktitle">It must be stressed that custom format strings are a general feature of columns and measures and thus can be <a id="calibre_link-1783" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>used in all types of visuals, not just tables, matrixes, and charts. </p>
    <p class="fm-booktitle">We now turn our attention to<a id="calibre_link-691" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> conditional formatting for tables and matrixes.</p>
    <h3 id="calibre_link-250" class="heading1">Table and matrix conditional formatting</h3>
    <p class="fm-booktitle">As with charts, default and <a id="calibre_link-1777" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>custom conditional formatting rules can be applied to table and matrix visuals to make it easier to identify exceptions and outlier values. Power BI currently supports <strong class="screentext">Background color</strong>, <strong class="screentext">Font color</strong>, <strong class="screentext">Data bars</strong>, <strong class="screentext">Icons</strong>, and <strong class="screentext">Web URL</strong> conditional formatting for table and <a id="calibre_link-660" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>matrix visuals. </p>
    <p class="fm-booktitle">To apply conditional formatting to a table or matrix, click the drop-down arrow next to the field name of the measure or column (for example, <code class="inlinecode">Internet Net Sales</code>) in the <strong class="screentext">Values</strong> field well of the <strong class="screentext">Visualizations</strong> pane. A <strong class="screentext">Conditional formatting</strong> menu item appears with an arrow providing access to the different types of conditional formatting. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 7.39</em>, data bar conditional formatting has been applied to four measures related to internet sales:</p>
    <figure class="mediaobject"><img src="images/000402.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.39: Data bar conditional formatting</p>
    <p class="fm-booktitle">The length of the data bars helps to call out high or low values and alternative colors can be applied per measure. The direction of data bars is particularly helpful in distinguishing negative from positive values as per the <code class="inlinecode">Internet Net Sales (YOY YTD %)</code> measure in the preceding example visual. </p>
    <p class="fm-booktitle">For large table and matrix visuals with many values, or when the relative differences between values are more important than the individual values themselves, the option to show only the data bar can be very useful. </p>
    <p class="fm-booktitle">Custom conditional formatting rules can be applied to the background and font color scales of table and matrix visual <a id="calibre_link-661" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>cells similar to Microsoft Excel. In <em class="italic">Figure 7.40</em>, <strong class="screentext">Rules</strong> are defined to format the background cells of a measure as green if over 25%, yellow when between -25% and 25%, and red if the value is less than -25%:</p>
    <figure class="mediaobject"><img src="images/000412.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.40: Custom conditional formatting rules</p>
    <p class="fm-booktitle">The conditional formatting rules <a id="calibre_link-1778" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are evaluated from the bottom to the top. Therefore, if a cell meets the condition of multiple rules, the lower rule is applied. The order of rules can be adjusted via the up and down arrows to the right of the color icons.</p>
    <p class="fm-booktitle">Multiple conditional formatting types can be applied against the same measure. For example, the same three conditional rules used for the background color scales in the preceding image could also be implemented as font color rules. However, the font colors specified for each rule (for example, white) could be chosen to contrast with the conditional background colors (for example, red) to further help call attention to the value.</p>
    <p class="fm-booktitle">DAX measures are also supported as inputs to conditional formatting rules. This functionality makes it easier to implement more complex rules, such as greater than the prior year-to-date sales value or a different color based upon the margin % of different product categories.</p>
    <p class="fm-booktitle">For example, the following <code class="inlinecode">Internet Net Margin % Color</code> supporting measure can be created to return <code class="inlinecode">2</code>, <code class="inlinecode">1</code>, or <code class="inlinecode">0</code> depending upon the <code class="inlinecode">Product Category</code> and desired <code class="inlinecode">Internet Net Margin %</code> measure value.</p>
    <pre class="programlisting"><code class="hljs-code">Internet Net Margin % Color = 
    VAR __Category = MAX('Product'[Product Category])
    VAR __Margin = [Internet Net Margin %]
RETURN
    SWITCH(TRUE,
        __Category = "Bikes" &amp;&amp; __Margin &gt;= .40,"Green",
        __Category = "Bikes" &amp;&amp; __Margin &gt;= .35,"Yellow",
        __Category = "Bikes" &amp;&amp; __Margin &lt; .35,"Red",
        __Category = "Clothing" &amp;&amp; __Margin &gt;= .35,"#00ff00",
        __Category = "Clothing" &amp;&amp; __Margin &gt;= .30,"#ffff00",
        __Category = "Clothing" &amp;&amp; __Margin &lt; .30,"#ff0000",
         __Category = "Accessories" &amp;&amp; __Margin &gt;= .65,"Red",
        __Category = "Accessories" &amp;&amp; __Margin &gt;= .60,"Yellow",
        __Category = "Accessories" &amp;&amp; __Margin &lt; .60,"Red"
   )
</code></pre>
    <p class="fm-booktitle">In this example, a different<a id="calibre_link-1779" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> target margin % is desirable for different product categories. As shown, either standard color names or<a id="calibre_link-662" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> hexadecimal color codes can be used as return values. </p>
    <p class="fm-booktitle">This measure can be used for field value-based background color conditional formatting as shown in <em class="italic">Figure 7.41</em>:</p>
    <figure class="mediaobject"><img src="images/000422.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.41: Conditional formatting based on field values</p>
    <p class="fm-booktitle">When applied to a simple table, the result is shown in <em class="italic">Figure 7.42</em>:</p>
    <figure class="mediaobject"><img src="images/000007.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.42: Background conditional formatting for a table</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.42</em>, even though <strong class="screentext">Clothing</strong> has the lowest net margin % for internet sales, the background color is green because the <strong class="screentext">37.5%</strong> value is above the target threshold of <strong class="screentext">35%</strong> specified in the <code class="inlinecode">Internet Net Margin % Color</code> measure. Conversely, <strong class="screentext">Accessories</strong> and <strong class="screentext">Bikes</strong> are colored <a id="calibre_link-1780" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>yellow because<a id="calibre_link-663" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> they do not meet the desired margin % thresholds for these categories.</p>
    <p class="fm-booktitle">Let’s next look at a highly desired feature for tables and matrixes that was recently added to Power BI, <strong class="screentext">Sparklines</strong>!</p>
    <h3 id="calibre_link-251" class="heading1">Sparklines</h3>
    <p class="fm-booktitle"><strong class="screentext">Spark</strong><strong class="screentext">lines</strong> are small line charts <a id="calibre_link-1789" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>drawn without axes or coordinates that help visualize the shape of variations (usually over time) of some metric. <strong class="screentext">Sparklines</strong> have long <a id="calibre_link-1736" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>been a staple in Excel and were one of the most requested features for Power BI Desktop, being prized for their ability to convey analytical insights with a miniscule form factor.</p>
    <p class="fm-booktitle">Recently, Microsoft added <strong class="screentext">Sparklines</strong> to Power BI. When a table or matrix visualization is selected, the Sparkline feature becomes active on the <strong class="screentext">Insert</strong> tab of the ribbon while in the <strong class="screentext">Report view</strong> as shown in <em class="italic">Figure 7.43</em>:</p>
    <figure class="mediaobject"><img src="images/000017.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.43: Add a sparkline option</p>
    <p class="fm-booktitle">Clicking on the <strong class="screentext">Add a sparkline</strong> option shown in <em class="italic">Figure 7.43</em> presents a dialog for configuring the Sparkline <a id="calibre_link-2038" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as shown in <em class="italic">Figure 7.44</em>:</p>
    <figure class="mediaobject"><img src="images/000027.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.44: Add a sparkline dialog</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.44</em>, the <code class="inlinecode">Internet Net Margin %</code> measure is being compared across the months of the year. When added to<a id="calibre_link-1790" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> our simple table visual from <em class="italic">Figure 7.42</em>, we can now observe the variances of the <code class="inlinecode">Internet Net Margin %</code> measure over time along with our color-coded, aggregate values during that time span as shown in <em class="italic">Figure 7.45</em>:</p>
    <figure class="mediaobject"><img src="images/000037.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.45: Sparklines added to a table visual</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 7.45</em>, the sparkline is added to the <strong class="screentext">Values</strong> field well of the table visualization with options available for removing, renaming, moving, and editing the sparkline.</p>
    <p class="fm-booktitle">The table visual shown in <em class="italic">Figure 7.45</em> packs a<a id="calibre_link-1737" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> lot of analytical insights but consumes minimal report page real estate. Report viewers can observe the trend of the important metric across multiple product <a id="calibre_link-2039" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>categories as well as easily see the health of that metric over the specified time period (in this case, the year 2013).</p>
    <p class="fm-booktitle">We next turn our attention to a feature exclusive to matrix visualizations, the ability to display measures as rows.</p>
    <h3 id="calibre_link-252" class="heading1">Values as rows</h3>
    <p class="fm-booktitle">A common form for matrix visuals is to<a id="calibre_link-1791" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> display categories or hierarchies as rows and measures as columns. However, the reverse, displaying multiple measures as rows, particularly with one or multiple date dimension fields across the columns, is a very common layout for Excel pivot table reports.</p>
    <p class="fm-booktitle">Matrix visuals in Power BI Desktop support the important ability to show measures as rows. In <em class="italic">Figure 7.46</em>, the matrix visual breaks out six DAX measures by a date hierarchy across the columns:</p>
    <figure class="mediaobject"><img src="images/000047.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.46: Values on rows in matrix visual</p>
    <p class="fm-booktitle">To enable this feature in Power BI, simply <a id="calibre_link-1792" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>enable the <strong class="screentext">Switch values to rows</strong> feature within the matrix visual’s <strong class="screentext">Options</strong> card located in the <strong class="screentext">Values</strong> section of the <strong class="screentext">Visualizations</strong> pane’s <strong class="screentext">Format</strong> sub-pane. </p>
    <h2 id="calibre_link-253" class="calibre9">Scatter charts</h2>
    <p class="fm-booktitle">Scatter charts are very effective at<a id="calibre_link-1787" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> explaining the relationship or correlation between items against two variables. Optionally, a third variable can be <a id="calibre_link-1655" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>used to drive the size of the data points and thereby convert<a id="calibre_link-1013" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the visual to a bubble chart.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 7.47</em>, three countries from the <strong class="screentext">Sales Territory Country</strong> column are used as the details input to a scatter chart:</p>
    <figure class="mediaobject"><img src="images/000057.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 7.47: Scatter chart</p>
    <p class="fm-booktitle">To provide additional detail, three product subcategories are included in the legend input, such that nine total points (3 x 3) are plotted on the chart. The scatter chart naturally calls out the differences among the items based on their X position (<code class="inlinecode">Reseller Net Sales</code>) and Y position (<code class="inlinecode">Internet Net Sales</code>). </p>
    <p class="fm-booktitle">Moreover, to make the visual even easier to interpret, the marker shapes have been customized for each product subcategory (for example, triangles, diamonds, squares) and the size of the shapes have been increased to 40%. </p>
    <p class="fm-booktitle">By default, Power BI applies<a id="calibre_link-1788" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> different colors to the items in the legend. If the legend is not used, the report author can customize the colors of the individual items from the details input column. Although color can be effective for differentiating <a id="calibre_link-1656" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>values, customized marker shapes, such as this example, are helpful for users with visual disabilities.</p>
    <p class="fm-booktitle">This concludes our<a id="calibre_link-1014" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> exploration of building and formatting visuals within Power BI. While we cannot hope to cover the myriad of formatting options available for every visual, as there are literally hundreds of available format cards, this chapter has provided a good overview of how to build and format many of the standard visualizations within Power BI Desktop.</p>
    <h1 id="calibre_link-254" class="heading">Summary</h1>
    <p class="fm-booktitle">Building on the foundation of the previous chapter regarding Power BI report planning, this described how to create and format the basic building blocks of reports, Power BI visualizations. We initially provided an overview of the <strong class="screentext">Visualizations</strong> pane that is foundational to building and formatting visuals, introduced the configuration and utility of numerous standard visuals and elements, and finally provided numerous examples of important formatting functionality such as conditional formatting, <strong class="screentext">Sparklines</strong>, and custom format strings. </p>
    <p class="fm-booktitle">The following chapter builds upon the foundational knowledge of this chapter to introduce more advanced visualizations, analytics, and mobile support. </p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-1878">
<div id="calibre_link-2040" class="calibre2">
<div id="calibre_link-2041" class="calibre3"><div id="calibre_link-2042" class="calibre4">
    <h1 class="heading">8</h1>
    <h1 id="calibre_link-255" class="mainheading">Applying Advanced Analytics</h1>
    <p class="fm-booktitle">The previous two chapters focused on foundational knowledge regarding Power BI report planning, design, and how to create and format visualizations. This chapter builds upon that foundation to demonstrate how the advanced analytical capabilities of Power BI can create an even more compelling user experience and assist users in exploring data to derive insights. This includes a review of <strong class="screentext">artificial intelligence</strong> (<strong class="screentext">AI</strong>) powered visuals, custom visuals, animation, and other analytics features with Power BI Desktop and the service.</p>
    <p class="fm-booktitle">In this chapter, we will review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">AI visuals</li>
      <li class="bulletlist">ArcGIS Maps for Power BI</li>
      <li class="bulletlist">R and Python visuals</li>
      <li class="bulletlist">Custom visuals</li>
      <li class="bulletlist">Animation and data storytelling</li>
      <li class="bulletlist">Analytics pane</li>
      <li class="bulletlist">Quick insights/Analyze</li>
      <li class="bulletlist">Mobile-optimized report pages</li>
    </ul>
    <h1 id="calibre_link-256" class="heading">AI visuals</h1>
    <p class="fm-booktitle"><strong class="screentext">Artificial intelligence</strong> (<strong class="screentext">AI</strong>) visuals incorporate<a id="calibre_link-524" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> aspects of machine learning such as pattern recognition and natural (human) language <a id="calibre_link-486" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>parsing. Machine learning is a form of AI that uses statistical models and algorithms to analyze and make inferences from complex data patterns.</p>
    <p class="fm-booktitle">In the past, the application of AI or machine learning required a data scientist, but Microsoft has made tremendous strides in democratizing machine learning within Power BI<a id="calibre_link-534" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> both with the <strong class="screentext">Auto ML</strong> features of <strong class="screentext">dataflows</strong> in the Power BI service and AI visuals within Power BI Desktop. The use of the advanced capabilities of AI visuals can add analytical punch<a id="calibre_link-487" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to many reports.</p>
    <p class="fm-booktitle">Power BI Desktop contains four AI visuals as follows:</p>
    <ul class="calibre10">
      <li class="bulletlist">Key influencers</li>
      <li class="bulletlist">Decomposition tree</li>
      <li class="bulletlist">Q&amp;A</li>
      <li class="bulletlist">Smart narrative</li>
    </ul>
    <p class="fm-booktitle">We explore each of these visuals in turn, starting with the <strong class="screentext">key influencers</strong> visual.</p>
    <h2 id="calibre_link-257" class="calibre9">Key influencers</h2>
    <p class="fm-booktitle">The <strong class="screentext">key influencers</strong> visual is a powerful analytic<a id="calibre_link-525" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> tool included as a standard visual within Power BI Desktop. This visual can be complex to work with and is often best used by report authors to quickly identify interesting analytic<a id="calibre_link-1053" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> insights that deserve further investigation. The report author can then create simple visuals and stories that highlight these analytical insights.</p>
    <p class="fm-booktitle">The <strong class="screentext">key influencers</strong> visual uses machine learning algorithms to analyze and find patterns within the data. These patterns are then presented back to the report author as <strong class="screentext">key influencers</strong> that impact a particular metric as well as clustering into <strong class="screentext">Top segments</strong>. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.1</em>, the <strong class="screentext">key influencers</strong> visual has been configured to analyze the <code class="inlinecode">Internet Net Sales</code> measure by placing numerous columns from the <code class="inlinecode">Customer</code> table into the <strong class="screentext">Explain by</strong> field well in order to identify what factors impact <code class="inlinecode">Internet Net Sales</code> to be higher or lower: </p>
    <figure class="mediaobject"><img src="images/000068.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.1: A key influencers visual</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 8.1</em>, the single <a id="calibre_link-1054" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>largest factor that impacts <code class="inlinecode">Internet Net Sales</code> to <strong class="screentext">Decrease</strong> is that the <code class="inlinecode">Customer History Segment</code> column has a value of <strong class="screentext">First Year Customer</strong>. The second<a id="calibre_link-526" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> most impactful factor is that the <code class="inlinecode">CountryRegionName</code> of the customer is <strong class="screentext">United States</strong>. Additional high impacts are an <code class="inlinecode">Education</code> of <strong class="screentext">Partial High School</strong>, <code class="inlinecode">TotalChildren</code> of <strong class="screentext">more than 4</strong>, and a decrease in <code class="inlinecode">Customer Yearly Income</code>. </p>
    <p class="fm-booktitle">For each of these key influencers, a graphic is presented that helps explain the insight further. This visual is generally a column chart or scatter chart and includes a text narrative at the top that puts the insight into words.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.1</em>, note that the analysis can be performed for <strong class="screentext">What influences Internet Net Sales</strong> to either <strong class="screentext">Decrease</strong> or <strong class="screentext">Increase</strong>. Additionally, <strong class="screentext">Counts</strong> have been enabled on the <strong class="screentext">Analysis</strong> formatting card. Enabling <strong class="screentext">Counts</strong> displays a ring around each circle that represents the count of records that form the key influencer. The key influencers can then be sorted by <strong class="screentext">Impact</strong> or <strong class="screentext">Count</strong> in the lower left of the visual.</p>
    <p class="fm-booktitle">Special attention should be<a id="calibre_link-2043" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> paid to the <strong class="screentext">Expand by</strong> field well. As shown in <em class="italic">Figure 8.1</em>, the <code class="inlinecode">CustomerAlternateKey</code> field has been used in the <strong class="screentext">Expand by</strong> field well. To understand the function of the <strong class="screentext">Expand by</strong> field well, consider that the measure or summarized column placed in the <strong class="screentext">Analyze</strong> field well is automatically analyzed <a id="calibre_link-2044" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>at the detail level of the <strong class="screentext">Explain by</strong> columns. </p>
    <p class="fm-booktitle">Depending on the data, this level may be overly summarized and thus not suitable for a machine learning regression model. Machine learning models tend to work best with more data. Thus, in order to increase the detail level analyzed, the <strong class="screentext">Expand by</strong> field can be used. By using a unique key for each customer, this effectively forces the data to not summarize and thus the machine learning algorithm executes at the most detailed grain for the table.</p>
    <p class="fm-booktitle">In addition to the <strong class="screentext">Key influencers</strong> tab, a <strong class="screentext">Top segments</strong> tab is also populated by the <strong class="screentext">Key influencers </strong>visual as shown in <em class="italic">Figure 8.2</em>:</p>
    <figure class="mediaobject"><img src="images/000079.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.2: A key influencers visual, Top segments</p>
    <p class="fm-booktitle"><strong class="screentext">Top segments</strong> use clustering algorithms to identify clusters where the <strong class="screentext">Analyze</strong> metric is lower or higher than the average of the overall dataset. In <em class="italic">Figure 8.2</em>, six segments are presented that include<a id="calibre_link-527" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the <strong class="screentext">Average of Internet Net Sales</strong> as well as a <strong class="screentext">Population count</strong> of the number of rows included in each segment. The<a id="calibre_link-1055" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> size of each bubble corresponds to the <strong class="screentext">Population count</strong>. Therefore, we can quickly see visually that <strong class="screentext">Segment 2</strong> is more impactful than <strong class="screentext">Segment 1</strong> since the measure value is similar, but <strong class="screentext">Segment 2</strong> has almost 3 times the number of occurrences. </p>
    <p class="fm-booktitle">Clicking on <strong class="screentext">Segment 2</strong> presents additional information about the segment, including the attribute values that correspond to the segment as shown in <em class="italic">Figure 8.3</em>:</p>
    <figure class="mediaobject"><img src="images/000090.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.3: Top segments, details</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 8.3</em>, the attributes that make up <strong class="screentext">Segment 2</strong> are when the <strong class="screentext">Customer History Segment is First Year Customer</strong> and the <strong class="screentext">Customer Yearly Income is less than or equal to 30000</strong>. Clear, detailed information<a id="calibre_link-2045" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is presented identifying the average <code class="inlinecode">Internet Net Sales</code> for the segment, the difference from the overall average, the number of data <a id="calibre_link-2046" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>points within the segment, and the percentage of the overall data within the segment (<strong class="screentext">19.7%</strong>).</p>
    <p class="fm-booktitle">The <strong class="screentext">key influencers </strong>visualization is not the only Power BI visual that leverages machine learning technology. Another such visual is the <strong class="screentext">Decomposition tree</strong> visualization that we will explore next.</p>
    <h2 id="calibre_link-258" class="calibre9">Decomposition tree</h2>
    <p class="fm-booktitle">The <strong class="screentext">Decomposition tree</strong> visual is<a id="calibre_link-882" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> another advanced visual that incorporates<a id="calibre_link-488" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> machine learning technology. </p>
    <p class="fm-booktitle">The <strong class="screentext">Decomposition tree</strong> visual is another visual that is perhaps best used by report authors to perform ad hoc data and root cause analysis, in order to quickly gain insights into data that can then be presented to users in a more intuitive and straightforward fashion. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.4</em>, the <strong class="screentext">key influencers</strong> visual from <em class="italic">Figure 8.1</em> has been converted to a <strong class="screentext">Decomposition tree</strong> visual:</p>
    <figure class="mediaobject"><img src="images/000101.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.4: A decomposition tree visual</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 8.4</em>, at each level of the hierarchy data bars are displayed along with category values and amounts. A <strong class="screentext">+</strong> icon is present for each category value. Clicking on this <strong class="screentext">+</strong> icon allows you to <a id="calibre_link-883" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>manually drill into any category not already present in <a id="calibre_link-489" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the visual. </p>
    <p class="fm-booktitle">In addition, you can instead choose to let the visual guide you through the analysis by displaying the next hierarchy level that has the highest or lowest value for the metric. These <strong class="screentext">High value</strong> and <strong class="screentext">Low value</strong> options are<a id="calibre_link-485" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> known as <strong class="screentext">AI splits</strong> and can be disabled in the <strong class="screentext">Analysis</strong> format card for the visual.</p>
    <p class="fm-booktitle">Hierarchy levels can be removed by clicking the <strong class="screentext">X</strong> icon at the top of each column. Note also that as a hierarchy level is expanded, the sub-heading under the main column heading displays the expanded category value, which is displayed in bold within the visual itself.</p>
    <p class="fm-booktitle">Moving on from the <a id="calibre_link-884" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>advanced machine learning visuals, we will next explore<a id="calibre_link-490" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> two visuals that leverage Power BI’s natural language (human language versus a constructed, artificial language) features, starting with the <strong class="screentext">Q&amp;A</strong> visual.</p>
    <h2 id="calibre_link-259" class="calibre9">Q&amp;A</h2>
    <p class="fm-booktitle">The Q&amp;A visualization<a id="calibre_link-491" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> represents Microsoft’s investments in natural language technology that can transform the user experience from selecting elements<a id="calibre_link-1561" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> with a mouse to simply speaking or typing in their questions. Common questions and terms that business users are familiar with can be associated with metrics and attributes of the source Power BI dataset. </p>
    <p class="fm-booktitle">As with other advanced visuals such as <strong class="screentext">key influencers</strong> and <strong class="screentext">Decomposition tree</strong>, the <strong class="screentext">Q&amp;A</strong> visual is perhaps best suited for report authors attempting to quickly understand and tease out analytical insights from the data. The ability to ask natural language questions and generate visuals based upon those questions is quite powerful. </p>
    <p class="fm-booktitle">A <strong class="screentext">Q&amp;A</strong> visual can be added to a report page by using the <strong class="screentext">Visualizations</strong> pane or by double-clicking the report canvas. <em class="italic">Figure 8.5</em> shows an example of an unconfigured <strong class="screentext">Q&amp;A</strong> visual:</p>
    <figure class="mediaobject"><img src="images/000111.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.5: A Q&amp;A visual</p>
    <p class="fm-booktitle">Selecting one of the default example questions or typing a question into the <strong class="screentext">Ask a question about your data</strong> text<a id="calibre_link-492" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> box generates a visual. By default, the<a id="calibre_link-1562" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> type of visual is most often a column or bar chart but particular visuals can be specified as part of the question. In <em class="italic">Figure 8.6,</em> the requested visual is a pie chart:</p>
    <figure class="mediaobject"><img src="images/000121.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.6: A Q&amp;A visual result</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 8.6</em>, if the report author likes the visual created, the visual can be added as a standard visual to the<a id="calibre_link-2047" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report page simply by clicking on the <strong class="screentext">Turn this Q&amp;A result into a standard visual</strong> icon to the immediate right of the question<a id="calibre_link-2048" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> text box. </p>
    <p class="fm-booktitle">Clicking on the gear icon or clicking on the <strong class="screentext">Add synonyms now</strong> button shown in <em class="italic">Figure 8.5</em> opens the <strong class="screentext">Q&amp;A setup</strong> dialog as shown in <em class="italic">Figure 8.7</em>: </p>
    <figure class="mediaobject"><img src="images/000132.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.7: A Q&amp;A visual result</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 8.7</em>, the <strong class="screentext">Q&amp;A setup</strong> dialog allows the report author to create synonyms, review questions asked by report viewers, train Q&amp;A to better understand questions, and add or remove suggested questions. A full treatment of <strong class="screentext">Q&amp;A setup</strong> is beyond the scope<a id="calibre_link-493" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of this chapter but a detailed recipe for setting up and preparing Q&amp;A is included in <em class="italic">Chapter 5</em> of <em class="italic">Power BI Cookbook, 2nd Edition</em>.</p>
    <p class="fm-booktitle">Enterprise business<a id="calibre_link-1563" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> intelligence teams should consider the implications of introducing Q&amp;A to report viewers carefully. Achieving good Q&amp;A results depends heavily on configuring synonyms correctly.</p>
    <p class="fm-booktitle">While proper, intuitive naming of columns and measures can help, generally there are many synonyms that are required to be configured and maintained over time. In addition, it is imperative that enterprise business intelligence teams monitor the questions being asked by the business users and the results returned from those queries.</p>
    <p class="fm-booktitle">In addition to the <strong class="screentext">Q&amp;A</strong> visual, another visual that leverages the natural language capabilities of Power BI is the <strong class="screentext">smart narrative</strong> visual.</p>
    <h2 id="calibre_link-260" class="calibre9">Smart narrative</h2>
    <p class="fm-booktitle">The <strong class="screentext">smart narrative</strong> visual is <a id="calibre_link-494" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>another impressive visualization that can save report authors a lot of time and energy. The <strong class="screentext">smart narrative</strong> visual creates a natural<a id="calibre_link-1724" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> language (human language) summary of an entire report page or an individual visual. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.8</em>, the report page shown in <em class="italic">Figure 6.10</em> from <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>, was duplicated. A blank area of the canvas was clicked and then the <strong class="screentext">smart narrative</strong> visual is chosen from the <strong class="screentext">Visualizations</strong> pane. The <strong class="screentext">smart narrative</strong> visual then generated the text shown in <em class="italic">Figure 8.8</em>:</p>
    <figure class="mediaobject"><img src="images/000143.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.8: The smart narrative result</p>
    <p class="fm-booktitle">The <strong class="screentext">smart narrative</strong> visual can be customized by the report author to add additional text and insights. In <em class="italic">Figure 8.8</em> the custom value <strong class="screentext">Adworks net margin %</strong> was added to the <strong class="screentext">smart narrative</strong> visual using the <strong class="screentext">+ Value</strong> dialog and corresponding custom text added to the visual, <strong class="screentext">AdWorks Net Margin % was</strong>. Custom values created via the <strong class="screentext">+ Value</strong> pane can be reviewed and removed via the <strong class="screentext">Review</strong> pane.</p>
    <p class="fm-booktitle"><strong class="screentext">Smart narrative</strong> visuals can also be used on individual report visuals. To create a corresponding <strong class="screentext">smart narrative</strong> visual for an individual report visual, simply right-click the report visual and choose <strong class="screentext">Summarize</strong>. Most standard visuals are supported such as bar, column, and line charts. However, more advanced visuals like waterfall charts and decomposition trees, for example, are not supported and have the <strong class="screentext">Summarize</strong> option greyed out.</p>
    <p class="fm-booktitle">The <strong class="screentext">smart narrative</strong> visual provides all of the standard text box controls for formatting text as well as all of the <a id="calibre_link-1725" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>standard text box formatting options via the <strong class="screentext">Format text box</strong> pane. This makes the <strong class="screentext">smart narrative</strong> visual highly customizable. While this may <a id="calibre_link-495" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>make it seem like the <strong class="screentext">smart narrative </strong>visual is just a simple text box, all of the underlined values and analysis are updated each time the report data is refreshed!</p>
    <p class="fm-booktitle">We now turn our attention to two additional visuals that integrate the powerful data analytics capabilities of the <strong class="screentext">R</strong> and <strong class="screentext">Python</strong> programming languages. </p>
    <h1 id="calibre_link-261" class="heading">R and Python visuals</h1>
    <p class="fm-booktitle">The <strong class="screentext">R</strong> and <strong class="screentext">Python</strong> programming languages both have strong data analysis and visualization capabilities. This<a id="calibre_link-1646" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> makes these languages a natural fit for data analysis and visualization tools such as Power BI Desktop. In addition to other integration options, such as the<a id="calibre_link-1556" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> ability to use R and Python in Power Query, Power BI Desktop also provides standard visuals for both R and Python. </p>
    <p class="fm-booktitle">In order to use the R and Python visuals, you must first install the R and Python programming languages and ensure that the R scripting and Python scripting options are configured in the <strong class="screentext">GLOBAL</strong> options (<strong class="screentext">File | Options and settings | Options</strong>) as shown in <em class="italic">Figure 8.9</em>:</p>
    <figure class="mediaobject"><img src="images/000154.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.9: R scripting options</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 8.9</em>, Power BI attempts to detect any installed R and Python program language<a id="calibre_link-1051" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> installations and <strong class="screentext">integrated development environments</strong> (<strong class="screentext">IDEs</strong>). Once you have the R and Python<a id="calibre_link-1647" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> languages installed and configured, you are ready to add an R or Python <a id="calibre_link-1557" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visual to a report page. Adding an R or Python visual to a report page for the first time results in a security prompt as shown in <em class="italic">Figure 8.10</em>:</p>
    <figure class="mediaobject"><img src="images/000165.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.10: R and Python Enable script visuals message</p>
    <p class="fm-booktitle">The prompt in <em class="italic">Figure 8.10</em> is displayed once per report when using R and Python visuals and is intended to alert the report author that enabling scripts has potential security and privacy risks. In<a id="calibre_link-2049" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> addition, each time a report containing R and Python visuals is opened within <a id="calibre_link-2050" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI Desktop the same prompt is opened.</p>
    <p class="fm-booktitle">While integration with the R and Python languages adds a tremendous amount of analytical and visual capabilities to Power BI, enterprise business intelligence teams should carefully consider the use of R and Python within their Power BI projects. While the Power BI service supports the most popular R and Python packages/modules, not every package or module is fully supported in the service. </p>
    <p class="fm-booktitle">In addition, once included in a Power BI file, other report authors or editors are required to have the R or Python language installed on their computers with the required packages and modules installed. Given the frequency of changes to both R and Python and the potential for code to work on one version of R and Python and not another, enterprise business intelligence teams that use R and Python should standardize the use of specific versions and allowed packages and modules.</p>
    <p class="fm-booktitle">We now take a closer look at using R visuals.</p>
    <h2 id="calibre_link-262" class="calibre9">R visual</h2>
    <p class="fm-booktitle">The R language and<a id="calibre_link-1650" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> runtime can be downloaded from the R Project for Statistical Computing website (<a href="https://cran.r-project.org/bin/windows/base/" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://cran.r-project.org/bin/windows/base/</span></a>) or Microsoft (<a href="https://www.microsoft.com/en-us/download/details.aspx?id=51205" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://www.microsoft.com/en-us/download/details.aspx?id=51205</span></a>). Once R is installed and the Power BI <strong class="screentext">R script</strong> options configured, R visuals can be added to report pages in Power BI Desktop. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.11</em> the <code class="inlinecode">Product Name</code> column<a id="calibre_link-1648" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> from the <code class="inlinecode">Products</code> table has been added to the <strong class="screentext">Values</strong> field well for the R visual and a word cloud has been created using the R language:</p>
    <figure class="mediaobject"><img src="images/000177.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.11: R visual</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 8.11</em>, selecting an R visual opens an <strong class="screentext">R script editor</strong> pane at the bottom of the canvas when in the <strong class="screentext">Report</strong> view. This script editor allows the input of R code. Four icons are present in the upper-right corner of the R script editor. From left to right, these icons perform the following functions:</p>
    <ul class="calibre10">
      <li class="bulletlist">The chevron icon expands or collapses the <strong class="screentext">R script editor</strong> pane</li>
      <li class="bulletlist">The arrow icon opens the R script in the configured IDE</li>
      <li class="bulletlist">The gear icon opens the Power BI Desktop <strong class="screentext">Options (File | Options and settings | Options)</strong></li>
      <li class="bulletlist">The run icon renders the R visual</li>
    </ul>
    <p class="fm-booktitle">The full code <a id="calibre_link-2051" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>listed in the <strong class="screentext">R script editor</strong> from <em class="italic">Figure 8.11</em> is provided here:</p>
    <pre class="programlisting"><code class="hljs-code"><span class="hljs-comment"># The following code to create a dataframe and remove duplicated rows is always executed and acts as a preamble for your script: </span>
<span class="hljs-comment"># dataset &lt;- data.frame(Product Name)</span>
<span class="hljs-comment"># dataset &lt;- unique(dataset)</span>
<span class="hljs-comment"># Paste or type your script code here:</span>
require(tm)
require(wordcloud)
require(RColorBrewer)
words &lt;- Corpus(VectorSource(dataset[,<span class="hljs-number">1</span>]))
words &lt;- tm_map(words, stripWhitespace)
words &lt;- tm_map(words, content_transformer(tolower))
words &lt;- tm_map(words, removeNumbers)
words &lt;- tm_map(words, removePunctuation)
words &lt;- tm_map(words, removeWords, stopwords(<span class="hljs-string">"english"</span>))
words &lt;- tm_map(words, stemDocument)
wordcloud(words, scale=<span class="hljs-built_in">c</span>(<span class="hljs-number">5</span>,<span class="hljs-number">0.75</span>), max.words=<span class="hljs-number">50</span>, random.order=<span class="hljs-literal">FALSE</span>, rot.per=<span class="hljs-number">0.35</span>, use.r.layout=<span class="hljs-literal">FALSE</span>, colors=brewer.pal(<span class="hljs-number">8</span>, <span class="hljs-string">"Dark2"</span>))
</code></pre>
    <p class="fm-booktitle">Note the warning message displayed in <em class="italic">Figure 8.11</em>, <strong class="screentext">Duplicate rows will be removed from the data</strong>. A similar message is repeated in the first comment within the script editor. Removing duplicate rows is done for performance reasons and cannot be overridden. </p>
    <p class="fm-booktitle">The next two comment lines display the pre-processing that occurs for the script. A <strong class="screentext">dataframe</strong> variable<a id="calibre_link-762" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> called <code class="inlinecode">dataset</code> is created from the columns and measures present in the <strong class="screentext">Values</strong> field well, in this case just the <code class="inlinecode">Product Name</code> column. Then, the <code class="inlinecode">unique</code> function is used to return only distinct rows within the data frame. It is important to note that while these are comments within the code, these commands are in fact executed on the data prior to the rest of the script running.</p>
    <p class="fm-booktitle">The required <a id="calibre_link-1804" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>packages, in this <a id="calibre_link-1726" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>case <strong class="screentext">tm</strong>, <strong class="screentext">wordcloud</strong>, <strong class="screentext">RColorBrewer</strong>, and <strong class="screentext">SnowballC</strong>, were installed<a id="calibre_link-1582" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> using the R<a id="calibre_link-1847" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> console application outside of Power BI Desktop. While inside the R console, you can use the <code class="inlinecode">install.packages</code> command to install packages:</p>
    <pre class="programlisting1"><code class="hljs-con">install.packages("package name")
</code></pre>
    <p class="fm-booktitle">Since the <strong class="screentext">R script editor</strong> lacks any real debugging features, it is often advantageous to use an external <strong class="screentext">integrated development environment</strong> (<strong class="screentext">IDE</strong>) to develop the R code. Clicking on the arrow icon in the upper-right corner of the <strong class="screentext">R script editor</strong> pane opens the code within the <a id="calibre_link-644" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>configured IDE and also creates a temporary <strong class="screentext">comma-separated value</strong> (<strong class="screentext">CSV</strong>) file that holds the data configured for the visual. </p>
    <p class="fm-booktitle">The same <code class="inlinecode">dataset</code> variable <a id="calibre_link-1649" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>is initialized using the <code class="inlinecode">read.csv</code> function with this temporary file specified as the source. Once you are finished debugging the R script, you must copy and paste the R code from the IDE back into the <strong class="screentext">R script editor</strong> pane.</p>
    <p class="fm-booktitle">Using Python visual is similar to using R visual so let’s look at that next.</p>
    <h2 id="calibre_link-263" class="calibre9">Python visual</h2>
    <p class="fm-booktitle">Python visuals <a id="calibre_link-1558" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>operate identically to R visuals except that the scripting language used is Python. The Python language and runtime can be downloaded from the <a id="calibre_link-1560" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>python.org website (<a href="https://www.python.org/downloads/windows/" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://www.python.org/downloads/windows/</span></a>) or the Microsoft Store (<a href="https://www.microsoft.com/en-us/p/python-39/9p7qfqmjrfp7" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://www.microsoft.com/en-us/p/python-39/9p7qfqmjrfp7</span></a>). Once Python is installed and the Power BI <strong class="screentext">Python script</strong> options <a id="calibre_link-1555" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>configured, Python visuals can be added to report pages in Power BI Desktop. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.12</em> the <code class="inlinecode">CountryRegionName</code> column from the <code class="inlinecode">Geography</code> table and the <code class="inlinecode">Internet Sales Customer Count</code> measure from the <code class="inlinecode">Internet Sales</code> table have been added to the <strong class="screentext">Values</strong> field well for the Python visual and a simple bar chart created using the Python language.</p>
    <figure class="mediaobject"><img src="images/000187.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.12: The Python visual</p>
    <p class="fm-booktitle"><em class="italic">Figure 8.12</em> displays the <strong class="screentext">Python script editor</strong> pane as collapsed. The <strong class="screentext">Python script editor</strong> pane works identically to the <strong class="screentext">R script editor</strong> pane. From left to right, the four icons in the upper-right corner<a id="calibre_link-2052" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of the <strong class="screentext">Python script editor</strong> pane perform the following functions:</p>
    <ul class="calibre10">
      <li class="bulletlist">The chevron icon expands or collapses the <strong class="screentext">Python script editor</strong> pane</li>
      <li class="bulletlist">The arrow icon opens the Python script in the configured IDE</li>
      <li class="bulletlist">The gear icon opens the Power BI Desktop <strong class="screentext">Options (File | Options and settings | Options)</strong></li>
      <li class="bulletlist">The run icon renders the Python visual</li>
    </ul>
    <p class="fm-booktitle">The full code listed in the <strong class="screentext">Python script editor</strong> from <em class="italic">Figure 8.11</em> is provided here:</p>
    <pre class="programlisting"><code class="hljs-code"><span class="hljs-comment"># The following code to create a dataframe and remove duplicated rows is always executed and acts as a preamble for your script: </span>
<span class="hljs-comment"># dataset = pandas.DataFrame(Internet Net Sales, Product Category)</span>
<span class="hljs-comment"># dataset = dataset.drop_duplicates()</span>
<span class="hljs-comment"># Paste or type your script code here:</span>
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
dataset.plot(kind=<span class="hljs-string">'barh'</span>, fontsize=<span class="hljs-number">6</span>, x=<span class="hljs-string">'CountryRegionName'</span>, y=<span class="hljs-string">'Internet Sales Customer Count'</span>)
plt.show()
</code></pre>
    <p class="fm-booktitle">As with R visuals, Python visuals <a id="calibre_link-1559" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>remove duplicate rows within the data, creating a <strong class="screentext">dataframe</strong> within the <code class="inlinecode">dataset</code> variable. </p>
    <p class="fm-booktitle">We now turn our attention to the most powerful standard map visual for Power BI, the <strong class="screentext">ArcGIS Maps for Power BI</strong> visual.</p>
    <h1 id="calibre_link-264" class="heading">ArcGIS Maps for Power BI</h1>
    <p class="fm-booktitle">The ArcGIS Map visual for Power BI <a id="calibre_link-519" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>enables report authors to develop map visualizations far beyond the capabilities of the bubble and filled map visuals described in <em class="italic">Chapter 7</em>, <em class="italic">Creating and Formatting Visualizations</em>. Created by Esri, a<a id="calibre_link-1025" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> market leader in <strong class="screentext">Geographic Information Systems</strong> (<strong class="screentext">GIS</strong>), the ArcGIS Map supports all standard map types (for example, bubble and heatmap), but also provides many additional features including a clustering map theme for grouping individual geographic points and the ability to filter a map by the points within a geographical area. </p>
    <p class="fm-booktitle">The ArcGIS Map also enables deep control over the logic of the size and color formatting, such as the number of distinct sizes (classes) to display and the algorithm used to associate locations to these classes. Additionally, reference layers and cards of demographic and economic information are available to provide greater context and advanced analytical insights.</p>
    <p class="fm-booktitle">The ArcGIS Map visual is included in the standard visualizations pane and enabled by default in Power BI Desktop. However, the ArcGIS Map visual is not currently supported for the Power BI Report Server and thus is not available in the Power Desktop application optimized for it. Additionally, an option is available on the <strong class="screentext">Tenant settings</strong> page of the Power BI admin portal to enable or disable the use of the ArcGIS Maps visual. Details on utilizing the Power BI admin portal to configure tenant settings and other options are included in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.13</em>, customer addresses in the state of Washington have been plotted with different sizes and colors based on the <code class="inlinecode">Internet Net Sales</code> measure and the <code class="inlinecode">Customer History Segment</code> column, respectively: </p>
    <figure class="mediaobject"><img src="images/000197.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.13: The ArcGIS Map visual for Power BI</p>
    <p class="fm-booktitle">For the most visually engaging ArcGIS Map, use<a id="calibre_link-698" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the <strong class="screentext">Dark Gray Canvas</strong> base map and bright, saturated colors for the data points plotted. The <strong class="screentext">Streets</strong> and <strong class="screentext">OpenStreetMap</strong> base map types are<a id="calibre_link-520" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> practical choices whenever transportation <a id="calibre_link-1228" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>between the data points or pinned locations is expected. In <em class="italic">Figure 8.13</em>, the <strong class="screentext">Streets</strong> base map supports the sales team that may drive from the pinned office location on 11th street in Bremerton, Washington to the plotted customer addresses.</p>
    <p class="fm-booktitle">The visual has been zoomed into the Bremerton, Washington area near several large customers and a fictional sales office location on 11th street near downtown Bremerton. Pin locations are <a id="calibre_link-938" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>often used in conjunction with the <strong class="screentext">Drive Time</strong> feature to plot an area relative to specific locations such as a group of customers who are within a 20-minute drive of an office. </p>
    <p class="fm-booktitle">To configure these options and all other layout and formatting settings, a set of icons are present in the upper left of the visual as shown in <em class="italic">Figure 8.13</em>. For this visual, the <strong class="screentext">Streets</strong> base map type has been selected and the <strong class="screentext">Map theme</strong> is set to <strong class="screentext">Size &amp; Color</strong>. The reference layer <strong class="screentext">USA Median Age</strong> is used to distinguish areas based on age (via color intensity). A column named <code class="inlinecode">Full Address</code> is used for the <strong class="screentext">Location</strong> input field. This column includes the street address, city, state, and postal code such as the following example: 1097 Kulani Lane, Kirkland, WA, 98033.</p>
    <p class="fm-booktitle">The <strong class="screentext">Data category</strong> for this column has been set to <strong class="screentext">Address</strong> in Power BI Desktop to further improve the accuracy of the geocoding process in which the location input value (the address) is converted<a id="calibre_link-521" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to a latitude and longitude. Latitude and longitude fields are available as well, and these inputs are recommended over street addresses for greater performance and scale. </p>
    <p class="fm-booktitle">A maximum of 3,500 street addresses can be geocoded without a Creator license. To avoid the limit of addresses geocoded and to focus the visual on more meaningful data points, a visual level filter can be applied to a measure. In this example, a visual level filter was applied to the <code class="inlinecode">Internet Net Sales</code> measure to only include data points (customer addresses) with over $100. By removing the small customers, this filter reduced the count of addresses by half and still retained over 97% of the <code class="inlinecode">Internet Net Sales</code>. </p>
    <p class="fm-booktitle">The <strong class="screentext">Use ArcGIS Maps for Power BI</strong> option should be checked in the Global <strong class="screentext">Security</strong> options of Power BI Desktop. An equivalent option is exposed in the Power BI service via the <strong class="screentext">Settings</strong> menu <strong class="screentext">(Gear icon | Settings | ArcGIS Maps for Power BI)</strong>, and this should be checked as well to render ArcGIS Maps in the Power BI service. </p>
    <p class="fm-booktitle">In addition, a <strong class="screentext">Use ArcGIS Maps for Power BI</strong> setting is available in the<strong class="screentext"> Tenant settings</strong> page of the Power BI admin portal. Power BI service administrators can optionally disable this feature to prevent all users from using ArcGIS Maps for Power BI. The configuration of <strong class="screentext">Tenant settings</strong> in the Power BI admin portal is described in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>.</p>
    <p class="fm-booktitle">It should be noted that the ArcGIS Maps for Power BI visual requires additional licensing from Esri and a Pro Power BI license. The <strong class="screentext">Azure map</strong> visual, which is currently in preview, may serve as an alternative to the <strong class="screentext">ArcGIS Map for Power BI</strong> visual in some scenarios. The Azure map visual supports 30,000 data points, has many of the primary geospatial visualization and interactive features as the ArcGIS visual, and does not require additional licensing. More information about the Azure map visual can be found here:</p>
    <p class="fm-booktitle"><a href="https://docs.microsoft.com/en-us/azure/azure-maps/power-bi-visual-get-started" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://docs.microsoft.com/en-us/azure/azure-maps/power-bi-visual-get-started</span></a></p>
    <p class="fm-booktitle">The <strong class="screentext">AI visuals</strong>, R and Python visuals, and <strong class="screentext">ArcGIS Maps for Power BI</strong> visual are just the tip of the iceberg when it comes to adding advanced analytical insights to Power BI. Hundreds of additional, advanced<a id="calibre_link-522" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> visuals developed by Microsoft and third parties are available as custom visuals.</p>
    <h1 id="calibre_link-265" class="heading">Custom visuals</h1>
    <p class="fm-booktitle">In addition to the standard visuals included in the <strong class="screentext">Visualizations</strong> pane of Power BI Desktop, a vast array of custom<a id="calibre_link-694" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> visuals can be added to reports to deliver extended functionality or to address specific use cases such as applying ‘smooth lines’ formatting to a line chart or displaying multiple KPIs in the same visual via the Power KPI visual by Microsoft. </p>
    <p class="fm-booktitle">These visuals, many of which have been created by Microsoft, are developed with the common framework used by the standard visuals and are approved by Microsoft prior to inclusion in Microsoft <strong class="screentext">AppSource</strong>. Given the common framework, custom visuals can be integrated into Power BI reports with standard visuals and exhibit the same standard behaviors such as filtering via slicers and report and page filters.</p>
    <p class="fm-booktitle">Power BI report authors and BI teams are well-served to remain conscious of both the advantages and limitations of custom visuals. For example, when several measures or dimension columns need to be displayed within the same visual, custom visuals such as the <strong class="screentext">Impact Bubble Chart</strong> and the <strong class="screentext">Dot Plot</strong> by<strong class="screentext"> Maq Software</strong> may exclusively address this need. In other scenarios, a trade-off or compromise must be made between the incremental features provided by a custom visual and the rich controls built into a standard Power BI visual. </p>
    <p class="fm-booktitle">Additionally, performance and maintenance can be an issue with custom visuals. For example, a custom visual may generate many more queries than a similar standard visual and thus render more slowly and consume more system resources. Moreover, a Power BI environment that utilizes many custom visuals is more difficult to support as report authors are less familiar with the features and behaviors of these visuals.</p>
    <p class="fm-booktitle">Custom visuals available in <strong class="screentext">AppSource</strong> are all approved for running in browsers and on mobile devices via the Power BI mobile apps. A subset of these visuals are certified by Microsoft and support additional Power BI features such as email subscriptions and export to PowerPoint. Additionally, certified custom visuals have met a set of code requirements and have passed strict security tests. Additional details on the certification process are available at the following link: <a href="http://bit.ly/2AFAC9W" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2AFAC9W</span></a>.</p>
    <p class="fm-booktitle">Let’s now take a look at<a id="calibre_link-2053" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> how to find and add custom visuals to a Power BI report.</p>
    <h2 id="calibre_link-266" class="calibre9">Adding a custom visual</h2>
    <p class="fm-booktitle">Custom visuals can be added to<a id="calibre_link-695" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Power BI reports by either downloading and importing <code class="inlinecode">.pbiviz</code> files from Microsoft <strong class="screentext">AppSource</strong> or directly using them within Power BI Desktop. <em class="italic">Figure 8.14</em> shows Microsoft <strong class="screentext">AppSource</strong> filtered to <strong class="screentext">Power BI visuals</strong>: </p>
    <figure class="mediaobject"><img src="images/000206.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.14: Power BI custom visuals in AppSource</p>
    <p class="fm-booktitle">The following link filters <strong class="screentext">AppSource</strong> to the Power BI custom visuals per the preceding screenshot: <a href="http://bit.ly/2BIZZbZ" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2BIZZbZ</span></a>.</p>
    <p class="fm-booktitle">The search bar at the top of the page and the vertical scrollbar on the right can be used to browse and identify custom visuals to download. Each custom visual tile in <strong class="screentext">AppSource</strong> includes a <strong class="screentext">Get it now</strong> link that, if clicked, presents the option to download the custom visual itself (the <code class="inlinecode">.pbiviz</code> file). Clicking anywhere else in the tile other than <code class="inlinecode">Get it now</code> displays a window <a id="calibre_link-2054" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>with a detailed overview of the visual, ratings, support details, and the ability to download a demo <code class="inlinecode">.pbix</code> file. </p>
    <p class="fm-booktitle">To add custom visuals directly to Power BI reports, click the <strong class="screentext">Get more visuals</strong> option via the ellipsis of the <strong class="screentext">Visualizations</strong> pane, as per <em class="italic">Figure 8.15</em>:</p>
    <figure class="mediaobject"><img src="images/000216.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.15: Importing custom visuals from the store</p>
    <p class="fm-booktitle">If a custom visual (<code class="inlinecode">.pbiviz</code> file) has been downloaded from <strong class="screentext">AppSource</strong>, the <strong class="screentext">Import a visual from a file</strong> option can be used to import this custom visual into the report. </p>
    <p class="fm-booktitle">Selecting <strong class="screentext">Get more visuals</strong> launches a slightly different <strong class="screentext">AppSource</strong> experience than the website. Unlike the <strong class="screentext">AppSource</strong> website, the visuals are assigned to categories such as <strong class="screentext">KPI</strong>, <strong class="screentext">Maps</strong>, and <strong class="screentext">Advanced Analytics</strong>, making it easy to browse and compare related visuals. More importantly, utilizing<a id="calibre_link-696" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the integrated <strong class="screentext">Get more visuals</strong> avoids the need to manage <code class="inlinecode">.pbiviz</code> files and allows report authors to remain focused on report development.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.16</em>, the <strong class="screentext">KPI</strong> category of <strong class="screentext">Power BI visuals</strong> is selected from within <strong class="screentext">AppSource</strong>:</p>
    <figure class="mediaobject"><img src="images/000226.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.16: Custom visuals via the Office Store in Power BI Desktop</p>
    <p class="fm-booktitle">Selecting a custom visual’s card displays the same detailed information as <strong class="screentext">AppSource</strong> and an <strong class="screentext">Add</strong> button directly adds the custom visual as a new icon in the <strong class="screentext">Visualizations</strong> pane. The visual categories, customer reviews, supporting documentation, and sample reports all assist report authors in choosing the appropriate visual and using it correctly.</p>
    <p class="fm-booktitle">Organizations can also upload custom visuals to the Power BI service via the organization visuals page of the Power BI Admin portal. Once uploaded, these visuals are exposed to report authors in the <strong class="screentext">Organizational visuals</strong> tab as shown in <em class="italic">Figure 8.16</em>.</p>
    <p class="fm-booktitle">This feature can help both organizations and report authors simplify their use of custom visuals by defining and exposing a particular set of approved custom visuals. For example, a policy could define that new Power BI reports must only utilize standard and organizational custom<a id="calibre_link-697" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> visuals. The list of organizational custom visuals could potentially only include a subset of the visuals that have been certified by Microsoft. </p>
    <p class="fm-booktitle">Alternatively, an approval process could be implemented so that the use case for a custom visual would have to be proven or validated prior to adding this visual to the list of organizational custom visuals. Additional details on managing organizational custom visuals are included in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>.</p>
    <p class="fm-booktitle">In the next section on animation and data storytelling, we will include the use of a custom visual, the Pulse chart.</p>
    <h1 id="calibre_link-267" class="heading">Animation and data storytelling</h1>
    <p class="fm-booktitle">A top responsibility for many<a id="calibre_link-514" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> data professionals is the ability to convey their findings to others in a clear and compelling fashion. Common scenarios for data storytelling include recurring performance review meetings (for example, the close of a fiscal period) and special project or ad hoc meetings with senior managers and executives. For these meetings, the data<a id="calibre_link-840" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> professional or team has already identified the analytical insights to highlight but must plan to properly communicate this message to the specific stakeholders or audience.</p>
    <p class="fm-booktitle">Power BI animation features, including bookmarks as described in <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>, provide powerful support for data storytelling. In addition, the play axis available in the standard <strong class="screentext">Scatter chart</strong> visual and the animation features available in many custom visuals, such as the <strong class="screentext">Line Dot chart</strong> and the <strong class="screentext">Pulse chart</strong>, can also be used to deliver advanced analytical insights and data storytelling.</p>
    <p class="fm-booktitle">Let’s first look at the animation features of standard <strong class="screentext">scatter charts</strong>. </p>
    <h2 id="calibre_link-268" class="calibre9">Play axis for Scatter charts</h2>
    <p class="fm-booktitle">The <strong class="screentext">Scatter</strong> chart is the only standard visual in Power BI Desktop that supports animation. By applying a<a id="calibre_link-1658" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> date/time series column to the <strong class="screentext">Scatter chart’s</strong> <strong class="screentext">Play axis</strong> field well, animated playback and trace features are enabled. </p>
    <p class="fm-booktitle">For example, a visual can be<a id="calibre_link-1288" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> paused at a specific point along the time series, allowing the user to provide additional context. The user can also select one or multiple items (for example, product categories) to display data points representing the previous time periods.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.17</em>, the user has paused the animation on the month of June via the <strong class="screentext">Play axis</strong> and selected the icon associated with the Touring Bikes product subcategory:</p>
    <figure class="mediaobject"><img src="images/000236.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.17: Scatter chart with Play axis</p>
    <p class="fm-booktitle">With the <strong class="screentext">Touring Bikes</strong> subcategory selected, a trace line appears connecting the latest data point for this subcategory to its preceding data points. Additionally, the user can hover the cursor over the preceding data points to provide the details for these months via a tooltip.</p>
    <p class="fm-booktitle">Date, number, and text columns can be used in the <strong class="screentext">Play axis</strong> for the <strong class="screentext">Scatter chart</strong>. As per <em class="italic">Chapter 4</em>, <em class="italic">Designing Import and DirectQuery Data Models</em>, the <code class="inlinecode">Sort by</code> column property can be used to define a logical sort order for text columns such as sorting a <code class="inlinecode">Month name</code> column by<a id="calibre_link-1289" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> a <code class="inlinecode">Month number</code> column.</p>
    <p class="fm-booktitle">Next, we will explore similar <a id="calibre_link-1657" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>animation capabilities of the <strong class="screentext">Pulse chart</strong> custom visual.</p>
    <h2 id="calibre_link-269" class="calibre9">Pulse chart</h2>
    <p class="fm-booktitle">The <strong class="screentext">Pulse chart</strong> custom visual, developed by Microsoft, provides both animation and annotation features to <a id="calibre_link-1551" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>support data storytelling. The <strong class="screentext">Pulse chart</strong> animates the value of a single measure over time and pauses (pulses) at dates associated with events to display pop-up boxes of annotations describing these events. </p>
    <p class="fm-booktitle">During each pause, which can also be applied manually via playback buttons, other Power BI visuals on the same report page are filtered by the event date. Additionally, a second measure can be visualized as a counter at the top of the chart via the <strong class="screentext">Runner Counter</strong> field. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.18</em>, a <strong class="screentext">year-to-date</strong> (<strong class="screentext">YTD</strong>) internet<a id="calibre_link-1868" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> sales measure and four events with annotations are plotted on a <strong class="screentext">Pulse chart</strong>:</p>
    <figure class="mediaobject"><img src="images/000245.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.18: Pulse chart</p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.18</em>, the <code class="inlinecode">Internet Sales (YTD)</code> measure is visualized via the animated line (and dots) in relation to the <strong class="screentext">Y axis</strong>. For this example, a YTD customer count measure has also been applied to the <strong class="screentext">Runner Counter</strong> field input. </p>
    <p class="fm-booktitle">With the visual paused on the shipping promotion event of October 12, 2013, the <strong class="screentext">Y axis</strong> indicates a sales value of approximately $12.00 M, and the <strong class="screentext">Runner Counter</strong> displays a count of 13,258 customers. </p>
    <p class="fm-booktitle">Alternatively, the same measure can be applied to both the <strong class="screentext">Values</strong> and <strong class="screentext">Runner Counter</strong> fields, thus providing the precise value at each pause in addition to the trend via the line. Examples of<a id="calibre_link-1552" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> defining YTD and customer count measures are included in <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>.</p>
    <p class="fm-booktitle">If event annotations are not needed, only the <strong class="screentext">Timestamp</strong> and <strong class="screentext">Values</strong> input fields are required to render the <strong class="screentext">Pulse chart</strong>. The <strong class="screentext">Event Title</strong>, <strong class="screentext">Event Description</strong>, and <strong class="screentext">Event Size</strong> input fields are available to display events and annotations as pop-up boxes. </p>
    <p class="fm-booktitle">Additionally, the formatting pane provides several cards for defining the look and behavior of the <strong class="screentext">Pulse chart</strong>, including the size and color of the pop-up text boxes and the speed of the animation. For example, white text at size 10 can be formatted against a black fill background and the pause at each event can be set to 4 seconds.</p>
    <p class="fm-booktitle">To support the <strong class="screentext">Pulse chart</strong> in the preceding example, a separate table of events was added to the dataset as per <em class="italic">Figure 8.19</em>:</p>
    <figure class="mediaobject"><img src="images/000254.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.19: Events table</p>
    <p class="fm-booktitle">The <code class="inlinecode">Event Date</code> column is used to define a one-to-one relationship from the <code class="inlinecode">Events</code> table to the <code class="inlinecode">Date</code> dimension table. The <code class="inlinecode">Date</code> column from the <code class="inlinecode">Date</code> dimension table is applied to the Pulse chart’s <strong class="screentext">Timestamp</strong> input field, and the <code class="inlinecode">Event Title</code> and <code class="inlinecode">Event Description</code> columns from the events table are applied to their respective input fields. </p>
    <p class="fm-booktitle">The formatting options for the <strong class="screentext">X</strong> and <strong class="screentext">Y axes</strong> of the Pulse chart are much less robust than the standard line chart. As one example, the <strong class="screentext">Y axis</strong> gridlines cannot be disabled. However, gridlines can be hidden by setting the axis color to match the background color. Additionally, the second and later lines of event descriptions in pop-up boxes are displayed without spaces. Report authors can adjust the width of popups or reduce the length of event descriptions to account for this.</p>
    <p class="fm-booktitle">This completes our <a id="calibre_link-1553" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>exploration of using more complex visuals to add advanced analytics and insights to reports. We will next explore another method of adding such analytics and insights via the <strong class="screentext">Analytics</strong> pane.</p>
    <h1 id="calibre_link-270" class="heading">Analytics pane</h1>
    <p class="fm-booktitle">In addition to the Visualization pane’s <strong class="screentext">Build visual</strong> and <strong class="screentext">Format visual</strong> sub-panes used to create and format report visuals discussed in the previous chapter, an <strong class="screentext">Analytics</strong> pane is also available for certain Cartesian <a id="calibre_link-503" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>standard visuals such as <strong class="screentext">Line charts</strong> and <strong class="screentext">Clustered column charts</strong>.</p>
    <p class="fm-booktitle">The Analytics pane allows report authors to add constant and dynamic reference lines such as average, max, and min to visuals to provide greater context and analytical value. Additionally, trend and forecast lines can be added to display the results of advanced analytical techniques such as exponential smoothing to support predictive analytics.</p>
    <p class="fm-booktitle">A simple but important use case of the <strong class="screentext">Analytics</strong> pane, exemplified in the <em class="italic">Trend line</em> section below, is to add a constant line that represents a goal or threshold to compare a measure against. Dynamic reference lines representing an aggregation (for example, a median) behave just like DAX measures and thus, in some scenarios, avoid the need to create new DAX measures in the source dataset or within the report.</p>
    <p class="fm-booktitle">The reference lines available in the <strong class="screentext">Analytics</strong> pane depend on the type of visual. For example, reference lines are currently not supported for any custom visuals and only constant lines can be applied to the stacked column chart and stacked bar chart visuals. Additionally, the <strong class="screentext">Trend line </strong>is exclusive to the line and clustered column chart; the forecast line is exclusive to the line chart. Moreover, a date or a numeric column is required on the <strong class="screentext">X axis</strong> and the <strong class="screentext">X axis Type</strong> must be set to <strong class="screentext">Continuous</strong> in order to utilize the trend and forecast lines. </p>
    <p class="fm-booktitle">New features and capabilities are planned for the <strong class="screentext">Analytics </strong>pane, including an expanded list of visuals supported and error bars to visualize uncertainty of the data. Similar to the <strong class="screentext">Tooltips</strong> feature described in the previous chapter, <em class="italic">Chapter 7</em>, <em class="italic">Creating and Formatting Visualizations</em>, Power BI report authors should be conscious of the <strong class="screentext">Analytics</strong> pane and its ability to enhance report <a id="calibre_link-504" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visuals with additional context and insights such as the use of a <strong class="screentext">Trend line</strong>. </p>
    <h2 id="calibre_link-271" class="calibre9">Trend line</h2>
    <p class="fm-booktitle">A <strong class="screentext">Trend line</strong> is available via the <strong class="screentext">Analytics</strong> pane if there’s time-series data for five standard visuals including<a id="calibre_link-507" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the line chart, area chart, clustered column chart, scatter chart, and the combination line and clustered column chart. <strong class="screentext">Trend lines</strong> display the general direction and slope of data points over time.</p>
    <p class="fm-booktitle">The <strong class="screentext">Trend line</strong> is particularly valuable when a chart contains many data points and significant variation exists among the points, making it difficult to observe the trend of the metric visually. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.20</em>, a trend line and two additional reference lines (average and constant) have been added to a clustered column chart to provide greater insight and context:</p>
    <figure class="mediaobject"><img src="images/000263.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.20: Trend, constant, and average reference lines</p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.20</em>, the <strong class="screentext">Label density</strong> property of the <strong class="screentext">Data labels</strong> formatting card has been set to <strong class="screentext">100%</strong> in order to ensure that all columns have a data label displayed. Additionally, the <strong class="screentext">Position</strong> property of the data labels has been set to <strong class="screentext">Inside end</strong> with a white color. Clear visibility of the data labels for each column, in addition to the two reference lines (<strong class="screentext">Average</strong> and <strong class="screentext">Goal</strong>), avoids the need to display the <strong class="screentext">Y axis</strong> and gridlines.</p>
    <p class="fm-booktitle">Excluding the three reference<a id="calibre_link-508" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> lines from the <strong class="screentext">Analytics</strong> pane, the clustered column chart simply plots the <strong class="screentext">Internet Sales Customer Count</strong> measure against a <code class="inlinecode">Month Beginning Date</code> column. The <code class="inlinecode">Month Beginning Date</code> column (for example, 11/1/2013) is required for the axis input in this scenario as both the trend line and the forecast line require either a date or a number data type for the <strong class="screentext">X axis</strong> and <strong class="screentext">Type</strong> of <strong class="screentext">Continuous</strong>. For example, if the <code class="inlinecode">Year Month</code> column was used for the axis (for example, <strong class="screentext">2013-Nov</strong>), both the trend line and the forecast line cards would not appear in the <strong class="screentext">Analytics </strong>pane as the <strong class="screentext">X axis</strong> type would be <strong class="screentext">Categorical</strong>.</p>
    <p class="fm-booktitle">The DAX expression used for the <strong class="screentext">Internet Sales Customer Count</strong> measure is included in the <em class="italic">Dimension metrics</em> section of <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>. The <code class="inlinecode">Month Beginning Date</code> column’s formula is given below:</p>
    <pre class="programlisting"><code class="hljs-code">Month Beginning Date = DATE(YEAR([Date]),MONTH([Date]),1)
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">Month Beginning Date</code> column is used instead of a <code class="inlinecode">Month Ending Date</code> column because if that was used, the <strong class="screentext">X axis</strong> labels would be shifted to the wrong months. In other words, the <strong class="screentext">Nov 2013</strong> label would appear under the October data. The <code class="inlinecode">Month Ending Date</code> column formula is:</p>
    <pre class="programlisting"><code class="hljs-code">Month Ending Date = EOMONTH([Date],0)
</code></pre>
    <p class="fm-booktitle">With the essential column chart built, the three reference lines can be added from the <strong class="screentext">Analytics</strong> pane as per <em class="italic">Figure 8.21</em>:</p>
    <figure class="mediaobject"><img src="images/000272.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.21: Analytics pane</p>
    <p class="fm-booktitle">As per <em class="italic">Figure 8.21</em>, the <strong class="screentext">Line style</strong> of the <strong class="screentext">Trend line</strong> is set to <strong class="screentext">Dashed</strong> with a transparency of <strong class="screentext">0%</strong>. This formatting ensures that the trend reference line can be easily distinguished from other data on the chart such as the other two reference lines. </p>
    <p class="fm-booktitle">The <strong class="screentext">Combine Series</strong> property is not relevant to this visual as there is only one series and <strong class="screentext">Use Highlight Values</strong> is the default setting for calculating the <strong class="screentext">Trend line</strong>. The <strong class="screentext">Combine Series</strong> property can be useful for plotting the trend of multiple, related column series.</p>
    <p class="fm-booktitle">The numeric symbols (1) next<a id="calibre_link-509" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to the <strong class="screentext">Constant line</strong> and <strong class="screentext">Average line</strong> cards denote that a reference line of each type has also been applied to the visual. For these reference lines, a <strong class="screentext">Dotted</strong> line style has been used, and custom names have been configured (for example, <strong class="screentext">Goal</strong>, <strong class="screentext">Average</strong>) to be displayed via <strong class="screentext">Data labels</strong>. These two additional lines make it easy for users to identify the columns that are above or below the average value for the columns in the visual (<strong class="screentext">1,719</strong>) and the constant goal value of <strong class="screentext">2,000</strong>.</p>
    <p class="fm-booktitle">We will next look at a more advanced feature of the <strong class="screentext">Analytics</strong> pane, <strong class="screentext">Forecasting </strong>.</p>
    <h2 id="calibre_link-272" class="calibre9">Forecasting</h2>
    <p class="fm-booktitle">The <strong class="screentext">Forecasting</strong> feature of the <strong class="screentext">Analytics</strong> pane is exclusive to standard line charts and utilizes predictive algorithms to generate forecasted data points as well as upper and lower boundaries. </p>
    <p class="fm-booktitle">The report author has control <a id="calibre_link-505" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>over the number of data points to forecast, the confidence interval (range of estimate) of the forecast (for example, 80%, 95%), and can apply formatting to distinguish the forecast from the actual data points. Additionally, the <strong class="screentext">Forecasting</strong> feature allows authors to optionally exclude a number from the last data points. This <strong class="screentext">Ignore the last</strong> property is useful for excluding incomplete periods as well as evaluating the accuracy of the forecast relative to recently completed periods.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.22</em>, the clustered column chart from the <strong class="screentext">Trend lines</strong><strong class="screentext"> </strong>section has been switched to a line chart and a <strong class="screentext">Forecast</strong> for the next two months has been added:</p>
    <figure class="mediaobject"><img src="images/000281.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.22: Forecast line</p>
    <p class="fm-booktitle">By hovering over the first forecast point, January 2014, the forecasted <code class="inlinecode">Internet Sales Customer Count</code> value of <strong class="screentext">2,123</strong> is displayed along with the upper (<strong class="screentext">2,428</strong>) and lower (<strong class="screentext">1,818</strong>) boundaries. The user can easily distinguish the last actual data point, <strong class="screentext">2,133</strong> for December of 2013, from the forecast via the <strong class="screentext">Dotted</strong> style of the forecast line and the dark fill of the <strong class="screentext">Confidence band</strong> style. The <strong class="screentext">Trend line</strong>, <strong class="screentext">Average</strong>, and <strong class="screentext">Goal</strong> reference lines applied in the previous section provide further context to the <strong class="screentext">Forecast</strong>.</p>
    <p class="fm-booktitle">As per <em class="italic">Figure 8.22</em>, a custom <strong class="screentext">Forecast length</strong> and <strong class="screentext">Confidence interval</strong> have been applied to the <strong class="screentext">Forecast</strong>. The <strong class="screentext">Seasonality</strong> property<a id="calibre_link-506" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is optional and is used to help detect seasonal variances in data. Think retail sales being seasonally impacted by holiday sales in November and December.</p>
    <p class="fm-booktitle">The <strong class="screentext">Confidence interval</strong> property defines the distance between the upper and lower boundaries from the forecasted data points. For example, the minimum confidence interval of 75% produces a narrower range, and the maximum confidence interval of 99% produces a much wider range.</p>
    <p class="fm-booktitle">The <strong class="screentext">Ignore the last</strong> property can be used to evaluate how accurately the forecast would’ve predicted recent data points. In this example, an <strong class="screentext">Ignore last value</strong> of 2 would result in forecast values for November and December of 2013&mdash;the last two completed months. The forecast algorithm would use all available data points through October of 2013 to generate the two forecast points. If the actual data points for these two months fall outside the confidence interval (upper and lower bounds) of the forecast, the forecast may not be valid for the given data, or<a id="calibre_link-1035" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the <strong class="screentext">Confidence interval</strong> may be too narrow. This testing technique is referred to as <strong class="screentext">hindcasting</strong>. </p>
    <p class="fm-booktitle">Let’s now look at one of the most advanced options for adding analytical insights to reports, the <strong class="screentext">Quick insights</strong> or <strong class="screentext">Analyze</strong> feature.</p>
    <h1 id="calibre_link-273" class="heading">Quick insights/Analyze</h1>
    <p class="fm-booktitle"><strong class="screentext">Quick insights</strong>, also known as the <strong class="screentext">Analyze</strong> feature, is one of the most analytically advanced features in Power BI as it<a id="calibre_link-1573" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> enables sophisticated machine learning algorithms to be executed against datasets or specific subsets of those datasets. The results of these computations automatically generate highly formatted Power BI visuals that can be integrated into reports as though they were created from scratch. </p>
    <p class="fm-booktitle">The full <strong class="screentext">Quick insights</strong> capabilities are only generally available in the Power BI service for import mode datasets without RLS applied and with dashboard tiles reflecting those datasets. However, the essential capabilities of <strong class="screentext">Quick insights</strong> are also available in Power BI Desktop as the <strong class="screentext">Analyze</strong> feature.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.23</em>, <strong class="screentext">Quick insights</strong> has been executed against the <strong class="screentext">Chapter06_Import</strong> dataset in the Power BI service: </p>
    <figure class="mediaobject"><img src="images/000290.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.23: Quick insights for a dataset in the Power BI service</p>
    <p class="fm-booktitle">To execute <strong class="screentext">Quick insights</strong> against an entire dataset, see the <strong class="screentext">Get quick insights</strong> option under the <strong class="screentext">Actions</strong> ellipsis menu for<a id="calibre_link-1574" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> a dataset in the Power BI service. Once the insights have been generated, a <strong class="screentext">View Insights</strong> menu option replaces the <strong class="screentext">Get quick insights</strong> option. </p>
    <p class="fm-booktitle">The visuals generated from the insights, such as the line chart on the left, advise of the algorithm used (for example, outlier, cluster, and correlation). Most importantly, the visuals can be pinned to dashboards and are displayed without the supporting text like normal dashboard tiles. In Power BI Desktop, <strong class="screentext">Quick insights</strong> are limited to specific data points represented by report visuals.</p>
    <p class="fm-booktitle">As mentioned, <strong class="screentext">Quick insights</strong> cannot be executed against datasets that contain row-level security roles as described in <em class="italic">Chapter 5</em>, <em class="italic">Designing DAX Measures and Security Roles</em>. Additionally, <strong class="screentext">Quick insights</strong> cannot be executed against DirectQuery datasets, live connection datasets, or real-time streaming datasets. </p>
    <p class="fm-booktitle">In addition to the use of <strong class="screentext">Quick insights</strong> in the Power BI service, similar capabilities are available within Power BI Desktop via the <strong class="screentext">Analyze</strong> feature, which we will explore next.</p>
    <h2 id="calibre_link-274" class="calibre9">Explain the increase/decrease</h2>
    <p class="fm-booktitle"><strong class="screentext">Quick insight</strong> features are <a id="calibre_link-1575" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>enabled in Power BI Desktop by default, allowing users to right-click data points in visuals and execute the relevant analysis. In <em class="italic">Figure 8.24</em> right-clicking on the data point for 2014-Feb presents an <strong class="screentext">Explain the increase</strong> option in the <strong class="screentext">Analyze</strong> menu: </p>
    <figure class="mediaobject"><img src="images/000299.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.24: Explaining the decrease in Power BI Desktop</p>
    <p class="fm-booktitle">Clicking <strong class="screentext">Explain the increase</strong> executes machine learning algorithms against the dataset and populates a window with visuals representing the insights retrieved. The user can scroll vertically to view the different insights obtained such as <strong class="screentext">Non-Bikes</strong> accounting for all of the increase in customers, as shown in <em class="italic">Figure 8.25</em>:</p>
    <figure class="mediaobject"><img src="images/000310.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.25: Explain the increase in Power BI Desktop</p>
    <p class="fm-booktitle">Clicking the plus sign at the top right corner of the text box explaining the insight adds the visual to the report<a id="calibre_link-1576" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> page. Adding the visual to the report page automatically populates the associated field wells and visual level filters as though the visual was created manually. If necessary, the report author can apply further formatting to align the visual with the design and layout of the page. </p>
    <p class="fm-booktitle">The default for <strong class="screentext">Quick insight </strong>charts is a clustered column chart but other available chart options are displayed at the bottom center of each insight card. In <em class="italic">Figure 8.25</em> a ribbon chart is also available as opposed to the clustered column chart.</p>
    <p class="fm-booktitle">Currently, <strong class="screentext">Quick insights</strong> in Power BI Desktop is limited to the local dataset and is exclusive to import mode datasets. For example, the <strong class="screentext">Explain the decrease</strong> option does not appear when connecting to<a id="calibre_link-2055" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> a published Power BI dataset or an SSAS database via live connection. Given the importance of isolating reports from a central dataset as described in the previous chapter, <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>, this limitation represents a significant obstacle to utilizing this feature in corporate deployments.</p>
    <p class="fm-booktitle">Additionally, there are several limitations on the kinds of measures and filters supported. For example, measures that use the <code class="inlinecode">DISTINCTCOUNT()</code> and <code class="inlinecode">SUMX()</code> functions are not supported, and measures containing conditional logic (for example, <code class="inlinecode">IF()</code>) are also not supported.</p>
    <p class="fm-booktitle">Just as important as delivering advanced analytics and insights to business users is the ability to deliver those such insights anytime, anywhere. Luckily, Power BI provides such capabilities through mobile-optimized report pages.</p>
    <h1 id="calibre_link-275" class="heading">Mobile-optimized report pages</h1>
    <p class="fm-booktitle">A critical use case for many reports is access from smaller form factor devices such as phones and tablets running<a id="calibre_link-1138" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the iOS and Android mobile operating systems. A report that is perfectly designed for a laptop or PC monitor may be difficult to use on a tablet or mobile device, thus depriving business users of advanced analytical insights while they are traveling or otherwise on the go.</p>
    <p class="fm-booktitle">To account for multiple form factors, including both small- and large-screen phones, report authors can create mobile-optimized reports via the Phone Layout view in Power BI Desktop.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 8.26</em>, the <strong class="screentext">Mobile layout</strong> of a report page in Power BI Desktop is accessed via the <strong class="screentext">View</strong> tab:</p>
    <figure class="mediaobject"><img src="images/000320.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.26: Mobile layout in the View tab</p>
    <p class="fm-booktitle">From the <strong class="screentext">Mobile layout</strong> view, the<a id="calibre_link-1139" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> visuals created and formatted for the report page can be arranged and sized on a mobile layout grid. In <em class="italic">Figure 8.27</em>, the two KPI and card visuals included in the preceding image from the <strong class="screentext">Report</strong> view, as well as a line chart, are arranged on the mobile canvas:</p>
    <figure class="mediaobject"><img src="images/000330.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 8.27: The phone layout</p>
    <p class="fm-booktitle">Single-number visuals, such as cards and KPIs, are natural candidates for mobile-optimized layouts. More complex and data-intensive visuals, such as scatter charts and combination charts, are generally less effective choices for mobile layouts given the smaller form factor and screen resolution of mobile devices versus desktop and laptop monitors. </p>
    <p class="fm-booktitle">Given the one-to-one <a id="calibre_link-1140" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>relationship between report pages and the phone layout, one design option is to create a dedicated report page with the visuals needed for the phone layout. This can be especially important because the font sizes and other format options for the visuals cannot be individualized for the <strong class="screentext">Mobile layout</strong> but rather inherit the formatting of the report in the <strong class="screentext">Report</strong> view. </p>
    <p class="fm-booktitle">The size and position of visuals can be adjusted by dragging visual icons along the <strong class="screentext">Mobile layout </strong>grid. A mobile-optimized layout can be defined for each report page, or any number of the pages contained in a report. </p>
    <p class="fm-booktitle">The formatting and filter context of report visuals is always aligned between the <strong class="screentext">Mobile layout </strong>and the default <strong class="screentext">Report</strong> view. For example, to change the format or filter for a visual accessed via the <strong class="screentext">Mobile layout</strong>, the visual can be modified from the standard <strong class="screentext">Report </strong>view desktop layout.</p>
    <p class="fm-booktitle">When a report page is accessed from the Power BI mobile application, the <strong class="screentext">Mobile layout</strong> created in Power BI Desktop is<a id="calibre_link-2056" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> rendered by default in the phone report mode. If a phone-optimized layout doesn’t exist, the report opens in landscape view.</p>
    <p class="fm-booktitle">Power BI dashboards can also be optimized for mobile devices. The <strong class="screentext">Mobile layout</strong> for dashboards is implemented in the Power BI service and is reviewed in <em class="italic">Chapter 9</em>, <em class="italic">Designing Dashboards</em><em class="italic">.</em></p>
    <p class="fm-booktitle">This completes our exploration of applying advanced analytics to Power BI reports.</p>
    <h1 id="calibre_link-276" class="heading">Summary</h1>
    <p class="fm-booktitle">This chapter reviewed many advanced analytical and visualization features that are available to deliver powerful and compelling report content. This included the use of more complex visuals such as the AI visuals, R and Python visuals, the ArcGIS Maps for Power BI visual, and custom visuals. Additionally, the analytical potential of animation via the standard scatter chart visual and custom Pulse chart visual was explored. Finally, the advanced analytical capabilities of the Analytics pane and the Quick insights/Analyze feature were presented.</p>
    <p class="fm-booktitle">The next chapter utilizes the report visualizations and design patterns described in this chapter as well as the previous two chapters to create Power BI dashboards. </p>
    <p class="fm-booktitle">This includes simple single dashboard projects and more elaborate multi-dashboard architectures, representing different levels of detail. Although some users may only view or interact with Power BI via dashboards, the quality and sustainability of this content, and particularly the ability to analyze the supporting details, is largely driven by the report design concepts and features from <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>.</p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-1876">
<div id="calibre_link-2057" class="calibre2">
<div id="calibre_link-2058" class="calibre3"><div id="calibre_link-2059" class="calibre4">
    <h1 class="heading">9</h1>
    <h1 id="calibre_link-277" class="mainheading">Designing Dashboards</h1>
    <p class="fm-booktitle">This chapter leverages the dataset and report development features and concepts from prior chapters to plan and develop Power BI dashboards and apps. Alternative dashboard architectures are described, including an organizational architecture that aligns business teams at different levels of an organization to a common set of corporate KPIs. </p>
    <p class="fm-booktitle">The design and implementation of these dashboards and apps, including layout, custom links, and mobile-optimized dashboards, are described in this chapter. Additionally, other top features and capabilities of dashboards are reviewed, including live report pages and the integration of content from other report types, including paginated reports and Microsoft Excel workbooks.</p>
    <p class="fm-booktitle">In this chapter, we will review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">Dashboards versus reports</li>
      <li class="bulletlist">Dashboard design</li>
      <li class="bulletlist">Dashboard architectures</li>
      <li class="bulletlist">Dashboard tiles</li>
      <li class="bulletlist">Live report pages</li>
      <li class="bulletlist">Mobile-optimized dashboards</li>
    </ul>
    <h1 id="calibre_link-278" class="heading">Dashboards versus reports</h1>
    <p class="fm-booktitle">Executives and<a id="calibre_link-1630" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> senior-level stakeholders require <a id="calibre_link-701" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>a holistic view of the top metrics or <strong class="screentext">Key Performance Indicators</strong> (<strong class="screentext">KPIs</strong>) established by their organization. While Power BI reports deliver a visually rich data analysis experience, optionally at a very detailed level, Power BI dashboards provide a simplified “single pane of glass” for viewing top metrics. </p>
    <p class="fm-booktitle">Additionally, since the tiles of dashboards can be linked to their source report visuals or other dashboards, a dashboard can serve as the starting point to optionally navigate to other dashboards and underlying reports. </p>
    <p class="fm-booktitle">From a technical standpoint, Power BI dashboards are exclusive to the Power BI online service and are primarily<a id="calibre_link-1631" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> composed of tiles representing visuals from one or many reports. While Power BI reports are often limited to a single source dataset, a dashboard’s tiles can<a id="calibre_link-702" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> represent multiple datasets from highly disparate sources to help provide a 360-degree view on a single canvas.</p>
    <p class="fm-booktitle"><strong class="screentext">To less experienced users and BI team members, the terms and capabilities associated with dashboards and reports can be misunderstood</strong>. Much of this confusion stems from the fact that, in common parlance, the word dashboard is used to refer to any type of summary-level report containing multiple visualizations. However, in Power BI, dashboards and reports are two distinct types of content with their own unique capabilities and use cases.</p>
    <p class="fm-booktitle">For example, data-driven alerts are exclusive to Power BI dashboards, while embedding in SharePoint Online is only supported for Power BI reports. More fundamentally, Power BI reports deliver an interactive data exploration experience by providing many methods of filtering, cross-filtering, and drilling to different levels of detail. Power BI dashboards, with the exception of pinned live report pages, are not intended for significant user interaction but rather as a summary-level single pane of glass for displaying key performance indicators. </p>
    <p class="fm-booktitle">Although several capabilities, such as email subscriptions and printing, are common to reports and dashboards, BI teams are well served to design dashboards and reports according to their distinct roles in Power BI. For example, a dashboard should not contain granular details or complex visuals, but rather the essential metrics describing the stakeholder’s area of responsibility or influence. </p>
    <p class="fm-booktitle">The following table compares dashboards to reports across 19 capabilities:</p>
    <table id="calibre_link-2060" class="table-container">
      <tbody class="calibre16">
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Capability</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Dashboard</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Report</strong></p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Visualization pages</p>
          </td>
          <td class="table-cell">
            <p class="normal2">One page</p>
          </td>
          <td class="table-cell">
            <p class="normal2">One or multiple pages</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Authoring environment</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Power BI service</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Power BI Desktop and service</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Viewing environment</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Power BI service and mobile apps</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Power Desktop, service, and mobile apps</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Pinning</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can pin existing dashboard tiles to other dashboards in the current workspace</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can pin report visualizations and pages as tiles to dashboards</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Email subscriptions</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Supported</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Supported</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Filtering</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can only filter or interact with live report page tiles</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can filter, cross-highlight, and slice</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Data alerts</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Supported</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Not supported</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Customization</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can alter&nbsp;layout, tile size, names, and links</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Fully customizable in&nbsp;<strong class="keyword">Edit</strong>&nbsp;mode of the Power BI service and Power BI Desktop</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Natural language queries (Q&amp;A)</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Available for all dataset types (import, Live, and DirectQuery)</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Q&amp;A report visual</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Visibility to data detail</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can export data for a tile</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can export summarized and underlying data, and also the&nbsp;<strong class="keyword">Show Data</strong>&nbsp;option to view tabular data of a visual</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Printing</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can print current dashboard</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can print current report page</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Featured and favorites</p>
          </td>
          <td class="table-cell">
            <p class="normal2">A dashboard can be set as featured and as a favorite</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can only be set as favorites</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Publish to web</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Not supported</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Supported</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Embed in SharePoint</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Not supported</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Supported in SharePoint Online via the Power BI web part</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Mobile optimized</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Supported</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Supported</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Create visuals</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can add tiles containing text, image, video, web content, and streaming data</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Can create visuals using both standard and custom visuals</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Dataset sources</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Tiles pinned from Excel workbooks, PBRS, and Power BI visuals</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Hundreds of supported sources</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">Datasets</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Tiles can reflect one or multiple datasets</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Usually a single dataset with potentially multiple data sources. Can be multiple datasets using DirectQuery for Power BI datasets and Analysis Services</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">Data caching</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Tiles reflect cached query results, and the cache is updated on a schedule</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Visuals generate queries against the source dataset when opened and based on user interactions</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="fm-acknowledgement"> Table 9.1: Dashboard and report capabilities</p>
    <p class="fm-booktitle">As per the preceding table, data-driven alerts are exclusive to Power BI dashboards in the Power BI service. Data alerts and their corresponding notifications are not available to Power BI reports, including<a id="calibre_link-703" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> reports published to <strong class="screentext">Power BI Report Server</strong> (<strong class="screentext">PBRS</strong>). </p>
    <p class="fm-booktitle">The ability to embed <a id="calibre_link-1632" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>custom alert rules and the deep integration of data alerts with the Power BI mobile apps is a top reason to leverage dashboards in the Power BI service. Data alerts and email subscriptions to reports and dashboards in the Power BI service are reviewed in <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>.</p>
    <p class="fm-booktitle">Dashboard(s) may not be necessary or appropriate for every Power BI app. If the primary use case is for users to explore and analyze data or if the desired visualizations can be developed within a report, then a dashboard may only add unnecessary time and complexity. However, if there’s a need to integrate visuals from separate reports on a single canvas, or if a feature exclusive to dashboards such as data alert notifications is required, then dashboards can be an indispensable component of a solution. </p>
    <p class="fm-booktitle">The subsequent sections of this chapter describe many core dashboard features and capabilities, including dashboard tiles, mobile optimizations, and alternative sources, including Excel and paginated reports.</p>
    <h1 id="calibre_link-279" class="heading">Dashboard design</h1>
    <p class="fm-booktitle">The design of dashboards and<a id="calibre_link-700" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> their relationship to both reports and other dashboards is critical to provide a consistent and robust package of information assets for an<a id="calibre_link-718" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> organization. Report authors and BI teams can use visual selection, layout, and supporting tiles to maximize the value and usability of dashboards.</p>
    <p class="fm-booktitle">Report authors are best positioned to produce initial drafts of dashboards based on their knowledge of the most utilized or valued report visuals. Ultimately, a well-designed dashboard delivers both at-a-glance visibility to the most important metrics for the consumer as well as accessibility to supporting and related details.</p>
    <p class="fm-booktitle">Particularly for executives and senior management, the dashboard should support all essential business questions and metrics, without requiring any user clicks. </p>
    <p class="fm-booktitle">If an executive or senior manager regularly has to access underlying reports, make filter selections on live pages, or utilize several dashboards to answer core questions, the architecture and scope of the Power BI dashboard should be reconsidered.</p>
    <p class="fm-booktitle"><em class="italic">Figure 9.1</em> shows an example dashboard organized by <code class="inlinecode">Sales Territory Group</code>:</p>
    <figure class="mediaobject"><img src="images/000340.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.1: Global sales dashboard</p>
    <p class="fm-booktitle">In this example, three <strong class="screentext">Power KPI</strong> custom<a id="calibre_link-1475" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> visuals are displayed at a global level and also for each of the three sales territory groups. The Power KPI custom visual is chosen for these metrics as it presents greater detail and context than other related visuals, such as the standard KPI <a id="calibre_link-719" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>visual. For example, the <strong class="screentext">Total Net Sales vs. Plan</strong> tile at the global level provides the actual value for the latest month, <strong class="screentext">$5.29M for 2013-Dec</strong>, as well as the YOY growth for this month, <strong class="screentext">102.52%</strong>, in addition to the ability to hover over points on the line to see individual values for particular months.</p>
    <p class="fm-booktitle">Each of the 12 Power KPI visualizations was created in the underlying report with the same basic configuration shown in <em class="italic">Figure 9.2</em>:</p>
    <figure class="mediaobject"><img src="images/000349.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.2: Power KPI configuration</p>
    <p class="fm-booktitle">The <code class="inlinecode">AdWorks Net Sales vs Plan Index</code> measure was created using the following formula:</p>
    <pre class="programlisting"><code class="hljs-code">AdWorks Net Sales vs Plan Index = IF([AdWorks Sales Var to Plan %] &gt; 0,1,2)
</code></pre>
    <p class="fm-booktitle">In this measure, the value 1 indicates that sales are greater than the plan, meaning that the goal has been met, while 2 indicates the opposite.</p>
    <p class="fm-booktitle">Distinct line styles<a id="calibre_link-720" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> are applied to each of the three lines displayed by the Power KPI visuals. </p>
    <p class="fm-booktitle">Solid, dotted, and dashed line styles are associated with the net sales, net sales plan, and net sales (PY) lines, respectively. The solid style of the net sales line and the actual KPI value helps to highlight this line relative to the two other less important lines. The distinct line styles are particularly helpful when the tile is being viewed in focus mode or the visual is being viewed with greater space in a report.</p>
    <p class="fm-booktitle">The user, such as the vice president of global sales, can quickly monitor overall performance relative to the plan via the KPI symbol icons in the top-left corner of the tiles (green caret up, red caret down). Additionally, two standard KPI visuals and a 100% stacked column chart were added specifically to the global level to deliver YTD sales and margin performance information as well as the recent mix of reseller and internet sales channels.</p>
    <p class="fm-booktitle">To view the details of a dashboard tile, such as the individual monthly values of one of the smaller tiles, a user can<a id="calibre_link-1009" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> open the tile in <strong class="screentext">focus mode</strong>. Focus mode fills the entire screen with a single visual and thus makes it easy to perceive differences in the length and shape of columns and lines, respectively. Focus mode can be accessed by hovering over the top-right corner of a dashboard tile and then clicking the more options ellipsis (three dots) menu. <em class="italic">Figure 9.3</em> shows the options available for the <strong class="screentext">Total Net Sales vs. Plan</strong> dashboard tile:</p>
    <figure class="mediaobject"><img src="images/000359.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.3: Dashboard tile options</p>
    <p class="fm-booktitle">The 12 Power KPI dashboard tiles, combined with focus mode, provide the user with a simple interface for a robust suite of information. For a user at the global level of the sales organization, this level of detail may be more than sufficient for most scenarios, precluding the need to access other dashboards or reports. </p>
    <p class="fm-booktitle">The same three KPIs (<strong class="screentext">Total Net Sales vs. Plan</strong>, <strong class="screentext">Reseller Net Sales vs. Plan</strong>, <strong class="screentext">Internet Net Sales vs. Plan</strong>) are <a id="calibre_link-721" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>also featured in separate, dedicated dashboards for each sales territory group. Simply clicking a tile on the <strong class="screentext">Global Sales</strong> dashboard opens the <strong class="screentext">North America</strong> dashboard, providing several additional visuals specific to this <strong class="screentext">Sales Territory Group</strong>. Additionally, the <strong class="screentext">North America</strong> sales dashboard follows the same structure as the <strong class="screentext">Global Sales</strong> dashboard<strong class="screentext"> </strong>and thus contains sets of tiles dedicated to the United States and Canada.</p>
    <p class="fm-booktitle">If necessary, a third layer of dashboards could be created for each country within each sales territory group, thus enabling even greater dashboard navigation flexibility (for example, <strong class="screentext">Global</strong> | <strong class="screentext">Europe</strong> | <strong class="screentext">Germany</strong>), with the same Power BI dataset being used for all reports and dashboards in the workspace. Row-level security roles described in <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, can ensure users do not have access to KPIs outside the scope of their assigned role. Additional details and considerations for planning multiple dashboards and creating links between dashboards and reports are described later in this chapter.</p>
    <h2 id="calibre_link-280" class="calibre9">Visual selection</h2>
    <p class="fm-booktitle">Given that the primary purpose of dashboards is to provide an at-a-glance status of key business metrics, it’s important to<a id="calibre_link-725" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> choose visuals that best fit this purpose. Too many dashboard tiles and more detailed tiles can detract from the dashboard’s purpose.</p>
    <p class="fm-booktitle">Although any report visual can be pinned to a dashboard, only the visuals that either align with a corporate standard or that represent a critical insight or starting point should be represented on dashboards. Additionally, dense or relatively complex visuals, such as tables, matrices, and scatter charts, should rarely be pinned to dashboards. As per the <strong class="screentext">Global sales </strong>dashboard, KPI visuals with<a id="calibre_link-1031" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> built-in conditional formatting logic and supporting context are usually the best choices for dashboards given their intuitive nature and clear, concise visual display. </p>
    <p class="fm-booktitle">For example, if a table or matrix is considered to be the most valuable visual within a report, a KPI or card visual could be created targeting, but summarizing, the same business question. KPI and card visuals are more intuitive on dashboards and can be configured to provide single-click access to a report page with sufficient supporting details. Additionally, KPI or card visuals support data-driven alerts while tables, matrices, and scatter charts do not. </p>
    <p class="fm-booktitle">The visual in the top-left corner of a report page, the user’s logical starting point for understanding the report, is often a good candidate to be pinned to a dashboard. Every report should have at least one summary-level visual (for example, card, KPI, or gauge) aligned to the primary business question or purpose of the report as this provides immediate context and understanding for the rest of the visuals on the report page.</p>
    <p class="fm-booktitle">Additionally, given that dashboards are limited to a single page (one canvas), visuals that provide supporting context, such as the standard KPI and the Power KPI custom visuals, should generally be favored over simple cards and gauges. The additional details provided by these visuals may not be visible in small dashboard tiles but are very valuable if additional space is allocated to the tile and when accessed in focus mode. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 9.4</em>, the <strong class="screentext">Total Net Sales vs. Plan</strong> KPI dashboard tile at the <strong class="screentext">Global</strong> level is accessed in focus mode:</p>
    <figure class="mediaobject"><img src="images/000369.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.4: Focus mode of dashboard tile &ndash; Power KPI custom visual</p>
    <p class="fm-booktitle">Given the full pane of additional space provided by focus mode, the supporting metric lines of the Power KPI visual and the individual data points of those lines are exposed to the user.</p>
    <p class="fm-booktitle">Focus mode is also available in reports via the <strong class="screentext">Focus mode</strong> icon in the corner of each report visual. This can certainly be useful as well but remember, as per <em class="italic">Table 1</em>, opening reports always results in new queries being generated. With the exception of streaming dataset tiles, dashboard<a id="calibre_link-726" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> tiles store the cached results of prior queries. Therefore, leveraging focus mode in dashboards, and dashboards in general (rather than reports), to address a significant portion of user analysis needs can reduce the query workload on the underlying dataset and resources (for example, the Power BI Premium capacity) and help ensure a more optimal user experience. </p>
    <p class="fm-booktitle">The Power KPI visual in the preceding example automatically adjusts to the additional space of focus mode to display data labels for all months. The distinct line styles (solid, dotted, and dot-dashed) of the actual net sales, sales plan, and prior year’s sales measures are also more transparent to the user. Additionally, the three measures (net sales, sales plan, and prior year sales) and the two variances (actual versus plan and actual versus prior year) are displayed as tooltips via hovering over the data points.</p>
    <p class="fm-booktitle">These additional data details, formatting options, and other capabilities are not available in the standard KPI visual and therefore, although the Power KPI visual requires additional configuration, it ultimately delivers more analytical value and serves to reduce the need for users to search for additional visuals and reports to resolve their questions. </p>
    <p class="fm-booktitle">However, only the standard KPI, card, and gauge visuals are supported for data alerts so this could be a factor in favor of choosing the standard KPI visual. Thus, dashboard authors must carefully <a id="calibre_link-727" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>consider the respective tradeoffs between using custom and standard visuals. Additional details on configuring data alerts in the Power BI service are included in <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>.</p>
    <p class="fm-booktitle">Moving on from the topic of visual selection for dashboards, another important consideration is dashboard layout.</p>
    <h2 id="calibre_link-281" class="calibre9">Layout</h2>
    <p class="fm-booktitle">The position and size<a id="calibre_link-722" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of dashboard tiles should align with the primary purpose or priorities of the dashboard and standard visual comprehension<a id="calibre_link-728" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> techniques. </p>
    <p class="fm-booktitle">For example, the <strong class="screentext">Total Net Sales vs. Plan</strong> tile at the global level is the most important tile of the <strong class="screentext">Global Sales </strong>dashboard. Therefore, this tile is positioned at the top-left corner of the dashboard and twice as much width is allocated to it relative to the <strong class="screentext">Reseller Sales</strong> and <strong class="screentext">Reseller Sales</strong> tiles. </p>
    <p class="fm-booktitle">Via this layout, the user can naturally start at the top left of the dashboard and navigate to the right (<strong class="screentext">Reseller</strong> and <strong class="screentext">Internet Sales</strong>) and down (<strong class="screentext">North America</strong>, <strong class="screentext">Europe, and Pacific</strong>) to add greater context to the <strong class="screentext">Total Net Sales vs. Plan</strong> tile. </p>
    <p class="fm-booktitle">Another top consideration for layout is to maximize the available canvas space. Unlike reports, which can contain multiple pages and bookmarks, a dashboard is always a single canvas of tiles. Therefore, although a dashboard should not contain empty space, users should not have to scroll vertically or horizontally to view dashboard tiles. </p>
    <p class="fm-booktitle">Given the limited space, typically, a compromise must be made between larger tile sizes for more important visuals versus the inclusion or exclusion of tiles for less essential visuals. As one example, the trailing<a id="calibre_link-1032" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> six-month channel mix tile (stacked column chart) in the <strong class="screentext">Global sales </strong>dashboard could be removed, thereby allowing the <strong class="screentext">Internet Net Sales</strong> and <strong class="screentext">Reseller Net Sales</strong> tiles to be <a id="calibre_link-2061" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>enlarged to the same size as the total net sales tile.</p>
    <p class="fm-booktitle">Given that space considerations are paramount to dashboard layouts, there are two techniques for adding additional space that we cover in the following two sections.</p>
    <h3 id="calibre_link-282" class="heading1">Navigation pane</h3>
    <p class="fm-booktitle">Additional space for <a id="calibre_link-731" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dashboard tiles can be obtained by hiding the <strong class="screentext">navigation pane</strong>. To toggle between hiding or showing the navigation pane, click the three lines above the <strong class="screentext">Home</strong> icon (house symbol), as per <em class="italic">Figure 9.5</em>:</p>
    <figure class="mediaobject"><img src="images/000378.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.5: Hidden navigation pane</p>
    <p class="fm-booktitle">URL parameters can also be used to open dashboards with the navigation pane hidden by default. URL parameters are simply information contained within the query string of a URL. The query string is the portion of the URL that follows a question mark (?). </p>
    <p class="fm-booktitle">In the following example, a string of text from the question mark through to the <code class="inlinecode">true</code> property has been appended to the end of the URL for a dashboard:</p>
    <p class="fm-booktitle"><a href="https://app.powerbi.com/groups/abc123/dashboards/d8465?collapseNavigation=true" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://app.powerbi.com/groups/abc123/dashboards/d8465?collapseNavigation=true</span></a></p>
    <p class="fm-booktitle">This modified URL can be shared with users such that users of the dashboard aren’t required to click on the <a id="calibre_link-2062" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>navigation pane icon. The second technique for adding space is by using fullscreen mode, which we explore next.</p>
    <h3 id="calibre_link-283" class="heading1">Fullscreen mode</h3>
    <p class="fm-booktitle">Another technique for<a id="calibre_link-729" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> obtaining more space on dashboards is to utilize the fullscreen mode. The fullscreen mode can be accessed via the diagonal arrow icon in the top menu bar on the far right as per <em class="italic">Figure 9.6</em>:</p>
    <figure class="mediaobject"><img src="images/000387.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.6: Fullscreen mode icon</p>
    <p class="fm-booktitle">The fullscreen mode removes all of Chrome, including the navigation pane, Power BI menus, and the bars associated with the web browser (for example, tabs, address bar, and bookmarks bar). This view alone substantially increases the available space for larger tiles or a higher volume of dashboard tiles. If certain dashboard tiles are still not visible in the fullscreen mode, <strong class="screentext">Fit to Screen</strong> and <strong class="screentext">Fit to width</strong> options are available in the lower-right corner via the diagonal, outward-pointing arrows icon and the arrow and box icon respectively as shown in <em class="italic">Figure 9.7</em>:</p>
    <figure class="mediaobject"><img src="images/000396.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.7: Fit to Screen</p>
    <p class="fm-booktitle">The <strong class="screentext">Fit to Screen</strong> option, exclusive<a id="calibre_link-1008" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to the fullscreen mode, is also referred to as TV mode and is frequently <a id="calibre_link-730" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>used to display Power BI dashboards on large monitors in corporate hallways. URL parameters can be used to access dashboards in fullscreen mode by default. In the following example, a text string from the question mark through to the <code class="inlinecode">true</code> property has been appended to the URL of the dashboard such that the dashboard will be opened in fullscreen mode:</p>
    <p class="fm-booktitle"><a href="https://app.powerbi.com/groups/abc123/dashboards/d8465?chromeless=true" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://app.powerbi.com/groups/abc123/dashboards/d8465?chromeless=true</span></a></p>
    <p class="fm-booktitle">Ultimately, BI teams must align the layout of tiles with the use cases for the dashboard and the preferences of the stakeholders. For example, if a dashboard is almost exclusively going to be used in fullscreen mode, a layout that requires some level of scrolling to view all tiles outside of fullscreen mode may be acceptable. </p>
    <p class="fm-booktitle">Alternatively, if users<a id="calibre_link-2063" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> regularly access the dashboard via the browser on their laptops or desktop monitors, they may not want to have to collapse the navigation pane or view the dashboard in fullscreen mode to see all the tiles. As the position and size of dashboard tiles can be easily adjusted via drag-and-drop handles within the Power BI service, multiple iterations of dashboard layouts can be quickly evaluated.</p>
    <p class="fm-booktitle">In addition to a dashboard’s primary tiles, supporting tiles can be added to help organize and structure the dashboard.</p>
    <h2 id="calibre_link-284" class="calibre9">Supporting tiles</h2>
    <p class="fm-booktitle">Supporting tiles refer to dashboard tiles used to help structure and organize the dashboard. For example, custom<a id="calibre_link-723" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> images and text boxes can be pinned from reports to dashboards to help structure and organize dashboards. However, shapes cannot be pinned from reports to dashboards. </p>
    <p class="fm-booktitle">While most dashboard tiles are pinned visualizations from an underlying Power BI report, additional tiles can be added via the <strong class="screentext">Add a tile</strong> option in the Power BI service. These tiles, which can include web content, images, video, streaming data, and simple text boxes, serve to give the dashboard greater context and a more robust and finished design.</p>
    <p class="fm-booktitle">In the <strong class="screentext">Global sales </strong>dashboard described earlier, four <strong class="screentext">Text box</strong> tiles were used to distinguish the <strong class="screentext">Global</strong> tiles from those associated with each of the three sales territory groups (<strong class="screentext">North America</strong>, <strong class="screentext">Europe</strong>, and <strong class="screentext">Pacific</strong>). The position and size of the supporting tiles help to clarify the priority and scope of the dashboard.</p>
    <p class="fm-booktitle">For example, without any knowledge of the dashboard’s title, the top position of the global tile and the additional space allocated to the global section of the dashboard help to confirm that the dashboard is primarily focused on the global level.</p>
    <p class="fm-booktitle"><em class="italic">Figure 9.8</em> shows the creation of the <strong class="screentext">Europe</strong> text box tile, created by using the <strong class="screentext">Edit</strong> menu and then choosing <strong class="screentext">Add a tile</strong>.</p>
    <figure class="mediaobject"><img src="images/000406.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.8: Supporting text box tile</p>
    <p class="fm-booktitle">Once created, the diagonal arrow handles in the lower-right corner of each supporting tile can be used to<a id="calibre_link-724" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> change the size of the tile. Additionally, a tile can be selected and dragged to a different location on the canvas.</p>
    <h1 id="calibre_link-285" class="heading">Dashboard architectures</h1>
    <p class="fm-booktitle">For small projects<a id="calibre_link-699" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and the early iterations of an agile BI project, a single dashboard and a few supporting reports may be sufficient. For many users, however, multiple<a id="calibre_link-704" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> dashboards with their own distinct reports are required. Both of these approaches, a single dashboard and multiple dashboards, are geared toward a specific stakeholder or group of consumers, such as the vice president of sales. </p>
    <p class="fm-booktitle">Although these different methodologies may meet the needs of their intended users, a potential risk is a lack of coordination across teams. For example, business units might reference distinct metrics included in their dashboard and these metrics may not be included in the dashboards of senior managers or other business units.</p>
    <p class="fm-booktitle">To promote greater consistency and coordination across groups of users, BI teams can pursue an integrated, organizational dashboard architecture. In this approach, the same metrics and KPIs considered strategic for the organization are available in multiple dashboards specific to levels in an organizational hierarchy or distinct business units. </p>
    <p class="fm-booktitle">The <strong class="screentext">Global Sales </strong>dashboard, described earlier in this chapter, represents this methodology as <a id="calibre_link-2064" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>separate dashboards specific to individual sales territory groups including the same KPIs as the global dashboard. This approach ensures that dashboard tiles are relevant to the specific users and make it possible to analyze up and down a natural organizational hierarchy. Additionally, a common dashboard layout with integrated KPIs makes Power BI solutions much easier to manage with limited BI resources.</p>
    <p class="fm-booktitle">In this section, we explore the single-dashboard, multi-dashboard, and organizational dashboard architectures.</p>
    <h2 id="calibre_link-286" class="calibre9">Single-dashboard architecture</h2>
    <p class="fm-booktitle">A single-dashboard<a id="calibre_link-713" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> architecture is just that, a <a id="calibre_link-1701" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>single dashboard supporting one or more reports.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 9.9</em>, a single dashboard focused on <strong class="screentext">Reseller Sales</strong> contains tiles representing report visuals from four separate Power BI reports:</p>
    <figure class="mediaobject"><img src="images/000416.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.9: Single-dashboard architecture</p>
    <p class="fm-booktitle">By default, a user selection on any of the dashboard tiles opens the report page of the underlying report. For example, a dashboard tile reflecting the percentage of bike sales versus other product categories would be linked to the <strong class="screentext">Reseller Product Mix</strong> report and the specific page<a id="calibre_link-714" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of this report containing the source visual. </p>
    <p class="fm-booktitle">Each Power BI report is<a id="calibre_link-1702" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> based on a Live connection to the <strong class="screentext">AdWorks Enterprise</strong> dataset. As described in the <em class="italic">Live connections to Power BI datasets</em> section in <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>, leveraging this feature avoids the duplication of datasets since each Power BI Desktop report file (<code class="inlinecode">.pbix</code>) only contains the visualization layer (for example, visuals and formatting). </p>
    <p class="fm-booktitle">Although relatively simple to build and support, the single <strong class="screentext">Reseller Sales</strong> dashboard architecture provides both a summary of a diverse set of essential metrics and visuals (represented as dashboard tiles) as well as an entry point to reports containing the details supporting this dashboard. As described in the previous three chapters, Power BI reports could include multiple report pages of visuals related to the dashboard and leverage interactive features, such as slicers and bookmarks, to enable users to explore these reports more easily. </p>
    <p class="fm-booktitle">All of the content in this architecture &ndash; the dashboard, reports, and dataset &ndash; would be hosted in a single workspace in the Power BI service. <em class="italic">Chapter 10</em>, <em class="italic">Managing Application Workspaces and Content</em>, explains the role and configuration of workspaces.</p>
    <p class="fm-booktitle">We’ll now explore a more <a id="calibre_link-715" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>complex dashboard architecture involving multiple dashboards.</p>
    <h2 id="calibre_link-287" class="calibre9">Multiple-dashboard architecture</h2>
    <p class="fm-booktitle">Power BI solutions will <a id="calibre_link-705" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>often need to summarize multiple<a id="calibre_link-1156" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> related topics or business areas that either require or benefit from having their own dashboard. As one example, <strong class="screentext">Internet Sales</strong> and <strong class="screentext">Reseller Sales</strong> may have slightly<a id="calibre_link-1056" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> different definitions for <strong class="screentext">KPIs</strong> and also serve different stakeholders. Separating out these KPIs and visuals to their own dashboards could result in simplified and more focused, relevant dashboards for their users.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 9.10</em>, a <strong class="screentext">Reseller Margin</strong> dashboard and a <strong class="screentext">Reseller Margin Trends</strong> report have been added to the solution described in the previous section: </p>
    <figure class="mediaobject"><img src="images/000001.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.10: Multiple-dashboard architecture</p>
    <p class="fm-booktitle">In this design, a visual from the <strong class="screentext">Reseller Margin Analysis</strong> report has been pinned to both the <strong class="screentext">Reseller Sales</strong> and the <strong class="screentext">Reseller Margin</strong> dashboards, as per the preceding diagram. </p>
    <p class="fm-booktitle">This is not required but is recommended for usability such that users can maintain context as they navigate between both dashboards. The new <strong class="screentext">Reseller Margin Trends</strong> report, built via a Live connection to the published <strong class="screentext">AdWorks Enterprise</strong> dataset, exclusively supports the <strong class="screentext">Reseller Margin</strong> dashboard. </p>
    <p class="fm-booktitle">This architecture extends the scope of the solution to provide greater visibility to margin metrics and trends not available via the single dashboard. For example, rather than navigating through the multiple pages of the two reseller margin reports (<strong class="screentext">Reseller Margin Analysis and Reseller Margin Trends</strong>), users could access the <strong class="screentext">Reseller Margin</strong> dashboard for a more simplified dashboard experience. In addition to user convenience and the limited scope of a single dashboard, utilizing dashboards and their cached data helps to reduce the workload on the underlying dataset and resources.</p>
    <p class="fm-booktitle">Like the single<a id="calibre_link-706" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> dashboard architecture, all content (dashboards, reports, and datasets) from this multi-dashboard architecture is included in the same workspace in the Power BI service. Given this common <a id="calibre_link-1157" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>workspace, each dashboard tile can be linked to a report or dashboard in the same workspace. For example, a margin-related tile on the sales dashboard could be linked to the margin dashboard rather than the default source report. The <em class="italic">Dashboard tiles</em> section later in this chapter contains an example of configuring custom links. </p>
    <p class="fm-booktitle">The multiple dashboard architecture described in this section focused on a specific business process, Reseller Sales. Even more complex dashboard architectures can be created when considering how to architect dashboards to service an entire organization.</p>
    <h2 id="calibre_link-288" class="calibre9">Organizational dashboard architecture</h2>
    <p class="fm-booktitle">Organizational <a id="calibre_link-709" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dashboard architectures<a id="calibre_link-1229" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> are multiple-dashboard architectures designed by considering the reporting needs of an entire organization. Organizational dashboards tend to mirror the organizational hierarchy of a business in terms of its business units or departments.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 9.11</em>, four dashboards contain corporate KPIs at the global level and for the three sales territory groups: </p>
    <figure class="mediaobject"><img src="images/000010.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.11: Organizational dashboard architecture</p>
    <p class="fm-booktitle">Since the same KPIs or metrics are included in each of the four dashboards, users of these dashboards are able to remain aligned with the same goals and can more clearly share their findings and results<a id="calibre_link-1230" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> across teams and levels in the organization. From the perspective of an executive at the global level, the <strong class="screentext">Global Sales</strong> dashboard provides an intuitive entry point into the individual sales territory groups and potentially further layers, if necessary.</p>
    <p class="fm-booktitle">For example, an <a id="calibre_link-710" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>executive could start out at the <strong class="screentext">Global Sales</strong> dashboard and optionally click a tile related to European sales in order to access the <strong class="screentext">Europe Sales</strong> dashboard and obtain greater detail such as the sales performance of Germany, France, and the United Kingdom. From there, even greater levels of detail from the underlying Europe reports could be accessed by clicking on tiles from the <strong class="screentext">Europe Sales</strong> dashboard. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 9.12</em>, the <strong class="screentext">Europe Sales</strong> dashboard follows the design (layout and visual selection) of the <strong class="screentext">Global Sales</strong> dashboard:</p>
    <figure class="mediaobject"><img src="images/000020.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.12: Europe sales dashboard</p>
    <p class="fm-booktitle">The three tiles aligned at the top of the <strong class="screentext">Europe Sales</strong> dashboard are exactly the same tiles as presented on<a id="calibre_link-711" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the <strong class="screentext">Global Sales</strong> dashboard. The only difference is that the tiles are filtered for Europe only.</p>
    <p class="fm-booktitle">The three tiles representing the<a id="calibre_link-1231" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> second row of the Global and <strong class="screentext">Europe Sales</strong> dashboard (<strong class="screentext">Net Sales YTD vs. Plan</strong>,<strong class="screentext"> </strong><strong class="screentext">Net Margin % YTD vs. Plan</strong>,<strong class="screentext"> and </strong><strong class="screentext">Sales Channel Mix</strong>) do not have to be the same across the dashboards since these are not the approved KPIs for the organization. Maintaining a 1:1 match in terms of tiles across the dashboards can be beneficial as this allows users to navigate between dashboards for further analysis of any given tile. However, in many scenarios, there are metrics or visuals that are more pertinent to the given business unit and users may rarely need to analyze non-KPIs across multiple dashboards.</p>
    <p class="fm-booktitle">As per <em class="italic">Figure 9.11</em>, a set of three dedicated European sales reports support the <strong class="screentext">Europe Sales</strong> dashboard. The pages of these reports may provide sufficient detail or, depending on the organizational structure and requirements, an additional layer of dashboards dedicated to each sales territory country could be added. </p>
    <p class="fm-booktitle">Other forms of the organizational dashboard architecture include dedicated dashboards by product group, such as bikes, clothing, and accessories in the case of Adventure Works. Ultimately, these<a id="calibre_link-1232" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> implementations serve to align the different business units on common corporate goals while also providing a rich set of insights relevant to each business unit or organizational level.</p>
    <p class="fm-booktitle">All of the<a id="calibre_link-712" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> dashboard architectures we have shown thus far have involved a single dataset. We next explore the case where multiple datasets underlie the reports and dashboards for a solution.</p>
    <h2 id="calibre_link-289" class="calibre9">Multiple datasets</h2>
    <p class="fm-booktitle">The reports and <a id="calibre_link-707" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dashboards that comprise a solution may be based on a single dataset or multiple datasets.</p>
    <p class="fm-booktitle">A single dataset, <strong class="screentext">AdWorks Enterprise</strong>, was utilized to support all reports and dashboards in each of the three dashboard architectures reviewed in the previous sections. This level of integration is not technically necessary and there are valid scenarios where multiple datasets could be used in the same Power BI solution and even by the same dashboard. </p>
    <p class="fm-booktitle">Multiple datasets can quickly create problems due to separate data refresh processes, separate data source dependencies, and separate data security rules. Additionally, version control issues can arise as each dataset may include differences in the structure and definitions of tables common to both datasets. Moreover, the integration of visuals from separate datasets on a single dashboard may be insufficient to support analytical requirements.</p>
    <p class="fm-booktitle">One use case for multiple datasets is that an organization may not have a particular data source, such as an Oracle database, integrated into its data warehouse system (for example, Teradata) but still wishes to provide essential visualizations of this data in Power BI in order to supplement other reports and dashboards. In this scenario, a Power BI dataset could be built against the Oracle database, and reports utilizing this dedicated dataset could then support one or multiple dashboards. Once the necessary data warehouse integration is completed, the dedicated dataset could be retired and its reporting replaced with new reports based on an Analysis Services model (which uses Teradata as its source) that supports other Power BI reporting content for the organization.</p>
    <p class="fm-booktitle">In other scenarios, a dataset is chosen (or was already implemented) for one or a few business processes that aren’t closely related to other business processes. For example, one dataset was built to include sales and marketing-related data, while a separate dataset includes inventory and shipment data. The reasoning for this isolation may have been that the users of each dataset don’t need access to the other dataset or that a large, integrated dataset would be complex to develop and use. Alternatively, if Power BI Premium capacity is not available and Power BI datasets are used, the 1 GB file limit could force a team to utilize separate Power BI files to store the required data.</p>
    <p class="fm-booktitle">In general, corporate<a id="calibre_link-708" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> BI projects should limit the use of multiple datasets for the reasons described and the long-term value of a centralized data store. However, in environments lacking a data warehouse and other scalable resources, such as an Analysis Services instance or Power BI Premium capacity, multiple datasets can be considered an option and potentially the only option to support one or multiple dashboards in the same Power BI solution.</p>
    <p class="fm-booktitle">We’ll now move on from dashboard architectures to take a closer look at working with dashboard tiles.</p>
    <h1 id="calibre_link-290" class="heading">Dashboard tiles</h1>
    <p class="fm-booktitle">Most dashboard tiles are <a id="calibre_link-732" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>created in the Power BI service by pinning a visual in a report to a new or existing dashboard in the same workspace. However, dashboard tiles can also be created by adding a tile directly from the dashboard itself and by pinning from an Excel workbook or Report Server report.</p>
    <p class="fm-booktitle">With a report open in the Power BI service, hovering over the top-right corner of a visual exposes the <strong class="screentext">Pin visual</strong> icon, as shown in <em class="italic">Figure 9.13</em>:</p>
    <figure class="mediaobject"><img src="images/000030.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.13: Pin visual icon for report visual</p>
    <p class="fm-booktitle">Once pinned to the dashboard, several <a id="calibre_link-733" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>options are available for configuring tiles depending on the type of tile and the content it contains. In the Global and <strong class="screentext">Europe Sales</strong> dashboards described previously, a subtitle was added to each tile (for example, France) and custom links were applied to allow direct navigation from the Global dashboard to the Europe dashboard. </p>
    <p class="fm-booktitle">In addition, for the top, left-most visual, the <strong class="screentext">Display last refresh time </strong>setting was enabled. This setting displays the last time the dataset completed a successful refresh. Such information is often critical to business users so that they understand how current the data is that they are viewing. For example, if a nightly refresh failed and users are looking for data that includes yesterday’s data, knowing the last refresh time helps the users understand that there was an issue. </p>
    <p class="fm-booktitle">Dashboard tiles can be thought of as snapshots of a specific visual and filter context. When a visual is pinned from a report to a dashboard, the specific filter context (for example, slicers or page-level filters), visualization, and formatting at that time are captured by the dashboard. Subsequent changes to the report, such as a modified filter or a different visualization type, are not reflected by the dashboard tile. The dashboard tile will, however, continue to reflect the latest data refreshes of the underlying dataset. Additionally, by default, the dashboard tile will continue to be linked to the report from which the visual was pinned.</p>
    <p class="fm-booktitle">To maintain the synchronization between report visuals and dashboard tiles, changes to reports that impact the pinned visuals require the updated report visual to be pinned again. The existing dashboard tile, reflecting the original filter context and visualization, can be deleted. </p>
    <p class="fm-booktitle">One exception to the snapshot behavior of dashboard tiles is live report pages. When an entire report page is pinned as a single tile to a dashboard, any changes to the report page are automatically<a id="calibre_link-2065" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> reflected on the dashboard as well. The <em class="italic">Live report pages</em> section later in this chapter includes additional details and an example.</p>
    <p class="fm-booktitle">Let’s now take a deeper look at some of the additional functionality of dashboard tiles.</p>
    <h2 id="calibre_link-291" class="calibre9">Tile details and custom links</h2>
    <p class="fm-booktitle">By default, pinned dashboard<a id="calibre_link-736" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> tiles link to the report page from which the tile was pinned. Custom links allow this default behavior to be changed to allow linking dashboard tiles to any valid URL.</p>
    <p class="fm-booktitle">Custom links are an<a id="calibre_link-734" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> important component of multi-dashboard architectures, and particularly the organizational dashboard architecture described previously. </p>
    <p class="fm-booktitle">As mentioned, in the absence of custom links, clicking a dashboard tile opens the report page from which the visual was pinned to the dashboard. Custom links allow BI teams to take control of the navigation experience and enable users to navigate directly to another dashboard with related information or even to an external site, such as a team site on SharePoint Online.</p>
    <p class="fm-booktitle">Tile details can be accessed by hovering over the top-right corner of a dashboard tile, clicking the ellipsis, and then selecting <strong class="screentext">Edit details</strong>. <em class="italic">Figure 9.14</em> shows the <strong class="screentext">Tile details</strong> pane where a <strong class="screentext">Subtitle </strong>(<strong class="screentext">Europe</strong>) is added to one of the <strong class="screentext">Total Net Sales vs. Plan</strong> KPI tiles:</p>
    <figure class="mediaobject"><img src="images/000040.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.14: Tile details</p>
    <p class="fm-booktitle">Additionally, as shown in <em class="italic">Figure 9.14</em>, the <strong class="screentext">Set custom link</strong> property is enabled, and the <strong class="screentext">Europe Sales </strong>dashboard is selected for the target of the link. Clicking <strong class="screentext">Apply</strong> at the bottom of the dialog (not included<a id="calibre_link-735" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> in <em class="italic">Figure 9.14</em>) confirms the selection. Different<a id="calibre_link-737" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> options are available in the <strong class="screentext">Tile Details</strong> window for tiles added directly on the dashboard (not pinned), such as text boxes and images.</p>
    <p class="fm-booktitle">We next take a look at a unique aspect of dashboards, the ability to support streaming data.</p>
    <h2 id="calibre_link-292" class="calibre9">Real-time data tiles</h2>
    <p class="fm-booktitle">Real-time data tiles<a id="calibre_link-745" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> allow streaming data from <strong class="screentext">Internet of Things</strong> (<strong class="screentext">IoT</strong>) devices and other real-time sources to be included in a dashboard. IoT is a term that refers to physical objects with sensors that connect and exchange data with other systems or devices. For example, a car battery that reports charge levels every few seconds that can then be viewed on a phone via an app.</p>
    <p class="fm-booktitle">Real-time data tiles can be added to dashboards using the <strong class="screentext">Edit </strong>and then <strong class="screentext">Add a tile</strong> links. One of the options when adding a tile is an option for <strong class="screentext">Custom Streaming Data</strong> as shown in <em class="italic">Figure 9.15</em>:</p>
    <figure class="mediaobject"><img src="images/000050.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.15: Custom Streaming Data tile</p>
    <p class="fm-booktitle">Choosing this option provides the opportunity to use a current streaming dataset or add a streaming dataset as shown in <em class="italic">Figure 9.16</em>:</p>
    <figure class="mediaobject"><img src="images/000061.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.16: Add a custom streaming data tile</p>
    <p class="fm-booktitle">New streaming datasets can<a id="calibre_link-746" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> come from three sources, <strong class="screentext">API</strong>, <strong class="screentext">Azure Stream</strong>, and <strong class="screentext">PubNub</strong> as shown in <em class="italic">Figure 9.17</em>:</p>
    <figure class="mediaobject"><img src="images/000072.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.17: Sources for new streaming datasets</p>
    <p class="fm-booktitle">The <strong class="screentext">API</strong> option refers to the ability of the Power BI REST API to post real-time data to a streaming dataset, referred to <a id="calibre_link-1554" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as <strong class="screentext">Push Datasets</strong> in the Power BI REST API documentation. This option allows organizations to create their own applications that stream data to Power BI.</p>
    <p class="fm-booktitle">The <strong class="screentext">Azure Stream</strong> option refers to the ability of <strong class="screentext">Azure Stream Analytics</strong> to use Power BI as an output. <strong class="screentext">Azure Stream Analytics</strong> is an event processing and real-time analytics engine designed to process and analyze streaming data. Integration with Azure Machine Learning allows patterns and relationships to be identified and used to trigger actions, alerts, and workflows. Business use cases for <strong class="screentext">Azure Stream Analytics</strong> include:</p>
    <ul class="calibre10">
      <li class="bulletlist">Analysis of real-time telemetry from IoT devices</li>
      <li class="bulletlist">Geospatial analytics for fleet/vehicle management </li>
      <li class="bulletlist">Analyzing web logs and clickstreams</li>
      <li class="bulletlist">Inventory and anomaly detection for <strong class="screentext">Point of Sale</strong> (<strong class="screentext">PoS</strong>) systems </li>
      <li class="bulletlist">Monitoring and predictive maintenance of remote systems</li>
    </ul>
    <p class="fm-booktitle">As <strong class="screentext">Azure Stream Analytics</strong> finds patterns, these events or anomalies can be streamed in real time to a Power BI dashboard tile.</p>
    <p class="fm-booktitle">Finally, the <strong class="screentext">PubNub</strong> option <a id="calibre_link-2066" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>provides integration options with the third-party company PubNub. PubNub is an API platform for developers building real-time applications such as live events, online chat, remote IoT control, and geolocation.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 9.18</em>, the ambient temperature from a sample PubNub streaming data source is plotted in real time:</p>
    <figure class="mediaobject"><img src="images/000083.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.18: Streaming data tile</p>
    <p class="fm-booktitle">Next, we take a look at standardizing<a id="calibre_link-747" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the look and feel of dashboards using themes.</p>
    <h2 id="calibre_link-293" class="calibre9">Dashboard themes</h2>
    <p class="fm-booktitle">Similar to how Power BI <a id="calibre_link-748" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Desktop supports themes for reports, as covered in the <em class="italic">Visualizations best practices</em> section of <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>, dashboards also support themes.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 9.19</em>, the <strong class="screentext">Dashboard theme</strong> dialog has been accessed by choosing <strong class="screentext">Edit</strong> and then <strong class="screentext">Dashboard</strong> <strong class="screentext">theme</strong> from the dashboard ribbon:</p>
    <figure class="mediaobject"><img src="images/000094.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.19: Streaming data tile</p>
    <p class="fm-booktitle">Three default themes, <strong class="screentext">Light</strong>, <strong class="screentext">Dark</strong>, and <strong class="screentext">Color</strong>-<strong class="screentext">blind</strong> <strong class="screentext">friendly</strong>, are available as well as the <strong class="screentext">Custom</strong> option shown in <em class="italic">Figure 9.19</em>.</p>
    <p class="fm-booktitle">Themes can be downloaded as JSON files, modified and uploaded back to the Power BI service. The following JSON code is an example of a Power BI dashboard theme file:</p>
    <pre class="programlisting"><code class="hljs-code">{
    <span class="hljs-number">"name"</span>:<span class="hljs-string">"b33fd847240881ee3107"</span>,
    <span class="hljs-number">"</span><span class="hljs-number">foreground"</span>:<span class="hljs-string">"#FFFFFF"</span>,
    <span class="hljs-number">"background"</span>:<span class="hljs-string">"#afb5b6"</span>,
    <span class="hljs-number">"dataColors"</span>:[
            <span class="hljs-string">"#01B8AA"</span>,<span class="hljs-string">"#374649"</span>,<span class="hljs-string">"#FD625E"</span>,<span class="hljs-string">"#F2C80F"</span>,
            <span class="hljs-string">"#5F6B6D"</span>,<span class="hljs-string">"</span><span class="hljs-string">#8AD4EB"</span>,<span class="hljs-string">"#FE9666"</span>,<span class="hljs-string">"#A66999"</span>
             ],
    <span class="hljs-number">"tiles"</span>:{<span class="hljs-number">"background"</span>:<span class="hljs-string">"#808080"</span>,<span class="hljs-number">"color"</span>:<span class="hljs-string">"#FFFFFF"</span>,<span class="hljs-number">"opacity"</span>:<span class="hljs-number">1</span>},
    <span class="hljs-number">"</span><span class="hljs-number">visualStyles"</span>:
        {<span class="hljs-number">"*"</span>:{<span class="hljs-number">"*"</span>:{<span class="hljs-number">"*"</span>:[
                {<span class="hljs-number">"color"</span>:{<span class="hljs-number">"solid"</span>:{<span class="hljs-number">"color"</span>:<span class="hljs-string">"#FFFFFF"</span>}}},
                {<span class="hljs-number">"labelColor"</span>:{<span class="hljs-number">"solid"</span>:{<span class="hljs-number">"</span><span class="hljs-number">color"</span>:<span class="hljs-string">"#FFFFFF"</span>}}}
                   ]}}},
    <span class="hljs-number">"backgroundImage"</span>:<span class="hljs-literal">null</span>
}
</code></pre>
    <p class="fm-booktitle">We now turn our attention to<a id="calibre_link-749" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> an additional source for dashboard tiles, paginated reports.</p>
    <h2 id="calibre_link-294" class="calibre9">Paginated reports</h2>
    <p class="fm-booktitle"><strong class="screentext">SQL Server Reporting Services</strong> (<strong class="screentext">SSRS</strong>) 2016, and later versions, as well as PBRS, support <a id="calibre_link-741" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>integration with the Power BI service. Once integration is configured between the on-premises report server and the Power BI tenant, certain SSRS report items, such as charts and maps, can be pinned to Power BI dashboards. </p>
    <p class="fm-booktitle">Additionally, a reporting services subscription is automatically created for pinned report items, allowing report server administrators to manage the data refresh schedule of the dashboard tile. Since the source of the dashboard tile is a report published to a reporting services instance, the reporting services instance must initiate updates to the tile. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 9.20</em>, showing an image of <strong class="screentext">Report Server Configuration Manager</strong>, Power BI Report Server has been configured for <strong class="screentext">Power BI Integration</strong>:</p>
    <figure class="mediaobject"><img src="images/000104.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.20: Power BI integration with Power BI Report Server</p>
    <p class="fm-booktitle">In <em class="italic">Figure 9.20</em>, the PBRS instance is configured for integration with the Power BI service. The same Power BI integration<a id="calibre_link-742" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is available for SSRS 2016 and later via the same interface in <strong class="screentext">Report Server Configuration Manager</strong>. The following documentation includes all the requirements for integration with the Power BI service as well as technical details on the integration and pinning process: <a href="http://bit.ly/2CnCkOU" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2CnCkOU</span></a>.</p>
    <p class="fm-booktitle">As described in <em class="italic">Chapter 12</em>, <em class="italic">Deploying Paginated Reports</em>, Power BI Report Server includes all the functionality of SSRS, including paginated (RDL) reports, report subscriptions, folder security, and the reporting services web portal. Power BI Report Server, however, provides several additional features and benefits, with the ability to view and interact with Power BI reports (PBIX files) topping this list.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 9.21</em>, a paginated (RDL) report containing a map is open:</p>
    <figure class="mediaobject"><img src="images/000114.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.21: Pin to Power BI icon in Power BI Report Server</p>
    <p class="fm-booktitle">Selecting the <strong class="screentext">Pin to Power BI Dashboard</strong> icon in the top-right window prompts the user to select the specific report item <a id="calibre_link-743" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to pin. In this report, the map is selected, and this launches the dialog shown in <em class="italic">Figure 9.22</em> for identifying the dashboard in the Power BI service as well as defining the refresh schedule of the tile:</p>
    <figure class="mediaobject"><img src="images/000125.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.22: Pin paginated report visual to Power BI dashboard</p>
    <p class="fm-booktitle">In this example, the map is pinned to the <strong class="screentext">Customer Distribution</strong> dashboard in the <strong class="screentext">Corporate Sales</strong> app <a id="calibre_link-744" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>workspace as shown in <em class="italic">Figure 9.23</em>. The <strong class="screentext">Daily</strong>, <strong class="screentext">Hourly</strong>, and <strong class="screentext">Weekly </strong>tile refreshes can be configured via the <strong class="screentext">Frequency of updates</strong> drop-down menu and this setting defines the report subscription supporting the tile. Report subscriptions can be managed via the <strong class="screentext">My Subscriptions </strong>(<strong class="screentext">Settings | My Subscriptions</strong>) interface on the Reporting Services web portal. </p>
    <figure class="mediaobject"><img src="images/000136.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.23: Paginated report item as Power BI dashboard tile</p>
    <p class="fm-booktitle">Unlike visuals from Power BI reports, which can only be pinned to dashboards in the workspace of the given report, paginated <a id="calibre_link-2067" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>report items can be pinned to any dashboard in any workspace. </p>
    <p class="fm-booktitle">By default, the paginated report dashboard tile is linked back to the on-premises report server report. This link, as well as the title and subtitle for the tile, can be modified via the <strong class="screentext">Tile details</strong> window just like other dashboard tiles.</p>
    <p class="fm-booktitle">Additional information on Power BI Report Server, including the deployment and scheduled refresh of Power BI reports, is included in <em class="italic">Chapter 12</em>, <em class="italic">Deploying Paginated Reports</em>.</p>
    <h2 id="calibre_link-295" class="calibre9">Excel workbooks</h2>
    <p class="fm-booktitle">Excel workbooks containing tables and/or data models can be connected to Power BI. Once connected, users can pin <a id="calibre_link-738" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Excel ranges and objects, such as pivot tables and charts. Scheduled data refreshes can be configured in the Power BI service for Excel workbooks containing data models. However, given the size limitations of Excel data models as well as the additional capabilities of Power BI reports, such as custom visuals, role security, and advanced analytics, it’s generally recommended to migrate Excel data models to Power BI datasets (PBIX files). </p>
    <p class="fm-booktitle">As per <em class="italic">Figure 9.24</em>, the Power BI content contained in an Excel workbook can be imported to a Power BI Desktop file:</p>
    <figure class="mediaobject"><img src="images/000147.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.24: Import Excel queries and models to Power BI</p>
    <p class="fm-booktitle">The migration process includes the data retrieval M queries, data model tables and relationships, DAX measures, and even any Power View report pages contained in the source workbook.</p>
    <p class="fm-booktitle">Only when Excel reports are deeply dependent on Excel-specific functionality, such as worksheet formulas and customized conditional formatting rules, should the model not be migrated to Power BI. Power BI Desktop’s enhanced table and matrix visuals and conditional formatting options now support many of the most common Excel report use cases. Therefore, only limited effort is required to develop an equivalent Power BI Desktop relative to Excel. </p>
    <p class="fm-booktitle">In circumstances where it is not possible to migrate the Excel file to Power BI Desktop, the Excel file can be connected to <a id="calibre_link-739" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI using the <strong class="screentext">Get data</strong> feature of the Power BI service. Once connected, Excel ranges, pivot tables, and charts can be pinned to Power BI dashboards. <em class="italic">Figure 9.25</em> shows a pivot table being pinned to the <strong class="screentext">Customer Distribution</strong> dashboard in the <strong class="screentext">Corporate Sales</strong> workspace:</p>
    <figure class="mediaobject"><img src="images/000157.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.25: Pin Excel content to Power BI dashboard</p>
    <p class="fm-booktitle">The pinning interface is the same as for Power BI report visuals, allowing the choice of pinning to an existing dashboard or a new dashboard as shown in <em class="italic">Figure 9.26</em>:</p>
    <figure class="mediaobject"><img src="images/000169.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.26: Pin to dashboard</p>
    <p class="fm-booktitle">Just like reporting services (SSRS and PBRS) report items, Excel content can also be pinned to any dashboard in any workspace in the Power BI service. Also, like reporting services dashboard tiles, the details of dashboard tiles containing Excel content can be configured, including the title, subtitle, and a custom link. Moreover, Excel and reporting services dashboard tiles can<a id="calibre_link-740" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> also be included in mobile dashboard layouts. The <em class="italic">Mobile-optimized dashboards</em> section later in this chapter describes this feature.</p>
    <p class="fm-booktitle">Although Excel and SSRS report content is not designed to be as visually engaging as Power BI visuals, the ability to leverage these common reporting tools and consolidate their distinct content on the same dashboard is a unique capability of Power BI. </p>
    <p class="fm-booktitle">The details of developing reporting services and Excel-based content as complements to a Power BI solution are beyond the scope of this chapter. However, several examples of these integrations, as well as considerations in choosing among the three tools, are included in <em class="italic">Microsoft Power BI Cookbook Second Edition</em> (<a href="https://www.packtpub.com/product/microsoft-power-bi-cookbook-second-edition/9781801813044" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://www.packtpub.com/product/microsoft-power-bi-cookbook-second-edition/9781801813044</span></a>).</p>
    <h1 id="calibre_link-296" class="heading">Live report pages</h1>
    <p class="fm-booktitle">Live report pages <a id="calibre_link-1085" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>allow entire report pages to be pinned to dashboards. This can be useful in certain situations where the interactivity of reports is desired along with the consolidation benefits of dashboards. </p>
    <p class="fm-booktitle">For some users, the self-service data exploration experience provided within Power BI report pages is the most valuable use case of Power BI content. Although a dashboard of tiles may initiate or contribute to an analysis, these users often have more complex and unpredictable analytical needs such that greater flexibility is required. Additionally, these users are generally much more comfortable and experienced in interacting with Power BI content, such as modifying slicer selections and drilling up and down through hierarchies. </p>
    <p class="fm-booktitle">To provide both the self-service experience of a report page as well as the consolidation benefits of a dashboard, an entire report page can be pinned as a single tile to a dashboard. In <em class="italic">Figure 9.27</em>, showing a dashboard for the United States, a live report page of eight visuals has been pinned to supplement the corporate standard KPI tiles:</p>
    <figure class="mediaobject"><img src="images/000180.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.27: Dashboard with live report page</p>
    <p class="fm-booktitle">In the dashboard shown in <em class="italic">Figure 9.27</em>, the user can leverage the robust filtering options on the sales and margin live page to explore the dataset while maintaining visibility to standard metrics via the top<a id="calibre_link-1086" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> six tiles. In <em class="italic">Figure 9.27</em>, the user has filtered on the <strong class="screentext">Southwest </strong>sales territory region and also selected the<strong class="screentext"> Bikes</strong> product category via the bar chart. These selections impact the other five visuals on the page via either highlighting, in the case of the <strong class="screentext">Net Sales by Calendar Month</strong> column chart, or filtering, in the case of the other four visuals. Filter selections on the live page do not, however, impact the dashboard tiles outside of the live page. </p>
    <p class="fm-booktitle">Like standard dashboard tiles, live page tiles are moveable on the canvas and configurable via the <strong class="screentext">Tile details</strong> window. However, custom links cannot be configured for live report pages. In the United States dashboard example shown in <em class="italic">Figure 9.27</em>, the report page itself included a text box with a title and thus the display title and subtitle property of the dashboard tile were disabled. </p>
    <p class="fm-booktitle">Unlike the snapshot <a id="calibre_link-1087" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>behavior of normal dashboard tiles, any saved changes to the report containing the live report page, such as a different filter condition, are automatically reflected by the live page tile on the dashboard. This automatic synchronization avoids the need to delete dashboard tiles reflecting the original state of the report and re-pinning visuals to reflect changes in the source report.</p>
    <p class="fm-booktitle">To pin an entire report page to a dashboard, when viewing or editing a report in the Power BI service, click the <strong class="screentext">More options</strong> ellipses (<strong class="screentext">…</strong>) menu in the report header and choose <strong class="screentext">Pin to a dashboard</strong>. Choosing the <strong class="screentext">Pin to a dashboard</strong> option generates the dialog shown in <em class="italic">Figure 9.28</em>:</p>
    <figure class="mediaobject"><img src="images/000190.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.28: Pin report page to a dashboard</p>
    <p class="fm-booktitle">Live report page tiles can also be included in mobile-optimized views of dashboards. However, given their size, live<a id="calibre_link-2068" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> pages are generally more valuable in larger form factors and with fullscreen mode.</p>
    <h1 id="calibre_link-297" class="heading">Mobile-optimized dashboards</h1>
    <p class="fm-booktitle">Just like the mobile layout view in<a id="calibre_link-1136" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Power BI Desktop described in <em class="italic">Chapter 8</em>, <em class="italic">Applying Advanced Analytics</em>, the Power BI service provides a <strong class="screentext">Mobile layout</strong> to customize a mobile-optimized layout for dashboards. With a <strong class="screentext">Mobile layout</strong> configured for a dashboard, the specific tiles, sizes, and order of tiles defined for the <strong class="screentext">Mobile layout</strong> are presented to a user when the dashboard is accessed via the Power BI mobile app. </p>
    <p class="fm-booktitle">The <strong class="screentext">Mobile layout</strong> is accessed via the drop-down <strong class="screentext">Edit</strong> menu in the dashboard header as shown in <em class="italic">Figure 9.29</em>:</p>
    <figure class="mediaobject"><img src="images/000200.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.29: Dashboard phone view</p>
    <p class="fm-booktitle">The same drag and resize options available in the mobile layout for Power BI Desktop are also available for the dashboard. In <em class="italic">Figure 9.30</em>, the most important tiles from the <strong class="screentext">Global Sales</strong> dashboard are positioned at the top and less important tiles are unpinned:</p>
    <figure class="mediaobject"><img src="images/000209.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 9.30: Phone view of dashboard in Power BI service</p>
    <p class="fm-booktitle">Power BI saves the mobile layout automatically and the defined mobile layout becomes the new default view for<a id="calibre_link-1137" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> phones accessing the dashboard. However, the user can still turn their phone sideways to view the dashboard in the standard web view. </p>
    <p class="fm-booktitle">The subtitles applied to the dashboard tiles are particularly valuable in mobile layout. In the standard web view, the four supporting tiles with text (<strong class="screentext">Global</strong>, <strong class="screentext">North America</strong>, <strong class="screentext">Europe</strong>, and <strong class="screentext">Pacific</strong>) make it easy to determine the scope of each tile. These text box tiles are likely not, however, desired in <strong class="screentext">Mobile layout</strong> and thus the subtitles convey the scope of each tile. </p>
    <h1 id="calibre_link-298" class="heading">Summary</h1>
    <p class="fm-booktitle">This chapter demonstrated how dashboards are planned and developed as part of a large, integrated corporate BI solution. All essential features and processes of Power BI dashboards were highlighted, including the configuration of dashboard tiles, their links to other dashboards and reports, and mobile-optimized dashboards. Additionally, the unique capability of dashboards to integrate real-time data as well as their ability to include content from reporting services reports and Excel workbooks were reviewed. </p>
    <p class="fm-booktitle">The next chapter transitions from the development of Power BI content to the management of Power BI content. This includes the application of version control to Power BI Desktop files and the migration of content across test and production environments using workspaces.</p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-1873">
<div id="calibre_link-2069" class="calibre2">
<div id="calibre_link-2070" class="calibre3"><div id="calibre_link-2071" class="calibre4">
    <h1 class="heading">10</h1>
    <h1 id="calibre_link-299" class="mainheading">Managing Workspaces and Content</h1>
    <p class="fm-booktitle">The preceding six chapters have focused on the design and development of Power BI datasets, reports, and dashboards. While the creation of impactful and sustainable content is essential, this chapter reviews the processes and features IT organizations can leverage to manage and govern this content through project life cycles and ongoing operational support. </p>
    <p class="fm-booktitle">These features include the planning and use of workspaces in the Power BI service, staged deployments between test and production environments, and maintaining version control of Power BI Desktop files. Additional features and practices highlighted in this chapter include data classification for dashboards, documenting Power BI datasets, and utilizing the Power BI REST API to automate and manage common processes.</p>
    <p class="fm-booktitle">In this chapter, we will review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">Workspaces</li>
      <li class="bulletlist">Staged deployments</li>
      <li class="bulletlist">Dashboard data classifications</li>
      <li class="bulletlist">Version control</li>
      <li class="bulletlist">Metadata management</li>
      <li class="bulletlist">Metadata reporting</li>
    </ul>
    <p class="fm-booktitle">We’ll first take a look at one of the fundamental building blocks of Power BI content, workspaces.</p>
    <h1 id="calibre_link-300" class="heading">Workspaces</h1>
    <p class="fm-booktitle"><strong class="screentext">Workspaces</strong> are containers in the <a id="calibre_link-1849" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI service of related content (reports, dashboards, and scorecards) as well as datasets. As discussed in the <em class="italic">Power BI licenses</em> section of <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, members of workspaces are able to create and test content, such as new dashboards and changes to reports, without impacting the content being accessed by users outside of the workspace. </p>
    <p class="fm-booktitle">Once the new or revised content in the workspace is deemed ready for consumption, the workspace is published or updated as a Power BI <strong class="screentext">app</strong>. Apps are collections of dashboards, reports, and datasets and are described in detail in <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>.</p>
    <blockquote class="pcalibre7 packt_quote pcalibre6">
      <p class="fm-acknowledgement">”We intend workspaces just for creation...it’s the place where content gets created in Power BI.”</p>
      <p class="packt_figref">&ndash; Ajay Anandan, Senior Program Manager.</p>
    </blockquote>
    <p class="fm-booktitle">In addition to the default isolation or staging between content creation (workspaces) and content consumption (apps), BI teams can utilize multiple workspaces to stage their deployments as per the <em class="italic">Staged deployments</em> section later in this chapter. For example, reports and dashboards can be initially created in a development workspace, evaluated against requirements in a test workspace, and finally deployed to a production workspace. </p>
    <p class="fm-booktitle">The production workspace supports the app. If large numbers of business users access the Power BI content via the app, the production workspace could be assigned to Power BI Premium capacity to provide dependable performance and the flexibility to scale resources according to the needs of the workload.</p>
    <p class="fm-booktitle"><em class="italic">Chapter 15</em>, <em class="italic">Building Enterprise BI with Power BI Premium</em>, provides details on the features and benefits of Power BI Premium. This includes the cost advantage of capacity-based pricing versus per-user licensing for large-scale deployments, managing Premium capacities (hardware), such as scaling up or out, and assigning workspaces to Premium capacities. </p>
    <p class="fm-booktitle">Additional capabilities exclusive to content stored in Premium capacity, such as larger Power BI datasets, more frequent scheduled data refreshes (for example, every 30 minutes), deployment pipelines, scorecards, and goals, are also described in <em class="italic">Chapter 15</em>, <em class="italic">Building Enterprise BI with Power BI Premium</em>.</p>
    <p class="fm-booktitle"><em class="italic">Figure 10.1</em> depicts the four-step process showing the essential role of workspaces in the life cycle of Power BI content:</p>
    <figure class="mediaobject"><img src="images/000219.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.1: Workspaces and apps</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">A Power BI Pro user creates a<a id="calibre_link-1857" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> workspace and adds other Power BI Pro users as members with edit rights. Workspaces are created in the Power BI service by clicking the <strong class="screentext">Workspaces</strong> option in the left navigation menu and then clicking the <strong class="screentext">Create a workspace</strong> button at the bottom of the fly-out panel. Additional users can also be added as Admin users. Only Admins can add members with edit rights to a workspace as explained in the <em class="italic">Workspace roles and rights</em> section of this chapter.</li>
      <li class="calibre13">The members of the workspace publish reports to the workspace and create dashboards in the workspace.</li>
      <li class="calibre13">All content or a subset of the content in the workspace is published as a Power BI app.</li>
      <li class="calibre13">Users or groups of users access content in the published app from any device.</li>
    </ol>
    <p class="fm-booktitle">All users within the<a id="calibre_link-1850" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> workspace need a Power BI Pro license. All users consuming the published Power BI app also need a Power BI Pro license unless the workspace is assigned to Power BI Premium capacity. If the workspace is assigned to Power BI Premium capacity, users with Power BI (free) licenses and, optionally, external guest users from outside the organization with free licenses can read or consume the Power BI app. </p>
    <p class="fm-booktitle">In small team scenarios (5&ndash;15 users) where maximum self-service flexibility is needed, all users can be assigned Pro or PPU licenses and collaborate on content within the workspace. This approach <a id="calibre_link-2072" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>negates the isolation benefit of workspaces from apps but provides immediate visibility to the latest versions of the content. Additionally, Power BI users within the workspace can create their own Power BI and Excel reports based on connections to the published dataset in the workspace.</p>
    <p class="fm-booktitle">Opening a workspace within the Power BI service presents an interface similar to that shown in <em class="italic">Figure 10.2</em>:</p>
    <figure class="mediaobject"><img src="images/000229.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.2: Workspace</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 10.2</em>, the workspace dialog presents a header for accessing the workspace’s <strong class="screentext">Settings</strong> and controlling <strong class="screentext">Access</strong>, as well as the ability to create or update an associated app. Furthermore, content within the workspace such as dashboards, reports, and datasets are shown.</p>
    <p class="fm-booktitle">It is highly recommended that the creation of workspaces be controlled by enterprise BI and IT teams. Workspace creation can be restricted to specific users or groups of users via tenant settings as discussed in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>. A simple workflow process can govern the workspace creation process as part of the overall Power BI project planning and execution. </p>
    <p class="fm-booktitle">In addition to serving as containers of content, workspaces also provide a logical security context where specific users and groups can be provided different roles and rights within the workspace.</p>
    <h2 id="calibre_link-301" class="calibre9">Workspace roles and rights</h2>
    <p class="fm-booktitle">Workspace roles are used to <a id="calibre_link-1858" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>provide access to all content within a <a id="calibre_link-538" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>workspace. Both <strong class="screentext">Azure Active Directory</strong> (<strong class="screentext">AAD</strong>) users and groups can be assigned to one <a id="calibre_link-1860" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of four roles:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">Viewer</strong></li>
      <li class="calibre13"><strong class="screentext">Contributor</strong></li>
      <li class="calibre13"><strong class="screentext">Member</strong></li>
      <li class="calibre13"><strong class="screentext">Admin</strong></li>
    </ol>
    <p class="fm-booktitle">It’s strongly recommended to assign groups to workspace roles and thus manage workspace permissions by adding or removing users to or from these groups. Azure Active Directory security groups as well as Microsoft 365 groups and distribution lists are all supported for workspace roles. </p>
    <p class="fm-booktitle">Manually mapping individual user accounts to various workspace roles is both difficult to maintain and could introduce a security risk with a user getting more access than required. Power BI administrators should partner with both the business and IT to decide on an appropriate and efficient process for approving membership and adding/removing users to/from groups.</p>
    <p class="fm-booktitle">It is important to understand that users or all users within a group added to a workspace role gain access to all content within the workspace regardless of whether specific content is shared with<a id="calibre_link-1642" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> those users. In addition, the Admin, Member, and Contributor roles override <strong class="screentext">row-level security</strong> (<strong class="screentext">RLS</strong>) for content in the workspace. Thus, workspace roles are fundamentally different than individually sharing workspace content with specific users or via links.</p>
    <p class="fm-booktitle">To assign users to roles, use the <strong class="screentext">Access</strong> option in the workspace header as shown in <em class="italic">Figure 10.2</em>. Choosing the <strong class="screentext">Access</strong> option opens the <strong class="screentext">Access</strong> dialog shown in <em class="italic">Figure 10.3</em>:</p>
    <figure class="mediaobject"><img src="images/000239.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.3: Workspace Access dialog</p>
    <p class="fm-booktitle">Depending on the <a id="calibre_link-1859" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>specific role assigned, members can view content, edit content, create new content, and publish content from the workspace to a Power BI app. The specific capabilities and features available for each role are explained in the following sections, starting with the least privileged, the <strong class="screentext">Viewer</strong> role.</p>
    <h3 id="calibre_link-302" class="heading1">Viewer role</h3>
    <p class="fm-booktitle">The <strong class="screentext">Viewer</strong> role provides read <a id="calibre_link-1865" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>only access to workspaces. Users assigned to the Viewer role can view and interact with all content within the workspace as<a id="calibre_link-1814" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> well as read data stored in workspace dataflows. Importantly, the Viewer role does not override RLS for content within the workspace. It is imperative to remember that every other role other than the Viewer role overrides RLS. Every other workspace role is effectively an administrator of the Power BI datasets in a workspace and thus this permission overrides RLS roles. Thus, users that should not see data restricted by RLS should never be added to any role other than Viewer.</p>
    <p class="fm-booktitle">While limited to read access to workspace content, the Viewer role is well suited for certain QA/Test or “early look” scenarios. For example, if a workspace is hosted on Premium capacity, a team’s primary QA/Test user or a key stakeholder who only has a Power BI Free license could be assigned the Viewer role in order to access new reports and dashboards that haven’t yet been published to a Power BI app.</p>
    <p class="fm-booktitle">Because of the convenience of assigning the Viewer role a single time to a user or group within a workspace, organizations may be tempted to utilize the Viewer role as a means of sharing content <a id="calibre_link-2073" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>with end users (report consumers). This is best avoided as the Viewer role is able to see all content in the workspace including content that is a work in progress or not fully ready for production. This can lead to confusion by end users or, worse, incorrect decisions being made by viewing a report that has bugs and thus displays incorrect information. </p>
    <p class="fm-booktitle">Instead, apps should be <a id="calibre_link-2074" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>used for sharing and distributing content to end users and offer the same convenience. For enterprise BI organizations, the Viewer role should be used sparingly and only in specific circumstances where the end user requires access to view the underlying datasets and other workspace content.</p>
    <p class="fm-booktitle">Viewers can also reshare content if the <strong class="screentext">Add reshare</strong> option is selected for specific content. To add resharing capabilities for users with the Viewer role, users in the Member or Admin role can access the permissions for specific content. This is done by accessing the <strong class="screentext">More options</strong> menu (three vertical dots) for specific content in the workspace as shown in <em class="italic">Figure 10.4</em>:</p>
    <figure class="mediaobject"><img src="images/000248.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.4: More options menu for workspace content</p>
    <p class="fm-booktitle">Once within the <strong class="screentext">Manage permissions</strong> dialog for the dashboard, report, or dataset, users assigned to<a id="calibre_link-1866" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> workspace roles are listed under the <strong class="screentext">Direct access</strong> tab. Accessing <a id="calibre_link-1815" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the <strong class="screentext">More options</strong> menu (three horizontal dots) for a particular user assigned to the Viewer role provides the option to <strong class="screentext">Add reshare</strong> rights as shown in <em class="italic">Figure 10.5</em>:</p>
    <figure class="mediaobject"><img src="images/000257.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.5: More options menu user with Viewer role</p>
    <p class="fm-booktitle">The same <strong class="screentext">Add reshare</strong> option is also displayed for users assigned to the Contributor role, which we detail in the next section.</p>
    <h3 id="calibre_link-303" class="heading1">Contributor role</h3>
    <p class="fm-booktitle">The Contributor role has <a id="calibre_link-1863" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>create and edit permissions to content in the Workspace but by default lacks the sharing and publishing permissions of the Member <a id="calibre_link-673" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and Admin roles. For example, a BI developer could be granted the Contributor role to publish a new report to the workspace but a user with higher privileges would be required to publish or update a Power BI app containing this report to end users. In addition, the Contributor role provides the ability to schedule dataset refreshes and modify data gateway connection settings.</p>
    <p class="fm-booktitle">The Contributor role is a natural fit for report authors and dataset developers within a corporate BI organization. These users can perform their work within Power BI Desktop and publish to the workspace but are prevented from managing permissions for the workspace’s content or sharing it unless specifically granted reshare rights.</p>
    <p class="fm-booktitle">As mentioned, the Contributor role overrides RLS for content in the workspace. Thus, never assign users to the Contributor role that should not see data protected by RLS. In addition, Contributors can also be granted the ability to update the app for the workspace. This setting is accessed by choosing the <strong class="screentext">Settings</strong> option in the workspace header as shown in <em class="italic">Figure 10.2</em>. This opens the <strong class="screentext">Settings</strong> pane. Expanding the <strong class="screentext">Advanced</strong> section, the option to <strong class="screentext">Allow contributors to update the app for this workspace</strong> setting is displayed at the bottom of the <strong class="screentext">Settings</strong> pane as shown in <em class="italic">Figure 10.6</em>:</p>
    <figure class="mediaobject"><img src="images/000266.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.6: More options menu user with Viewer role</p>
    <p class="fm-booktitle">The ability to set the <strong class="screentext">Allow contributors to update the app for this workspace</strong> setting is exclusive to the Admin role. Users in the Member role cannot configure this setting, as we detail in the next section.</p>
    <h3 id="calibre_link-304" class="heading1">Member role</h3>
    <p class="fm-booktitle">The Member role provides full<a id="calibre_link-1864" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> workspace functionality, features, and access, save for a few permissions exclusive to the Admin role, such as the ability to allow Contributors to update the app for a workspace, mentioned previously. This role<a id="calibre_link-1108" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> includes all of the permissions of the Contributor roles plus the ability to add members with lower permission roles, publish, unpublish, and change permissions for apps and content, update apps, and share content.</p>
    <p class="fm-booktitle">The Member role is best suited to the business owner of the app or, in more restrictive environments, personnel specifically responsible for defining permissions and security. Less restrictive environments are likely happy to offload the sharing and permission requirements from IT to the business since the business is generally more in tune with the personnel that require access to the workspace content.</p>
    <p class="fm-booktitle">We’ll now cover the final workspace role, the Admin role.</p>
    <h3 id="calibre_link-305" class="heading1">Admin role</h3>
    <p class="fm-booktitle">Every workspace has one or<a id="calibre_link-479" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> multiple administrators who manage the access of other Power BI users to the workspace. The user that initially creates the workspace is the workspace admin by default.</p>
    <p class="fm-booktitle">The admin role is the highest security role for<a id="calibre_link-1861" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> workspaces and includes all of the rights and permissions of the Member role. In addition, only workspace Admins can add other users as Admins to the workspace. As already mentioned, only Admins can grant Contributors the right to update the associated app. Finally, Admins also have the exclusive right to update a workspace’s settings or delete a workspace, thus removing all of its content (dashboards, reports, and datasets) from the Power BI service. </p>
    <p class="fm-booktitle">Prior to deleting a workspace, check to see if an app is published from the workspace. If an app is published, unpublish the app via the ellipsis (three dots) next to the <strong class="screentext">Access </strong>option in the header of the workspace. If the workspace is deleted but the published app is not unpublished, users of the published app will see errors when attempting to access or refresh its content.</p>
    <p class="fm-booktitle">If Power BI Premium capacity is provisioned for the organization and if the workspace Admin is granted assignment permissions to Premium capacity, they can assign the workspace to a Premium capacity. This action moves the content in the workspace to dedicated hardware (capacity) exclusive to the organization and enables many additional features, such as the distribution of apps to Power BI Free users. </p>
    <p class="fm-booktitle">Further information on the assignment of app workspaces to Power BI Premium capacity is included in <em class="italic">Chapter 15</em>, <em class="italic">Building Enterprise BI with Power BI Premium</em>. The additional capabilities <a id="calibre_link-480" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>provided by Power BI Premium and considerations in allocating Premium capacity are also included in <em class="italic">Chapter 15</em>, <em class="italic">Building Enterprise BI with Power BI Premium</em>.</p>
    <p class="fm-booktitle">Now that workspace<a id="calibre_link-1862" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> roles and rights are understood, we’ll next consider a common workspace configuration in enterprise deployments, the use of datasets across workspaces.</p>
    <h2 id="calibre_link-306" class="calibre9">Datasets across workspaces</h2>
    <p class="fm-booktitle">A common deployment pattern<a id="calibre_link-1853" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> for enterprise BI teams is to separate the dataset development from the report development. In this pattern, data modelers focus on dataset development and report authors connect live to this dataset when creating reports. This separates the duties of data modelers and report authors and enables a single dataset to service multiple audiences.</p>
    <p class="fm-booktitle">Taking this a step further, datasets can be published to dedicated dataset-only workspaces that only dataset authors and admins can access. Report authors and end users are granted read or read and build permissions to these datasets thus ensuring that the datasets will only be modified by dataset authors. Additional, content-only workspaces can then be created and used for content development such as reports, dashboards, and scorecards. With the proper tenant settings configured as discussed in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>, the datasets in the separate workspace can be accessed by report authors and used when building content.</p>
    <p class="fm-booktitle">Separating the concerns of data modelers and report developers using workspaces provides a least-privileges security model, meaning that only the least amount of permissions required to perform a task are granted. As opposed to report authors being made Contributors or Members of a workspace, which grants them the ability to modify existing datasets in that workspace, this pattern secures the datasets such that only approved data models can modify published datasets.</p>
    <p class="fm-booktitle">Using datasets across workspaces requires that the datasets be shared with users and groups that require access to build content using those datasets. Sharing content is discussed in the <em class="italic">Sharing content</em> section of <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>. However, specifically for this scenario of using datasets across workspaces, the <strong class="screentext">Allow recipients to build content with the data associated with this dataset</strong> checkbox must be checked. This setting is sometimes referred to as the <strong class="screentext">Build</strong> permission.</p>
    <p class="fm-booktitle">We’ll now consider the<a id="calibre_link-2075" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> default <strong class="screentext">My workspace</strong> provisioned for every Power BI user.</p>
    <h2 id="calibre_link-307" class="calibre9">My workspace</h2>
    <p class="fm-booktitle">All Power BI users, including those with<a id="calibre_link-1854" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> free licenses, are assigned a <strong class="screentext">My workspace</strong> in the Power BI service. This workspace should only be used and thought of as a private scratchpad <a id="calibre_link-1160" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>for content specific to the individual user. For those familiar with SharePoint My Sites or OneDrive, the concept is similar. By default, only each individual user has permissions to see and access content within their <strong class="screentext">My workspace</strong>, including even Global administrators and Power BI administrators.</p>
    <p class="fm-booktitle"><strong class="screentext">My workspace</strong> is accessed via the same <strong class="screentext">Workspaces </strong>menu as other workspaces, as shown in <em class="italic">Figure 10.7</em>: </p>
    <figure class="mediaobject"><img src="images/000275.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.7: My workspace</p>
    <p class="fm-booktitle">Any Power BI content that requires access by other users should be stored in a different workspace and <a id="calibre_link-2076" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>distributed as an app. Although <strong class="screentext">My workspace</strong> can host the same <a id="calibre_link-2077" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>content types as other workspaces, with the exception of dataflows, any content shared and distributed from <strong class="screentext">My workspace</strong> is dependent on the individual user’s account. </p>
    <p class="fm-booktitle">Armed with a basic understanding of workspaces, we next turn our attention to how workspaces can be used in staged deployments.</p>
    <h1 id="calibre_link-308" class="heading">Staged deployments</h1>
    <p class="fm-booktitle">Staged deployments are a <a id="calibre_link-1766" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>familiar process to technical IT teams involved with application development and the creation of data assets. Quite simply, staged deployments provide separate environments for different life cycle stages such as development, test, and production. Each stage of the life cycle is designed to accomplish specific tasks and ensure quality. Development stages are for work-in-progress content and are solely used by report authors and other content developers. Test is for users to <a id="calibre_link-1810" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>perform <strong class="screentext">user acceptance testing</strong> (<strong class="screentext">UAT</strong>) to verify that the reports and other content function as desired. The production stage is only for content that has passed UAT.</p>
    <p class="fm-booktitle">Multiple workspaces and their corresponding apps are used to stage and manage the life cycle of Power BI content. Similar to the development, test, and production release cycles familiar to IT professionals, staged deployments in the Power BI service are used to isolate data, users, and content appropriate to each stage of the process. Effectively implementing a staged Power BI deployment serves to raise the quality of the content delivered as well as the productivity of project team members.</p>
    <p class="fm-booktitle">The nine-step process depicted in Figure 10.8 shows the primary elements of a staged deployment life cycle:</p>
    <figure class="mediaobject"><img src="images/000284.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.8: Staged deployment life cycle</p>
    <p class="fm-booktitle">An explanation of the various numbered steps of the staged deployment life cycle process is provided here:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">A development <a id="calibre_link-1767" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>workspace is created. A Power BI Desktop file containing the dataset is published to the development workspace. Reports are developed in Power BI Desktop based on live connections to the development workspace dataset and published to the workspace. Dashboards are created within the development workspace in the Power BI service.</li>
      <li class="calibre13">An app is published or updated and made available to a small number of users for their review.</li>
      <li class="calibre13">The BI manager or project lead reviews the status of content being developed and provides feedback to the developers. As purely a preference, in some scenarios, certain business stakeholders are allowed early access to content under development.</li>
      <li class="calibre13">The Power BI REST API, Power BI PowerShell module, or a pipeline is used to migrate completed content from the development workspace to the test workspace. The Power BI REST API operations are called via PowerShell scripts. The Power BI REST API, Power BI PowerShell module, and pipelines are explained in the following sections.</li>
      <li class="calibre13">A TEST app is published or updated and made available to a small number of users for their review.</li>
      <li class="calibre13">A UAT user or team reviews the content relative to requirements and provides feedback. If necessary, revisions are implemented in the TEST workspace and the TEST app is updated for further review.</li>
      <li class="calibre13">The Power BI REST API, Power BI PowerShell module, or pipeline is used to migrate approved content from the TEST workspace to the production workspace. Supported REST API operations, such as a clone report and rebind report, are called via PowerShell scripts. </li>
      <li class="calibre13">A production app is published or updated and made available to groups of users for their consumption. Publishing and accessing apps is described in <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em><em class="italic">.</em></li>
      <li class="calibre13">Groups of business users access and consume the dashboards and reports via the production app from any device. Measuring and monitoring the usage of the published app is also described in <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>.</li>
    </ol>
    <p class="fm-booktitle">Creating and managing workspaces as well as publishing apps for testing or consumption are<a id="calibre_link-2078" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> all simple processes handled via the user interface in the Power BI service. </p>
    <p class="fm-booktitle">Properly utilizing the Power BI REST API or Power BI PowerShell module to copy or migrate content across workspaces, however, requires some level of custom scripting, usually performed via Windows PowerShell. Organizations using Power BI Premium can instead leverage deployment pipelines instead of relying on the Power BI REST API and/or PowerShell scripts. </p>
    <p class="fm-booktitle">Before delving into either the Power BI REST API, PowerShell, or deployment pipelines, however, we’ll consider the management of datasets during the staged deployment process. </p>
    <h2 id="calibre_link-309" class="calibre9">Workspace datasets</h2>
    <p class="fm-booktitle">As per <em class="italic">Figure 10.8</em>, this architecture requires distinct Power BI datasets per workspace. To minimize resource usage<a id="calibre_link-1768" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and for data security reasons, the development workspace dataset could include the minimal amount of data necessary and exclude all sensitive data. This would allow the organization to comfortably provide development access to teams of content developers, potentially from outside of the organization. </p>
    <p class="fm-booktitle">Access to the test workspace could be limited to a small number of trusted or approved users within the organization and thus could include sensitive data. Finally, the production workspace dataset would have the same schema as the other datasets but include the full volume of data as well as sensitive data.</p>
    <p class="fm-booktitle">If a common schema exists between the different datasets in each workspace, the source dataset of a Power BI Desktop report file can be revised to a dataset in a separate workspace as per the <em class="italic">Switching source datasets</em> section in <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>.</p>
    <p class="fm-booktitle">For example, the report file (which has an extension of <code class="inlinecode">.pbix</code>) approved for migration from the development workspace to the test workspace could be opened, modified to reference the test workspace dataset, and then published to the test workspace. This approach represents a manual alternative to the Power BI REST API described in the following section.</p>
    <p class="fm-booktitle">The ability to use datasets across workspaces can help eliminate the resource cost and manageability issues of duplicated datasets across multiple app workspaces. This functionality can be turned on within <strong class="screentext">Tenant settings</strong> of the <strong class="screentext">Admin portal</strong> in the Power BI service. This setting is explained in more detail in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>.</p>
    <p class="fm-booktitle">For example, distinct<a id="calibre_link-1769" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Power BI apps developed for the finance, sales, and marketing teams could all leverage a single production dataset in a dedicated workspace rather than individual datasets within each workspace. That said, the development of the dataset itself should also follow a staged deployment life cycle similar to that shown in <em class="italic">Figure 10.8</em>.</p>
    <p class="fm-booktitle">Let’s now explore how the Power BI REST API and Power BI PowerShell module can be used to implement a staged deployment.</p>
    <h2 id="calibre_link-310" class="calibre9">Power BI REST API and PowerShell module</h2>
    <p class="fm-booktitle">The Power BI REST API <a id="calibre_link-1462" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>provides programmatic access to resources in the Power BI service including content (datasets, reports, and dashboards), workspaces, and the users of these resources. This access enables organizations to automate common workflows, such as cloning a report to a different workspace or triggering a dataset refresh operation via familiar tools, such as Windows PowerShell. </p>
    <p class="fm-booktitle">The goal of the REST API is to fully support all functionality available in the Power BI service, including capabilities exclusive to the Power BI Admin portal, thus providing complete administrative and automation capabilities. The following URL provides updated documentation <a id="calibre_link-1464" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>on the REST API including the request syntax and a sample result set for each operation: <a href="http://bit.ly/2AIkJyF" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2AIkJyF</span></a>.</p>
    <p class="fm-booktitle">Windows PowerShell is a task-based command-line shell and scripting language. It’s primarily used by system administrators to automate administrative tasks. For example, PowerShell script files, having an extension of <code class="inlinecode">.ps1</code>, are commonly used in scheduled data refresh processes for Analysis Services models.</p>
    <p class="fm-booktitle">PowerShell can use<a id="calibre_link-1401" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the Power BI REST APIs directly or alternatively use the Power BI PowerShell module. Both approaches are covered in the following sections and additional documentation can be found here: <a href="https://bit.ly/3vDJ5qc" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3vDJ5qc</span></a>. We’ll first investigate the Power BI REST API.</p>
    <h3 id="calibre_link-311" class="heading1">Power BI REST API</h3>
    <p class="fm-booktitle">To use the Power BI REST <a id="calibre_link-2079" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>API in a custom .NET program, the application must be registered with Azure Active Directory. This registration is performed in the Azure portal application and specifically here: <a href="https://bit.ly/3C04EG2" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3C04EG2</span></a>.</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Sign in with the Azure Active Directory account and provide a name for the application. Sign in with the account used for logging into the Power BI service. Once complete, the <strong class="screentext">App registrations</strong> dialog is displayed as shown in <em class="italic">Figure 10.9</em>.<figure class="mediaobject"><img src="images/000293.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 10.9: App registration in Azure Active Directory portal</p>
      </li>
      <li class="calibre13">Select <strong class="screentext">API permissions</strong> under the <strong class="screentext">Manage</strong> heading as shown in <em class="italic">Figure 10.9</em>. On the <strong class="screentext">API permission</strong> page, select <strong class="screentext">Add a permission</strong>. Scroll down until you find <strong class="screentext">Power BI Service</strong> as shown in <em class="italic">Figure 10.10</em> and select it.<figure class="mediaobject"><img src="images/000302.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 10.10: Request API permissions</p>
      </li>
      <li class="calibre13">In the <strong class="screentext">Request API permissions</strong> dialog, choose <strong class="screentext">Delegated permissions</strong>. Under <strong class="screentext">Select permissions</strong>, expand all <a id="calibre_link-1463" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>sections and check all checkboxes as shown in <em class="italic">Figure 10.11</em>.<figure class="mediaobject"><img src="images/000313.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 10.11: Adding Request API permissions</p>
      </li>
      <li class="calibre13">When finished, click the <strong class="screentext">Add permissions</strong> button shown in <em class="italic">Figure 10.11</em>.</li>
    </ol>
    <p class="fm-booktitle">Once an application is registered in <a id="calibre_link-2080" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Azure Active Directory with the correct permissions, the client ID created for the application can be used within .NET applications to perform actions in the Power BI service. Next, we’ll look at the Power BI PowerShell module.</p>
    <h3 id="calibre_link-312" class="heading1">Power BI PowerShell module</h3>
    <p class="fm-booktitle">The <strong class="screentext">Power BI PowerShell module</strong> was created to simplify the scripting of Power BI tasks from within PowerShell. Scripting <a id="calibre_link-1402" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>operations via the Power BI PowerShell module is significantly easier than using the Power BI REST API directly and does not require application registration as covered in the previous section. However, the Power BI PowerShell module does not necessarily include all of the operations available via the Power BI REST API.</p>
    <p class="fm-booktitle">To use the Power BI PowerShell module, ensure that you are a Power BI administrator or otherwise have appropriate permissions to the Power BI service, and then follow these steps:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Open a <strong class="screentext">Windows PowerShell</strong> session as administrator by right-clicking the Windows PowerShell app and then choosing <strong class="screentext">Run as administrator</strong>.</li>
      <li class="calibre13">Set the execution policy to <strong class="screentext">RemoteSigned</strong> by entering the following command:
        <pre class="programlisting1"><code class="hljs-con">Set-ExecutionPolicy RemoteSigned
</code></pre>
      </li>
      <li class="calibre13">Answer <strong class="screentext">Y</strong> when prompted.</li>
      <li class="calibre13">Run the following command to install the Power BI PowerShell module:
        <pre class="programlisting1"><code class="hljs-con">Install-Module MicrosoftPowerBIMgmt -Force
</code></pre>
      </li>
      <li class="calibre13">Log in to the Power BI service using the <code class="inlinecode">Connect-PowerBIServiceAccount</code> command or its alias <code class="inlinecode">Login-PowerBI</code>.</li>
    </ol>
    <p class="fm-booktitle">The Windows PowerShell session is now ready to start interacting with the Power BI service via function calls <a id="calibre_link-629" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>called <strong class="screentext">Cmdlets</strong>. However, using either the Power BI REST API or the Power BI PowerShell module often requires that the unique identifiers for content objects such as workspaces, dashboards, reports, and datasets are known. Thus, we’ll next cover how to identify these unique identifiers.</p>
    <h3 id="calibre_link-313" class="heading1">Workspace and content identifiers</h3>
    <p class="fm-booktitle">All <a id="calibre_link-1851" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>workspaces and content within<a id="calibre_link-1029" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> those workspaces are provided a <strong class="screentext">globally unique identifier</strong> (<strong class="screentext">GUID</strong>). A GUID is simply a unique ID that adheres to RFC 4122. These GUID values must be known in order to perform most operations within the Power BI service using PowerShell or a .NET program. </p>
    <p class="fm-booktitle">For example, in order to clone a report to a separate workspace and then bind the report to a dataset in the new workspace, GUID values associated with the report, the source and target workspace, and the dataset must be obtained. </p>
    <p class="fm-booktitle">Once known, these GUID values can be passed into the variables of PowerShell script files and executed on demand or as part of a scheduled process, such as with dataset refresh operations.</p>
    <p class="fm-booktitle">The GUIDs for Power BI objects can be obtained by executing scripts that reference the appropriate REST API, such <a id="calibre_link-1026" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as <strong class="screentext">Get Reports</strong> (<code class="inlinecode">GET https://api.powerbi.com/v1.0/myorg/reports</code>). Alternatively, the necessary GUIDs can be found by navigating to the specific object or collection of objects in the Power BI service and noting the URL.</p>
    <p class="fm-booktitle">For example, to<a id="calibre_link-1852" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> retrieve both the workspace GUID and the dataset GUID, navigate to <strong class="screentext">Workspace</strong> and open the <strong class="screentext">Settings</strong> menu for a report. This is the same menu displayed in <em class="italic">Figure 10.4</em> previously.</p>
    <p class="fm-booktitle">In this example, opening the <strong class="screentext">Settings</strong> menu for the AdWorks Enterprise dataset of the AdWorks Global Sales workspace results in the following URL in the address bar of the browser: <a href="https://app.powerbi.com/groups/c738f14c-648d-47f5-91d2-ad8ef234f49c/settings/datasets/61e21466-a3eb-45e9-b8f3-c015d7165e57" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://app.powerbi.com/groups/c738f14c-648d-47f5-91d2-ad8ef234f49c/settings/datasets/61e21466-a3eb-45e9-b8f3-c015d7165e57</span></a>.</p>
    <p class="fm-booktitle">Based on this URL, the following two GUIDs can be used in PowerShell scripts:</p>
    <ul class="calibre10">
      <li class="bulletlist">AdWorks Global Sales (workspace): <code class="inlinecode">c738f14c-648d-47f5-91d2-ad8ef234f49c</code></li>
      <li class="bulletlist">AdWorks Enterprise (dataset): <code class="inlinecode">61e21466-a3eb-45e9-b8f3-c015d7165e57</code></li>
    </ul>
    <p class="fm-booktitle">The GUIDs for reports and dashboards can similarly be found by simply navigating to them within the Power BI service. With GUIDs in hand, we are now ready to present information regarding available sample PowerShell scripts.</p>
    <h3 id="calibre_link-314" class="heading1">PowerShell sample scripts</h3>
    <p class="fm-booktitle">Several self-documenting <a id="calibre_link-1855" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>sample PowerShell scripts that leverage the Power BI REST API are available at the following GitHub repository: <a href="https://github.com/Azure-Samples/powerbi-powershell" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://github.com/Azure-Samples/powerbi-powershell</span></a>. This repository includes PowerShell scripts (<code class="inlinecode">.ps1</code> files) for the refresh of a dataset, the rebinding of a report (to a dataset), and other common use cases.</p>
    <p class="fm-booktitle">A similar GitHub repository for PowerShell scripts that utilize the Power BI PowerShell module is available here: <a href="https://github.com/Microsoft/powerbi-powershell" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://github.com/Microsoft/powerbi-powershell</span></a>. This repository is even more extensive.</p>
    <p class="fm-booktitle"><strong class="screentext">CopyWorkspace.ps1</strong> and <strong class="screentext">CopyWorkspaceSampleScript.ps1</strong> from their respective repositories can be used to perform the staged deployment steps between workspaces shown in <em class="italic">Figure 10.8</em> (<em class="italic">steps 4</em> and <em class="italic">7</em>).</p>
    <p class="fm-booktitle">The use of PowerShell scripts, either via the Power BI REST API or the Power BI PowerShell module, can help automate the implementation of a staged deployment life cycle for all <a id="calibre_link-1856" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>paid licensing scenarios. We’ll next take a look at an even easier method of implementing staged deployments available to Premium capacities and PPU users, Power BI deployment pipelines.</p>
    <h2 id="calibre_link-315" class="calibre9">Power BI deployment pipelines</h2>
    <p class="fm-booktitle"><strong class="screentext">Power BI deployment pipelines</strong>, or simply <strong class="screentext">Pipelines</strong>, are a Premium (Premium and PPU) feature specifically<a id="calibre_link-1386" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> designed to support staged deployment life cycles. Pipelines provide a simple user interface within the Power BI service that move content between workspaces with the click of a button.</p>
    <p class="fm-booktitle">Pipelines are created in the Power BI service using the <strong class="screentext">Deployment pipelines</strong> tab in the left navigation pane or from a workspace using the <strong class="screentext">Create a pipeline</strong> option in the workspace header as shown in <em class="italic">Figure 10.2</em>.</p>
    <p class="fm-booktitle">Pipelines are the recommended method for executing staged deployment life cycle processes in Power BI. Pipelines do not require any custom scripting and are fully supported by Microsoft as part of the Power BI service.</p>
    <p class="fm-booktitle">Once created, pipelines allow workspaces to be assigned to three different deployment stages: <strong class="screentext">Development</strong>, <strong class="screentext">Test</strong>, and <strong class="screentext">Production</strong>, as shown in <em class="italic">Figure 10.12</em>:</p>
    <figure class="mediaobject"><img src="images/000323.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.12: Power BI deployment pipeline</p>
    <p class="fm-booktitle">Alternatively, clicking the <strong class="screentext">Deploy to …</strong> button in <strong class="screentext">Development</strong> or <strong class="screentext">Test</strong> can automatically create a workspace for the next stage if no workspace is currently assigned.</p>
    <p class="fm-booktitle">The <strong class="screentext">Show more</strong> option enables granular control over exactly what content is deployed to the next stage and the<a id="calibre_link-1387" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> three vertical dots menu provides options for publishing the app for the workspace, modifying access to the workspace and workspace settings as shown in <em class="italic">Figure 10.13</em>:</p>
    <figure class="mediaobject"><img src="images/000333.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.13: Pipeline options</p>
    <p class="fm-booktitle">Pipelines also provide automation via rules. Clicking on the lightning bolt icon in the stage header as shown in <em class="italic">Figure 10.13</em> opens the <strong class="screentext">Deployment settings</strong> panel. Subsequently clicking on a dataset within the <strong class="screentext">Deployment settings</strong> panel allows <strong class="screentext">Data source rules</strong> and <strong class="screentext">Parameter rules</strong> to be defined as shown in <em class="italic">Figure 10.14</em>:</p>
    <figure class="mediaobject"><img src="images/000343.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.14: Pipeline deployment rules</p>
    <p class="fm-booktitle">In <em class="italic">Figure 10.14</em>, a <a id="calibre_link-1388" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>parameter rule is defined to update the <strong class="screentext">AdWorks Database</strong> query parameter to point to a different database, <strong class="screentext">AdventureWorksDW2019Test</strong>, instead of the original value from the development stage, <strong class="screentext">AdventureWorksDW2019Dev</strong>.</p>
    <p class="fm-booktitle">Pipelines greatly simplify the deployment of content between the stages of a staged deployment life cycle, eliminating the need for scripting and the identification of GUIDs. </p>
    <p class="fm-booktitle">Moving on from<a id="calibre_link-1389" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> staged deployments, we’ll next consider another important topic with respect to managing workspaces and content within Power BI, content sensitivity and protection.</p>
    <h1 id="calibre_link-316" class="heading">Content sensitivity and protection</h1>
    <p class="fm-booktitle">A key advantage of Power BI is<a id="calibre_link-1368" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> its native integration with Microsoft 365. This integration is perhaps most evident when it comes to securing and sharing content. Power BI uses AAD for assigning permissions to content as well as authenticating users. However, the integration with the security features of Microsoft 365 runs much deeper to include the integration of <strong class="screentext">information protection</strong> and <strong class="screentext">data loss prevention</strong> policies. </p>
    <p class="fm-booktitle">In the following sections, we explore this deeper integration with the security and compliance features of Microsoft 365 since the subjects of information protection and data loss prevention are often prominent in the minds of enterprise BI and information security teams.</p>
    <h2 id="calibre_link-317" class="calibre9">Information protection</h2>
    <p class="fm-booktitle">The <strong class="screentext">Microsoft Information Protection</strong> solution<a id="calibre_link-1370" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> involves the creation and application of sensitivity labels to emails, files, and content containers such as Microsoft Teams, Microsoft 365 Groups, and SharePoint sites. </p>
    <p class="fm-booktitle">Sensitivity labels serve to alert end users to the privacy level of the information they are viewing and can also include protection settings to encrypt the content. For example, sensitivity labels of “Internal Only” or “Confidential” help alert end users that the content they are viewing should not be shared outside of the organization. </p>
    <p class="fm-booktitle">Using Microsoft Information Protection requires an Azure Information Protection license, which can be purchased separately or via licensing suites such as Microsoft 365 Enterprise plans, Microsoft 365 Business, and Enterprise Mobility + Security plans. In addition to licensing, there are a number of steps required to activate the information protection capabilities within Power BI.</p>
    <p class="fm-booktitle">The first step is to use the <strong class="screentext">Microsoft 365 admin center</strong> (<a href="https://admin.microsoft.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://admin.microsoft.com</span></a>) to create a <a id="calibre_link-1117" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>sensitivity label. Within the admin center, use the <strong class="screentext">Compliance</strong> left navigation option under <strong class="screentext">Admin centers</strong> to open the <strong class="screentext">Microsoft 365 compliance</strong> portal (<a href="https://compliance.microsoft.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://compliance.microsoft.com</span></a>). </p>
    <p class="fm-booktitle">Within the Microsoft 365 <a id="calibre_link-1371" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>compliance portal, choose <strong class="screentext">Information protection</strong> in the left navigation pane as shown in <em class="italic">Figure 10.15</em>:</p>
    <figure class="mediaobject"><img src="images/000352.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.15: Information protection label</p>
    <p class="fm-booktitle">In <em class="italic">Figure 10.15</em>, an <strong class="screentext">Information protection</strong> label has been created called <strong class="screentext">Confidential </strong>with a <strong class="screentext">Scope</strong> of <strong class="screentext">File, Email</strong>. </p>
    <p class="fm-booktitle">Once <strong class="screentext">Information protection</strong> labels are created, the next step is to turn on <strong class="screentext">Information protection</strong> for the Power BI tenant. This is done using the tenant settings of the Power BI <strong class="screentext">Admin portal</strong> in the service as shown in <em class="italic">Figure 10.16</em>. More information about using the Power BI Admin portal and tenant settings is provided in <em class="italic">Chapter 12</em>, <em class="italic">Administering Power BI for an Organization</em>.</p>
    <figure class="mediaobject"><img src="images/000362.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.16: Information protection tenant settings</p>
    <p class="fm-booktitle">In <em class="italic">Figure 10.16</em>, four of the<a id="calibre_link-1372" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> five information protection settings have been enabled for the entire organization.</p>
    <p class="fm-booktitle">Once the <strong class="screentext">Information protection</strong> settings are enabled, users are able to apply sensitivity labels to content within the Power BI service using the settings for dashboards, reports, and datasets as shown in <em class="italic">Figure 10.17</em>:</p>
    <figure class="mediaobject"><img src="images/000372.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.17: Sensitivity labels in the Power BI service</p>
    <p class="fm-booktitle">In <em class="italic">Figure 10.17</em>, the <strong class="screentext">Confidential </strong>sensitivity label is applied to the Monthly Financials report. Once applied, the sensitivity label is displayed next to the report title as shown in <em class="italic">Figure 10.18</em>:</p>
    <figure class="mediaobject"><img src="images/000381.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.18: Sensitivity labels displayed for a report</p>
    <p class="fm-booktitle">In addition to setting sensitivity labels in the Power BI service, sensitivity labels can also be applied within Power BI Desktop from the <strong class="screentext">Home</strong> tab of the ribbon, as shown in <em class="italic">Figure 10.19</em>:</p>
    <figure class="mediaobject"><img src="images/000390.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.19: Sensitivity labels in Power BI Desktop</p>
    <p class="fm-booktitle">When <strong class="screentext">Sensitivity</strong> labels are applied <a id="calibre_link-1373" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>within Power BI Desktop, publishing to the Power BI service automatically marks the dataset, as well as the report, with the applied <strong class="screentext">Sensitivity</strong> label.</p>
    <p class="fm-booktitle">Information protection sensitivity labels can be useful in alerting end users about the privileged nature of the content of Power BI reports and dashboards and enterprise BI teams are encouraged to work with information security and compliance teams to enable and use clear, consistent labeling policies. For example, reports developed for human resources often include sensitive or personally identifiable information that should not be shared outside of the organization.</p>
    <p class="fm-booktitle">Next, we’ll take a look at Power BI’s integration with Microsoft’s data loss prevention solution.</p>
    <h2 id="calibre_link-318" class="calibre9">Data loss prevention</h2>
    <p class="fm-booktitle">Microsoft’s <strong class="screentext">data loss prevention</strong> (<strong class="screentext">DLP</strong>) solution<a id="calibre_link-1369" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> assists organizations in<a id="calibre_link-769" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> detecting and protecting sensitive (private) data <a id="calibre_link-1727" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>such as United States <strong class="screentext">Social Security Numbers</strong> (<strong class="screentext">SSNs</strong>) and other <strong class="screentext">personally identifiable information</strong> (<strong class="screentext">PII</strong>). The ability to detect and respond to <a id="calibre_link-1284" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>potential breaches of privacy is an important component in maintaining compliance with many different government regulations.</p>
    <p class="fm-booktitle">Privacy and compliance are important topics within almost all organizations, particularly when dealing with information about employees and customers. In the <strong class="screentext">European Union</strong> (<strong class="screentext">EU</strong>), the main privacy<a id="calibre_link-1022" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> act is the <strong class="screentext">General Data Protection Regulation</strong> (<strong class="screentext">GDPR</strong>). In the United States, there are many different federal privacy <a id="calibre_link-1033" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>laws such as the Privacy Act, the <strong class="screentext">Health Insurance Portability and Accountability Act</strong> (<strong class="screentext">HIPAA</strong>), the <strong class="screentext">Children’s Online Privacy Protection Act</strong> (<strong class="screentext">COPPA</strong>), as well as<a id="calibre_link-628" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> individual state laws. </p>
    <p class="fm-booktitle">Tracking and maintaining compliance with so many different regulations is complex and time-consuming and violations can be costly. Microsoft’s data loss prevention solution assists with compliance through the use of built-in DLP policy templates that implement the privacy rules of the most prominent government privacy regulations throughout the world. </p>
    <p class="fm-booktitle"><em class="italic">Figure 10.20</em> shows the policy templates available in the Microsoft 365 compliance portal for medical and health information.</p>
    <figure class="mediaobject"><img src="images/000399.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.20: Sensitivity labels in Power BI Desktop</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 10.20</em>, templates are available for medical and health regulations enacted in Australia, Canada, the United Kingdom, and the United States. These policy templates are maintained<a id="calibre_link-770" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> by Microsoft and updated to reflect changes in regulations such as the <strong class="screentext">Enhanced</strong> version of the <strong class="screentext">Australia Health Records Act (HRIP Act)</strong>.</p>
    <p class="fm-booktitle">DLP policies can identify over 250 standard types of PII such as Australia Tax File Number, Belgium Driver’s License Number, IP Address, and U.S. / U.K. Passport Number. In addition, DLP rules can include custom rules identifying organizationally sensitive information. These policies can be applied to many different Microsoft 365 systems, including Power BI, as shown in <em class="italic">Figure 10.21</em>.</p>
    <figure class="mediaobject"><img src="images/000409.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.21: Sensitivity labels in Power BI Desktop</p>
    <p class="fm-booktitle">When turned on, DLP policies targeting Power BI are evaluated whenever content is published or refreshed. If a<a id="calibre_link-771" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> potential violation is identified, the user can be notified via a policy tip. In addition, alerts can be sent to administrators and users via email and alerts also appear in the Microsoft 365 compliance center. DLP policies can thus help prevent the publishing of sensitive information that may <a id="calibre_link-1034" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>violate government regulations such as the HIPAA or GDPR.</p>
    <p class="fm-booktitle">It should be clear now that the<a id="calibre_link-1023" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> ability to leverage pre-built and custom DLP policies across emails, files, devices, and data assets both on-premises and in Microsoft 365 is a significant differentiator for Power BI in the enterprise BI software market. </p>
    <p class="fm-booktitle">Moving on, another top concern regarding the management of workspaces and content is version control.</p>
    <h1 id="calibre_link-319" class="heading">Version control</h1>
    <p class="fm-booktitle">Version history and source <a id="calibre_link-1812" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>control are essential elements of an IT organization’s <strong class="screentext">application life cycle management</strong> (<strong class="screentext">ALM</strong>) processes and policies. Power BI files that are used in any <a id="calibre_link-517" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>production sense should be stored in a system such as Azure DevOps that provides version control features for tracking who made changes when and the ability to restore or recover files from their previous states.</p>
    <p class="fm-booktitle">For example, changes to an Analysis Services data model, such as new DAX measures, are typically committed to a source control repository, and tools such as Azure DevOps Services, formerly<a id="calibre_link-1840" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> known as <strong class="screentext">Visual Studio Team Services</strong> (<strong class="screentext">VSTS</strong>), provide features for teams to manage and collaborate on these changes. Perhaps most importantly, these tools enable teams to view and revert back to prior versions.</p>
    <p class="fm-booktitle">Power BI Desktop files (<code class="inlinecode">.pbix</code> and <code class="inlinecode">.pbit)</code> do not integrate with these robust systems in the same manner as code (text) files. That said, Power BI files can be included in Azure DevOps, Git, or other version control repositories with support for common commit and pull operations. For example, a team of BI developers could all stay synchronized to a set of Power BI files in a Git repository via their local/remote repository. Additionally, a team could enforce a pull request process and review changes to Power BI files before approving the merging of developer branches to a master branch.</p>
    <p class="fm-booktitle">Alternatively, Microsoft <a id="calibre_link-1165" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>recommends <strong class="screentext">OneDrive for Business</strong>, given its support for version history and large file size limit. Additionally, for longer-term and larger-scale projects, BI teams can optionally persist the core DAX and M code contained in a dataset into a structure suitable for implementing source control.</p>
    <h2 id="calibre_link-320" class="calibre9">OneDrive for Business</h2>
    <p class="fm-booktitle">OneDrive for<a id="calibre_link-2081" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Business is Microsoft’s cloud-based file storage platform. It supports large files, version history, and other features such as sharing, synchronization to desktop systems, and automation via integration with Microsoft Power Automate. OneDrive for Business features are built into SharePoint Team sites, which are also used by Teams, Microsoft’s collaboration software. Thus a business unit that uses Teams could keep their Power BI files on the Teams site and synchronize those files to their local device.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 10.22</em>, a <strong class="screentext">Power BI template file</strong> (<code class="inlinecode">.pbit</code>) has been uploaded to a OneDrive for Business folder. A template file can be created from a Power BI Desktop file (<code class="inlinecode">.pbix</code>) by selecting <strong class="screentext">File</strong> and then <strong class="screentext">Save as</strong> and setting <strong class="screentext">Save as type</strong> to <strong class="screentext">Power BI template files (.pbix)</strong>. Template files preserve all of a report’s queries, DAX measures, and visualizations but do not contain any data. Thus, while the full <code class="inlinecode">.pbix</code> file could also be uploaded, <code class="inlinecode">.pbit</code> files are significantly smaller in size and thus are excellent candidates for version control.</p>
    <figure class="mediaobject"><img src="images/000419.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.22: OneDrive for Business file options</p>
    <p class="fm-booktitle">Selecting the<a id="calibre_link-1166" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> three vertical dots exposes several file options including <strong class="screentext">Version history</strong>. As changes are implemented and saved in the <code class="inlinecode">.pbix</code> file, such as a revised DAX measure or a new M query, the updated <code class="inlinecode">.pbix</code> or an updated <code class="inlinecode">.pbit</code> template file is uploaded to OneDrive for Business. </p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 10.23</em>, the <strong class="screentext">Version History</strong> pane makes it easy to view the history of changes to a file and to restore an earlier version.</p>
    <figure class="mediaobject"><img src="images/000004.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.23: File options in Version History</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 10.23</em>, selecting the three vertical dots for the <strong class="screentext">Version 1.0</strong> row exposes three file options, including <strong class="screentext">Restore</strong>. Selecting <strong class="screentext">Restore</strong> creates a new version (Version 4.0), which is an exact copy of the file restored. This restored file replaces the current file<a id="calibre_link-1167" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> accessible in the OneDrive for Business folder. </p>
    <p class="fm-booktitle">As described in the <em class="italic">Live connections to Power BI datasets</em> section in <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>, reports should be created with Power BI Desktop files rather than within the Power BI service to enable version history. However, since dashboards are created exclusively within the Power BI service, version history is currently not possible for dashboards.</p>
    <p class="fm-booktitle">With version control for entire Power BI files covered, we’ll next explore version control for M and DAX code.</p>
    <h2 id="calibre_link-321" class="calibre9">Source control for M and DAX code</h2>
    <p class="fm-booktitle">Although the<a id="calibre_link-1734" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> version history of M and DAX code within Power BI Desktop files is technically available via OneDrive for Business, some BI organizations may also choose to utilize more robust version control tools on essential queries and measures. With this approach, it is easier to manage complex code, as well as reusing code across solutions.</p>
    <p class="fm-booktitle">For example, an M query can be saved as a <code class="inlinecode">.pq</code> file and synchronized with a team project code repository in Azure DevOps services or a private GitHub repository. In <em class="italic">Figure 10.24</em>, a Power Query project containing multiple folders of PQ files (M queries) has been added to a solution in Visual Studio and synchronized with a Git repository in an Azure DevOps project:</p>
    <figure class="mediaobject"><img src="images/000012.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.24: Power Query project in Visual Studio</p>
    <p class="fm-booktitle">In this example, all M queries (<code class="inlinecode">.pq</code> files) are checked into source control as indicated by the lock icon in the Solution<a id="calibre_link-1735" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Explorer window, except for the <strong class="screentext">Customer</strong> query, which is pending an edit (checkmark icon). The revised <strong class="screentext">Customer </strong>dimension table query would be implemented within the Power BI Desktop file first but also saved within the Power Query project in Visual Studio.</p>
    <p class="fm-booktitle">As an enterprise tool, many version control options are available in Visual Studio, including <strong class="screentext">Compare</strong> <strong class="screentext">with</strong> <strong class="screentext">Unmodified...</strong> and <strong class="screentext">Blame (Annotate)</strong>. By clicking <strong class="screentext">Commit</strong>, a message describing the change can be entered and the updated file can be synced to the source control repository in Azure DevOps Services.</p>
    <p class="fm-booktitle">Given the additional maintenance overhead, enterprise source control tools may not be suitable for smaller, simpler Power BI projects or the very early stages of projects. In addition to sound<a id="calibre_link-2082" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> requirement gathering efforts, teams can minimize the maintenance effort required of the version control project by only including the essential M queries and DAX measures. </p>
    <p class="fm-booktitle">For example, only the DAX measures containing fundamental business logic, such as the base measures described in <em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery, and Composite Data Models</em>, could be saved as <code class="inlinecode">.msdax</code> files.</p>
    <p class="fm-booktitle">In addition to OneDrive for Business, Visual Studio, and Azure DevOps Services, there are several external tools that can be leveraged for code maintenance purposes, such as the oddly named external tool MSHGQM.</p>
    <h3 id="calibre_link-322" class="heading1">MSHGQM</h3>
    <p class="fm-booktitle">MSHGQM is a free external tool for <a id="calibre_link-1151" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI Desktop used for the creation of DAX measures and columns as well as measure and column definitions that can be reused between multiple datasets. MSHGQM includes over 200 DAX calculation definitions, including all of Power BI Desktop’s built-in quick measures.</p>
    <p class="fm-booktitle">MSHGQM allows measure and column formulas to be created using replaceable parameters, as shown in <em class="italic">Figure 10.25</em>. These definitions can then be used to create measures and columns within datasets.</p>
    <figure class="mediaobject"><img src="images/000024.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.25: Power Query project in Visual Studio</p>
    <p class="fm-booktitle">In addition to using the built-in calculation definitions, users can create their own custom calculation definitions. MSHGQM stores custom calculation definitions within a JSON file and includes<a id="calibre_link-2083" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the ability to store pre-defined labels, tooltips, default values, and even custom format strings. </p>
    <p class="fm-booktitle">Using MSHGQM, enterprise BI teams can create a single measure definition for key metrics and share the measure definitions among team members by distributing the JSON file. This ensures that all team members are using the same calculations for such things as date intelligence measures, enabling consistency and repeatability across different data modelers, and speeding up the data model development process. </p>
    <p class="fm-booktitle">MSHGQM can be downloaded from the<a id="calibre_link-1152" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> following GitHub repository (<a href="https://bit.ly/3HlkjRa" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3HlkjRa</span></a>), which includes documentation on its installation and use. Additional information and demonstrations are provided via a dedicated YouTube channel: <a href="https://bit.ly/3M9QsPp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3M9QsPp</span></a>.</p>
    <p class="fm-booktitle">This concludes our explanation of various version control options for Power BI. We’ll next turn our attention to the subject of metadata management.</p>
    <h1 id="calibre_link-323" class="heading">Metadata management</h1>
    <p class="fm-booktitle">Metadata is simply data about <a id="calibre_link-1109" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>data. While often overlooked, metadata management is an important aspect of properly managed content within Power BI.</p>
    <p class="fm-booktitle">Power BI datasets support metadata capabilities with the ability to include descriptions and other metadata about tables, columns, and measures found within the dataset. The information provided by metadata can become important as it’s common for hundreds of DAX measures to be built into datasets over time to support advanced analytics and address new requirements.</p>
    <p class="fm-booktitle">In addition, content published to the Power BI service also allows metadata to be set via the <strong class="screentext">Settings</strong> pane as shown in <em class="italic">Figure 10.26</em>:</p>
    <figure class="mediaobject"><img src="images/000034.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.26: Metadata settings for a report in the Power BI service</p>
    <p class="fm-booktitle">Consider that as Power BI projects grow to support more teams and business processes, the dataset(s) supporting the reports and dashboards for these projects also grows. In addition, the number of reports, dashboards, and other content is also likely to increase. For example, integrating the general ledger into the existing AdWorks Enterprise dataset would require new fact and dimension tables, new relationships, and additional measures with their own unique business rules or definitions. </p>
    <p class="fm-booktitle">Given this added complexity, BI teams and specifically the dataset designer described in <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, can embed descriptions to aid report authors in correctly utilizing the data model. Additionally, the <strong class="screentext">dynamic management views</strong> (<strong class="screentext">DMVs</strong>) for Analysis Services models can be leveraged to generate metadata reports providing detailed visibility of all essential objects of the dataset. DMVs are simply Analysis Services queries that return information about server health, server operations, and model objects.</p>
    <p class="fm-booktitle">The combination of field <a id="calibre_link-1110" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>descriptions and metadata reporting can help drive consistent report development, as well as facilitating effective collaboration within the project team and between the project team and other stakeholders. In addition, the consistent application of metadata for content published to the Power BI service can also help users search for and find content, as well as understanding the intent and purpose of that content.</p>
    <p class="fm-booktitle">In addition to field descriptions, properties such as synonyms, display folders, and custom format strings are additional examples of metadata. Let’s take a closer look at field descriptions.</p>
    <h2 id="calibre_link-324" class="calibre9">Field descriptions</h2>
    <p class="fm-booktitle">A <strong class="screentext">Properties</strong> pane in the <strong class="screentext">Model</strong> view of Power BI Desktop allows dataset designers to enter descriptions and other <a id="calibre_link-1111" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>metadata for the measures, columns, and tables of a dataset. The description metadata is then exposed to report authors who connect to this dataset as they hover over these objects in the <strong class="screentext">Fields</strong> list of the <strong class="screentext">Report</strong> view and within the input field wells of visualizations. </p>
    <p class="fm-booktitle">Although field descriptions <a id="calibre_link-989" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are not a full substitute for formal documentation, descriptions of the logic, definition, or calculation of various objects enable report authors to develop content more efficiently. For example, rather than searching an external resource such as a data dictionary or contacting the dataset designer, the report author could simply hover over measures and column names from within Power BI Desktop.</p>
    <p class="fm-booktitle">Creating and viewing field descriptions is relatively simple, as explained in the following sections, starting with how to create field descriptions. </p>
    <h3 id="calibre_link-325" class="heading1">Creating descriptions</h3>
    <p class="fm-booktitle">To create a <a id="calibre_link-990" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>description, open the Power BI Desktop file containing the dataset and navigate to the <strong class="screentext">Model</strong> view. By default, both the <strong class="screentext">Properties</strong> pane and <strong class="screentext">Fields</strong> pane are expanded as shown in <em class="italic">Figure 10.27</em>.</p>
    <figure class="mediaobject"><img src="images/000044.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.27: Power Query project in Visual Studio</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 10.27</em>, the <strong class="screentext">Internet Gross Sales</strong> measure is selected on the <strong class="screentext">Fields</strong> pane and a sentence is entered into the <strong class="screentext">Description</strong> box. Additional metadata such as <strong class="screentext">Synonyms</strong> is also displayed.</p>
    <p class="fm-booktitle">Just like the preceding example with measures, selecting a table or a column in the <strong class="screentext">Fields</strong> pane exposes similar metadata, including a <strong class="screentext">Description</strong> box. Table and column descriptions can be valuable, but measures are likely the best use case for this feature given the volume of measures in a dataset and the variety of calculations or logic they can contain.</p>
    <p class="fm-booktitle">Identify the most important measures in a dataset and apply concise, consistent descriptions using business-friendly terms. The set of measures described in the <em class="italic">Base measures</em> section of <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, represents good candidates for descriptions since they are reused in many other measures, including the date intelligence <a id="calibre_link-991" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>measures. For example, it’s essential that the report author knows that the net sales measure includes discounts while the gross sales measure does not.</p>
    <p class="fm-booktitle">Next, we’ll look at how to view field descriptions.</p>
    <h3 id="calibre_link-326" class="heading1">View field descriptions</h3>
    <p class="fm-booktitle">The descriptions<a id="calibre_link-992" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> included in Power BI datasets can be viewed in the <strong class="screentext">Fields</strong> pane, the input field wells of visualizations, and the <strong class="screentext">Properties</strong> pane (for import and composite mode datasets). </p>
    <p class="fm-booktitle">In <em class="italic">Figure 10.28</em>, the report author built a simple visual using the <code class="inlinecode">Customer History Segment</code> column and <code class="inlinecode">Internet Gross Sales</code> measure. Hovering the mouse cursor over the <code class="inlinecode">Customer History Segment</code> column in the visual’s <strong class="screentext">Values</strong> field well exposes the description in the tooltip along with the table and column name.</p>
    <figure class="mediaobject"><img src="images/000054.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.28: Field description via visualization field wells</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 10.27</em>, the report author can view the description of the field (column or measure) via the tooltip to understand the essential definition, such as the first purchase date relative to the current date in this example. </p>
    <p class="fm-booktitle">Likewise, the author can also hover over the <code class="inlinecode">Internet Gross Sales</code> measure in the <strong class="screentext">Values</strong> field well to view this description or hover over other measure, column, and table names in the <strong class="screentext">Fields</strong> pane, as shown in <em class="italic">Figure 10.29</em>:</p>
    <figure class="mediaobject"><img src="images/000063.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.29: Description of measure via the Fields pane</p>
    <p class="fm-booktitle">For the <strong class="screentext">Internet Gross Product Margin</strong> measure and other measures in the dataset, the description applied uses proper casing when referring to DAX measures. This approach helps to keep each description concise and advises the user of the other measures they may need to review. </p>
    <p class="fm-booktitle">Field descriptions cannot be <a id="calibre_link-993" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>viewed by hovering over names or values in the visuals themselves on the report canvas. However, as per the <em class="italic">Visualization formatting</em> section of <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>, chart visuals contain a <strong class="screentext">Tooltips </strong>input field well that provides a very similar experience to viewing field descriptions. </p>
    <p class="fm-booktitle">Tooltips are typically used to display DAX measures related to the measures in the visual, such as the net margin percentage for a chart that visualizes net sales. However, measures can also return text strings and, thus, if necessary, to aid the users viewing the reports, measures can be created containing the field description metadata and utilized as tooltips.</p>
    <p class="fm-booktitle">Although potentially useful for report consumers, BI teams should be cautious that the DAX measures used for descriptions are isolated from the actual field descriptions. Therefore, in the event of a change in description, both the description measure and the field description would need to be updated. </p>
    <p class="fm-booktitle">Additionally, if description measures are used extensively, a dedicated measure support table, as described in <em class="italic">Chapter 3</em>, <em class="italic">Transforming Data with M</em>, and <em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery, and Composite Data Models</em>, may be necessary to organize these measures. Alternatively, they could be organized into display folders.</p>
    <p class="fm-booktitle">Field descriptions applied to Analysis Services data models also flow through to Power BI reports just like the examples in this section with a Power BI dataset. </p>
    <p class="fm-booktitle">However, field descriptions applied to Power BI datasets are not visible when connecting via Microsoft Excel.</p>
    <p class="fm-booktitle">Managing metadata such <a id="calibre_link-994" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as descriptions for all tables, columns, and measures within a dataset can be burdensome and time-consuming. Additionally, for datasets with many tables, columns, and measures, it is easy to miss setting the metadata for particular items. Thus, we’ll next briefly explore an external tool for Power BI that helps make the management of metadata easier.</p>
    <h2 id="calibre_link-327" class="calibre9">Metadata Mechanic</h2>
    <p class="fm-booktitle">Metadata Mechanic is a free, external tool for <a id="calibre_link-1115" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI Desktop specifically designed to make the management and setting of metadata easier and faster. Using Metadata Mechanic, the metadata for all tables, columns, and measures within a data model can be retrieved and updated as shown in <em class="italic">Figure 10.30</em>:</p>
    <figure class="mediaobject"><img src="images/000076.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.30: Metadata Mechanic</p>
    <p class="fm-booktitle">Metadata Mechanic includes the ability to automatically mass configure displayed metadata, such as hiding all columns in a table, moving all measures to another table, or setting the thousands separator for all <a id="calibre_link-2084" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>whole number columns and measures.</p>
    <p class="fm-booktitle">Metadata Mechanic can be downloaded <a id="calibre_link-1116" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>from the following GitHub repository (<a href="https://bit.ly/3HlkjRa" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3HlkjRa</span></a>), which includes documentation on its installation and use. </p>
    <p class="fm-booktitle">Additional information and demonstrations are provided via a YouTube channel: <a href="https://bit.ly/3M9QsPp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3M9QsPp</span></a>. We’ll now turn our attention to reporting on this metadata.</p>
    <h1 id="calibre_link-328" class="heading">Metadata reporting</h1>
    <p class="fm-booktitle">Analysis Services DMVs are available to<a id="calibre_link-1112" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> retrieve the descriptions applied to datasets and related information. These DMVs can be leveraged for both simple, ad hoc extracts via common dataset tools, such as DAX Studio, as well as more robust and standardized reports in Power BI or Excel. </p>
    <p class="fm-booktitle">Official documentation of Analysis Services DMVs, including a reference and description of each DMV, query syntax, and client-tool access, is available via the following link: <a href="http://bit.ly/2A81lek" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2A81lek</span></a>.</p>
    <p class="fm-booktitle">The following query can be used to retrieve the measures in a dataset with descriptions as well as their DAX expression:</p>
    <pre class="programlisting"><code class="hljs-code">SELECT 
       [Name] as [Measure Name]
  ,    [Description] as [Measure Description] 
  ,    [Expression] as [DAX Expression]
FROM
$SYSTEM.TMSCHEMA_MEASURES
WHERE LEN([Description]) &gt; 1
ORDER BY [NAME]; 
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">WHERE</code> clause in this query ensures that only measures with a description applied are returned. Removing or commenting out this clause (for example, <code class="inlinecode">--WHERE LEN([Description]) &gt; 1)</code> returns all measures whether or not they have a description. Additionally, column aliases of <code class="inlinecode">Measure Name</code>, <code class="inlinecode">Measure Description</code>, and <code class="inlinecode">DAX Expression</code> improve the usability of the DMV columns.</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 10.31</em>, the query can be executed from DAX Studio against the open Power BI Desktop file:</p>
    <figure class="mediaobject"><img src="images/000085.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.31: Measure descriptions via a DMV query in DAX Studio</p>
    <p class="fm-booktitle">Just as measure descriptions <a id="calibre_link-1113" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can be retrieved via the <code class="inlinecode">TMSCHEMA_MEASURES</code> DMV, the following query retrieves the column descriptions from the <code class="inlinecode">TMSCHEMA_COLUMNS</code> DMV:</p>
    <pre class="programlisting"><code class="hljs-code">SELECT
       [ExplicitName] as [Column Name]
  ,    [Description] as [Column Description]
FROM $SYSTEM.TMSCHEMA_COLUMNS
WHERE LEN([Description]) &gt; 1
ORDER BY [ExplicitName];  
</code></pre>
    <p class="fm-booktitle">As per the official documentation<a id="calibre_link-773" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> referenced earlier in this section, the query engine for DMVs is the <strong class="screentext">Data Mining parser</strong> and the DMV query syntax is based on the <code class="inlinecode">SELECT</code> (DMX) statement. Therefore, although the <a id="calibre_link-2085" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>queries appear to be standard SQL statements, the full SQL <code class="inlinecode">SELECT </code>syntax is not supported, including the <code class="inlinecode">JOIN</code> and <code class="inlinecode">GROUP BY</code> clauses. </p>
    <p class="fm-booktitle">For example, it’s not possible to join the <code class="inlinecode">TMSCHEMA_COLUMNS</code> DMV with the <code class="inlinecode">TMSCHEMA_TABLES</code> DMV within the same <code class="inlinecode">SELECT</code> statement to retrieve columns from both DMVs. Given these limitations, it can be helpful to build lightweight data transformation processes on top of DMVs, as described in the following section.</p>
    <h2 id="calibre_link-329" class="calibre9">Standard metadata reports</h2>
    <p class="fm-booktitle">For larger datasets with <a id="calibre_link-1770" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>many measures, relationships, and tables, a dedicated metadata report can be constructed using Power BI. In this approach, the Analysis Services data connector is used to access the DMVs of the Power BI dataset and this data is transformed via M queries. </p>
    <p class="fm-booktitle">A set of report pages can be created to visualize the primary objects of the model and support common ad hoc questions, such as which relationships use bidirectional cross-filtering? Implementing the <a id="calibre_link-2086" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>DMV-based Power BI report consists of the following four steps:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Obtain the server and database parameter values of the Power BI dataset</li>
      <li class="calibre13">Query the DMVs of the Power BI dataset from a separate Power BI Desktop file</li>
      <li class="calibre13">Integrate and enhance the DMV data to support the visualization layer</li>
      <li class="calibre13">Develop the report pages</li>
    </ol>
    <p class="fm-booktitle">Each of these steps is explained in the following sections starting with obtaining the server and database parameters.</p>
    <h3 id="calibre_link-330" class="heading1">Server and database parameters</h3>
    <p class="fm-booktitle">The server value of the Power BI <a id="calibre_link-1771" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>dataset is visible in the status bar (bottom-right corner) when connected to the dataset from DAX Studio, as shown in <em class="italic">Figure 10.32</em>:</p>
    <figure class="mediaobject"><img src="images/000096.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.32: Server value of Power BI dataset via DAX Studio</p>
    <p class="fm-booktitle">In <em class="italic">Figure 10.31</em>, the server parameter is <strong class="screentext">localhost:59910</strong>. To obtain the database parameter, run the following query in DAX Studio:</p>
    <pre class="programlisting"><code class="hljs-code"> SELECT 
     [CATALOG_NAME]
 ,   [DATABASE_ID]
 FROM $SYSTEM.DBSCHEMA_CATALOGS 
</code></pre>
    <p class="fm-booktitle">Both columns retrieve the same GUID value, which can be used as the database parameter.</p>
    <p class="fm-booktitle">There are other methods of obtaining the server parameter, such as finding the <strong class="screentext">process ID</strong> (<strong class="screentext">PID</strong>) in <strong class="screentext">Task Manager</strong> and then running <code class="inlinecode">netstat -anop tcp</code> from <strong class="screentext">Command Prompt</strong> to find the port associated with the PID. However, connecting to the dataset from DAX Studio is more straightforward and it’s assumed that experienced Power BI dataset designers will have at least a basic familiarity with DAX Studio.</p>
    <p class="fm-booktitle">The server parameter (for example, <strong class="screentext">localhost:59910</strong>) can also be used to connect to the running Power BI dataset via <strong class="screentext">SQL Server Profiler</strong>. This can be useful for identifying the DAX queries generated by<a id="calibre_link-2087" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report visuals and user interactions. Alternatively, Power BI Desktop can generate a trace file via the <strong class="screentext">Enable tracing</strong> setting within the <strong class="screentext">Diagnostics</strong> tab (<strong class="screentext">File | Options and Settings | Diagnostics</strong>).</p>
    <h3 id="calibre_link-331" class="heading1">Querying the DMVs from Power BI</h3>
    <p class="fm-booktitle">With the server and database <a id="calibre_link-925" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>known, parameters and queries can be created in Power BI Desktop to stage the DMV data for further transformations. In <em class="italic">Figure 10.33,</em> showing the Power Query Editor, three query groups are used to organize the parameters, the DMV queries, and the enhanced queries (<strong class="screentext">Metadata Report Tables</strong>) used by the report:</p>
    <figure class="mediaobject"><img src="images/000106.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.33: Power Query Editor in Power BI Desktop</p>
    <p class="fm-booktitle">As per the <code class="inlinecode">TablesDMV</code> query, the two parameters (<code class="inlinecode">AnalysisServicesServer</code> and <code class="inlinecode">AnalysisServicesDatabase</code>) are passed to the <code class="inlinecode">AnalysisServices.Database()</code> function for each DMV query. As indicated by the gray font of the DMV queries and the parameters, these queries are not loaded to the data model layer.</p>
    <p class="fm-booktitle">To update the metadata report in a future session to reflect changes to the dataset, the server and database parameter values would need to be retrieved again. These values could then be <a id="calibre_link-926" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>passed to the data model parameters, thus allowing all queries to update. This manual update process is necessary with Power BI Desktop files, given changes to the port and database ID, but is not necessary for metadata reports based on Analysis Services models.</p>
    <p class="fm-booktitle">Given the small size of the DMV data and the limitations of SQL <code class="inlinecode">SELECT</code> queries against DMV data, a simple <code class="inlinecode">SELECT *</code> is used to expose all columns and rows. The <strong class="screentext">Metadata Report Table</strong> queries contain all the joins and transformations to prepare the data for reporting.</p>
    <h3 id="calibre_link-332" class="heading1">Integrating and enhancing DMV data</h3>
    <p class="fm-booktitle">The following M <a id="calibre_link-923" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>query produces the <code class="inlinecode">Relationships</code> table by implementing joins to retrieve the table and <a id="calibre_link-921" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>column names on each side of each relationship:</p>
    <pre class="programlisting"><code class="hljs-code">let
   FromTableJoin = Table.NestedJoin(
      RelationshipsDMV,{"FromTableID"},TablesDMV,{"ID"},"TableDMVColumns", JoinKind.Inner),
   FromTable = Table.ExpandTableColumn(FromTableJoin, "TableDMVColumns", {"Name"}, {"From Table"}),
   ToTableJoin = Table.NestedJoin(
      FromTable,{"ToTableID"},TablesDMV,{"ID"},"TableDMVColumns", JoinKind.Inner),
   ToTable = Table.ExpandTableColumn(ToTableJoin, "TableDMVColumns", {"Name"}, {"To Table"}),
   FromColumnJoin = Table.NestedJoin(
      ToTable,{"FromColumnID"},ColumnsDMV,{"ID"},"ColumnsDMVColumns", JoinKind.Inner),
   FromColumn = Table.ExpandTableColumn(FromColumnJoin, "ColumnsDMVColumns", 
      {"ExplicitName"}, {"From Column"}),
   ToColumnJoin = Table.NestedJoin(
      FromColumn,{"ToColumnID"},ColumnsDMV,{"ID"},"ColumnsDMVColumns", JoinKind.Inner),
   ToColumn = Table.ExpandTableColumn(ToColumnJoin, "ColumnsDMVColumns", 
      {"ExplicitName"}, {"To Column"}),
   CrossFilteringColumn = Table.AddColumn(ToColumn, "Cross-Filtering Behavior", each
      if [CrossFilteringBehavior] = 1 then "Single Direction"
      else if [CrossFilteringBehavior] = 2 then "Bidirectional" else "Other", type text),
   RenameActiveFlag = Table.RenameColumns(CrossFilteringColumn,{{"IsActive", "Active Flag"}})
in
    RenameActiveFlag
</code></pre>
    <p class="fm-booktitle">The <strong class="screentext">Relationships</strong> DMV (<code class="inlinecode">TMSCHEMA_RELATIONSHIPS</code>) includes table and column ID columns, which are used for the<a id="calibre_link-924" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> joins to the tables (<code class="inlinecode">TMSCHEMA_TABLES</code>) and columns (<code class="inlinecode">TMSCHEMA_COLUMNS</code>) DMVs, respectively. Additionally, a more intuitive cross-filtering behavior<a id="calibre_link-922" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> column is added based on a conditional (<code class="inlinecode">if..then</code>) expression.</p>
    <h3 id="calibre_link-333" class="heading1">Metadata report pages</h3>
    <p class="fm-booktitle">With the enhanced DMV data loaded, report <a id="calibre_link-1114" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>pages can be created, visualizing the most important columns. In <em class="italic">Figure 10.34</em>, the table and column names retrieved via the M query joins in the previous section, <em class="italic">Integrating and enhancing DMV data</em>, are included in a simple table visual:</p>
    <figure class="mediaobject"> <img src="images/000118.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 10.34: Metadata report page</p>
    <p class="fm-booktitle">A Power BI Desktop file <a id="calibre_link-2088" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>containing the M queries and report pages from this example is included with the code bundle for this book. Additionally, <em class="italic">Chapter 3</em>, <em class="italic">Transforming Data with M</em>, and <em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery, and Composite Data Models</em>, describe the essential concepts of M queries and relationships contained in this section, respectively.</p>
    <p class="fm-booktitle">This concludes our exploration of metadata management and reporting.</p>
    <h1 id="calibre_link-334" class="heading">Summary</h1>
    <p class="fm-booktitle">This chapter introduced workspaces and their fundamental role in managing and delivering Power BI content to groups of users in the Power BI service. A staged deployment architecture across development, test, and production workspaces was described and implementation guidance was provided. Additionally, several features and processes related to content management and governance were reviewed, including content sensitivity and protection, version history, and metadata management and reporting.</p>
    <p class="fm-booktitle">The next chapter examines the on-premises data gateway and the configuration of data refresh processes in the Power BI service. This includes the administration of the gateway, such as authorizing users and data sources, as well as monitoring gateway resource utilization.</p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-3">
<div id="calibre_link-2089" class="calibre2">
<div id="calibre_link-2090" class="calibre3"><div id="calibre_link-2091" class="calibre4">
    <h1 class="heading">11</h1>
    <h1 id="calibre_link-335" class="mainheading">Managing the On-Premises Data Gateway</h1>
    <p class="fm-booktitle">For many organizations, the data sources for Power BI datasets or reports are located in on-premises environments. The <strong class="screentext">on-premises data gateway</strong> (gateway) serves as a bridge between the Power BI service and on-premises data sources, providing a means to securely connect to these sources to support scheduled data refreshes. In the case of DirectQuery and Analysis Services Live connections, the gateway is used to return the results of queries requested by users in the Power BI service. </p>
    <p class="fm-booktitle">As a critical component of many Power BI solutions and potentially other solutions utilizing Microsoft cloud services, such as Azure Analysis Services, Power Automate, and Power Apps, a sound understanding of the data gateway is essential. </p>
    <p class="fm-booktitle">This chapter reviews the architecture and behavior of the On-premises data gateway in the context of Power BI. End-to-end guidance and best practices are provided across the primary stages of deployment, from planning to installation, and setting up to management and monitoring.</p>
    <p class="fm-booktitle">In this chapter, we review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">On-premises data gateway planning</li>
      <li class="bulletlist">Gateway concepts</li>
      <li class="bulletlist">Gateway installation and configuration</li>
      <li class="bulletlist">Managing gateway clusters </li>
      <li class="bulletlist">Troubleshooting and monitoring gateways</li>
      <li class="bulletlist">Data refresh</li>
    </ul>
    <p class="fm-booktitle">We start with planning for the implementation of the On-premises data gateway.</p>
    <h1 id="calibre_link-336" class="heading">On-premises data gateway planning</h1>
    <p class="fm-booktitle">Planning for the On-premises data <a id="calibre_link-1220" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>gateway involves considerations for infrastructure/resources and networking, data governance, and the administration of the gateway itself. Before committing to a gateway, an organization can determine if BI solutions should be developed against data sources that require a gateway such as legacy on-premises databases or if this data should be loaded/centralized in a source that doesn’t require a gateway such as Azure Synapse or Azure SQL Database. </p>
    <p class="fm-booktitle">For example, a BI team could determine that a gateway will only be used for a particular on-premises SQL Server database and any other on-premises sources such as files on network file shares and other databases will either not be supported or will require its own gateway in the future.</p>
    <p class="fm-booktitle">After determining that a gateway or cluster of gateways will indeed be a required component of the Power BI architecture, more detailed considerations can be reviewed such as the resources this gateway will need to support its expected workload, who will be responsible for administering this gateway, and who will be granted permissions to use the gateway.</p>
    <p class="fm-booktitle">One such detailed consideration is identifying which data sources require a gateway and understanding the role of the gateway in each deployment scenario. Recall from previous chapters that datasets support import, DirectQuery, and composite storage modes. In addition, reports can connect Live to Power BI datasets published to the Power BI service.</p>
    <p class="fm-booktitle">For example, if an import mode Power BI dataset or an import mode Azure Analysis Services model simply needs to be refreshed with on-premises data every night, then gateway resources (hardware) should be provisioned to support this specific nightly workload. This deployment scenario, with the refreshed and in-memory data model hosted in the cloud, is preferable from a user experience or query performance standpoint, as the report queries generated in the Power BI service do not have to access the on-premises source via the On-premises data gateway. </p>
    <p class="fm-booktitle">Alternatively, when the data model or data source accessed directly by Power BI reports is located in an on-premises environment, the On-premises data gateway is used to facilitate data transfer between the data source and the report queries from the Power BI service. </p>
    <p class="fm-booktitle">For example, a DirectQuery Power BI dataset built against an on-premises Teradata database results in report queries being sent from the Power BI service to the Teradata database via the On-premises data gateway and the results of those queries being returned to the Power BI service via the On-premises data gateway. </p>
    <p class="fm-booktitle">This deployment scenario can naturally require alternative gateway resources, such as additional CPU cores, given the potentially high volume of queries being generated dynamically based on user activity.</p>
    <p class="fm-booktitle">In addition to on-premises <a id="calibre_link-1221" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>data sources, data sources residing in <strong class="screentext">Infrastructure-as-a-Service </strong>(<strong class="screentext">IaaS</strong>) <strong class="screentext">virtual machines</strong> (<strong class="screentext">VMs</strong>) also require a data gateway. This is an important exception as cloud data sources generally do not require a gateway. For example, <strong class="screentext">Platform-as-a-Service</strong> (<strong class="screentext">PaaS</strong>) sources, such as Azure SQL Database, and <strong class="screentext">Software-as-a-Service</strong> (<strong class="screentext">SaaS</strong>) solutions, such as Google Analytics, do not require a gateway.</p>
    <p class="fm-booktitle">The following two sets of questions address essential, high-level planning topics including the administration of the installed gateway. The following section, <em class="italic">Top gateway planning tasks</em>, as well as the <em class="italic">Gateway architectures</em> section later in this chapter, contain greater detail to support gateway deployment:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Where is the data being used by the Power BI dataset?<p class="normal1">Confirm that a gateway is needed to access the data source from Power BI. This access includes both scheduled data refresh and any DirectQuery or Live connections to the data source. Additional details on sources requiring a gateway are provided in the next section, <em class="italic">Top gateway planning tasks</em>.</p>
      </li>
      <li class="calibre13">If a gateway is needed, is the data source supported with a <strong class="screentext">generally available</strong> (<strong class="screentext">GA</strong>) data connector? <p class="normal1">If a source-specific connector is not available, the gateway supports <strong class="screentext">Open Database Connectivity</strong> (<strong class="screentext">ODBC</strong>) and <strong class="screentext">Object Linking and Embedding Database</strong> (<strong class="screentext">OLE DB</strong>) connections as well. The current list of supported data sources is available at <a href="https://bit.ly/30N5ofG" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/30N5ofG</span></a>. Data connectors labeled as (Beta) in the <strong class="screentext">Get Data</strong> window of Power BI Desktop should only be used for testing for stability reasons and the fact that functionality may change. </p>
      </li>
      <li class="calibre13">Is the on-premises data or the IaaS data being imported to the Power BI dataset(s) or an Azure Analysis Services model?<p class="normal1">If yes, the gateway supports the scheduled refresh/processing activities for these datasets. If no, the gateway supports user report queries of the data source via DirectQuery or Live connections.</p>
      </li>
      <li class="calibre13">Will a standard On-premises data gateway be used or will a personal gateway (personal mode) be used?<p class="normal1">In all corporate BI deployments, the default and recommended on-premises gateway is installed by the IT organization on IT-owned and maintained servers.</p>
        <p class="normal1">However, in certain business-led self-service projects or in scenarios in which an IT-owned gateway server is not available, the personal gateway could be installed on a business user’s machine, allowing that user to configure scheduled refreshes of import mode datasets.</p>
      </li>
    </ol>
    <p class="fm-booktitle">A single gateway can be used to support multiple datasets, and both import and DirectQuery modes. However, it can be advantageous to isolate the alternative Power BI workloads across distinct gateway clusters (discussed later in this chapter), such as with an import gateway cluster<a id="calibre_link-1222" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and a DirectQuery or Live connection gateway cluster. </p>
    <p class="fm-booktitle">Without this isolation, the scheduled refresh activities of import mode datasets (Power BI or Azure Analysis Services) could potentially impact the performance of user queries submitted via DirectQuery and Live connection datasets. Additionally, as mentioned earlier, scheduled refresh activities can require far different gateway resources (for example, memory) than the queries generated via DirectQuery datasets or Live connections to on-premises <strong class="screentext">SQL Server Analysis Services</strong> (<strong class="screentext">SSAS</strong>). </p>
    <p class="fm-booktitle">In addition to provisioning hardware and installing the gateway(s) for each scenario, BI teams must also plan for the administration and management of the gateway. Answering the following five questions contributes to planning the implementation:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Which users will administer the gateway in Power BI?<p class="normal1">This should be more than one user. Preferably, an <strong class="screentext">Azure Active Directory</strong> (<strong class="screentext">AAD</strong>) security group of multiple gateway admins can be configured. These users do not need Power BI Pro licenses if they’re only administering gateway clusters.</p>
        <p class="normal1">In larger Power BI deployments, distinct users or security groups could be assigned as administrators of different gateways. For example, two users could administer a gateway cluster utilized by enterprise or corporate-owned BI content while two other users could administer a gateway cluster used to support self-service BI content and projects.</p>
        <p class="normal1">This isolation of hardware resources between corporate and self-service BI (that is, business user/team owned) can also be implemented with Power BI Premium capacities, as described in <em class="italic">Chapter 15</em>, <em class="italic">Building Enterprise BI with Power BI Premium</em>. The essential goal of this isolation is to provide the self-service projects with resources aligned to these needs while ensuring that high priority and widely utilized corporate BI assets are not impacted by self-service content or activities.</p>
      </li>
      <li class="calibre13">Which authentication credentials or method will be used to configure the gateway data sources?<p class="normal1">For SSAS and Azure Analysis Services, this should be a server administrator of the Analysis Services instance. For certain DirectQuery data sources, a <strong class="screentext">single sign-on</strong> (<strong class="screentext">SSO</strong>) option is <a id="calibre_link-1710" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>supported in which the Power BI user’s identity is passed to the source system, thus leveraging the source system’s security. The <em class="italic">DirectQuery datasets</em> section later in this chapter contains details of this configuration.</p>
      </li>
      <li class="calibre13">Which users will be authorized to use the gateway?<p class="normal1">Users or security groups of users must be mapped to the data source of a gateway. These are usually report authors with Power BI Pro licenses.</p>
      </li>
      <li class="calibre13">Where will the <a id="calibre_link-1223" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>gateway recovery key be stored? <p class="normal1">Recovery keys are necessary for migrating, restoring, or taking over an existing gateway.</p>
      </li>
      <li class="calibre13">Who will be responsible for updating the On-premises data gateway as new versions are released?<p class="normal1">Just like Power BI Desktop, new versions of the On-premises data gateway are frequently released. This release schedule is as frequent as once a month. New versions include new features and improvements, such as the support for datasets with both cloud and on-premises data sources and/or new and updated connector support.</p>
        <p class="normal1">The Power BI team recommends staying up to date with new releases and will not support old gateway versions. Each new gateway version includes the same M Query engine utilized by the corresponding release of Power BI Desktop. Examples and considerations for M Queries were described in <em class="italic">Chapter 3</em>, <em class="italic">Connecting to Sources and Transforming Data with M</em>. </p>
      </li>
    </ol>
    <p class="fm-booktitle">With the essential questions<a id="calibre_link-2092" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> answered regarding gateway planning, we next take a closer look at the most important gateway planning tasks.</p>
    <h2 id="calibre_link-337" class="calibre9">Top gateway planning tasks</h2>
    <p class="fm-booktitle">Since the gateway relates to different areas of IT, including infrastructure, networking, and data security, subject matter<a id="calibre_link-1224" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> experts in these areas often inquire about the technical requirements of the gateway and its functionality. Additionally, business intelligence teams want to ensure that the gateway doesn’t become a bottleneck to query performance and that dependencies on an individual gateway are avoided. </p>
    <p class="fm-booktitle">BI/IT teams responsible for deploying Power BI solutions with on-premises data (or IaaS data) must partner with these other IT stakeholders to resolve questions and provision the appropriate resources for the On-premises data gateway. This section addresses four of the most common gateway planning tasks. Information related to high availability and security is included in the gateway clusters and architectures, and gateway security sections, respectively.</p>
    <p class="fm-booktitle">Let’s now address the first gateway planning task, determining whether a gateway is needed.</p>
    <h3 id="calibre_link-338" class="heading1">Determining whether a gateway is needed</h3>
    <p class="fm-booktitle">As one would expect, an On-premises<a id="calibre_link-1200" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> data gateway is usually not required for connectivity to cloud data sources. PaaS offerings, such as Azure SQL, and SaaS solutions, such as Salesforce, do not require a gateway. In addition, a virtual network data gateway is available for securely connecting to resources provisioned within the same virtual network in Azure such as Azure table and blob storage, Cosmos DB, and Snowflake.</p>
    <p class="fm-booktitle">However, data sources that reside in an IaaS VM do require a gateway. Additionally, the <code class="inlinecode">Web.Page()</code> function used in M Queries also requires a gateway. This function is used by the <strong class="screentext">Web Data Connector</strong> (<strong class="screentext">WDC</strong>) (<strong class="screentext">Get Data</strong> | <strong class="screentext">Web</strong>) to return<a id="calibre_link-1843" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the contents of an HTML web page as a table, as shown in the following M Query:</p>
    <pre class="programlisting"><code class="hljs-code">// Retrieve table of data access M functions and their descriptions
let
  Source = Web.Page(Web.Contents("https://msdn.microsoft.com/en-US/library/mt296615.aspx")),
  PageToTable = Source{0}[Data],
  ChangedType = Table.TransformColumnTypes(PageToTable,
        {{"Function", type text}, {"Description", type text}})
in
    ChangedType
</code></pre>
    <p class="fm-booktitle">In the preceding example, a two-column table (<code class="inlinecode">Function</code>, <code class="inlinecode">Description</code>) of M functions is retrieved from an MSDN web page and imported into a table in Power BI.</p>
    <p class="fm-booktitle">Additionally, all data sources for a dataset that accesses an on-premises data source must be added to the list of data sources in the gateway management portal. For example, if a dataset uses both SharePoint (on-premises) and an Azure SQL database, the URL for the Azure SQL<a id="calibre_link-2093" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> database must also be added as a data source (via the SQL Server data source type) in the gateway management portal. If one of the data sources for the dataset is not configured for the gateway, the gateway will not appear in the dataset settings to support a refresh.</p>
    <p class="fm-booktitle">Assuming that a gateway is needed, the next task is to identify where to install the gateway.</p>
    <h3 id="calibre_link-339" class="heading1">Identifying where the gateway should be installed</h3>
    <p class="fm-booktitle">Gateways should be installed in<a id="calibre_link-1194" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> locations that minimize the latency between the Power BI service tenant, the gateway server, and the on-premises data source. Reduced latency between these three points results in improved query performance. </p>
    <p class="fm-booktitle">Minimizing this latency is especially important when the gateway is used to support interactive report queries from Power BI to on-premises DirectQuery sources and Live connections to on-premises SSAS models. Network latency from an IP location to Azure data regions can be tested at <a href="http://azurespeed.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://azurespeed.com</span></a>.</p>
    <p class="fm-booktitle">For example, via this free tool, it can quickly be determined that the average latency to the West US region is 100 ms while the East US region is only 37 ms. The lower latency of the East US region is due to the physical proximity of this region to the source IP location (near Columbus, OH). It is most often the case that reduced physical distance results in lower network latency.</p>
    <p class="fm-booktitle">For example, if the Power BI tenant for your organization is located in the North Central US (Illinois) region in Microsoft Azure and your on-premises data source (for example, Oracle) is also located in the upper Midwest region of the United States, then the gateway should be installed<a id="calibre_link-2094" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> on a server near or between these two locations. </p>
    <p class="fm-booktitle">The location of a Power BI tenant can be found by clicking the <strong class="screentext">About Power BI</strong> menu item via the question mark (<strong class="screentext">?</strong>) icon in the top-right corner of the Power BI service. Performing this action displays a dialog similar to <em class="italic">Figure 11.1</em>.</p>
    <figure class="mediaobject"><img src="images/000129.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.1: About Power BI: tenant location</p>
    <p class="fm-booktitle">In this example, the Power BI content for the organization is being stored in the <strong class="screentext">North Central US</strong> (<strong class="screentext">Illinois</strong>) Azure region. </p>
    <p class="fm-booktitle">Therefore, the gateway should be installed on a location that minimizes the distance between Illinois and the location of the data source. </p>
    <p class="fm-booktitle">One example of this would be to install the gateway on the same subnet of the production data source server. It’s not necessary, or recommended, to install the gateway on the same server as the production data source given that the data gateway service will consume memory and processor resources that may impact the performance of the source system. </p>
    <p class="fm-booktitle">Alternatively, assuming the on-premises data center is hybridized with Azure via a <strong class="screentext">virtual private network</strong> (<strong class="screentext">VPN</strong>) connection such as Azure <strong class="screentext">ExpressRoute</strong>, the gateway could be installed as an IaaS VM in the <a id="calibre_link-1818" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>North Central US (Illinois) Azure region. ExpressRoute extends on-premises networks to Microsoft Azure via a private connection.</p>
    <p class="fm-booktitle">Currently, there are 66 Azure <a id="calibre_link-1195" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>regions globally with 12 new regions planned. This link identifies the Azure regions and the criteria for choosing a specific region: <a href="http://bit.ly/2B598tD" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2B598tD</span></a>.</p>
    <p class="fm-booktitle">Once a location is identified, the next task is to determine the hardware resources required for the gateway.</p>
    <h3 id="calibre_link-340" class="heading1">Defining the gateway infrastructure and hardware requirements</h3>
    <p class="fm-booktitle">The recommended starting point for a <a id="calibre_link-1188" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>server that hosts the gateway is eight CPU cores, 8 GB of memory, at least 4 GB of<a id="calibre_link-1733" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> <strong class="screentext">solid-state drives</strong> (<strong class="screentext">SSD</strong>), the 64-bit version of Windows 2012 R2 (or later), and .NET Framework 4.8 (for gateway version February 2021 or later). However, hardware requirements for the gateway server vary significantly based on the type of dataset supported (import versus DirectQuery/Live connection), the volume of concurrent users, and the queries requested. </p>
    <p class="fm-booktitle">For example, if an M query or part of an M query is not folded back to the source system, as described in <em class="italic">Chapter 3</em>, <em class="italic">Connecting to Sources and Transforming Data with M</em>, the gateway server must execute the non-folded M expressions during the scheduled refresh (import) process. Depending on the volume of data and the logic of these expressions, a greater amount of RAM would better support these local operations. </p>
    <p class="fm-booktitle">Similarly, if many users are interacting with reports based on a DirectQuery dataset or a Live connection to an SSAS model (on-premises), additional CPU cores would provide better performance. </p>
    <p class="fm-booktitle">The gateway installs on any domain-joined machine and cannot be installed on a domain controller. Additionally, only one gateway can be installed per computer per gateway mode (enterprise versus personal). Therefore, it’s possible to have both an enterprise mode and a personal mode gateway running on the same machine.</p>
    <p class="fm-booktitle">It’s strongly recommended to avoid a single point of failure by installing instances of the gateway on separate servers. These multiple instances can serve as a single gateway cluster of resources available to support data refreshes and queries against on-premises data sources. Gateway clusters and architectures consisting of separate gateway clusters are described in the <em class="italic">Gateway clusters</em> and <em class="italic">Gateway architectures</em> of this chapter. </p>
    <p class="fm-booktitle">Performance logging associated with the gateway and the gateway server can be used to determine whether adjustments in available resources (RAM and CPU) are necessary. Guidance on interpreting reporting on and interpreting these logs is included in the <em class="italic">Troubleshooting and monitoring gateways</em> section later in this chapter.</p>
    <p class="fm-booktitle">In terms of network configuration, the gateway creates an outbound connection to Azure Service Bus and does not require inbound ports. The gateway communicates on the following outbound ports: TCP <code class="inlinecode">443</code> (default), <code class="inlinecode">5671</code>, <code class="inlinecode">5672</code>, and <code class="inlinecode">9350</code> through <code class="inlinecode">9354</code>. </p>
    <p class="fm-booktitle">It’s recommended that organizations <a id="calibre_link-1189" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>whitelist the IP addresses for the data region of their Power BI tenant (for example, North Central US) within their firewall. The list of IP addresses for the Azure data centers can be downloaded via the following URL: <a href="https://bit.ly/3vqg6JQ" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3vqg6JQ</span></a>.</p>
    <p class="fm-booktitle">The downloaded list of Azure IP addresses is contained within a JSON file which can be easily accessed via Power BI Desktop via an M Query similar to the following:</p>
    <pre class="programlisting"><code class="hljs-code">let
    Source = Json.Document(File.Contents("C:\Users\gdeckler\Downloads\ServiceTags_Public_20220221.json")),
    #"Converted to Table" = Table.FromRecords({Source}),
    #"Expanded values" = Table.ExpandListColumn(#"Converted to Table", "values"),
    #"Expanded values1" = Table.ExpandRecordColumn(#"Expanded values", "values", {"name", "id", "properties"}, {"values.name", "values.id", "values.properties"}),
    #"Expanded values.properties" = Table.ExpandRecordColumn(#"Expanded values1", "values.properties", {"changeNumber", "region", "regionId", "platform", "systemService", "addressPrefixes", "networkFeatures"}, {"values.properties.changeNumber", "values.properties.region", "values.properties.regionId", "values.properties.platform", "values.properties.systemService", "values.properties.addressPrefixes", "values.properties.networkFeatures"}),
    #"Changed Type" = Table.TransformColumnTypes(#"Expanded values.properties",{{"changeNumber", Int64.Type}, {"cloud", type text}, {"values.name", type text}, {"values.id", type text}, {"values.properties.changeNumber", Int64.Type}, {"values.properties.region", type any}, {"values.properties.regionId", Int64.Type}, {"values.properties.platform", type text}, {"values.properties.systemService", type text}, {"values.properties.addressPrefixes", type any}, {"values.properties.networkFeatures", type any}}),
    #"Expanded values.properties.addressPrefixes" = Table.ExpandListColumn(#"Changed Type", "values.properties.addressPrefixes"),
    #"Extracted Values" = Table.TransformColumns(#"Expanded values.properties.addressPrefixes", {"values.properties.networkFeatures", each Text.Combine(List.Transform(_, Text.From), ","), type text}),
    #"Filtered Rows" = Table.SelectRows(#"Extracted Values", each true)
in
    #"Filtered Rows"
</code></pre>
    <p class="fm-booktitle">Once the infrastructure and hardware are configured and provisioned, the next task is to define gateway roles and <a id="calibre_link-1190" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>permissions.</p>
    <h3 id="calibre_link-341" class="heading1">Defining gateway roles and permissions</h3>
    <p class="fm-booktitle">Similar to Power BI workspace roles<a id="calibre_link-1207" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> described in the previous chapter, different roles are available for the on-premises data gateway and organizations should plan for which users and/or groups should be assigned to which roles. </p>
    <p class="fm-booktitle">There are three security roles for gateways, Admin, Connection creator, and Connection creator with sharing. The Admin role has full control of the gateway including the ability to fully manage data sources (connections), users and permissions. In contrast, the Connection creator role is limited to only creating connections (data sources) on the gateway. The Connection creator with sharing provides the additional ability to share the gateway with users. </p>
    <p class="fm-booktitle">There are also three connection security roles, Owner, User and User with sharing. The Owner role can fully manage the connection including the ability to delete the connection, update data source credentials and manage permissions. In contrast, the User role can simply use the connection and the User with sharing adds the ability to share the connection with others.</p>
    <p class="fm-booktitle">For example, a small team of IT admins may be assigned the gateway Admin role and be responsible for keeping the gateway updated to the latest version and granting required access to other users. Additionally, certain dataset authors or BI teams could be identified as valid users of the gateway or for only certain data sources configured on the gateway. </p>
    <p class="fm-booktitle">Some BI teams might prefer to use the User with sharing role, assigning this to a small group within the business. As these<a id="calibre_link-1208" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> users are closer to the needs and requirements for the business these users would then have the necessary knowledge to know who else within the business requires access to the data source connection.</p>
    <p class="fm-booktitle">As with the Power BI workspace roles described in the previous chapter, groups should be used in role assignments and then users assigned to those groups. Assigning users and/or groups to gateways, as well as managing data sources, is done within the Power Platform Admin Center (<a href="https://admin.powerplatform.microsoft.com/" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://admin.powerplatform.microsoft.com/</span></a>) using the Data page.</p>
    <p class="fm-booktitle">With roles and permissions assigned, the next task is to plan for the creation and management of recovery keys.</p>
    <h3 id="calibre_link-342" class="heading1">Planning for recovery keys</h3>
    <p class="fm-booktitle">Recovery keys (essentially a password) are a<a id="calibre_link-1203" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> critical security component of Power BI gateways. Recovery keys are used to generate encryption keys used to encrypt data source credentials. Recovery keys are also required to move gateways from one server to another and when adding gateway instances to gateway clusters. These subjects are explained in greater detail later in this chapter.</p>
    <p class="fm-booktitle">A recovery key is entered when installing a new gateway instance. This key is not shown when entered and must be confirmed. This original key must be known in order to set a different key. Given the importance of recovery keys, it is imperative that enterprise BI teams properly plan for their creation and management.</p>
    <p class="fm-booktitle">Once entered and the gateway installation is complete, loss of the recovery key may mean that the entire gateway or even an entire gateway cluster must be removed and rebuilt. Therefore, enterprise BI teams should agree upon and pre-generate an alphanumeric key consisting of at least 8 characters/numbers. This key should then be stored in password vault software or otherwise treated as a highly valuable, highly confidential enterprise password.</p>
    <p class="fm-booktitle">Because the requirement to enter a recovery key during gateway installation often comes as a surprise to those unfamiliar with Power BI and because recovery keys are often not needed for<a id="calibre_link-2095" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> extended periods of time, more than one gateway has had to be rebuilt because of the loss of the recovery key. With the importance of recovery keys understood, the next decision to make is deciding between installing the gateway in standard or personal mode.</p>
    <h2 id="calibre_link-343" class="calibre9">Standard versus personal mode</h2>
    <p class="fm-booktitle">There are two separate downloads for the<a id="calibre_link-1214" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> On-premises data gateway, one for <strong class="screentext">standard mode</strong> and one for <strong class="screentext">personal mode</strong>. The recommended gateway mode, standard mode, provides all the functionality of the personal mode plus many more features and management capabilities. </p>
    <p class="fm-booktitle">The additional features include support for DirectQuery and Live connection datasets, several other Azure services, such as Power Automate, and the management capabilities described in the <em class="italic">Managing gateway clusters</em> section later in this chapter.</p>
    <p class="fm-booktitle">Who can install gateways can <a id="calibre_link-1772" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>be managed within the <strong class="screentext">Power Platform admin center</strong>. The Data page of the Power Platform Admin Center provides an option to Manage <a id="calibre_link-1476" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>gateway installers where administrators can specify which users are authorized to install standard mode gateways. Personal gateways can only be disabled or managed by PowerShell scripts that utilize the <code class="inlinecode">DataGateway </code>module and specifically the <code class="inlinecode">Set-DataGatewayTenantPolicy</code>.</p>
    <p class="fm-booktitle">A single personal mode gateway can be installed per Power BI user account and can only be used for the on-demand or scheduled refresh of the import mode Power BI datasets. Most importantly, the personal mode gateway is completely tied to the individual user and cannot be shared. </p>
    <p class="fm-booktitle">For example, if the gateway is installed in personal mode on a user’s laptop, that laptop will need to be on and connected to the internet to support any scheduled data refreshes. Additionally, unlike the administrators of a standard mode gateway, a personal mode user cannot authorize other users to leverage the personal mode gateway and its configured data sources.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 11.2</em>, both a personal mode <a id="calibre_link-2096" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>gateway and a standard gateway are available to refresh a dataset.</p>
    <figure class="mediaobject"><img src="images/000140.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.2: Dataset gateway connection</p>
    <p class="fm-booktitle">In <em class="italic">Figure 11.2</em> the various data source connections within the dataset are mapped to configured data sources available in the <a id="calibre_link-1215" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>standard gateway cluster. If the user was not authorized to use the On-premises data gateway (<strong class="screentext">Mastering Power BI</strong>), the personal mode gateway could be used to complete the refresh assuming the user has the necessary privileges to the on-premises data sources of the import mode dataset. </p>
    <p class="fm-booktitle">The personal mode gateway is not intended for large datasets or datasets supporting reports and dashboards that many users depend on. The personal mode gateways should only be considered for enabling individual business users to work on personal or proof-of-concept projects. </p>
    <p class="fm-booktitle">For example, the business user<a id="calibre_link-1773" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> may have several Excel workbooks and other frequently changing local files that are not configured as data sources on a standard gateway. If the user has been assigned a Power BI Pro license, the personal mode gateway allows the user to keep Power BI reports and dashboards based on these sources updated for review by colleagues. </p>
    <p class="fm-booktitle">In the event that the user’s content<a id="calibre_link-2097" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> requires reliable, longer-term support, the BI/IT organization can add the data sources to a standard gateway thus removing the dependency on the user’s machine. All the remaining sections of this chapter are exclusively focused on the standard data gateway. </p>
    <p class="fm-booktitle">With reliability and supportability in mind, we now look at some important concepts related to gateways.</p>
    <h1 id="calibre_link-344" class="heading">Gateway concepts</h1>
    <p class="fm-booktitle">There are a number of different <a id="calibre_link-1180" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>concepts and designs enterprise BI teams should be familiar with when it comes to the On-premises data gateway. These include the concept of gateway clusters, different gateway architecture designs, and security. Each of these subjects is explored in detail in the following sections.</p>
    <h2 id="calibre_link-345" class="calibre9">Gateway clusters</h2>
    <p class="fm-booktitle">Gateways natively support clustering. Clustering is when independent software systems, called instances or nodes, work together as a unified<a id="calibre_link-1175" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> resource to provide greater scalability and reliability. Each Power BI dataset is associated with a single gateway cluster, which is composed of one or more standard gateway instances. </p>
    <p class="fm-booktitle">For example, if a Power BI dataset imports data from both a SQL Server database and an Excel file, the same gateway cluster is responsible for the import from both sources. </p>
    <p class="fm-booktitle">Likewise, if hundreds of business users interact with reports based on the same DirectQuery dataset or a Live connection to an on-premises SSAS instance, these user interactions generate query requests to the same gateway cluster. </p>
    <p class="fm-booktitle">Gateway clusters representing multiple standard gateway instances (for example, primary and secondary) provide both high availability and load balancing. Each instance must be installed on a separate machine as per the <em class="italic">Defining the gateway infrastructure and hardware requirements</em> section. </p>
    <p class="fm-booktitle">From an availability standpoint, if an individual gateway instance within a cluster is not running, the data refresh and user query requests from the Power BI service are routed to the other gateway instance(s) <a id="calibre_link-1176" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>within the cluster. In terms of query performance and scalability, the Power BI service can automatically distribute (load balance) the query requests across the multiple gateway instances within the cluster.</p>
    <p class="fm-booktitle">Data source configurations for the primary gateway of the cluster, which is the first gateway installed for the cluster, are leveraged by any additional gateways added to the cluster. In <em class="italic">Figure 11.3</em> from the gateway installer application, a new gateway is added to an existing gateway cluster:</p>
    <figure class="mediaobject"><img src="images/000151.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.3: Adding a gateway to a gateway cluster</p>
    <p class="fm-booktitle">In this example, the new gateway (<strong class="screentext">Mastering Power BI 2</strong>) is added to the <strong class="screentext">Mastering Power BI</strong> gateway cluster as per the <strong class="screentext">Add to an existing gateway cluster</strong> checkbox and <strong class="screentext">Available gateway clusters</strong> selection. Note that the <strong class="screentext">Recovery key</strong> for the primary gateway instance, which was<a id="calibre_link-1177" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> created when the first gateway instance of the cluster was installed, is required to add a gateway to a cluster. </p>
    <p class="fm-booktitle">Be aware that the gateway management portal in the Power BI service only displays the gateway clusters, not the individual gateways within each cluster. Both the gateway clusters and the individual gateways within each cluster can be accessed and managed via PowerShell scripts as per the <em class="italic">Managing gateway clusters</em> section.</p>
    <p class="fm-booktitle">Before adding a gateway to a cluster, ensure that the new gateway instance is able to connect to the same data sources configured for the cluster. As described in the <em class="italic">Top gateway planning tasks</em> section, the additional gateways added to gateway clusters should also be installed in locations that minimize the distance between the gateway server, the Power BI service<a id="calibre_link-2098" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> tenant, and the data source(s).</p>
    <p class="fm-booktitle">Let’s now turn our attention to some different architectures for gateways within an enterprise configuration.</p>
    <h2 id="calibre_link-346" class="calibre9">Gateway architectures</h2>
    <p class="fm-booktitle">For large-scale deployments of Power BI in <a id="calibre_link-1171" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>which multiple types of datasets and workloads are supported (such as import, DirectQuery, and Live connection queries), BI teams can consider multiple gateway clusters. In this approach, each gateway cluster is tailored to meet the specific resource needs (RAM and CPU) of the different workloads, such as large nightly refreshes or high volumes of concurrent queries in the early mornings.</p>
    <p class="fm-booktitle">For example, one gateway cluster could be composed of two gateway instances with a relatively high amount of available RAM on each gateway server. This cluster would have resources available during the most intensive scheduled refresh operations (for example, 4 A.M. to 6 A.M.) and would be exclusively used by import mode Power BI datasets and any Azure Analysis Services models that also regularly import data from on-premises sources. </p>
    <p class="fm-booktitle">A separate gateway cluster would be created based on two gateway instances with a relatively high number of CPU cores on each gateway server. This gateway cluster would be used exclusively by DirectQuery Power BI datasets and any reports based on Live connection to an on-premises SQL Server Analysis Services instance. </p>
    <p class="fm-booktitle">A third gateway cluster, in addition to an import and a DirectQuery/Live connection cluster, could be dedicated to business-led BI projects. For example, as described in the <em class="italic">Standard versus personal mode</em> section earlier in this chapter, certain data sources maintained by business teams (for example, Excel workbooks) may require the high availability and management benefits of the On-premises data gateway. </p>
    <p class="fm-booktitle">Generally, this self-service cluster would be oriented toward scheduled refresh operations, but organizations may also want to empower business users to create DirectQuery datasets or <a id="calibre_link-1172" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>reports based on Live connections to SSAS instances (on-premises).</p>
    <p class="fm-booktitle">In <em class="italic">Figure 11.4</em> from the <strong class="screentext">Manage gateways</strong> portal in the Power BI service, two gateway clusters have been configured:</p>
    <figure class="mediaobject"><img src="images/000161.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.4: Manage gateways in the Power BI service</p>
    <p class="fm-booktitle">If gateway clusters are created for specific workloads (for example, import versus DirectQuery), it can be helpful to note this both in the <strong class="screentext">Gateway Cluster Name</strong> and in its <strong class="screentext">Description</strong>. It’s not recommended to allow a single point of failure but if only one gateway server is used in a cluster then the name of this server can be included in the cluster name and description.</p>
    <p class="fm-booktitle"><em class="italic">Figure 11.5</em> depicts a gateway cluster that supports scheduled refreshes of datasets:</p>
    <figure class="mediaobject"><img src="images/000174.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.5: Scheduled data refresh via gateway cluster</p>
    <p class="fm-booktitle">With the data source(s) configured in the <strong class="screentext">Manage Gateways</strong> portal in the Power BI service, a scheduled data refresh for an import mode dataset can be configured to use the <strong class="screentext">Gateway Cluster</strong>. The <strong class="screentext">Gateway Cluster</strong> receives the query request at the scheduled time and is responsible for connecting to the data source(s) and executing the queries that load/refresh the tables of the Power BI dataset. </p>
    <p class="fm-booktitle">Once the dataset in the Power <a id="calibre_link-1173" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>BI service is refreshed, dashboard tiles based on the dataset are also refreshed. Given that report queries are local to the refreshed dataset within the same Power BI service tenant, and given the performance optimizations of the engine running within import mode Power BI datasets (that is, columnar compression, in-memory), query performance is usually very good with this deployment.</p>
    <p class="fm-booktitle"><em class="italic">Figure 11.6</em> depicts two gateway clusters being used to support both the scheduled refresh of an import mode dataset and a Live connection to an SSAS tabular instance:</p>
    <figure class="mediaobject"><img src="images/000185.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.6: Multiple gateway clusters</p>
    <p class="fm-booktitle"><strong class="screentext">Gateway Cluster A</strong> in the preceding diagram functions just like <em class="italic">Figure 11.5</em> in supporting scheduled refreshes of import mode datasets. <strong class="screentext">Gateway Cluster B</strong> has been created to exclusively support queries requested via Live connections to an on-premises SSAS database&mdash;an SSAS tabular model in this scenario. </p>
    <p class="fm-booktitle">Given the high volume of query<a id="calibre_link-1174" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> requests generated by users interacting with Power BI reports based on the SSAS model, the servers used in <strong class="screentext">Gateway Cluster B</strong> can be provisioned with additional CPU cores and actively monitored via performance counters for changes in utilization.</p>
    <p class="fm-booktitle">In addition to the interactive query requests from Live connection reports, owners of datasets can configure a scheduled refresh for the cache supporting dashboard tiles based on Live connection reports. Guidance on configuring this feature is included in the <em class="italic">Dashboard cache refresh</em> section at the end of this chapter. </p>
    <p class="fm-booktitle">The description of <strong class="screentext">Gateway Cluster B</strong> is also generally applicable to DirectQuery datasets based on supported sources, such as SQL Server, Oracle, and Teradata. Just like Live connections to SSAS, DirectQuery reports built against these datasets also generate high volumes of queries that must go through the gateway cluster and be returned to the Power BI service tenant.</p>
    <p class="fm-booktitle">Given the additional latency created by the requests for queries and the transfer of query results back to the Power BI service, it’s especially important to develop and provision efficient data sources for DirectQuery and Live connection reports. Two examples of this include using the clustered columnstore index for SQL Server and optimizing the DAX expressions used for measures of an SSAS model.</p>
    <p class="fm-booktitle">Additionally, organizations can<a id="calibre_link-2099" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> consider Azure ExpressRoute to create a fast, private connection between on-premises infrastructure and Azure. The following URL provides documentation on this service: <a href="http://bit.ly/2tCCwEv" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2tCCwEv</span></a>.</p>
    <p class="fm-booktitle">With alternative gateway architectures understood, let’s next explore how gateways implement security.</p>
    <h2 id="calibre_link-347" class="calibre9">Gateway security</h2>
    <p class="fm-booktitle">Given that potentially sensitive data can flow <a id="calibre_link-1209" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>back and forth between the cloud and on-premises environments, Microsoft has designed the On-premises data gateway to be extremely secure. </p>
    <p class="fm-booktitle">Administrators of the On-premises data gateway are responsible for configuring the data sources that can be used with each gateway cluster. As shown in <em class="italic">Figure 11.7</em> from the <strong class="screentext">Manage gateways</strong> portal in the Power BI service, credentials entered for data sources are encrypted:</p>
    <figure class="mediaobject"><img src="images/000194.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.7: Encrypted data source credentials</p>
    <p class="fm-booktitle">As mentioned, the recovery key entered during gateway installation is used to encrypt these credentials. The data<a id="calibre_link-1210" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> source credentials are only decrypted once the query request reaches the on-premises gateway cluster within the corporate network. </p>
    <p class="fm-booktitle">The gateway decrypts the credentials needed for query requests and, once the query has executed, it encrypts the results of these query requests prior to pushing this data to the Power BI service. The Power BI service never knows the on-premises credential values.</p>
    <p class="fm-booktitle">Technically, the following four-step process occurs to facilitate communication and data transfer between the Power BI service and the on-premises sources:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">The Power BI service initiates a scheduled refresh or a user interacts with a DirectQuery or a Live connection report.</li>
      <li class="calibre13">In either event, a query request is created and analyzed by the data movement service in Power BI.</li>
      <li class="calibre13">The data movement service determines the appropriate Azure Service Bus communication channel for the given query.</li>
      <li class="calibre13">A distinct service bus instance is configured per gateway. </li>
    </ol>
    <p class="fm-booktitle">Obviously, all of this complexity is hidden from the end users and even administrators and all network traffic is encrypted. For more information regarding the specifics of security for the gateway and Power BI in general, see the Power BI security whitepaper found here: <a href="https://bit.ly/3tmJJJ3" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3tmJJJ3</span></a>.</p>
    <p class="fm-booktitle">With the important concepts <a id="calibre_link-1211" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of clustering, architectures, and security understood, we next look at installing and configuring gateways.</p>
    <h1 id="calibre_link-348" class="heading">Gateway installation and configuration</h1>
    <p class="fm-booktitle">Once the gateway scenario and <a id="calibre_link-1191" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>architecture are planned as per the previous sections, BI or IT administrators can download and install the gateway (or multiple gateways) on the chosen server(s). The gateway installation file to be <a id="calibre_link-1181" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>downloaded is small and the installation process is quick and straightforward. </p>
    <p class="fm-booktitle">The gateway installer application is obtained via the <strong class="screentext">Download</strong> (down arrow) dropdown in the Power BI service, as shown in <em class="italic">Figure 11.8</em>.</p>
    <figure class="mediaobject"><img src="images/000204.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.8: Download in Power BI service</p>
    <p class="fm-booktitle">The <strong class="screentext">Data Gateway</strong> item from the download menu shown in <em class="italic">Figure 11.8</em> currently links to a Power BI Gateway page with two large buttons near the top for downloading either the standard or personal mode <a id="calibre_link-2100" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>gateway installers. </p>
    <p class="fm-booktitle">Selecting either button downloads the installer file (<code class="inlinecode">GatewayInstall.exe</code> or on-premises data gateway <code class="inlinecode">(personal mode).exe</code>) locally. The installation and configuration process via the installer application is very straightforward. </p>
    <p class="fm-booktitle">Step-by-step instructions have been documented here (see <em class="italic">Install the gateway</em> section): <a href="https://bit.ly/3C71AYo" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3C71AYo</span></a>. As noted in the <em class="italic">Planning for recovery keys</em> section, the most critical step in this process is entering and securely storing the recovery key used during installation.</p>
    <p class="fm-booktitle">Once the installation and <a id="calibre_link-1192" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>configuration are complete, an On-premises data gateway application is available on the server to help manage the gateway, as shown in <em class="italic">Figure 11.9</em>.</p>
    <figure class="mediaobject"><img src="images/000213.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.9: On-premises data gateway application</p>
    <p class="fm-booktitle">Details on the settings available via this application are included in the <em class="italic">Troubleshooting and monitoring gateways</em> section later in this chapter. When first getting started with the gateway, you can launch the application after configuration and sign in with a Power BI service account to check the status of the gateway and to get familiar with the tool.</p>
    <p class="fm-booktitle">The same installation software can be downloaded and run to update an existing On-premises data gateway to the<a id="calibre_link-2101" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> latest version. The update process is very quick to complete and the On-premises data gateway application reflects the new version number on the <strong class="screentext">Status</strong> page, as shown in <em class="italic">Figure 11.10</em>.</p>
    <figure class="mediaobject"><img src="images/000223.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.10: On-premises data gateway Status</p>
    <p class="fm-booktitle">It’s strongly recommended to regularly update the On-premises data gateway to the latest version. An out-of-date gateway is flagged for updating on the <strong class="screentext">Status</strong> page of the On-premises data gateway and may result in data refresh or connectivity issues.</p>
    <p class="fm-booktitle">Additionally, administrators should be aware of the following two XML configuration files for the gateway:</p>
    <pre class="programlisting"><code class="hljs-code">C:\Program Files\On-premises data gateway\EnterpriseGatewayConfigurator.exe.config

C:\Program Files\On-premises data gateway\Microsoft.PowerBI.EnterpriseGateway.exe.config
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">EnterpriseGatewayConfigurator.exe.config</code> file relates to the installation screens that configure the gateway. The <code class="inlinecode">Microsoft.PowerBI.EnterpriseGateway.exe.config</code> file is for the actual Windows <a id="calibre_link-1193" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>service that handles the query requests from the Power BI service. This Windows service runs under a default service account, as explained in the next section.</p>
    <h2 id="calibre_link-349" class="calibre9">The gateway service account</h2>
    <p class="fm-booktitle">By default, the gateway runs under the <strong class="screentext">NT SERVICE\PBIEgwService</strong> Windows service account. However, as shown in <em class="italic">Figure 11.11</em>, this <a id="calibre_link-1212" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>account can be changed via the <strong class="screentext">Service Settings</strong> tab of the On-premises data gateway desktop application.</p>
    <figure class="mediaobject"><img src="images/000233.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.11: On-premises data gateway Service Settings</p>
    <p class="fm-booktitle">In <em class="italic">Figure 11.11</em>, a user has opened the gateway application from the server on which a gateway instance has been installed. Additionally, in order to change the service account, the user has signed in to Power BI from the gateway application with the email address used to log in to the Power BI service. </p>
    <p class="fm-booktitle">If the default account (<strong class="screentext">NT SERVICE\PBIEgwService</strong>) is able to access the internet and thus Azure Service Bus, ensure that the account can also authenticate to the required on-premises data sources, such as the production SQL Server instance. In some environments, the default account cannot access the internet as it is not an authenticated domain user. </p>
    <p class="fm-booktitle">In this scenario, the service account can be revised to a domain user account within the Active Directory domain. To avoid the need to routinely reset the password for the Active Directory account, it’s recommended that a managed service account is created in Active Directory and used by the gateway service. </p>
    <p class="fm-booktitle">We next take a more <a id="calibre_link-1213" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>detailed look at the network communication used by the gateway.</p>
    <h2 id="calibre_link-350" class="calibre9">TCP versus HTTPS mode </h2>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 11.12</em>, the <strong class="screentext">Network</strong> tab of the On-premises data gateway desktop application displays the network settings for a<a id="calibre_link-1217" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> gateway. By default, the gateway uses <strong class="screentext">HTTPS</strong> network communication. However, as shown in <em class="italic">Figure 11.12</em>, the gateway can be forced to exclusively use direct <strong class="screentext">Transmission Control Protocol</strong> (<strong class="screentext">TCP</strong>) instead. </p>
    <figure class="mediaobject"><img src="images/000243.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.12: On-premises data gateway application Network settings</p>
    <p class="fm-booktitle">A restart of the gateway is required to apply a change in network communication mode and thus this modification should only be implemented when minimal or no query requests are being processed.</p>
    <p class="fm-booktitle">When originally released, the gateway defaulted to direct TCP with HTTPS provided as an option. HTTPS is now the default as this requires fewer network ports to be opened in firewalls and overall less <a id="calibre_link-1218" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>configuration.</p>
    <p class="fm-booktitle">We next look at the subject of custom connectors.</p>
    <h2 id="calibre_link-351" class="calibre9">Connectors</h2>
    <p class="fm-booktitle">The gateway supports custom <a id="calibre_link-1182" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>connectors not included with Power BI Desktop. Custom connectors are optional and may be developed by third parties or internally by organizations. </p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 11.13</em>, the <strong class="screentext">Connectors</strong> tab is used to configure <strong class="screentext">Custom data connectors</strong> in the On-premises data gateway desktop application.</p>
    <figure class="mediaobject"><img src="images/000252.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.13: On-premises data gateway application Connectors settings</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 11.13</em>, the gateway provides a suggested folder path:</p>
    <p class="fm-booktitle"><code class="inlinecode">C:\WINDOWS\ServiceProfiles\PBIEgwService\Documents\Power BI Desktop\Custom Connectors</code></p>
    <p class="fm-booktitle">This folder path may or may not exist and may not be the desired folder for custom connectors. Regardless of the folder path chosen, it is recommended that all gateways have a consistent path for custom connectors and that gateway administrators verify that the folder exists and the service account has the appropriate permissions on each gateway. </p>
    <p class="fm-booktitle">More information about creating custom connectors for Power BI can be found here: <a href="https://github.com/Microsoft/DataConnectors" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://github.com/Microsoft/DataConnectors</span></a>. </p>
    <p class="fm-booktitle">Let us now turn our <a id="calibre_link-1183" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>attention to the subject of recovery key configuration.</p>
    <h2 id="calibre_link-352" class="calibre9">Recovery Keys</h2>
    <p class="fm-booktitle">The <strong class="screentext">Recovery Keys</strong> tab in the On-premises <a id="calibre_link-1204" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>data gateway desktop application provides a single option to <strong class="screentext">Set new recovery key</strong>. Clicking this link opens up the <strong class="screentext">Add new recovery key</strong> dialog shown in <em class="italic">Figure 11.14</em>.</p>
    <figure class="mediaobject"><img src="images/000261.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.14: On-premises data gateway application Connectors settings</p>
    <p class="fm-booktitle">As indicated by the information displayed in the text box at the top of the page, changing the recovery key should <a id="calibre_link-1205" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>only be done when the gateway is not being used as the change requires that the gateway restart and that data credentials need to be reentered. </p>
    <p class="fm-booktitle">Changing recovery keys should be a rare event and only entertained if the security of the recovery key has been compromised, such as someone that had access to the recovery key leaving the organization.</p>
    <p class="fm-booktitle">Also notice in <em class="italic">Figure 11.14</em> that it is possible to configure the <strong class="screentext">Azure Relays</strong> used by the gateway by clicking the <strong class="screentext">Provide relay details</strong> (<strong class="screentext">optional</strong>) link. Azure Relays enable the ability to securely expose services running on-premises to Azure without opening firewall ports or otherwise changing network infrastructure. More information about this option can be found here: <a href="https://bit.ly/35FUeis" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/35FUeis</span></a>.</p>
    <p class="fm-booktitle">This completes our <a id="calibre_link-2102" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>exploration of gateway installation and configuration. We next turn our attention to managing gateway clusters.</p>
    <h1 id="calibre_link-353" class="heading">Managing gateway clusters</h1>
    <p class="fm-booktitle">Once a gateway is installed, the Power BI account used to register the gateway during installation can access the <strong class="screentext">Manage gateways</strong> portal in the Power BI service to<a id="calibre_link-1178" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> assign administrators for the gateway. </p>
    <p class="fm-booktitle">The <strong class="screentext">Manage gateways</strong> portal is available via the gear icon in the top-right corner of the Power BI service, as shown in <em class="italic">Figure 11.15</em>: </p>
    <figure class="mediaobject"><img src="images/000270.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.15: Manage gateways</p>
    <p class="fm-booktitle">The <strong class="screentext">Manage gateways</strong> portal exposes all gateway clusters where the user is assigned as an administrator. The following sections describe the management of gateways within the Power BI Service. However, it is important to note that certain essential gateway management features have been moved to the Power Platform Admin Center. </p>
    <p class="fm-booktitle">Specifically, the gateway security roles and permissions described in the <em class="italic">Defining gateway roles and permissions</em> section of this chapter are only available in the Power Platform Admin Center. In addition, the Power Platform Admin Center also provides the ability to specify which users are authorized to install standard mode gateways as described in the <em class="italic">Standard versus personal mode</em> section of this chapter. </p>
    <p class="fm-booktitle">Moving forward, it is likely<a id="calibre_link-1179" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> that additional gateway management functionality will be introduced within the Power Platform Admin Center given that on-premises data gateways are used across multiple Power Platform products including Power BI, Power Apps and Power Automate.</p>
    <p class="fm-booktitle">Let’s now explore the primary functionality and tasks of gateway administrators in the following sections.</p>
    <h2 id="calibre_link-354" class="calibre9">Gateway administrators</h2>
    <p class="fm-booktitle">Administrators of gateway clusters have the ability to add or remove data sources, modify the authentication to those<a id="calibre_link-1170" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> sources, and enable or disable users or groups of users from utilizing the cluster. </p>
    <p class="fm-booktitle">Given the importance of these responsibilities, assigning more than one gateway administrator, such as a security group of administrators, is strongly recommended. In the event that the credentials for a data source need to be revised or when a data source needs to reference a different database, only an admin for the gateway is able to implement these changes in the <strong class="screentext">Manage gateways</strong> portal. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 11.16</em> from the <strong class="screentext">Manage gateways</strong> portal in Power BI, a single security group (<strong class="screentext">IT Administration</strong>) is added as the administrator of the <strong class="screentext">Mastering Power BI</strong> cluster.</p>
    <figure class="mediaobject"><img src="images/000279.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.16: Power BI gateway administrators</p>
    <p class="fm-booktitle">The primary job of administrators added to gateway clusters is to manage data sources and users for the gateway as we see in the next section.</p>
    <h2 id="calibre_link-355" class="calibre9">Gateway data sources and users</h2>
    <p class="fm-booktitle">The primary role of gateway administrators is to add data sources as per the gateway cluster and to authorize (or remove) users <a id="calibre_link-1184" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>or groups of users. Both of these duties are performed in the <strong class="screentext">Manage gateways</strong> portal. </p>
    <p class="fm-booktitle">With the gateway cluster selected within the <strong class="screentext">Manage gateways</strong> portal, clicking <strong class="screentext">ADD DATA SOURCE</strong> from the list of gateway clusters creates a blank new data source, as shown in <em class="italic">Figure 11.17</em>.</p>
    <figure class="mediaobject"><img src="images/000288.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.17: Adding a data source to a gateway cluster</p>
    <p class="fm-booktitle">New data sources can also be added via the ellipsis (three dots) to the right of each cluster name in the <strong class="screentext">Manage gateways</strong> portal as shown in <em class="italic">Figure 11.18</em>. This menu is notoriously hard to find as the ellipses only appear if hovered over with the mouse cursor. </p>
    <figure class="mediaobject"><img src="images/000297.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.18: The hidden ellipsis menu for gateway clusters</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 11.18</em>, this menu is the only way in which a gateway cluster can be removed from within the Power BI service.</p>
    <p class="fm-booktitle">Once data sources have been added, the users who publish reports and/or schedule data refreshes via the gateway <a id="calibre_link-1185" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can be added to the data source. This is done via the <strong class="screentext">Users</strong> tab as shown in <em class="italic">Figure 11.19</em>. </p>
    <figure class="mediaobject"><img src="images/000306.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.19: Adding a security group of users to the gateway data source</p>
    <p class="fm-booktitle">In <em class="italic">Figure 11.19</em>, a security group of users is added to the data source of the gateway cluster. The users included in the security group will see the option to use the gateway cluster when scheduling refreshes for datasets.</p>
    <p class="fm-booktitle">As shown, the most critical administration functions are performed manually within the Power BI service. However, a <code class="inlinecode">PowerShell</code> module is also available for the administration of gateway clusters as covered in the next section.</p>
    <h2 id="calibre_link-356" class="calibre9">PowerShell support for gateway clusters</h2>
    <p class="fm-booktitle">A <code class="inlinecode">PowerShell</code> module is available to support the<a id="calibre_link-1201" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> management of gateway clusters. This module is named <strong class="screentext">DataGateway</strong> and requires PowerShell 7.0.0 or higher. This means that the standard Windows PowerShell app is<a id="calibre_link-765" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> unable to successfully use this module. Instead, the cross-platform version of PowerShell referred to as PowerShell Core must be used instead. PowerShell Core can be <a id="calibre_link-1527" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>downloaded from the following link: <a href="https://bit.ly/3IAxhvT" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3IAxhvT</span></a>.</p>
    <p class="fm-booktitle">Once installed, PowerShell can be run as Administrator and the following command can be used to install the <code class="inlinecode">DataGateway</code> module:</p>
    <pre class="programlisting1"><code class="hljs-con">Install-Module -Name DataGateway
</code></pre>
    <p class="fm-booktitle">Once the <code class="inlinecode">DataGateway</code> module is installed, future sessions of PowerShell can import the module via the <code class="inlinecode">Install-Module</code> command:</p>
    <pre class="programlisting1"><code class="hljs-con">Import-Module -Name DataGateway
</code></pre>
    <p class="fm-booktitle">Once the module is installed and/or imported to a session of PowerShell in which the user has administrator privileges, a login command (<code class="inlinecode">Login-DataGatewayServiceAccount</code>) must be executed to enable other gateway management commands.</p>
    <p class="fm-booktitle">Unlike the <strong class="screentext">Manage gateways</strong> portal in the Power BI service, the PowerShell commands provide access to the specific gateway instances configured for each cluster. For example, properties of a specific gateway within an instance can be modified or a gateway instance can be<a id="calibre_link-1202" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> removed from a cluster altogether.</p>
    <p class="fm-booktitle">Once authenticated, the <code class="inlinecode">Get-DataGatewayCluster</code> command is used to retrieve the list of gateway clusters in which the logged-in user is an administrator along with the gateway clusters’ unique IDs. These IDs can then be used to get information about the individual gateway instances for the cluster, including the server names where these instances are installed. The following command exposes the information about gateway instances for a cluster:</p>
    <pre class="programlisting1"><code class="hljs-con">Get-DataGatewayCluster -GatewayClusterId ID | Select -ExpandProperty Permissions
</code></pre>
    <p class="fm-booktitle">In the example given, <code class="inlinecode">ID</code> would be replaced with the actual ID of the gateway cluster, such as <code class="inlinecode">dc8f2c49-5731-4b27-966b-3db5094c2e77</code>. The full list of available gateway cluster PowerShell commands and their parameters can be found here: <a href="https://bit.ly/3Izft48" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3Izft48</span></a>.</p>
    <p class="fm-booktitle">This section has covered the overall management of gateway clusters within the Power BI service and via PowerShell. We next look at troubleshooting and monitoring gateways.</p>
    <h1 id="calibre_link-357" class="heading">Troubleshooting and monitoring gateways</h1>
    <p class="fm-booktitle">For organizations with <a id="calibre_link-1219" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>significant dependencies on the On-premises data gateway, it’s important to plan for administration scenarios, such as migrating or restoring a gateway to a different machine. Administrators should also<a id="calibre_link-1197" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> be familiar with accessing and analyzing the gateway log files and related settings to troubleshoot data refresh issues. Finally, gateway throughput and resource availability can be monitored using Power BI template files provided by Microsoft.</p>
    <p class="fm-booktitle">In this section, we investigate each of these topics in turn. </p>
    <h2 id="calibre_link-358" class="calibre9">Restoring, migrating, and taking over a gateway</h2>
    <p class="fm-booktitle">Sometimes it is necessary to migrate or restore a gateway to a separate server. For example, a gateway may have initially been installed on a server with insufficient resources to support the current <a id="calibre_link-1216" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>workload. In other cases, a hardware failure may have occurred on a gateway’s server and thus it’s necessary to quickly restore connectivity. </p>
    <p class="fm-booktitle">Using the recovery key created when a gateway<a id="calibre_link-1206" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is first installed and configured, the data sources and their associated settings (authentication and credentials) can be restored on a new server. In <em class="italic">Figure 11.20</em>, during gateway installation on a<a id="calibre_link-1196" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> different server, the option is given to <strong class="screentext">Migrate, restore, or takeover an existing gateway</strong> rather than register a new gateway.</p>
    <figure class="mediaobject"><img src="images/000317.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.20: Gateway setup options</p>
    <p class="fm-booktitle">Choosing to <strong class="screentext">Migrate, restore, or takeover an existing gateway</strong> requires the recovery key that is created when a gateway is originally configured. If this key is not available, the only option is to install a new gateway and manually add the data sources and authorized users for that gateway. </p>
    <p class="fm-booktitle">This again speaks to the importance<a id="calibre_link-2103" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of properly securing and managing recover keys as covered in the section <em class="italic">Planning for recovery keys</em> earlier in this chapter. Also, only an administrator of a gateway<a id="calibre_link-2104" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> cluster can use the recovery key to restore a gateway to a <a id="calibre_link-2105" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>different server.</p>
    <p class="fm-booktitle">Next, we take a closer look at the diagnostic and logging capabilities for gateway instances.</p>
    <h2 id="calibre_link-359" class="calibre9">Gateway diagnostics</h2>
    <p class="fm-booktitle">The On-premises data gateway desktop<a id="calibre_link-1186" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> application makes it easy for gateway administrators to analyze gateway request activity. As shown in <em class="italic">Figure 11.21</em>, the <strong class="screentext">Diagnostics</strong> tab allows admins to record additional details in the gateway log files, export these files for analysis, and even test network port connectivity.</p>
    <figure class="mediaobject"><img src="images/000327.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.21: Diagnostics settings</p>
    <p class="fm-booktitle">Applying the additional logging setting requires the gateway to be restarted but provides visibility to the specific queries requested and the duration of their execution. </p>
    <p class="fm-booktitle">In a typical troubleshooting <a id="calibre_link-1187" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>or analysis scenario, a gateway admin would temporarily enable additional logging, execute a data refresh or query from the Power BI service, and then export the gateway log files to analyze this activity. Once the log files have been exported, additional logging should be disabled to avoid reduced query throughput.</p>
    <p class="fm-booktitle">Technically, the additional logging <a id="calibre_link-2106" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>setting modifies the <code class="inlinecode">EmitQueryTraces</code> and <code class="inlinecode">TracingVerbosity</code> properties of the following two XML configuration files, respectively:</p>
    <p class="fm-booktitle"><code class="inlinecode">Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config</code></p>
    <p class="fm-booktitle"><code class="inlinecode">Microsoft.PowerBI.DataMovement.Pipeline.Diagnostics.dll.config</code></p>
    <p class="fm-booktitle">As an alternative to the gateway application setting, both configuration files can be accessed and modified at the installation location of the gateway, such as <code class="inlinecode">C:\Program Files\On-premises data gateway</code>.</p>
    <p class="fm-booktitle">Log files for gateway instances are stored in the <code class="inlinecode">AppData</code> folder for the account running the <strong class="screentext">On-premises data gateway service</strong>. For example, if using the default <strong class="screentext">PBIEgwService</strong> account, the log files are stored in the following location depending on the version of the operating system:</p>
    <p class="fm-booktitle"><code class="inlinecode">C:\Windows\ServiceProfiles\PBIEgwService\AppData\Local\Microsoft\On-premises data gateway</code></p>
    <p class="fm-booktitle"><code class="inlinecode">C:\Users\PBIEgwService\AppData\Local\Microsoft\On-premises data gateway</code></p>
    <p class="fm-booktitle">With the essentials of gateway logs understood, we next explain how to easily explore and gain insights from these logs.</p>
    <h2 id="calibre_link-360" class="calibre9">Gateway monitoring reports</h2>
    <p class="fm-booktitle">A recent addition to gateway logging and diagnostics are special log files that can be used in conjunction with a Power BI template file to easily visualize log performance. Prior to these new gateway log files and<a id="calibre_link-1198" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> template, it was necessary to configure Windows performance monitor counters and create custom monitoring reports from scratch.</p>
    <p class="fm-booktitle">The special log files are stored within a <code class="inlinecode">Report</code> directory of the log file directory identified in the previous section. The Power BI report template can be downloaded here: <a href="https://bit.ly/3nffIJQ" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3nffIJQ</span></a>.</p>
    <p class="fm-booktitle">Opening the template file opens Power BI Desktop and prompts for the <strong class="screentext">Folder Path</strong> to the <code class="inlinecode">Report</code> directory as shown in <em class="italic">Figure 11.22</em>.</p>
    <figure class="mediaobject"><img src="images/000337.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.22: GatewayPerformanceMonitoring Power BI template</p>
    <p class="fm-booktitle">Entering the <strong class="screentext">Folder Path</strong> and clicking the <strong class="screentext">Load</strong> button loads the report data and visuals. Using the generated reports, gateway administrators can easily observe the volume of queries, identify slow queries, and break out queries by source system.</p>
    <p class="fm-booktitle">The combination of gateway <a id="calibre_link-1199" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>diagnostics, logging, and pre-built Power BI reports greatly eases the burden of troubleshooting and monitoring gateway instances. We next explore data refresh in more detail.</p>
    <h1 id="calibre_link-361" class="heading">Data refresh</h1>
    <p class="fm-booktitle">The configuration of gateways and their role <a id="calibre_link-791" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>during data refresh varies depending upon the mode of the dataset, such as import, DirectQuery, or Live. In this section, we explore the gateway’s role, additional configuration steps, and technical nuances of each of these modes.</p>
    <h2 id="calibre_link-362" class="calibre9">Scheduled data refresh</h2>
    <p class="fm-booktitle">Scheduled data refreshes allow <a id="calibre_link-1659" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI datasets to be updated with the latest data on a preset schedule. The scheduled refresh for an import or composite mode dataset is configured on the <strong class="screentext">Settings</strong> page for each dataset in the Power BI service. </p>
    <p class="fm-booktitle">The <strong class="screentext">Settings</strong> option is found by clicking the three vertical dots displayed next to datasets listed in the Power BI service, either in the left navigation pane or the <strong class="screentext">Datasets + dataflows</strong> tab of a workspace. Once on the <strong class="screentext">Settings</strong> page, the <strong class="screentext">Schedule refresh</strong> section can be expanded as shown in <em class="italic">Figure 11.23</em>.</p>
    <figure class="mediaobject"><img src="images/000347.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.23: Scheduled data refresh</p>
    <p class="fm-booktitle">In <em class="italic">Figure 11.23</em>, a <strong class="screentext">Daily</strong> refresh at 5:30 A.M. <strong class="screentext">Eastern Time</strong> is set. </p>
    <p class="fm-booktitle">Import mode datasets hosted in a shared capacity (non-premium) are currently limited to eight scheduled refreshes per day. Import datasets hosted in Power BI Premium capacity, however, can be refreshed up to 48 times per day. Each scheduled refresh for both Power BI Premium and the<a id="calibre_link-1660" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> shared capacity dataset is separated by a minimum of 30 minutes. </p>
    <p class="fm-booktitle">Non-premium refreshes must complete in 2 hours while refreshes for Premium capacities must complete in 5 hours. In addition, any dataset whose dashboards and reports have not been viewed in 2 months automatically has the scheduled refresh suspended.</p>
    <p class="fm-booktitle">In addition to the scheduled refreshes configured in the Power BI service interface, Power Automate can also be used to initiate refreshes. Finally, the <strong class="screentext">Settings</strong> page for each dataset contains a <strong class="screentext">Refresh history</strong> link that can be used to help troubleshoot refresh issues.</p>
    <p class="fm-booktitle">As mentioned, scheduled refreshes are for import mode datasets and composite mode datasets only since DirectQuery and<a id="calibre_link-1661" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Live datasets do not contain a local data model. Next, we consider the gateway’s role and configuration for DirectQuery and Live datasets.</p>
    <h2 id="calibre_link-363" class="calibre9">DirectQuery datasets</h2>
    <p class="fm-booktitle">When publishing DirectQuery datasets, it’s essential that the data source settings (for example, server name, database name) configured for<a id="calibre_link-912" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the gateway data source exactly match the entries used for the Power BI Desktop file. The Power BI service automatically matches these settings to available data sources in gateway clusters.</p>
    <p class="fm-booktitle">Many organizations have made significant investments in scalable on-premises data sources and have implemented user security rules/conditions in these sources. For these organizations, it’s often preferable to use DirectQuery data connections that leverage both the resources of the source and the custom security rules. </p>
    <p class="fm-booktitle">To address this scenario, the On-premises data gateway supports a single sign-on feature that passes the identity of the Power BI user to the data source via <strong class="screentext">Kerberos constrained delegation</strong> as shown in <em class="italic">Figure 11.26</em>.</p>
    <figure class="mediaobject"><img src="images/000356.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.24: Single sign-on for DirectQuery</p>
    <p class="fm-booktitle"><em class="italic">Figure 11.23</em> shows a portion of the dialog when creating a new data source in the Power BI service via the <strong class="screentext">Manage gateways</strong> portal. </p>
    <p class="fm-booktitle">By default, the <strong class="screentext">single sign-on</strong> (<strong class="screentext">SSO</strong>) feature is not enabled, and thus all DirectQuery queries (from any user) execute via the credentials specified in the source. If enabled, the <strong class="screentext">user principal name</strong> (<strong class="screentext">UPN</strong>) of the user viewing content in the Power BI service is mapped to a local Active <a id="calibre_link-913" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Directory identity by the gateway. The gateway service then impersonates this local user when querying the data source. </p>
    <p class="fm-booktitle">Kerberos constrained delegation must be configured for the gateway and data source to properly use the SSO for DirectQuery feature. This involves changing the service account of the gateway to a domain account, as discussed in the <em class="italic">Gateway installation and configuration</em> section earlier in this chapter. </p>
    <p class="fm-booktitle">Additionally, a <strong class="screentext">Service Principal Name</strong> (<strong class="screentext">SPN</strong>) may be <a id="calibre_link-1682" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>needed for the domain account used by the gateway service and delegation settings must be configured for this account as well. SPNs and detailed instructions on configuring Kerberos constrained delegation can be found here: <a href="https://bit.ly/3Mqas0i" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3Mqas0i</span></a>.</p>
    <h2 id="calibre_link-364" class="calibre9">Live connections to Analysis Services models</h2>
    <p class="fm-booktitle">For on-premises <strong class="screentext">SQL Server Analysis Services</strong> (<strong class="screentext">SSAS</strong>) models that Power BI users access via Live connections, an SSAS data source must be added in the <strong class="screentext">Manage gateways</strong> portal. Critically, the credentials<a id="calibre_link-1225" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> entered for this data source in the <strong class="screentext">Manage gateways</strong> portal must match an account that has server administrator permissions for the SSAS instance. </p>
    <p class="fm-booktitle"><strong class="screentext">SQL Server Management Studio</strong> (<strong class="screentext">SSMS</strong>) can be used to determine the server administrators for both SSAS and Azure Analysis <a id="calibre_link-1744" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Services by right-clicking the<a id="calibre_link-1078" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> instance name, choosing <strong class="screentext">Properties</strong>, and then the <strong class="screentext">Security</strong> tab. Identification of the Power BI user by SSAS only works if a server administrator account is specified and used when opening connections from the gateway.</p>
    <p class="fm-booktitle">User authentication to SSAS is based on the <strong class="screentext">EffectiveUserName</strong> property of SSAS. Specifically, the user principal name (for example, <code class="inlinecode">user@company.onmicrosoft.com</code>) of the Power BI user is passed into this property and this email address must match a UPN within the local Active Directory. This allows the SSAS model to apply any row-level security roles built into the model for the given Power BI user. </p>
    <h2 id="calibre_link-365" class="calibre9">Dashboard cache refresh</h2>
    <p class="fm-booktitle">Dashboard tiles based on import/composite mode datasets are refreshed when the dataset itself is refreshed in the Power BI <a id="calibre_link-716" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>service. For dashboard tiles based on DirectQuery or Live connection datasets, however, the Power BI service maintains a scheduled cache refresh process for updating dashboard tiles. The purpose of this cache is to ensure dashboards are loaded extremely quickly since, as described in <em class="italic">Chapter 9</em>, <em class="italic">Designing Dashboards</em>, many users, such as executives, exclusively rely on dashboards.</p>
    <p class="fm-booktitle">For DirectQuery and Live datasets, the <strong class="screentext">Scheduled refresh</strong> section of a dataset’s <strong class="screentext">Settings</strong> page, as described in the <em class="italic">Scheduled data refresh</em> section, controls the dashboard cache refresh instead of how frequently data is imported and refreshed. By default, the dashboard tile cache is refreshed once every hour but as shown in <em class="italic">Figure 11.24</em>, owners of these datasets can configure this refresh process to occur as frequently as every 15 minutes or as infrequently as once per week:</p>
    <figure class="mediaobject"><img src="images/000366.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 11.24: Scheduled cache refresh</p>
    <p class="fm-booktitle">Switching <strong class="screentext">Refresh frequency</strong> to 15 minutes causes the queries associated with each dashboard tile dependent on the DirectQuery dataset to be submitted at 15-minute intervals. Users can also manually refresh dashboard tiles via the <strong class="screentext">Refresh dashboard tiles</strong> menu option. This option, exposed<a id="calibre_link-2107" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> via the ellipsis in the top-right corner of dashboards, also sends queries to the DirectQuery or Live connection data source like the scheduled cache refresh.</p>
    <p class="fm-booktitle">Power BI reports containing either a Live connection or a DirectQuery connection to the data source are represented as distinct datasets in the Power BI service. Power BI reports created based on these published datasets utilize the scheduled dashboard cache refresh configured for the given source dataset. </p>
    <p class="fm-booktitle">The optimal cache refresh frequency depends on the business requirements for data freshness, the frequency with which the source database is updated, and the available resources of the source system. </p>
    <p class="fm-booktitle">For example, if the top priority of the source system is <strong class="screentext">OnLine Transaction Processing</strong> (<strong class="screentext">OLTP</strong>) transactions and the dashboard queries are resource-intensive, it may be preferable to limit the refresh frequency to once a day. However, if the very latest data updates are of top value to the <a id="calibre_link-717" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>business users and ample resources are available to the source system, a 15-minute cache refresh schedule may be appropriate.</p>
    <h1 id="calibre_link-366" class="heading">Summary</h1>
    <p class="fm-booktitle">This chapter reviewed the primary planning and management scenarios for the On-premises data gateway. This included alternative-solution architectures, methods for distributing workloads across multiple gateways, and ensuring high availability via gateway clusters. Additionally, this chapter described the process of administering a gateway, including the configuration of data sources and the authorization of users or groups to utilize the gateway per source. Finally, the primary tools and processes for troubleshooting and monitoring the gateway were reviewed.</p>
    <p class="fm-booktitle">While this chapter focused on using the Power BI service with on-premises data and traditional Power BI datasets and reports, the following chapter highlights paginated reports and the option to deploy Power BI exclusively on-premises via Power BI Report Server. This includes the publication, refresh, and management of Power BI reports on-premises and within the Power BI service as well as the primary differences between Power BI Report Server and the Power BI service.</p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-1875">
<div id="calibre_link-2108" class="calibre2">
<div id="calibre_link-2109" class="calibre3"><div id="calibre_link-2110" class="calibre4">
    <h1 class="heading">12</h1>
    <h1 id="calibre_link-367" class="mainheading">Deploying Paginated Reports</h1>
    <p class="fm-booktitle">Paginated reports are <strong class="screentext">eXtensible Markup Language</strong> (<strong class="screentext">XML</strong>)-based report definitions that were first introduced in <strong class="screentext">SQL Server Reporting Services</strong> (<strong class="screentext">SSRS</strong>). Unlike Power BI reports, which deliver highly interactive visualization experiences on a single page, paginated reports provide richly formatted multi-page documents optimized for printing, exporting, and automated delivery.</p>
    <p class="fm-booktitle">As a Power BI Premium feature, paginated reports provide organizations with a mature and robust option for migrating existing SSRS and other similar operational reports to Power BI without the need to manage report server infrastructure. Additionally, for organizations that require an on-premises solution, the <strong class="screentext">Power BI Report Server</strong> (<strong class="screentext">PBRS</strong>) continues to be enhanced and also supports both paginated and Power BI reports.</p>
    <p class="fm-booktitle">This chapter reviews the primary considerations in migrating paginated reports to Power BI as well as planning and deploying the PBRS. This includes feature compatibility with the Power BI service, licensing and configuration details, and an example deployment topology. Additionally, management and administration topics are reviewed, including the scheduled data refresh of Power BI reports and monitoring server usage via execution log data.</p>
    <p class="fm-booktitle">In this chapter, we will review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">Paginated reports in the Power BI service</li>
      <li class="bulletlist">Migrating reports to the Power BI service</li>
      <li class="bulletlist">Planning the <strong class="screentext">Power BI Report Server</strong> (<strong class="screentext">PBRS</strong>)</li>
      <li class="bulletlist">Installing and upgrading PBRS</li>
      <li class="bulletlist">PBRS client applications</li>
    </ul>
    <p class="fm-booktitle">We begin by looking at using paginated reports within the Power BI service.</p>
    <h1 id="calibre_link-368" class="heading">Paginated reports in the Power BI service</h1>
    <p class="fm-booktitle">So far, this book has primarily<a id="calibre_link-1470" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> focused on the Power BI reports created in Power BI Desktop. While these reports are increasingly the de facto standard, given their ability to quickly generate insights and the speed with which these reports can be <a id="calibre_link-1244" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>developed, paginated reports uniquely address several important use cases such as the need to email, print, or export report data that spans multiple pages.</p>
    <p class="fm-booktitle">As explained in the <em class="italic">Paginated reports</em> section of <em class="italic">Chapter 7</em>, <em class="italic">Creating and Formatting Visualizations</em>, paginated reports are optimized for printing and PDF generation. These reports have a long and storied history at Microsoft, having first appeared in SSRS in 2004. </p>
    <p class="fm-booktitle">In contrast to Power BI reports, which are highly interactive, paginated reports have limited user interactivity via the use of parameters, which filter the entire report page. However, unlike Power BI reports, which can only present a single report page at a time, paginated reports can display multiple pages.</p>
    <p class="fm-booktitle">Paginated reports are only supported in the Power BI service in Premium workspaces, specifically, those workspaces running on embedded capacity, Premium capacity, or created using a <strong class="screentext">Premium Per User</strong> (<strong class="screentext">PPU</strong>) license. To be clear, environments using only pro licenses do not have access to paginated report features.</p>
    <p class="fm-booktitle">In addition, paginated reports do not import data, but rather use dataset connections that query the underlying data sources when reports are rendered. This is similar to how DirectQuery or live reports operate. Thus, reports published to the Power BI service that use on-premises data sources must always use a standard mode data gateway, as discussed in <em class="italic">Chapter 11</em>, <em class="italic">Managing the On-Premises Data Gateway</em><em class="italic">.</em></p>
    <p class="fm-booktitle">Before building a paginated report, it is important to determine whether the paginated report is a good fit for the intended purpose.</p>
    <h2 id="calibre_link-369" class="calibre9">Planning paginated reports</h2>
    <p class="fm-booktitle">Before building a paginated<a id="calibre_link-1246" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report, it is helpful to confirm whether or not a paginated report is suitable or appropriate. The following possible requirements can help confirm that a paginated report is indeed required:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">The report is primarily intended for printing.</li>
      <li class="calibre13">The report is primarily intended for printing or exporting simple table(s) of data to standard document formats such as Excel (<code class="inlinecode">.xlsx</code>) or PDF.</li>
      <li class="calibre13">The report needs to be printed across multiple pages of data.</li>
      <li class="calibre13">Users of the report do not require or expect any significant level of interaction beyond possibly making a few filter selections.</li>
      <li class="calibre13">The report needs to render a very specific and detailed document template layout such as an invoice or a job application form.</li>
      <li class="calibre13">The report requires a significant amount of custom logic or source data that’s not available in an existing Power BI dataset. For example, a paginated report could be built with SQL statements or stored procedures directly against a SQL Server or Azure SQL database system.</li>
      <li class="calibre13">Users of the report need the ability to export large amounts of data beyond the limit of Power BI reports (150,000 rows).</li>
      <li class="calibre13">The report data itself needs to be delivered to people in a file format such as CSV or Excel via an email subscription.</li>
      <li class="calibre13">The report data needs<a id="calibre_link-1158" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to be able to be exported in XML, Microsoft Word, or <strong class="screentext">Multipurpose Internet Mail Extension</strong> (<strong class="screentext">MIME</strong>) <strong class="screentext">HyperText Markup Language</strong> (<strong class="screentext">HTML</strong>) format, otherwise<a id="calibre_link-1038" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> known as <strong class="screentext">MHTML</strong>.</li>
    </ol>
    <p class="fm-booktitle">For example, consider a simple report that lists a table of product categories, product subcategories and individual product SKU sales amounts, tax costs, and freight costs. The report needs to<a id="calibre_link-1247" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report on all products across multiple pages, while additional pages are desired for each individual product category and/or product subcategory. The report is designed to be printed and used in board meetings. Such a report is a good candidate for a paginated report. In contrast, a report that shows a single report page at a time, features interactions between the visuals, and supports drillthrough between the report pages would not be a good candidate for paginated reports and should be created as a Power BI desktop report.</p>
    <p class="fm-booktitle">Once paginated reports are identified as a good fit for the specified requirements, the next step is to build and publish the paginated report.</p>
    <h2 id="calibre_link-370" class="calibre9">Building and publishing paginated reports</h2>
    <p class="fm-booktitle">Paginated reports <a id="calibre_link-1233" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>use an XML-based language called <strong class="screentext">Report Definition Language</strong> (<strong class="screentext">RDL</strong>). RDL is<a id="calibre_link-1600" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> traditionally<a id="calibre_link-1250" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> written in <strong class="screentext">Visual Studio</strong> or <strong class="screentext">Report Builder</strong>, but a specific <strong class="screentext">Power BI Report Builder</strong> application is available and should be used when building paginated reports for publication with the Power BI service. Visual Studio Code and Power BI Report Builder can be freely downloaded, but recall that a Premium capacity is required to use paginated reports in the Power BI service.</p>
    <p class="fm-booktitle">Power BI Report Builder requires Windows 7 or higher, Microsoft .NET Framework 4.7.2, 80 MB of disk space, and 512 MB of RAM. To download Power BI Report Builder, use the following link: <a href="https://bit.ly/3rM6P9k" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3rM6P9k</span></a>.</p>
    <p class="fm-booktitle">Designing and creating<a id="calibre_link-1234" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> reports in Power BI Report Builder is an extremely different<a id="calibre_link-1251" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> process and experience from creating reports in Power BI Desktop. <em class="italic">Figure 12.1</em> shows the <strong class="screentext">Design</strong> view of a simple report containing a single matrix visual:</p>
    <figure class="mediaobject"><img src="images/000375.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.1: Design view of a paginated report</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 12.1</em>, the report contains two <strong class="screentext">Datasets</strong>, <strong class="screentext">Dataset1</strong> and <strong class="screentext">Colors</strong>, as well as a single <strong class="screentext">Parameter</strong>, <strong class="screentext">Color</strong>.</p>
    <p class="fm-booktitle">Both datasets, which should be thought of as tables, pull from the same SQL Server <strong class="screentext">data source</strong>. Data sources are simply defined connections to source systems. Power BI Report Builder supports eleven different data sources including Power BI Dataset, Dataverse, Azure SQL Database, Azure Analysis Services, and Azure Synapse, as shown in <em class="italic">Figure 12.2</em>:</p>
    <figure class="mediaobject"><img src="images/000384.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.2: Available data sources in Power BI Report Builder</p>
    <p class="fm-booktitle">The data source, in <a id="calibre_link-1235" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>this case, is a SQL Server hosting the AdventureWorksDW2019 database. An important question in the real world is whether the paginated<a id="calibre_link-1252" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report should be built against a Power BI dataset or a source system like Azure SQL. There are important security implications such as the ability to leverage any row-level security roles in the Power BI dataset or if security needs to be applied to the SQL database system. There are also often performance implications, as the paginated report may require a query that involves many columns and, thus, doesn’t perform well against a columnar system like import mode Power BI datasets.</p>
    <p class="fm-booktitle">In this example, the SQL query defined for <strong class="screentext">DataSet1</strong> is the following:</p>
    <pre class="programlisting"><code class="hljs-code">SELECT
  BI.vDim_Product.ProductKey AS [vDim_Product ProductKey]
  ,BI.vDim_Product.ProductSubcategoryKey AS [vDim_Product ProductSubcategoryKey]
  ,BI.vDim_Product.DaysToManufacture
  ,BI.vDim_Product.Color
  ,BI.vDim_ProductCategory.ProductCategoryKey AS [vDim_ProductCategory ProductCategoryKey]
  ,BI.vDim_ProductCategory.EnglishProductCategoryName
  ,BI.vDim_ProductSubcategory.ProductSubcategoryKey AS [vDim_ProductSubcategory ProductSubcategoryKey]
  ,BI.vDim_ProductSubcategory.EnglishProductSubcategoryName
  ,BI.vFact_InternetSales.ProductKey AS [vFact_InternetSales ProductKey]
  ,BI.vFact_InternetSales.OrderQuantity
  ,BI.vFact_InternetSales.UnitPrice
  ,BI.vFact_InternetSales.DiscountAmount
  ,BI.vFact_InternetSales.TaxAmt
  ,BI.vFact_InternetSales.SalesAmount
  ,BI.vFact_InternetSales.Freight
  ,BI.vFact_InternetSales.OrderDate
  ,BI.vDim_ProductSubcategory.ProductCategoryKey AS [vDim_ProductSubcategory ProductCategoryKey]
  ,BI.vDim_Product.EnglishProductName
FROM
  BI.vDim_Product
  LEFT OUTER JOIN BI.vFact_InternetSales
    ON BI.vDim_Product.ProductKey = BI.vFact_InternetSales.ProductKey
  LEFT OUTER JOIN BI.vDim_ProductSubcategory
    ON BI.vDim_Product.ProductSubcategoryKey = BI.vDim_ProductSubcategory.ProductSubcategoryKey
  LEFT OUTER JOIN BI.vDim_ProductCategory
    ON BI.vDim_ProductSubcategory.ProductCategoryKey = BI.vDim_ProductCategory.ProductCategoryKey
</code></pre>
    <p class="fm-booktitle">This query pulls information from four different SQL views, <code class="inlinecode">vFact_InternetSales</code>, <code class="inlinecode">vDim_Product</code>, <code class="inlinecode">vDim_ProductCategory</code>, and <code class="inlinecode">vDim_ProductSubcategory</code>. Relationships between these tables are defined using key columns to form the following relationships:</p>
    <ul class="calibre10">
      <li class="bulletlist">A left outer join between <code class="inlinecode">vDim_Product</code> and <code class="inlinecode">vFact_InternetSales</code> in the <code class="inlinecode">ProductKey</code> columns of each table</li>
      <li class="bulletlist">A left outer join between <code class="inlinecode">vDim_Product</code> and <code class="inlinecode">vDim_ProductSubcategory</code> in the <code class="inlinecode">ProductSubcategoryKey</code> columns of each table</li>
      <li class="bulletlist">A left outer join between <code class="inlinecode">vDim_ProductSubcategory</code> and <code class="inlinecode">vDim_ProductCategory</code> in the <code class="inlinecode">ProductCategoryKey</code> columns of each table</li>
    </ul>
    <p class="fm-booktitle">Particularly for <a id="calibre_link-1236" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>critical production environment reports, some organizations <a id="calibre_link-1253" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>require report dataset queries to be created as database objects such as stored procedures or views in the data source system. Similar to creating view objects for each Power BI dataset table, this policy helps to promote transparency between the BI/reporting layer teams and the data warehouse or data engineering teams. Additionally, it reduces the number of scenarios in which source data or objects used in Power BI solutions are altered or removed.</p>
    <p class="fm-booktitle">In either case, whether writing the query in the report or as a database object, the query returns a table or a dataset for the report. Then, this query is executed against the SQL Server, with possible filtering, each time the matrix visual in the report is rendered. <em class="italic">Figure 12.3</em> shows such a filter:</p>
    <figure class="mediaobject"><img src="images/000393.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.3: Dataset filter</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 12.3</em>, the <strong class="screentext">Color</strong> column from the <code class="inlinecode">vFact_InternetSales</code> table is selected for the <strong class="screentext">Expression</strong> value, and<a id="calibre_link-1237" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the value in this column must equal (<strong class="screentext">=</strong>) the <strong class="screentext">Value</strong> of the<a id="calibre_link-1254" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report parameter <strong class="screentext">Color</strong>. This <strong class="screentext">Color</strong> parameter is defined for the <strong class="screentext">Value</strong> by choosing the <strong class="screentext">fx </strong>button and specifying the code <code class="inlinecode">=Parameters!Color.Value</code>, which returns the current value of the report parameter.</p>
    <p class="fm-booktitle">Report parameters can be added by right-clicking the <strong class="screentext">Parameters</strong> folder, as shown in <em class="italic">Figure 12.1</em>, and choosing <strong class="screentext">Add parameter</strong>. <em class="italic">Figure 12.4</em> shows the configuration of the <strong class="screentext">Color</strong> parameter:</p>
    <figure class="mediaobject"><img src="images/000403.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.4: Dataset filter</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 12.4</em>, the <strong class="screentext">Color</strong> parameter gets the available values using the <strong class="screentext">Colors </strong>dataset, from the <strong class="screentext">Color</strong> field/column<a id="calibre_link-1238" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> for both the <strong class="screentext">Label field</strong> and <strong class="screentext">Value field</strong> of the<a id="calibre_link-1255" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> listed items. The <strong class="screentext">Colors</strong> dataset is another simple SQL query that simply gets the <code class="inlinecode">DISTINCT</code> values of the <code class="inlinecode">Color</code> column in the <code class="inlinecode">vDim_Product</code> view, as shown here:</p>
    <pre class="programlisting"><code class="hljs-code">SELECT DISTINCT
  BI.vDim_Product.Color
FROM
  BI.vDim_Product
</code></pre>
    <p class="fm-booktitle">Additional charts and report elements can be added to a report via the <strong class="screentext">Insert</strong> menu. In <em class="italic">Figure 12.5</em>, a <strong class="screentext">Header</strong> has been added to the report and an image placed within the header:</p>
    <figure class="mediaobject"><img src="images/000413.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.5: Additional report elements including a header and an image</p>
    <p class="fm-booktitle">Because the image has<a id="calibre_link-1239" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> been added to the header section of the report, the<a id="calibre_link-1256" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> image will appear on every page of the report in the event that the report spans multiple pages. Similarly, footers are also available and printed on every page of the report. Both headers and footers can include built-in fields such as PageNumber, TotalPages, and ExecutionTime that return the current page number, the total number of pages in the report, and the date and time the report was rendered respectively.</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 12.5</em>, Power BI Report Builder supports many common visuals and report elements such as lines and rectangles, although not nearly the number of visuals and report elements available in Power BI Desktop.</p>
    <p class="fm-booktitle">Once the report design is complete, the report can be previewed using the <strong class="screentext">Run</strong> button found on the <strong class="screentext">Home</strong> tab, as shown in <em class="italic">Figure 12.6</em>: </p>
    <figure class="mediaobject"><img src="images/000423.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.6: The Run and Publish buttons on the Home tab</p>
    <p class="fm-booktitle">A preview of the report is shown in <em class="italic">Figure 12.7</em>:</p>
    <figure class="mediaobject"><img src="images/000008.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.7: Report preview</p>
    <p class="fm-booktitle">Returning to the design<a id="calibre_link-1240" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> view via the <strong class="screentext">Design</strong> button, as shown in the upper-left <a id="calibre_link-1257" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>corner of <em class="italic">Figure 12.7</em>, the report can be published to the Power BI service via the <strong class="screentext">Publish</strong> button shown in <em class="italic">Figure 12.6</em>. </p>
    <p class="fm-booktitle">Clicking the <strong class="screentext">Publish</strong> button allows the user to choose a workspace for the report, as shown in <em class="italic">Figure 12.8</em>:</p>
    <figure class="mediaobject"><img src="images/000018.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.8: Report publishing</p>
    <p class="fm-booktitle">It is important to<a id="calibre_link-1241" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> keep in mind that paginated reports are only supported<a id="calibre_link-1258" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> in the Power BI service via a dedicated capacity such as Premium and PPU workspaces. Therefore, only workspaces using a dedicated capacity, denoted by the diamond icon, appear in the list of available workspaces.</p>
    <p class="fm-booktitle">Once published to the Power BI service, we can now view and interact with the report in a web browser.</p>
    <h2 id="calibre_link-371" class="calibre9">Identifying and interacting with paginated reports</h2>
    <p class="fm-booktitle">With the<a id="calibre_link-1243" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report published to the Power BI service, you can now log in and view the report. Paginated reports can be identified in the Power BI service via a different icon, as shown in <em class="italic">Figure 12.9</em>:</p>
    <figure class="mediaobject"><img src="images/000028.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.9: Paginated report icon in the Power BI service</p>
    <p class="fm-booktitle">Once opened, paginated <a id="calibre_link-1245" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>reports can appear blank in the Power BI service if parameters are required to be set prior to running the report. If the report is blank, click the <strong class="screentext">Parameters</strong> button in the ribbon to display the parameters of the report. Set the parameters and then click the <strong class="screentext">View report</strong> button, as shown in <em class="italic">Figure 12.10</em>:</p>
    <figure class="mediaobject"><img src="images/000038.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.10: Paginated report parameters in the Power BI service</p>
    <p class="fm-booktitle">Interactivity with paginated reports is limited to setting the report parameters and then re-rendering the report. Paginated report visuals are not interactive in the same manner as reports created in Power BI Desktop, meaning that report visuals are static once rendered and cannot interact with one another such as via cross-filtering or highlighting.</p>
    <p class="fm-booktitle">If multiple pages are generated by the report, these pages can be navigated to and displayed using the paging controls located to the left of the <strong class="screentext">Parameters</strong> button, as shown in <em class="italic">Figure 12.10</em>.</p>
    <p class="fm-booktitle">While users like the robust interactivity of Power BI Desktop reports, paginated reports do offer more export options as well as different printing options.</p>
    <h3 id="calibre_link-372" class="heading1">Printing, exporting, subscribing, and sharing</h3>
    <p class="fm-booktitle">The paginated report<a id="calibre_link-1248" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> printing options are slightly different from<a id="calibre_link-1242" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Power BI Desktop reports. Choosing <strong class="screentext">File</strong> and then <strong class="screentext">Print </strong>from the<a id="calibre_link-1261" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report ribbon presents the dialog <a id="calibre_link-1259" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>shown in <em class="italic">Figure 12.11</em>:</p>
    <figure class="mediaobject"><img src="images/000048.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.11: Paginated report print dialog in the Power BI service</p>
    <p class="fm-booktitle">Unlike Power BI Desktop reports, paginated reports offer the ability to specify the exact <strong class="screentext">Height</strong> and <strong class="screentext">Width</strong> of the printed pages in addition to a <strong class="screentext">Preview</strong> ability.</p>
    <p class="fm-booktitle">In addition to the different <a id="calibre_link-1260" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>printing capabilities, paginated reports offer <a id="calibre_link-1262" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>additional export options in the <strong class="screentext">Export</strong> menu, as <a id="calibre_link-1249" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>shown in <em class="italic">Figure 12.12</em>:</p>
    <figure class="mediaobject"><img src="images/000058.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.12: Paginated report Export menu in the Power BI service</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 12.12</em>, additional export options include the XML (<code class="inlinecode">.xml</code>), Microsoft Word (<code class="inlinecode">.docx</code>), and Web Archive (<code class="inlinecode">.mhtml</code>) formats. </p>
    <p class="fm-booktitle">While printing and <a id="calibre_link-2111" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>exporting are different for paginated reports, the ability to Subscribe and Share is the same as Power BI Desktop reports and provides the exact same interface. Subscribing and sharing are covered in the next chapter, <em class="italic">Chapter 12</em>, <em class="italic">Creating Apps and Content Distribution</em>.</p>
    <p class="fm-booktitle">While new reports can be created and published using Power BI Report Builder, it is likely that organizations interested in paginated reports in the Power BI service already have existing paginated reports. Migrating existing paginated reports to the Power BI service comes with certain considerations that we explore in the next section.</p>
    <h1 id="calibre_link-373" class="heading">Migrating reports to the Power BI service</h1>
    <p class="fm-booktitle">Given their long and successful history in the competitive enterprise reporting platform market, many organizations<a id="calibre_link-1471" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> continue to support hundreds and even thousands of paginated or SSRS reports. Additionally, existing reports built with other common BI tools such as Cognos, MicroStrategy, and Crystal Reports are usually more easily re-produced in paginated reports than Power BI reports. </p>
    <p class="fm-booktitle">A key question to answer is whether the existing or legacy reports should be maintained going forward or if they can be replaced (or perhaps supplemented) with a more modern and interactive experience offered by Power BI reports. In somes cases, users would prefer a well developed Power BI report and the existing reports merely reflect the functionality that was available years ago in SSRS or another similar tool. This section covers the steps and considerations organizations should bear in mind when migrating existing RDL reports to paginated reports for Power BI.</p>
    <p class="fm-booktitle">Assuming the organization has already determined that they wish to use paginated reports in the Power BI service, the migration of reports to Power BI includes the following phases:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Inventory</li>
      <li class="calibre13">Assess</li>
      <li class="calibre13">Plan</li>
      <li class="calibre13">Migrate</li>
      <li class="calibre13"><strong class="screentext">User Acceptance Testing</strong> (<strong class="screentext">UAT</strong>)</li>
    </ol>
    <p class="fm-booktitle">Each of these phases is discussed in the following sections.</p>
    <h2 id="calibre_link-374" class="calibre9">Inventory</h2>
    <p class="fm-booktitle">Before migrating reports, it is important to <a id="calibre_link-1128" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>understand the size and scope of the effort required. This means creating an inventory of all the report servers and reports within the environment. </p>
    <p class="fm-booktitle">Creating an inventory of all reports should begin with identifying all the SSRS and PBRS servers within the environment. The <strong class="screentext">Microsoft Assessment and Planning Toolkit</strong> (<strong class="screentext">MAP Toolkit</strong>) is useful in discovering the SQL Server instances within the environment, including identifying the versions and installed features of those SQL instances. The MAP Toolkit can be downloaded at the following link: <a href="https://bit.ly/3KSBoUG" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3KSBoUG</span></a>.</p>
    <p class="fm-booktitle">Once SQL Server instances have been identified, the following versions of SQL Server can have their reports migrated to the Power BI service:</p>
    <ul class="calibre10">
      <li class="bulletlist">SQL Server 2012</li>
      <li class="bulletlist">SQL Server 2014</li>
      <li class="bulletlist">SQL Server 2016</li>
      <li class="bulletlist">SQL Server 2017</li>
      <li class="bulletlist">SQL Server 2019</li>
      <li class="bulletlist">Power BI Report Server</li>
    </ul>
    <p class="fm-booktitle">The final step in creating the<a id="calibre_link-1129" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> inventory of reports is to understand the reports present on each SQL Server. This can be done with a simple SQL query run within <strong class="screentext">SQL Server Management Studio</strong> (<strong class="screentext">SSMS</strong>) such as this:</p>
    <pre class="programlisting"><code class="hljs-code">SELECT 
      ,[Path]
      ,[Name]
      ,[Description]
      ,[CreatedByID]
      ,[CreationDate]
      ,[ModifiedByID]
      ,[ModifiedDate]
  FROM [<code class="codehighlighted">ReportServer</code>].[dbo].[Catalog]
</code></pre>
    <p class="fm-booktitle">Here, <code class="inlinecode">ReportServer</code> can be replaced with the name of the reporting server database. Once the results are obtained, right-click the results in SSMS and choose <strong class="screentext">Save Results As… </strong>to save the list of reports in a<a id="calibre_link-645" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> <strong class="screentext">comma-separated value</strong> (<strong class="screentext">CSV</strong>) file.</p>
    <p class="fm-booktitle">With our inventory complete, we should now assess our inventory of reports in order to determine which, if any, reports should be migrated.</p>
    <h2 id="calibre_link-375" class="calibre9">Assess</h2>
    <p class="fm-booktitle">The next step in migrating <a id="calibre_link-1125" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>paginated reports to the Power BI service involves assessing the reports in our inventory. It is common for reports to be created and then slowly fall out of use over time. We can determine if reports are no longer being used using a simple SQL query run from SSMS such as the following:</p>
    <pre class="programlisting"><code class="hljs-code">USE <code class="codehighlighted">ReportServer</code>
GO 
DECLARE @Days INT
    SET @Days = <code class="codehighlighted">365</code>
SELECT
    [Path],
    [Name],
    [DateLastViewed]
  FROM dbo.catalog [cat] 
  INNER JOIN (SELECT [ReportID],[DateLastViewed] = MAX([TimeStart])  
         FROM dbo.[ExecutionLog] GROUP BY [ReportID]) [exe] 
         ON [cat].[ItemID] = [exe].[ReportID]
WHERE DATEDIFF(day, [DateLastViewed], GETDATE()) &lt;= @Days
ORDER BY [DateLastViewed] DESC
</code></pre>
    <p class="fm-booktitle">Here, <code class="inlinecode">ReportServer</code> should be changed to the name of the reporting services database, and the number of days, <code class="inlinecode">365</code>, should be adjusted according to business preferences. The preceding query returns all the reports that have been executed within <code class="inlinecode">@Days</code> number of days, in this case, <code class="inlinecode">365</code>. </p>
    <p class="fm-booktitle">The results of this <a id="calibre_link-1126" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>query can be compared to the inventory, and those reports not included in the results of reports that have been executed in the last year can be removed from the list of reports to be migrated.</p>
    <p class="fm-booktitle">The next step in assessing reports involves determining if the reports include any features that are not supported by the Power BI service. The Power BI service does not support the following features of RDL reports:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Shared data sources and shared datasets</li>
      <li class="calibre13">Resources, like image files</li>
      <li class="calibre13">KPIs and mobile reports (SSRS 2016, or later&mdash;Enterprise Edition only)</li>
      <li class="calibre13">Report models and report parts (deprecated)</li>
      <li class="calibre13">Map visuals (not supported by the data gateway)</li>
    </ol>
    <p class="fm-booktitle">The <strong class="screentext">RDL Migration Tool</strong> that is available on GitHub, <a href="https://github.com/microsoft/RdlMigration" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://github.com/microsoft/RdlMigration</span></a>, can be used to test reports for incompatibility with any of the <a id="calibre_link-1583" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>four identified unsupported features identified previously. </p>
    <p class="fm-booktitle">It should be noted that the RDL Migration Tool must be compiled locally within Visual Studio Code or a similar <strong class="screentext">integrated development environment</strong> (<strong class="screentext">IDE</strong>). After compiling, the tool is run from a command line and instructions for its use are available on the GitHub repository.</p>
    <p class="fm-booktitle">BI teams and the business should work in coordination when assessing reports to further refine the list of reports to be migrated. Teams using paginated reports should be encouraged to consider redeveloping those reports in Power BI Desktop, if possible, in order to potentially modernize the reports. </p>
    <p class="fm-booktitle">For example, mobile reports or reports using KPI visuals can be redeveloped in Power BI Desktop. Similarly, reports using on-premises data sources and map visuals are good candidates to be redeveloped in Power BI Desktop since the data gateway does not support complex <a id="calibre_link-2112" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>data types such as geographic spatial data types.</p>
    <p class="fm-booktitle">Once an acceptable list of paginated reports has been identified, the next step is to plan the migration of these reports to Power BI.</p>
    <h2 id="calibre_link-376" class="calibre9">Plan</h2>
    <p class="fm-booktitle">The Plan phase ensures that the<a id="calibre_link-1131" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> necessary infrastructure and other components are in place to facilitate running paginated reports within the Power BI service. In addition, the Plan phase helps identify how security will be implemented.</p>
    <p class="fm-booktitle">First, since paginated reports are a premium feature, the BI team needs to ensure that an appropriate dedicated capacity or PPU workspaces have been created and defined within the Power BI service. Second, since paginated reports that access on-premises resources must use a data gateway, BI teams should ensure that such gateways are present and functioning prior to migration.</p>
    <p class="fm-booktitle">Perhaps the most important element of planning the migration of paginated reports is security. The Power BI service and SSRS use very different security models; thus, it is important to understand these differences when planning to migrate reports.</p>
    <p class="fm-booktitle">SSRS uses folders and permissions to secure content while the Power BI service uses workspaces, as covered in the <em class="italic">Workspace roles and rights</em> section of <em class="italic">Chapter 9</em>, <em class="italic">Managing Workspaces and Content</em>. BI teams need to understand how SSRS folders and permissions work and then create a plan to map these permissions to one or more workspaces. </p>
    <p class="fm-booktitle">BI teams should also consider the use of the built-in report field, <strong class="screentext">UserID</strong>. In the Power BI service, this field returns the User Principal Name (<code class="inlinecode">user@domain.com</code>) instead of the Active Directory account name (domain\user). Thus, if using the <strong class="screentext">UserID</strong> field to secure content within the report, the dataset definitions and possibly the source systems will need to be revised. </p>
    <p class="fm-booktitle">Special consideration should also be given to the use of the built-in field <strong class="screentext">ExecutionTime</strong>. In the Power BI service, this returns a date/time in Coordinate <strong class="screentext">Universal Time</strong> (<strong class="screentext">UTC</strong>) versus the local time zone of the report server. This may cause confusion among report viewers.</p>
    <p class="fm-booktitle">Finally, while the<a id="calibre_link-2113" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> RDL Migration Tool is capable of converting shared data sources and shared datasets into local data sources and local datasets, BI teams may wish to consider migrating shared data sources to shared Power BI datasets published within the Service.</p>
    <p class="fm-booktitle">With a plan in place for the migration, the next step is to actually migrate the paginated reports. </p>
    <h2 id="calibre_link-377" class="calibre9">Migrate</h2>
    <p class="fm-booktitle">With an appropriate plan in place, the next step is to actually migrate the selected reports. This can be done manually or automatically.</p>
    <p class="fm-booktitle">To migrate reports <a id="calibre_link-1130" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>manually, simply download the RDL files from the reporting services instances within the environment. Open these RDL files in Power BI Report Builder, as described in the <em class="italic">Building and publishing paginated reports</em> section of this chapter. Make any necessary modifications and then publish to the Power BI service.</p>
    <p class="fm-booktitle">Alternatively, the migration of reports can be automated by using the <strong class="screentext">RDL Migration Tool</strong>. Instructions for using the RDL Migration Tool can be found on the GitHub page here: <a href="https://github.com/microsoft/RdlMigration" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://github.com/microsoft/RdlMigration</span></a>.</p>
    <p class="fm-booktitle">It is also possible to create a custom migration tool or script using the Power BI REST APIs and the SSRS REST APIs. More information on the Power BI REST APIs can be found in the <em class="italic">Power BI REST API and PowerShell Module</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>.</p>
    <p class="fm-booktitle">The choice of which approach to use when migrating reports is highly situational and may even require a combination of approaches. For example, the RDL Migration Tool might be used to migrate the majority of reports. The remaining reports that the RDL Migration Tool cannot successfully migrate could then be processed manually. However, if there are hundreds of reports that the RDL Migration Tool cannot successfully process, it might be <a id="calibre_link-2114" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>necessary to create a custom migration script using the APIs.</p>
    <p class="fm-booktitle">With reports migrated to the Power BI service, the final step is UAT and final deployment.</p>
    <h2 id="calibre_link-378" class="calibre9">User Acceptance Testing and final deployment</h2>
    <p class="fm-booktitle">Migrated paginated<a id="calibre_link-1132" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> reports should follow the same life cycle as Power BI Desktop reports, such as the process <a id="calibre_link-1127" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>described in the <em class="italic">Power BI deployment pipelines</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>. This means that migrated reports should first be published to a <strong class="screentext">Development</strong> workspace to allow the report developers to verify that the report operates and renders in the Power BI service.</p>
    <p class="fm-booktitle">Once published to the Development workspace and checked for basic functionality by the BI team, the reports should then be promoted to the <strong class="screentext">Test</strong> workspace for UAT. UAT includes the business users running the reports and ensures that the reports still function and return the correct results. </p>
    <p class="fm-booktitle">Once users have signed off on UAT, the BI team can then promote the reports that pass UAT to the <strong class="screentext">Production</strong> workspace. Reports that do not pass can be revised by the BI team and sent through the process again as needed.</p>
    <p class="fm-booktitle">This completes our exploration of paginated reports in the Power BI service. Next, we will look at Power BI’s support for continuing to use paginated reports on-premises using PBRS.</p>
    <h1 id="calibre_link-379" class="heading">Planning the Power BI Report Server (PBRS)</h1>
    <p class="fm-booktitle">PBRS is a modern<a id="calibre_link-1448" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> enterprise-reporting platform that allows organizations to deploy, manage, and view Power BI reports, in addition to other report types, internally. PBRS renders Power BI reports (<code class="inlinecode">.PBIX</code> files) for data visualization and exploration, just like the Power BI web service.</p>
    <p class="fm-booktitle">PBRS allows large numbers of users to view and interact with the same reports created in Power BI Desktop in a modern web portal and via the same Power BI mobile applications used with the Power BI cloud service. PBRS addresses a current and sometimes long-term need to maintain a fully on-premises BI solution that includes both data sources and reports. Additionally, PBRS can be used in combination with the Power BI service to support scenarios in which only certain reports need to remain on-premises.</p>
    <p class="fm-booktitle">PBRS is built on top of <a id="calibre_link-2115" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>SSRS; therefore, organizations can continue to utilize existing paginated SSRS reports and familiar management skills to easily migrate to PBRS. In addition to Power BI and paginated reports, the <strong class="screentext">Office Online Server</strong> (<strong class="screentext">OOS</strong>) can <a id="calibre_link-1164" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>be configured to allow for viewing and interacting with Excel reports in the same report server portal, thus providing a consolidated hub of BI reporting and analysis. </p>
    <p class="fm-booktitle">Moreover, when provisioned with the Power BI Premium capacity, organizations can later choose to migrate on-premises Power BI reports to a dedicated capacity in the Power BI service, without incurring an additional cost.</p>
    <blockquote class="pcalibre7 packt_quote pcalibre6">
      <p class="fm-acknowledgement">Power BI Report Server is extending our journey of giving customers more flexibility in terms of being able to deploy some of their workloads on-premises behind their firewall.</p>
      <p class="packt_figref">&ndash; Riccardo Muti, Group Program Manager</p>
    </blockquote>
    <p class="fm-booktitle">Prior to any licensing or deployment planning, an organization should be very clear on the capabilities of PBRS in relation to the Power BI cloud service. PBRS does not include many of the features provided by the Power BI cloud service, such as the dashboards described in <em class="italic">Chapter 9</em>, <em class="italic">Designing Dashboards</em>, or the apps, email subscriptions, Analyze in Excel, and data alert features reviewed in <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>. </p>
    <p class="fm-booktitle">Although new features are included with new releases of PBRS, PBRS is not intended or planned to support the features provided in the Power BI cloud service. </p>
    <p class="fm-booktitle">Additionally, for organizations using SSRS, it’s important to understand the differences between the PBRS and SSRS, such as the upgrade and support life cycle. Mapping the capabilities and the longer-term role of the PBRS in relation to a current and a longer-term BI architecture and cloud strategy is helpful to plan the PBRS. </p>
    <p class="fm-booktitle">The following list of five questions can help guide the decision to deploy the PBRS:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">Do some or all reports currently need to stay on-premises and behind a corporate firewall?</strong>
        <p class="normal1">PBRS is a fully on-premises solution designed to meet this specific scenario. Alternatively, organizations can deploy PBRS to virtual machines provisioned in Azure.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Is SSRS currently being used?</strong>
        <p class="normal1">PBRS includes SSRS and, thus, allows seamless migration from an existing SSRS server.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Are the primary data sources for reports located on-premises and expected to remain on-premises?</strong>
        <p class="normal1">As an on-premises solution, the on-premises data gateway is not required to connect to on-premises sources. As discussed in the previous chapter, some degree of query latency, hardware, and administrative costs are incurred by using on-premises data sources with the Power BI service.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Are there features exclusive to the Power BI service that are needed?</strong>
        <p class="normal1">PBRS is limited to rendering paginated reports and Power BI Report (<code class="inlinecode">.PBIX</code>) files, as will be discussed in the following section.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Will large import mode Power BI datasets be needed, or will the Power BI reports use DirectQuery and Live connections?</strong>
        <p class="normal1">The size of the files that can be uploaded to PBRS for Scheduled refresh is limited to 2 GB. Additionally, unlike the Power BI service, a single Power BI dataset cannot be used as a source for other reports. With Power BI Premium capacity in the Power BI service, 10 GB and larger files (datasets) are supported.</p>
      </li>
    </ol>
    <p class="fm-booktitle">Given these <a id="calibre_link-1449" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>considerations, organizations with significant on-premises investments or requirements may wish to consider PBRS as at least part of their BI architecture. One example of this is a large on-premises data warehouse with many existing paginated (<code class="inlinecode">.RDL</code>) SSRS reports built against it.</p>
    <p class="fm-booktitle">As described in the <em class="italic">Migrating reports</em> section from earlier in this chapter, new Power BI reports deployed to PBRS can later be migrated to the Power BI cloud service via the same licenses. </p>
    <p class="fm-booktitle">For example, a group of related Power BI reports initially published to a folder on PBRS could later be uploaded to a workspace in the Power BI service. The app workspace could be assigned a Power BI Premium capacity; thus, the reports could be distributed to all users, including Power BI Free users, via an app, as per <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>.</p>
    <p class="fm-booktitle">Prior to deciding on <a id="calibre_link-1450" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the use of PBRS, it is important to understand the key feature differences between PBRS and the Power BI service.</p>
    <h2 id="calibre_link-380" class="calibre9">Feature differences with the Power BI service</h2>
    <p class="fm-booktitle">The PBRS renders <a id="calibre_link-1468" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI reports (<code class="inlinecode">.pbix</code> files) similar to the Power BI service, but it is not intended to deliver other features found in the Power BI service such as dashboards and data alerts. </p>
    <p class="fm-booktitle">For users or organizations inexperienced with Power BI concepts (datasets, reports, and dashboards) and the Power BI service, these reports may be considered to be dashboards, and many of the additional features provided by the Power BI service, such as dashboards, workspaces, and apps, may not be known or utilized.</p>
    <p class="fm-booktitle">Although viewing and interacting with Power BI reports is clearly central to Power BI, Power BI as a <strong class="screentext">Platform-as-a-Service</strong> (<strong class="screentext">PaaS</strong>) and <strong class="screentext">Software-as-a-Service</strong> (<strong class="screentext">SaaS</strong>) cloud offering provides<a id="calibre_link-1287" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> many additional benefits beyond the standard infrastructure cost and maintenance<a id="calibre_link-1732" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> benefits of a cloud solution. These additional features support content management, collaboration, and the managed distribution of content throughout the organization. </p>
    <p class="fm-booktitle">Prior to committing to PBRS, it’s recommended that you understand the role and benefit of features exclusive to the Power BI service such as the following:</p>
    <ul class="calibre10">
      <li class="bulletlist">Dashboards</li>
      <li class="bulletlist">Data alerts and notifications</li>
      <li class="bulletlist">Email subscriptions to dashboards and reports</li>
      <li class="bulletlist">Workspaces and apps</li>
      <li class="bulletlist">Quick insights</li>
      <li class="bulletlist">Natural Language Query (Q&amp;A) </li>
      <li class="bulletlist">Analyze in Excel</li>
      <li class="bulletlist">Streaming datasets</li>
      <li class="bulletlist">R and Python custom visuals</li>
      <li class="bulletlist">Composite datasets</li>
      <li class="bulletlist">Many-to-many relationships</li>
      <li class="bulletlist">Cross-report drillthrough</li>
      <li class="bulletlist">Full-screen mode</li>
      <li class="bulletlist">Advanced Microsoft 365 collaboration</li>
      <li class="bulletlist">Template apps</li>
      <li class="bulletlist">Shared Power BI datasets</li>
    </ul>
    <p class="fm-booktitle">Several of the Power BI Service features not available on the PBRS have been reviewed in earlier chapters, such as dashboards (<em class="italic">Chapter 9</em>, <em class="italic">Designing Dashboards</em>, and <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>). </p>
    <p class="fm-booktitle">Other features<a id="calibre_link-1469" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> exclusive to the Power BI service, including email subscriptions to dashboards and reports, Power BI apps, and data alerts, are reviewed in <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>. </p>
    <p class="fm-booktitle">While PBRS does not include certain features of the Power BI service, PBRS does have full feature parity with SSRS.</p>
    <h2 id="calibre_link-381" class="calibre9">Parity with SQL Server Reporting Services</h2>
    <p class="fm-booktitle">PBRS is 100% compatible<a id="calibre_link-1748" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> with SSRS. In fact, PBRS can be thought of as a superset of an SSRS server in the sense that both modern Power BI reports and all SSRS features up to the latest release of SSRS are included. </p>
    <p class="fm-booktitle">Therefore, it’s not necessary to deploy both an SSRS report server and PBRS to support existing SSRS workloads.</p>
    <blockquote class="pcalibre7 packt_quote pcalibre6">
      <p class="fm-acknowledgement">There is no reason, except in some edge cases, for you to be running both SSRS and Power BI Report Server.</p>
      <p class="packt_figref">&ndash; Christopher Finlan, Senior Program Manager for Power BI Report Server</p>
    </blockquote>
    <p class="fm-booktitle">It’s certainly possible to deploy PBRS along with an instance of SSRS. For example, a PBRS instance could be dedicated to self-service BI reports built with Power BI Desktop, while the SSRS instance could be dedicated to IT-developed paginated (<code class="inlinecode">.RDL</code>) reports.</p>
    <p class="fm-booktitle">For the majority of organizations, however, PBRS and its modern web portal should be used to consolidate all report types.</p>
    <p class="fm-booktitle">There are three main differences between PBRS and SSRS:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Power BI Report (<code class="inlinecode">.PBIX</code>) files can only be viewed from the PBRS web portal.</li>
      <li class="calibre13">Excel workbooks (<code class="inlinecode">.XLSX</code>) can only be viewed from the PBRS web portal although this requires the OOS.</li>
      <li class="calibre13">The upgrade and support cycles are significantly shorter for the PBRS. A new version of PBRS is released approximately every 4 months in January, May, and September.</li>
    </ol>
    <p class="fm-booktitle">New versions of SSRS continue to be tied to the release of SQL Server. For example, SSRS 2017 was made <strong class="screentext">generally available</strong> (<strong class="screentext">GA</strong>) on October 2, 2017, along with SQL Server 2017. Although the upgrade cycle<a id="calibre_link-1024" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> has shortened for SQL Server, it doesn’t match the pace of innovation of Power BI’s monthly release cycles. Therefore, to make new Power BI features <a id="calibre_link-1749" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>available to customers with on-premises deployments, a new PBRS is released approximately every 4 months.</p>
    <p class="fm-booktitle">Unlike versions of SSRS, which continue to receive support such as cumulative updates for years following their release, support for each PBRS release ends after one year. Therefore, while upgrading to each new version of PBRS every 4 months is not required, organizations should plan to upgrade within one year of each version’s release to maintain support. Additional information and considerations on upgrade cycles are included in the <em class="italic">Upgrade cycles</em> section later in this chapter.</p>
    <p class="fm-booktitle">Support for multiple instances per server represents one additional difference between PBRS and SSRS. Currently, only one instance of PBRS can be installed per server. Therefore, unlike SSRS, virtual machines need to be configured if multiple instances are required for the same server. </p>
    <p class="fm-booktitle">There are no plans to deprecate SSRS or replace it with PBRS. However, given the additional features exclusive to PBRS and the more frequent release cycles, there are strong reasons to choose PBRS over SSRS going forward. Additionally, an existing SSRS server can be easily migrated to PBRS. </p>
    <p class="fm-booktitle">BI teams who are familiar with SSRS can quickly take advantage of the mature features, such as report subscription schedules and role-based user permissions. For organizations running older versions of SSRS, the significant features introduced in SSRS 2016, including the modern web portal and KPIs, can further supplement their BI solution. </p>
    <p class="fm-booktitle">In summary, PBRS <a id="calibre_link-2116" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>allows organizations to continue to fully support existing and new SSRS reports, while also enabling the self-service and data visualization features of Power BI reports.</p>
    <p class="fm-booktitle">Let’s review the data sources and connectivity options for PBRS next.</p>
    <h2 id="calibre_link-382" class="calibre9">Data sources and connectivity options</h2>
    <p class="fm-booktitle">All three main connectivity options for Power BI Reports (import, DirectQuery, and Live connection) are <a id="calibre_link-1440" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>supported by PBRS. However, composite datasets are not supported.</p>
    <p class="fm-booktitle">For example, corporate BI teams could develop DirectQuery and Live connection reports based on a Teradata database and a <strong class="screentext">SQL Server Analysis Services</strong> (<strong class="screentext">SSAS</strong>) model, respectively. Business users with Power BI Pro licenses can also import data from Excel and other sources to the <a id="calibre_link-1439" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI Desktop version optimized for the PBRS and publish those reports to the PBRS.</p>
    <p class="fm-booktitle">Power BI reports deployed to PBRS cannot currently utilize a single Power BI dataset (<code class="inlinecode">.PBIX</code> file) as their data source, as described in the <em class="italic">Live connections to the Power BI datasets</em> section of <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>. Given the resource limitations of the report server and the important goals of reusability and version control, this implies that DirectQuery and Live connection reports are strongly preferred for the current version of PBRS. </p>
    <p class="fm-booktitle">Imported Power BI datasets are currently limited to 2 GB file sizes. This compares to the 10 GB file size limit of Power BI datasets published to the Premium capacity in the Power BI server. Therefore, if it’s necessary to import data to a Power BI report for deployment to the PBRS, only include the minimal amount of data needed for the specific report.</p>
    <p class="fm-booktitle">Avoid duplicating imported data across many reports by leveraging report pages, slicer visuals, and bookmarks. If import mode reports are required, such as when data integration is needed or when an Analysis Services model is not available, look for opportunities to consolidate report requests into a few <code class="inlinecode">.PBIX</code> reports that can be shared.</p>
    <p class="fm-booktitle">One advantage of PBRS is that, as an on-premises solution, the on-premises data gateway section described in <em class="italic">Chapter 11</em>, <em class="italic">Managing the On-Premises Data Gateway</em> is not needed. The report server service account, running either as the Virtual Service Account or as a <a id="calibre_link-2117" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>domain user account within the local <a id="calibre_link-2118" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Active Directory, is used to connect to data sources.</p>
    <p class="fm-booktitle">We will now turn our attention to hardware and user licensing.</p>
    <h2 id="calibre_link-383" class="calibre9">Hardware and user licensing</h2>
    <p class="fm-booktitle">The rights to deploy <a id="calibre_link-1442" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>PBRS to a production environment can be obtained by purchasing Power BI Premium capacity or via SQL Server Enterprise Edition with a Software Assurance agreement.</p>
    <p class="fm-booktitle">Power BI Premium is the primary and recommended method as this includes both a Power BI service (cloud) dedicated capacity and PBRS at the same cost. By licensing PBRS via Power BI Premium capacity, an organization can choose to migrate Power BI reports to the Power BI service (cloud) at a future date.</p>
    <p class="fm-booktitle">For example, a Power BI Premium P2 SKU includes 16 v-cores of dedicated capacity in the Power BI service, as well as the right to deploy PBRS to 16 processor cores on-premises. Furthermore, the cores provisioned via Power BI Premium can be allocated to on-premises hardware as needed by the organization, such as one PBRS with all 16 cores or two PBRS instances with eight cores each.</p>
    <p class="fm-booktitle">Once Power BI Premium capacity has been purchased, a product key required to install the report server becomes available in the Power BI admin portal. The details of Power BI Premium including the management of Premium (dedicated) capacities and the additional capabilities enabled by Premium capacities for deployments to the Power BI service are included in <em class="italic">Chapter 15</em>, <em class="italic">Building Enterprise BI with Power BI Premium</em>.</p>
    <p class="fm-booktitle">As an alternative to licensing via Power BI Premium, organizations with SQL Server Enterprise Edition with Software Assurance can use their existing SQL Server licenses to deploy PBRS.</p>
    <p class="fm-booktitle">One of the benefits of the Software Assurance program has been to provide access to new versions of SQL Server as they’re released, and this benefit has been extended to include PBRS. For example, if an organization has already licensed 24 cores to run SQL Server Enterprise Edition with a Software Assurance agreement, they could allocate 8 of those 24 cores to a server for running PBRS. Just like current SQL Server licensing, additional SQL Server products (such as SQL Server Integration Services) could also be deployed on the same eight-core server. It’s essential to realize that, unlike Power BI Premium, this<a id="calibre_link-1443" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> licensing method does not provide access to the many additional features exclusive to the Power BI (cloud) service, as described earlier in this chapter.</p>
    <h3 id="calibre_link-384" class="heading1">Pro licenses for report authors</h3>
    <p class="fm-booktitle">In addition to<a id="calibre_link-1453" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> licensing for PBRS, each user who publishes Power BI reports (<code class="inlinecode">.PBIX</code> files) to the report server’s web portal requires a Power BI Pro license. In most large deployments, these are typically a small number of BI report developers and self-service BI power users, as described in the <em class="italic">Power BI licenses</em> section of <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>.</p>
    <p class="fm-booktitle">Users who only view and optionally interact with reports published to PBRS do not require Power BI Pro licenses or even Power BI Free licenses. This licensing structure (Premium Capacity + Pro licenses for report authors) further aligns PBRS with the Power BI service. </p>
    <p class="fm-booktitle">Let’s now take a look at the various ways PBRS can be deployed within an organization.</p>
    <h2 id="calibre_link-385" class="calibre9">Alternative and hybrid deployment models</h2>
    <p class="fm-booktitle">PBRS, along with the ability to embed Power BI content into custom applications, gives organizations the <a id="calibre_link-1441" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>option to choose a single deployment model (such as PBRS only) or a combination of deployment models in which both PBRS and the Power BI service are utilized for distinct scenarios or content.</p>
    <p class="fm-booktitle">With both the Power BI <a id="calibre_link-1444" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>service and the PBRS available via Power BI Premium capacity, an organization could choose to match the deployment model to the unique needs of a given project, such as by using the PBRS if traditional paginated reports are needed, or if the reports need to remain on-premises for regulatory reasons.</p>
    <p class="fm-booktitle">For example, one Power BI solution for the marketing organization could be completely cloud-based, such as using Azure SQL Database as the source for Power BI reports and dashboards hosted in the Power BI service. </p>
    <p class="fm-booktitle">A different solution for the sales organization could use the on-premises data gateway to query a SSAS model (on-premises) from the Power BI service, as described in <em class="italic">Chapter 11</em>, <em class="italic">Managing the On-Premises Data Gateway</em>. </p>
    <p class="fm-booktitle">Finally, it could be used for scenarios in which both the data source(s) and the report/visualization layer must remain on-premises, such as for sensitive reports used by the human resources <a id="calibre_link-2119" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>organization. Power BI reports developed against on-premises sources could be deployed to the PBRS. </p>
    <p class="fm-booktitle"><em class="italic">Figure 12.13</em> shows the essential architecture of three distinct Power BI solutions: cloud-only, cloud and on-premises, and on-premises only:</p>
    <figure class="mediaobject"><img src="images/000069.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.13: Power BI solutions by deployment model</p>
    <p class="fm-booktitle">In this example, Power BI reports and dashboards developed for the marketing department are hosted in the Power BI service and based on an Azure SQL database. The sales team also has access to dashboards and reports in the Power BI service, but the queries for this content utilize a Live connection to an on-premises SSAS model via the on-premises data gateway. </p>
    <p class="fm-booktitle">Finally, Power BI reports developed for the human resources department based on on-premises data sources are deployed to the PBRS.</p>
    <p class="fm-booktitle">BI solutions that utilize PaaS and SaaS cloud offerings generally deliver reduced overall cost of ownership, greater flexibility (such as scaling up/down), and more rapid access to new features. For these reasons, plans and strategies to migrate on-premises data sources to equivalent or superior cloud solutions, such as Azure Synapse and Azure Analysis Services, are recommended. </p>
    <p class="fm-booktitle">If multiple Power BI deployment models are chosen, BI teams should understand and plan to manage the different components utilized in different models. For example, identify the<a id="calibre_link-1445" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> administrators, hardware, and users of the on-premises data gateway. </p>
    <p class="fm-booktitle">Likewise, identify the Power BI service administrators and the tenant settings to apply, as described in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>. Additionally, as discussed in the <em class="italic">Upgrade cycles</em> section later in this chapter, organizations can choose either a single Power BI Desktop version to utilize for both PBRS and the Power BI service, or run separate versions of Power BI Desktop side by side.</p>
    <p class="fm-booktitle">BI teams responsible for managing these more complex deployments should have monitoring in place to understand the utilization and available resources of the alternative deployment models. </p>
    <p class="fm-booktitle">For example, rather than adding resources to a PBRS or adding another report server in a scale-out deployment, certain Power BI reports could be migrated to available Premium capacity in the Power BI service. The Power BI Premium capacities section in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>, includes details on the Premium capacity monitoring provided in the Power BI service.</p>
    <p class="fm-booktitle">We will now take a closer look at a reference topology for PBRS.</p>
    <h3 id="calibre_link-386" class="heading1">PBRS reference topology</h3>
    <p class="fm-booktitle">The four main components of a<a id="calibre_link-1454" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> PBRS deployment include the report server instance, the Report Server Database, Active Directory, and the data sources used by the reports. The Active Directory domain controller is needed to securely authenticate requests by both the data sources and the report server.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 12.14</em>, a SQL Server database and an SSAS Tabular model are used as data sources by the report server: </p>
    <figure class="mediaobject"><img src="images/000080.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.14: PBRS reference topology</p>
    <p class="fm-booktitle">In <em class="italic">Figure 12.14</em>, the Report Server Database is hosted on a separate server from the PBRS. This is recommended to avoid competition for resources (the CPU, memory, and network) between the <a id="calibre_link-1455" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>PBRS and the SQL Server database engine instance required for the Report Server Database. </p>
    <p class="fm-booktitle">Let’s take a look at how to scale out the reference architecture next.</p>
    <h3 id="calibre_link-387" class="heading1">Scale PBRS</h3>
    <p class="fm-booktitle">Both scale-up and scale-out options are<a id="calibre_link-1456" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> available for PBRS deployments. In a scale-up scenario, additional CPU cores can be provisioned via Power BI Premium capacity or an existing SQL Server Enterprise Edition with Software Assurance agreement. </p>
    <p class="fm-booktitle">For example, if 16 cores were obtained via Power BI Premium P2 SKU, an additional 8 cores could be purchased via a P1 SKU. Additionally, particularly if import mode Power BI datasets are used, additional RAM can be installed on the report servers. </p>
    <p class="fm-booktitle">In a scale-out deployment, multiple instances of PBRS are installed on separate machines. These instances share the same Report Server Database and serve as a single logical unit exposed to business users via the web portal.</p>
    <p class="fm-booktitle"><em class="italic">Figure 12.15</em> shows a diagram of a scale-out deployment. Business user report requests are distributed between two different instances of PBRS via a network load balancer:</p>
    <figure class="mediaobject"> <img src="images/000091.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.15: Scale-out PBRSes</p>
    <p class="fm-booktitle">Servers can be added or removed from a scale-out deployment. In addition to supporting more users and greater usage, scale-out deployments also increase the resiliency of the deployment. </p>
    <p class="fm-booktitle">To avoid a single point of<a id="calibre_link-1457" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> failure, the scale-out deployment of the report servers can be coupled with high availability features for the Report Server Database, such as SQL Server Always On availability groups or a failover cluster. Additional information on configuring Always On availability groups with a Report Server Database is <a id="calibre_link-1633" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>available via the following URL: <a href="http://bit.ly/2rLtSqY" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2rLtSqY</span></a>.</p>
    <p class="fm-booktitle">We will now cover the basics of installing PBRS.</p>
    <h1 id="calibre_link-388" class="heading">Installing and upgrading PBRS</h1>
    <p class="fm-booktitle">Once capacity (cores) to <a id="calibre_link-1446" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>deploy PBRS have been obtained, teams can prepare to install and configure the environment by downloading the report server<a id="calibre_link-1460" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> software and the version of Power BI Desktop optimized for PBRS.</p>
    <p class="fm-booktitle">Both the report server installation software and the report server version of Power BI Desktop can&nbsp;be downloaded from Microsoft at the following link: <a href="https://powerbi.microsoft.com/en-us/report-server/" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://powerbi.microsoft.com/en-us/report-server/</span></a>. Clicking the <strong class="screentext">Advanced download options</strong> link on that page transports the user to the most current release of PBRS available in the Microsoft Download Center. </p>
    <p class="fm-booktitle">Clicking the large <a id="calibre_link-1461" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a><strong class="screentext">Download</strong> button presents the <a id="calibre_link-1447" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>option to download three different files, as shown in <em class="italic">Figure 12.16</em>:</p>
    <figure class="mediaobject"><img src="images/000102.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.16: Downloading PBRSes</p>
    <p class="fm-booktitle">Referring to <em class="italic">Figure 12.16</em>, the <strong class="screentext">PowerBIReportServer.exe</strong> file is the file for installing PBRS, while the <strong class="screentext">PBIDesktopRS.msi</strong> and <strong class="screentext">PBIDesktopRS_x64.msi</strong> files are for downloading the Power BI Desktop application optimized for PBRS (either 32-bit or 64-bit respectively).</p>
    <p class="fm-booktitle">System requirements for running PBRS can change over time, so it is recommended that you expand the <strong class="screentext">System Requirements</strong> section and ensure that the target system meets the necessary minimum requirements for running PBRS. </p>
    <p class="fm-booktitle">For PBRS, an operating system of Windows Server 2016 or later is required, as is 1 GB of RAM, 1 GB of available hard-disk space, and a 64-bit processor with a clock speed of 1.4 GHz or higher. 4 GB of RAM and a 64-bit processor with a 2.0 GHz or a faster clock speed is recommended. Additional hard disk space is required on the database server hosting the Report Server Database.</p>
    <p class="fm-booktitle">Detailed instructions for installing and configuring PBRS can be found here: <a href="https://bit.ly/36uTWLS" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/36uTWLS</span></a>. However, prior to installing PBRS, you must have the necessary installation key, which we will cover next.</p>
    <h2 id="calibre_link-389" class="calibre9">Retrieve the PBRS product key</h2>
    <p class="fm-booktitle">If a Power Premium capacity has been purchased, the PBRS product key can be retrieved from the<a id="calibre_link-1451" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Power BI admin portal. The Power BI admin portal can be accessed by either an Office 365 global administrator or a user assigned to the Power BI service administrator role. </p>
    <p class="fm-booktitle">For these users, a link to the <strong class="screentext">Admin portal</strong> is exposed from the gear icon in the top-right corner of the Power BI service, as shown in <em class="italic">Figure 12.17</em>:</p>
    <figure class="mediaobject"><img src="images/000112.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.17: Admin portal</p>
    <p class="fm-booktitle">Note that depending on the browser display settings and window size, three dots (<strong class="screentext">…</strong>) may be displayed next to the user’s profile image in the upper-right corner of the window. Clicking the ellipsis exposes a <strong class="screentext">Settings</strong> menu, which in turn displays the Admin portal link, as shown in <em class="italic">Figure 12.18</em>:</p>
    <figure class="mediaobject"><img src="images/000122.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.18: Admin portal alternate path</p>
    <p class="fm-booktitle">Once in the <strong class="screentext">Admin portal</strong>, choose <strong class="screentext">Capacity settings</strong> and then click on the <strong class="screentext">Power BI Report Server key</strong> link, as shown in <em class="italic">Figure 12.19</em>:</p>
    <figure class="mediaobject"><img src="images/000133.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.19: Admin portal alternate path</p>
    <p class="fm-booktitle">Once your PBRS<a id="calibre_link-1452" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> instance has been installed and configured, the PBRS instance needs to be maintained over time as new PBRS versions are released approximately every 4 months. Thus, we will look at considerations regarding upgrade cycles next.</p>
    <h2 id="calibre_link-390" class="calibre9">Upgrade cycles </h2>
    <p class="fm-booktitle">A new version of the PBRS is<a id="calibre_link-1458" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> released approximately every 4 months with release months typically being January, May, and September. </p>
    <p class="fm-booktitle">For example, the May 2021 release was followed by a September 2021 version, which in turn was followed by a January 2022 release. Security and critical updates are available for the prior version until the next release. After the next release, security updates are only provided for prior versions and only for 1 year after the initial release. In other words, for the three releases cited previously, their support end dates will be May 2022, September 2022, and January 2023 respectively.</p>
    <p class="fm-booktitle">Therefore, enterprise organizations wishing to remain compliant with Microsoft support would be required to update their PBRS instances a minimum of once a year. The upgrade cycle is one of the reasons for choosing the Power BI service since this process is managed by Microsoft within the Power BI service. </p>
    <p class="fm-booktitle">For example, new features are automatically added to the Power BI service each month, and users can update to the latest release of Power BI Desktop automatically via the Windows Store in Windows 10 operating systems. </p>
    <p class="fm-booktitle">The main reason PBRS is not released more frequently, such as every 2 months, is that most IT organizations will not want to upgrade their BI environments more than three to four times per year. Some organizations are expected to skip one or two of the releases per year to coincide with their internal upgrade policies and schedules.</p>
    <p class="fm-booktitle">With each release<a id="calibre_link-1459" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of PBRS, a new version of the Power BI Desktop optimized for this version of the PBRS is also released. This is a distinct application from the Power BI Desktop application, which can be downloaded directly from PowerBI.com and is described more fully in the following section.</p>
    <p class="fm-booktitle">To avoid report rendering errors, it’s strongly recommended that you synchronize the deployment of the PBRS with its associated version of the Power BI Desktop. For example, once an upgrade to the January 2022 version of PBRS is complete, the January 2022 version of Power BI Desktop optimized for the PBRS should be installed on users’ machines.</p>
    <p class="fm-booktitle">We will now look at the Power BI Desktop application optimized for PBRS.</p>
    <h1 id="calibre_link-391" class="heading">PBRS client applications</h1>
    <p class="fm-booktitle">As mentioned in<a id="calibre_link-1437" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the previous section, a version of the Power BI Desktop application optimized for PBRS is made available with each release of <a id="calibre_link-1278" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>PBRS. </p>
    <p class="fm-booktitle">As shown in the <em class="italic">Installing and upgrading PBRS</em> section earlier, a <strong class="screentext">PowerBIDesktopRS_x64.msi</strong> file is also available for download when downloading PBRS. This is the application used to create the Power BI reports to be published to that specific version of PBRS.</p>
    <p class="fm-booktitle">When running the report server optimized version of Power BI Desktop, the version is displayed in the title bar in parentheses, such as <strong class="screentext">(January 2022)</strong>. In addition, the <strong class="screentext">Save as</strong> menu displays an option for PBRS, as shown in <em class="italic">Figure 12.20</em>: </p>
    <figure class="mediaobject"><img src="images/000144.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.20: Power BI Desktop optimized for PBRS</p>
    <p class="fm-booktitle">As suggested by the <strong class="screentext">Save as</strong> menu in the preceding screenshot, a report created via the PBRS optimized application can be saved directly to the report server. In other words, a <code class="inlinecode">.PBIX</code> file doesn’t necessarily have to be saved to a user’s machine&mdash;the PBRS can serve as a network file share. If a report needs to be modified, the user (with a Power BI Pro license) could open<a id="calibre_link-1438" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the file directly from the web portal and save their changes back to the report server.</p>
    <p class="fm-booktitle">It is possible to run<a id="calibre_link-1279" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> both the regular Power BI Desktop application and the optimized report server version at the same time.</p>
    <h2 id="calibre_link-392" class="calibre9">Running desktop versions side by side</h2>
    <p class="fm-booktitle">It’s possible to install and<a id="calibre_link-1280" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> run both versions of Power BI Desktop (the standard and Report Server optimized) on the same machine. This can be useful in organizations deploying reports to both the Power BI service and PBRS.</p>
    <p class="fm-booktitle">For example, the standard Power BI Desktop application could be used to create a new report for a workspace in the Power BI service, which utilizes the very latest features. The report server optimized version, however, would be used to create or edit reports that are deployed to a PBRS instance.</p>
    <p class="fm-booktitle">As an alternative to running both applications side by side, an organization could choose to exclusively use the PBRS-optimized version of Power BI Desktop for reports published to both the Power BI service and PBRS. This single-application approach could simplify the management of the overall deployment but would prevent the utilization of the latest features <a id="calibre_link-2120" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>available in the standard version of Power BI Desktop. </p>
    <p class="fm-booktitle">Next, we will look at the mobile version of Power BI and how it can be used with PBRS.</p>
    <h2 id="calibre_link-393" class="calibre9">Power BI mobile applications</h2>
    <p class="fm-booktitle">The same<a id="calibre_link-1281" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Power BI mobile applications for the iOS, Android, and Windows platforms, which are used to access content published to the Power BI service, can also be used with PBRS. As shown in <em class="italic">Figure 12.21</em>, the user has opened the <strong class="screentext">Settings</strong> menu via the global navigation button (<strong class="screentext">≡</strong>) to connect to a report server:</p>
    <figure class="mediaobject"><img src="images/000155.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 12.21: Power BI mobile app: Settings</p>
    <p class="fm-booktitle">Referring to <em class="italic">Figure 12.21</em>, clicking <strong class="screentext">Connect to server</strong> opens a page to enter the report server address and optionally provide a friendly name for the server, such as <strong class="screentext">AdWorks Report Server</strong>. The server address entered should follow one of two formats:</p>
    <p class="fm-booktitle"><code class="inlinecode">http://&lt;servername&gt;/reports</code></p>
    <p class="fm-booktitle"><code class="inlinecode">https://&lt;servername&gt;/reports</code></p>
    <p class="fm-booktitle">The connection between the mobile application and the report server can be created by opening a port in the firewall, being on the same network (or VPN), or through a Web Application Proxy from outside the organization. Information on how to configure OAuth authentication via Web Application Proxy is available at the following URL <a href="http://bit.ly/2EepW4J" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2EepW4J</span></a>.</p>
    <p class="fm-booktitle">Regardless<a id="calibre_link-2121" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of the platform (iOS or Android), up to five concurrent connections can be created for different report servers. Each report server connection appears in the <strong class="screentext">Settings</strong> menu. Additionally, the <strong class="screentext">Favorites</strong> menu displays reports and content marked as favorites, whether that content is hosted on PBRS or in the Power BI service.</p>
    <p class="fm-booktitle">From a business user or consumption standpoint, the mobile layout and mobile optimizations described in the <em class="italic">Mobile optimized reports</em> section of <em class="italic">Chapter 8</em>, <em class="italic">Applying Advanced Analytics</em>, are reflected in Power BI reports accessed from the Power BI mobile app.</p>
    <h1 id="calibre_link-394" class="heading">Summary</h1>
    <p class="fm-booktitle">This chapter introduced paginated reports for Power BI both within the Power BI service and on-premises only via the PBRS. While the support of paginated reports in the Power BI service has greatly reduced the need for PBRS in many organizations, there are still use cases where a fully on-premises solution for reporting is required. </p>
    <p class="fm-booktitle">Key topics covered in this chapter were migrating <strong class="screentext">Report Description Language</strong> (<strong class="screentext">RDL</strong>) files to the Power BI service, the feature differences between PBRS and the Power BI service, and the overall planning, scaling, and upgrading of PBRS.</p>
    <p class="fm-booktitle">In the next chapter, we focus on the distribution of published content to end users. This includes the delivery and management of packages of related Power BI content to large groups of users via Power BI Apps as well as other content delivery capabilities of the Power BI service such as data-driven alerts and scheduled email subscriptions. </p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-1874">
<div id="calibre_link-2122" class="calibre2">
<div id="calibre_link-2123" class="calibre3"><div id="calibre_link-2124" class="calibre4">
    <h1 class="heading">13</h1>
    <h1 id="calibre_link-395" class="mainheading">Creating Power BI Apps and Content Distribution</h1>
    <p class="fm-booktitle">This chapter walks through all facets of Power BI apps as the primary method for distributing content to groups of users. Given the current one-to-one relationship between apps and workspaces, you are advised to review <em class="italic">Chapter 10</em>, <em class="italic">Managing Application Workspaces and Power BI Content</em>, prior to this chapter. </p>
    <p class="fm-booktitle">Additional content distribution and consumption methods including email subscriptions, SharePoint Online embedding, data-driven alerts, and Analyze in Excel are also described in this chapter. The distribution methods available in Power BI Report Server and the technical details of integrating Power BI content into custom applications are outside the scope of this chapter. </p>
    <p class="fm-booktitle">In this chapter, we will review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">Content distribution methods</li>
      <li class="bulletlist">Power BI apps</li>
      <li class="bulletlist">Sharing content</li>
      <li class="bulletlist">Embedding</li>
      <li class="bulletlist">Data alerts</li>
      <li class="bulletlist">Email subscriptions</li>
      <li class="bulletlist">Analyze in Excel</li>
      <li class="bulletlist">Self-service BI workspaces</li>
    </ul>
    <p class="fm-booktitle">We’ll start with an overview of methods for distributing content in Power BI.</p>
    <h1 id="calibre_link-396" class="heading">Content distribution methods</h1>
    <p class="fm-booktitle">Content distribution<a id="calibre_link-669" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> refers to the sharing and distribution of artifacts that result from Power BI projects. Sharing reporting artifacts is a balance of ease of access, discoverability, security, and general data governance. </p>
    <p class="fm-booktitle">As a result, there are multiple different ways to share reports, datasets, and other content. Some of these methods, like Power BI apps, focus heavily on read-only reports and centralization. Others, like self-service workspaces, focus more on collaboration and editing. In fact, one of the main value propositions of Power BI is the ability of users to access relevant analytical content in a manner and context that’s best suited to their needs. </p>
    <p class="fm-booktitle">For example, many read-only users may log in to the Power BI service to view dashboards or reports contained within Power BI apps that are specific to their role or department. Other users, however, may only receive snapshot images of reports and dashboards via email subscriptions or respond to data alert notifications on their mobile devices. In other scenarios, certain users may analyze a dataset hosted in Power BI from an Excel workbook, while other users could observe a Power BI report embedded within a SharePoint team site. </p>
    <p class="fm-booktitle">Organizations can choose to distribute or expose their Power BI content hosted in the Power BI service via a single method or a combination of various different methods. The following table summarizes eleven different methods<a id="calibre_link-670" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of content distribution and data access: </p>
    <table id="calibre_link-2125" class="table-container">
      <tbody class="calibre16">
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">#</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Method</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Summary</strong></p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">1</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Power BI apps</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">A group of related dashboards, scorecards, Power BI reports, paginated reports, and Excel reports within a workspace</li>
              <li class="bulletlist">The app can be published to the security groups of users, enabling wide distribution</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">2</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Embed in custom applications</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">Power BI content is embedded in a custom application or a separate service from Power BI</li>
              <li class="bulletlist">Dedicated capacity is required to host embedded content (Power BI Premium or embedded)</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">3</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Share reports and dashboards</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">An individual report or paginated report can be shared with a user or a group of users</li>
              <li class="bulletlist">A dashboard and its underlying reports are shared with a user or a group of users</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">4</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Embed in SharePoint Online</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">A Power BI report is embedded in a SharePoint Online site page via the Power BI web part</li>
              <li class="bulletlist">Power BI Pro licenses, the Power BI Premium capacity, or embed licenses can be used to license site users</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">5</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Email subscriptions</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">Subscriptions are configured for dashboards or individual pages of reports</li>
              <li class="bulletlist">Users receive recurring emails with snapshot images of updated dashboards or report pages</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">6</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Data alerts</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">Alerts are configured for dashboard tiles in the Power BI service or mobile applications</li>
              <li class="bulletlist">Users receive notifications when the alert conditions are triggered</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">7</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Publish to web</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">A report is made available via a publicly accessible URL or embedding in a website</li>
              <li class="bulletlist">Insecure; anyone with the URL can view the report</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">8</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Analyze in Excel</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">Users with Power BI Pro licenses can connect to Power BI datasets via Excel</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">9</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Live connections in Power BI Desktop</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">Users with Power BI Pro licenses can connect to Power BI datasets from Power BI Desktop</li>
              <li class="bulletlist">Users have the option of publishing new report files back to the Power BI service</li>
            </ul>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">10</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Microsoft Teams integration</p>
          </td>
          <td class="table-cell">
            <ul class="calibre10">
              <li class="bulletlist">A Power BI report is added as a tab in Microsoft Teams</li>
              <li class="bulletlist">Power BI Pro licenses, the Power BI Premium capacity, or embedded licenses can be used to license site users</li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="fm-acknowledgement">Table 13.1: Power BI content distribution methods</p>
    <p class="fm-booktitle">The most common corporate BI distribution methods<a id="calibre_link-671" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> for supporting large numbers of users are the first two methods listed in <em class="italic">Table 13.1</em>: Power BI apps and embedding Power BI content into custom applications. Several other methods, however, are useful for small-scale and self-service scenarios, such as Analyze in Excel as well as supplements to larger Power BI solutions. Additionally, email subscriptions, data alerts, and embedding options for SharePoint Online and Microsoft Teams help bring analytical data to wherever the user works.</p>
    <p class="fm-booktitle">The Power BI mobile application<a id="calibre_link-672" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> aligns with and supports several of the primary distribution methods, including Power BI apps, the sharing of dashboards and reports, and data alerts. Examples of the relationship between the Power BI service, Power BI mobile, and other Microsoft applications and services are included in the following sections.</p>
    <p class="fm-booktitle">Let’s now take a closer look at Power BI apps.</p>
    <h1 id="calibre_link-397" class="heading">Power BI apps</h1>
    <p class="fm-booktitle">A Power BI app<a id="calibre_link-1342" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is a published collection of content from a workspace. An app can include all or a subset of the dashboards, scorecards, reports, and Excel workbooks within a single workspace. </p>
    <p class="fm-booktitle">There is currently a one-to-one relationship between apps and workspaces such that each workspace can only have a single associated app, and an app’s content can only come from a single workspace. This limitation has caused organizations to create and manage more workspaces than they would like in order to isolate app content to different groups. Given the customer feedback for this issue, a new feature is planned for later in 2022 that will allow a single workspace to support multiple app versions for different consumer groups.</p>
    <p class="fm-booktitle">Just as workspaces are intended for the creation and management of Power BI content, apps are intended for the distribution of that content to groups of users. Once granted permission to an app, users can view the contents of the app within the Power BI service or via Power BI mobile applications.</p>
    <p class="fm-booktitle">Power BI apps should be the primary method of content consumption within organizations, so let’s discuss how apps are licensed.</p>
    <h2 id="calibre_link-398" class="calibre9">Licensing apps</h2>
    <p class="fm-booktitle">Apps are particularly well suited<a id="calibre_link-1347" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to large, corporate BI deployments that support the reporting and analysis needs of many users. This is because apps provide a centralized method of content distribution for a workspace where app creators can customize the navigation of content, as well as including additional links and information, such as links to supporting information and contacts for questions about the app. In addition, apps also provide a superior user interface and user experience versus navigating to and viewing many different individual reports, dashboards, and other content.</p>
    <p class="fm-booktitle">There are three primary mechanisms for licensing apps:</p>
    <ul class="calibre10">
      <li class="bulletlist">Power BI Pro</li>
      <li class="bulletlist">Power BI <strong class="screentext">Premium Per User</strong> (<strong class="screentext">PPU</strong>)</li>
      <li class="bulletlist">Power BI Premium capacity</li>
    </ul>
    <p class="fm-booktitle">In most of these scenarios, the great<a id="calibre_link-1348" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> majority of users only need to view certain reports or dashboards and don’t require the ability to edit or create any content like Power BI Pro users.</p>
    <p class="fm-booktitle">For example, a salesperson within the northwest region of the United States may only briefly access a few dashboards or reports 2&ndash;3 times per week and occasionally interact with this content, such as via slicer visuals. With the source workspace of the app hosted in the Power BI Premium capacity, these read-only users can be assigned Power BI Free licenses yet still be allowed to access and view published apps. Additionally, Power BI Free licensed users can be granted the ability to connect to the datasets used by the reports in the published app from client applications like Power BI Desktop and Excel. </p>
    <p class="fm-booktitle">In the absence of the Power BI Premium capacity, a Power BI Pro license is required for each user that needs to access the app. In small-scale scenarios, such as when organizations are just getting started with Power BI, purchasing Power BI Pro licenses for all users can be more cost-effective than Power BI Premium capacities. </p>
    <p class="fm-booktitle">However, at a certain volume of users, the Power BI Premium capacity becomes a much more cost-efficient licensing model. For example, once an organization exceeds approximately 500 Power BI Pro licenses, the Power BI Premium capacity should be considered as a potential way to save on licensing costs.</p>
    <p class="fm-booktitle">For organizations that desire some of the additional features of Premium capacities, Power BI PPU licenses can also be an alternative to the Premium capacity. However, once an organization exceeds approximately 250 PPU licenses, the Power BI Premium capacity can potentially save those organizations money.</p>
    <p class="fm-booktitle">The same licensing considerations apply to users outside of the organization. If the Premium capacity is used, these external users do not require a Pro or PPU license to view the content. However, if the Premium capacity is not used, these external users require a Pro or PPU license assigned by their organization.</p>
    <p class="fm-booktitle">Power BI Premium and PPU licenses<a id="calibre_link-2126" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> enable many additional features intended to support enterprise deployments. The details of provisioning and managing Power BI Premium capacity are described in <em class="italic">Chapter 15</em>, <em class="italic">Scaling with Power BI Premium</em>.</p>
    <p class="fm-booktitle">Let’s look at the deployment process for Power BI apps next.</p>
    <h2 id="calibre_link-399" class="calibre9">App deployment process</h2>
    <p class="fm-booktitle">The app deployment process<a id="calibre_link-1343" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> simply refers to the manner in which an app<a id="calibre_link-515" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is created and distributed to users. A Power BI app is published from a workspace and inherits the name of its source workspace. </p>
    <p class="fm-booktitle">As mentioned previously, an app can only contain content from its source workspace. However, an app does not have to expose all the content of its source workspace. The members of the workspace responsible for publishing and updating the app can utilize the <strong class="screentext">Include in app</strong> toggle switch to selectively exclude certain dashboards or reports.</p>
    <p class="fm-booktitle">For example, two new reports that have yet to be validated or tested could be excluded from the app in its initial deployment. Following the validation and testing, the <strong class="screentext">Include in app</strong> property (on the far right of each report and dashboard when viewing a workspace, as shown in <em class="italic">Figure 13.1</em>) can be enabled and the app can be updated, thus allowing users access to the new reports: </p>
    <figure class="mediaobject"><img src="images/000166.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.1: Include in app property</p>
    <p class="fm-booktitle">The one-to-one relationship<a id="calibre_link-2127" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> between workspaces and apps underscores the importance of planning for the scope of a workspace<a id="calibre_link-2128" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and providing a user-friendly name aligned with this scope. Too narrow a scope could lead to users needing to access many different apps for relevant reports and dashboards. Alternatively, too broad a scope could make it more difficult for users to find the reports and dashboards they need within the app. Additionally, the workspace and app-update process could become less manageable. </p>
    <p class="fm-booktitle">A simple publish (or update) process is available within the workspace for defining the users or groups who can access the app as well as adding a description and custom navigation, and choosing a default landing page for users of the app. The details of the publish process are included in the <em class="italic">Publishing apps</em> section.</p>
    <p class="fm-booktitle"><em class="italic">Figure 13.2</em> and the supporting five-step process describe the essential architecture of apps and workspaces:</p>
    <figure class="mediaobject"><img src="images/000178.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.2: App deployment process</p>
    <p class="fm-booktitle">An example of using this deployment process is a Global Sales app being accessed by a sales team consisting of 200 users, as per the <em class="italic">Sample Power BI project template</em> section of <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>. Additionally, the row-level security roles described in <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, and the organizational dashboard architecture reviewed in <em class="italic">Chapter 9</em>, <em class="italic">Designing Dashboards</em>, would be utilized by such an app.</p>
    <p class="fm-booktitle">The deployment process involves five steps, as noted in <em class="italic">Figure 13.2</em> and described below:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">One or more workspaces<a id="calibre_link-1344" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> are created in the Power BI service, and dataset<a id="calibre_link-516" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> modelers and report designers are added as workspace members with edit rights to the workspace(s). Individual members and Microsoft 365 groups can be added to workspaces.</li>
      <li class="calibre13">Members of the workspace publish datasets, scorecards, reports, and Excel workbooks to the given workspace and create dashboards based on the reports. Power BI Desktop is used to author and publish datasets and reports based on a Live connection to the published datasets. Visuals from the published reports are pinned to dashboards, such as European Sales. However, dashboards are not required to publish an app and neither are scorecards or Excel workbooks.<p class="normal1">It should be noted that Power BI reports can access datasets via Live connections even if those datasets are contained in a separate workspace, which is often a best practice employed by organizations to maintain security and the separation of duties. This requires a specific Power BI tenant setting to be enabled, which is discussed in further detail in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>.</p>
      </li>
      <li class="calibre13">Scheduled data refresh or dashboard cache refresh schedules are configured, and the workspace content is validated. In this example, an import mode dataset is used, and thus, the dashboards and reports are updated when the scheduled refresh completes.</li>
      <li class="calibre13">A workspace administrator or a member with edit rights publishes an app from the workspace. The app is distributed to one or multiple users and/or Microsoft 365 groups, Azure AD security groups, or Azure AD mail-enabled security groups.</li>
      <li class="calibre13">Members of the sales team view and optionally interact with the content in the Power BI service and/or Power BI mobile applications. The dashboards and reports reflect the row-level security roles configured in the dataset.</li>
    </ol>
    <p class="fm-booktitle">Certain sales team users requiring Power BI Pro features, such as Analyze in Excel, could utilize the Power BI app as well. Additional content access methods exclusive to Power BI Pro users, such as email subscriptions to dashboards and reports, are described later in this chapter.</p>
    <p class="fm-booktitle">As organizations are generally keen on making certain that sensitive business information is secure, let’s take a closer look at the security and user permissions for apps.</p>
    <h2 id="calibre_link-400" class="calibre9">User permissions and security</h2>
    <p class="fm-booktitle">BI teams distributing<a id="calibre_link-1360" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Power BI content via<a id="calibre_link-1354" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> apps have three layers of control for granting users permission to view the app’s dashboards and reports. The first layer is control over which users or groups of users should be able to access the app after publishing in the Power BI service. Remember that Microsoft 365 groups, Azure AD security groups, and mail-enabled Azure AD security groups can all be assigned access to apps.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 13.3</em>, a security group from Azure AD (<strong class="screentext">Sales</strong>) is specified when publishing the workspace as an app:</p>
    <figure class="mediaobject"><img src="images/000188.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.3: Publishing an app to a security group</p>
    <p class="fm-booktitle">In this example, a Power BI user must be included in the <strong class="screentext">Sales</strong> security group to see and access the app. The user who published the app is also automatically granted permission to the app. </p>
    <p class="fm-booktitle">Additionally, as per the <strong class="screentext">Install this app automatically</strong> checkmark, the published<a id="calibre_link-1355" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> app will be automatically<a id="calibre_link-1361" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> installed for members of the <strong class="screentext">Sales</strong> security group. These users will be able to access the installed app via the <strong class="screentext">Apps</strong> menu item in the left navigation menu of the Power BI service.</p>
    <p class="fm-booktitle">The <strong class="screentext">Install this app automatically</strong> option, as well as the option to grant access to the <strong class="screentext">Entire organization</strong>, only appears if specific tenant settings are enabled in the Power BI <strong class="screentext">Admin portal</strong>. Specifically, a Power BI admin can enable the <strong class="screentext">Push apps to end users</strong> setting and/or <strong class="screentext">Publish content packs and apps to the entire organization</strong>, respectively, in the <strong class="screentext">Tenant settings</strong> page for an entire organization or for specific security groups of users. </p>
    <p class="fm-booktitle">Microsoft recommends that apps should only be pushed to users during off-hours and that teams should verify the availability of the app prior to communicating to a team that the published app is available. The configuration of <strong class="screentext">Tenant settings</strong> in the Power BI admin portal is described in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>.</p>
    <p class="fm-booktitle">The second layer of control is the available options shown under the <strong class="screentext">Allow everyone who has app access to</strong> heading. Here, app publishers can control whether or not app users have the ability to build new reports from the underlying datasets of the app, copy reports within the app, and share the app with other users. In most enterprise scenarios, all three of these options should be disabled in order to prevent unintended individuals from accessing the app as well as the creation of unofficial reports. Build permission, which is the ability to create new reports against an existing dataset, can be granted to report authors and self-service report authors via the <strong class="screentext">Manage Permissions</strong> page for the source dataset in the workspace of the source dataset.</p>
    <p class="fm-booktitle">The third layer<a id="calibre_link-1643" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of control is the <strong class="screentext">row-level security</strong> (<strong class="screentext">RLS</strong>) roles configured for the dataset supporting the reports and dashboards. If RLS is defined within the dataset, all users accessing the app should be mapped to one of the RLS roles in the Power BI service. </p>
    <p class="fm-booktitle">Included in this third layer is <strong class="screentext">object-level security</strong> (<strong class="screentext">OLS</strong>). Since RLS simply filters data<a id="calibre_link-1162" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> rows, users without access can still potentially see that certain tables and columns exist in the dataset. In contrast, OLS completely hides the tables and columns from users that do not have access to this information. </p>
    <p class="fm-booktitle">Note that OLS cannot be configured within Power BI Desktop, but rather must be implemented using tools such as Tabular Editor. Also, be aware that using columns secured by OLS directly in visualizations will break those visuals for users that do not have access to those columns.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 13.4</em>, another Azure AD <a id="calibre_link-1362" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>security group (<strong class="screentext">Admin</strong>) is being mapped<a id="calibre_link-1356" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to the <strong class="screentext">Europe Sales Group</strong> RLS role:</p>
    <figure class="mediaobject"><img src="images/000198.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.4: Dataset security role assignment</p>
    <p class="fm-booktitle">This dialog is accessed via a dataset’s <strong class="screentext">Security</strong> setting, which is accessed from the three vertical dots menu when viewing the content of a workspace, as shown in <em class="italic">Figure 13.5</em>:</p>
    <figure class="mediaobject"><img src="images/000207.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.5: Security menu option for datasets</p>
    <p class="fm-booktitle">Thus, in this example, the user accessing<a id="calibre_link-1363" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and consuming the app must<a id="calibre_link-1357" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> be a member of both the <strong class="screentext">Sales</strong> security group and one or more of the security groups assigned to an RLS role. If the user is only a member of the <strong class="screentext">Sales</strong> security group, the visuals of the dashboard and report will not render. </p>
    <p class="fm-booktitle">With the three distinct levels of security and permission controls understood, let’s take a look at actually publishing an app next.</p>
    <h2 id="calibre_link-401" class="calibre9">Publishing apps</h2>
    <p class="fm-booktitle">Apps are published<a id="calibre_link-1349" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> from app workspaces in the following way:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">A workspace member with edit rights clicks the <strong class="screentext">Create app</strong> button in the top-right corner<a id="calibre_link-2129" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of the workspace. Three pages are launched for configuring the app: <strong class="screentext">Setup</strong>, <strong class="screentext">Navigation</strong>, and <strong class="screentext">Permissions</strong>. </li>
      <li class="calibre13">On the <strong class="screentext">Setup</strong> page, an <strong class="screentext">App name</strong> and a short <strong class="screentext">Description</strong> of the app are entered, such as in the following example:<figure class="mediaobject"><img src="images/000217.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 13.6: Setup page when publishing an app</p>
      </li>
      <li class="calibre13">As shown in <em class="italic">Figure 13.6</em>, in addition to the <strong class="screentext">App name</strong> and <strong class="screentext">Description</strong>, the <strong class="screentext">Support site</strong>, <strong class="screentext">App logo</strong>, <strong class="screentext">App theme color</strong>, and <strong class="screentext">Contact Information</strong> (not shown) properties<a id="calibre_link-1350" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can also be configured for the app. </li>
      <li class="calibre13">On the <strong class="screentext">Navigation</strong> page, customize the navigation with custom sections and links to dashboards, reports, scorecards, and Excel workbooks:<figure class="mediaobject"><img src="images/000227.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 13.7: App Navigation page</p>
        <p class="normal1">In <em class="italic">Figure 13.7</em>, four sections (<strong class="screentext">Global Sales</strong>, <strong class="screentext">North America Sales</strong>, <strong class="screentext">Europe Sales</strong>, and <strong class="screentext">Pacific Sales</strong>) have been<a id="calibre_link-1351" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> created to group the different sections of the app and help users more easily navigate to content. In this example, users accessing the <strong class="screentext">Global Sales</strong> app will land on the <strong class="screentext">Global Sales</strong> (dashboard) by default since this is first in the <strong class="screentext">Navigation</strong> list. </p>
        <p class="normal1">The <strong class="screentext">Navigation</strong> page also provides a consolidated view of the dashboards, reports, scorecards, and Excel workbooks that are included in the app given the current settings. In the event that any content has been included that shouldn’t be, the user can navigate to this item in the workspace and disable the <strong class="screentext">Include in app</strong> property. </p>
        <p class="normal1">By default, the <strong class="screentext">Include in app</strong> property for new dashboards, reports, scorecards, and Excel workbooks is enabled. Therefore, prior to publishing the app, ensure that this property has been disabled for any internal testing or development content. </p>
        <p class="normal1">In addition to creating custom sections, the <strong class="screentext">New</strong> button also allows the creation of custom links. Custom links can be useful to direct viewers of the app to such things as the external support pages or other content that is not stored in Power BI.</p>
        <p class="normal1">Individual navigation items or entire sections can be moved up and down in the <strong class="screentext">Navigation</strong> list using the up and down arrow icons. In addition, list items can be hidden from the <strong class="screentext">Navigation</strong> list using the circle and arc (eyeball) icon or, alternatively, the <strong class="screentext">Hide from navigation</strong> checkbox.</p>
      </li>
      <li class="calibre13">On the <strong class="screentext">Permissions</strong> page, the users, Microsoft 365 groups, and security groups that should have permission for the app are defined. The <strong class="screentext">Permissions</strong> page was covered in the <em class="italic">User permissions and security</em> section earlier in this chapter.<p class="normal1">Once finished configuring permissions, click the <strong class="screentext">Publish app</strong> button in the lower-right corner of the page. A URL to the app is provided in a window along with a <strong class="screentext">Successfully published</strong> message, as per <em class="italic">Figure 13.8</em>:</p>
        <figure class="mediaobject"><img src="images/000237.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 13.8: Published app</p>
      </li>
    </ol>
    <p class="fm-booktitle">The published app can now be accessed<a id="calibre_link-1352" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> by the users or groups of users defined on the <strong class="screentext">Permissions</strong> page. If the <strong class="screentext">Install this app automatically</strong> option was used, the user or team publishing the app can verify with a few users that the app is now installed and available. </p>
    <p class="fm-booktitle">Depending on the number of items (dashboards, reports, scorecards, and Excel workbooks) included in the app, the automatic installation could take some time. Once the automatic installation is confirmed, an email or other communication can then be sent to advise users of the availability of the published app.</p>
    <p class="fm-booktitle">Viewing the app is an immersive experience. As shown in <em class="italic">Figure 13.9</em>, much of Power BI chrome, such as the left navigation, is replaced with app elements, such as the <strong class="screentext">Navigation</strong> list for the app. The user experience feels very much like the app is a standalone web application versus a page within the Power BI service. This is beneficial as it allows app viewers to focus on the content without distractions or confusion regarding the standard Power BI service features and functionality:</p>
    <figure class="mediaobject"><img src="images/000246.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.9: App</p>
    <p class="fm-booktitle">The following section describes<a id="calibre_link-1353" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the installation of an app if the <strong class="screentext">Install this app automatically</strong> (push apps to end users) feature was not used. </p>
    <h2 id="calibre_link-402" class="calibre9">Installing apps</h2>
    <p class="fm-booktitle">When an app is published<a id="calibre_link-1345" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and not pushed to end users via the <strong class="screentext">Install this app automatically</strong> feature described in the previous section, a one-time install per user is necessary. This install can be completed by either sharing the URL for the app with users or by instructing users to add the app to the Power BI service.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 13.10</em>, a user has logged into the Power BI service and clicked <strong class="screentext">Get apps</strong> from the <strong class="screentext">Apps</strong> menu to observe the <strong class="screentext">Global Sales</strong> app: </p>
    <figure class="mediaobject"><img src="images/000255.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.10: Installing a Power BI app manually</p>
    <p class="fm-booktitle">Clicking the <strong class="screentext">Get it now</strong> link installs<a id="calibre_link-1346" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the app for the user.</p>
    <p class="fm-booktitle">The <strong class="screentext">Apps</strong> menu can be found in the left navigation pane of the Power BI service. Once on the <strong class="screentext">Apps</strong> menu page, all installed apps are listed. Users can hover over an app, to either mark the app as a favorite or remove the app via the <strong class="screentext">More options</strong> menu, as shown in <em class="italic">Figure 13.11</em>:</p>
    <figure class="mediaobject"><img src="images/000264.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.11: Installed app</p>
    <p class="fm-booktitle">A second option to install the app is to share the URL to the app provided in the Power BI service. As per the <em class="italic">Publishing apps</em> section, this URL is provided in a dialog (<em class="italic">Figure 13.8</em>) when the app is first published. Additionally, this URL<a id="calibre_link-2130" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can be obtained from the <strong class="screentext">Permissions</strong> page when publishing or updating the app, as shown in <em class="italic">Figure 13.12</em>:</p>
    <figure class="mediaobject"><img src="images/000273.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.12: App link</p>
    <p class="fm-booktitle">In the preceding example, a member of the Global Sales app workspace has clicked <strong class="screentext">Update app</strong> from the top-right corner of the workspace and navigated to the <strong class="screentext">Permissions</strong> page. The <strong class="screentext">App link</strong>, as well as other URLs specific to dashboards and reports within the app, is located in the <strong class="screentext">Links</strong> section at the bottom of the page. </p>
    <p class="fm-booktitle">Once the apps are installed and are being used within the organization, it may be necessary to update the app with additional content.</p>
    <h2 id="calibre_link-403" class="calibre9">App updates</h2>
    <p class="fm-booktitle">As new content becomes<a id="calibre_link-1358" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> available within a workspace, it may be necessary to update an app with this new content or remove certain content that has become outdated.</p>
    <p class="fm-booktitle">One of the main advantages of Power BI apps is their isolation from workspaces. The members of the workspace<a id="calibre_link-2131" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can continue to develop, test, and modify content in the app workspace while users only view the latest published app. </p>
    <p class="fm-booktitle">This single level of built-in staging could be a sufficient alternative for some teams and projects relative to the multiple workspaces (Dev, Test, and Prod) involved in a staged deployment life cycle, as described in <em class="italic">Chapter 10</em>, <em class="italic">Managing Application Workspaces and Content</em>.</p>
    <p class="fm-booktitle">After an app has been published, the <strong class="screentext">Publish app</strong> icon in the top-right corner of the workspace is changed to an <strong class="screentext">Update app</strong> icon, as shown in <em class="italic">Figure 13.13</em>:</p>
    <figure class="mediaobject"><img src="images/000282.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.13: Update app</p>
    <p class="fm-booktitle">In <em class="italic">Figure 13.13</em>, the ellipsis (<strong class="screentext">…</strong>) to the left of the <strong class="screentext">Update app</strong> icon has been selected. As shown, three options exist to <strong class="screentext">Endorse this app</strong>, <strong class="screentext">Feature this app on Home</strong>, and <strong class="screentext">Unpublish App</strong>. </p>
    <p class="fm-booktitle">Endorsing apps promotes or certifies an app and can help other users find useful organizational apps. Enterprise BI teams may also wish to feature certain apps on the Power BI service <strong class="screentext">Home</strong> page for users in order to promote and encourage the use of the app. Finally, there may be times when an app should be unpublished and, thus, made unavailable.</p>
    <p class="fm-booktitle">Clicking <strong class="screentext">Update app</strong> launches the same three pages (<strong class="screentext">Setup</strong>, <strong class="screentext">Navigation</strong>, and <strong class="screentext">Permissions</strong>) described<a id="calibre_link-1359" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> in the <em class="italic">Publishing apps</em> section. In the most common update scenarios, such as adding a new report or modifying a dashboard, it’s unnecessary to change any of these settings, and the <strong class="screentext">Update app</strong> icon in the lower-right corner of the page can be clicked a second time. However, these pages enable fundamental modifications to be implemented, including the users or groups with permission to access the app and the <strong class="screentext">Navigation</strong> for the app. </p>
    <p class="fm-booktitle">As previously mentioned, users can view the contents of apps within the Power BI service or via Power BI mobile applications, so let’s look at how apps can be viewed on mobile devices next.</p>
    <h2 id="calibre_link-404" class="calibre9">Apps on Power BI mobile</h2>
    <p class="fm-booktitle">Just like the <strong class="screentext">Apps</strong> menu item<a id="calibre_link-1365" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> in the Power BI service, users can access published Power BI apps from the main menu within Power BI mobile applications. In <em class="italic">Figure 13.14</em>, a user has accessed the <strong class="screentext">Global Sales</strong> app on the Power BI mobile application for Android devices:</p>
    <figure class="mediaobject"><img src="images/000291.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.14: Apps on Power BI mobile</p>
    <p class="fm-booktitle">The user can easily navigate<a id="calibre_link-1366" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to the dashboards and reports contained within the app and take advantage of all the standard mobile features, such as the exclusive ability of the Power BI mobile apps to annotate and share both the annotations and the content with colleagues. Additionally, any mobile optimizations configured by the report authors for the reports and dashboards are also reflected through apps. </p>
    <p class="fm-booktitle">Overall, mobile applications provide the benefit of accessing Power BI content from anywhere using just about any mobile device such as iOS, Android, or Windows phones and tablets. This is important for executives, salespeople, and other consumers that are constantly on the move and require timely analytics.</p>
    <p class="fm-booktitle">Moving on from apps, we can now explore<a id="calibre_link-1367" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> additional content distribution methods, starting with another common distribution method &ndash; the direct sharing of content.</p>
    <h1 id="calibre_link-405" class="heading">Sharing content</h1>
    <p class="fm-booktitle">In addition to Power BI apps, Power BI Pro users<a id="calibre_link-665" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can share individual dashboards, reports, scorecards, and Excel workbooks<a id="calibre_link-1691" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> directly with users, groups, and even guest users from outside the organization. </p>
    <p class="fm-booktitle">For example, unlike a Power BI app built for the sales organization containing several dashboards and many reports, a single dashboard or report could be shared with two or three users in the customer service department. In this scenario, the few customer service department users may have limited or undefined reporting needs, or the corporate BI team may not have a full Power BI app for their department prepared yet.</p>
    <p class="fm-booktitle">Recipients of directly shared content receive the same essential benefits of Power BI apps in terms of easy access as well as the latest updates and modifications to the content. In terms of user access, the <strong class="screentext">Shared with me</strong> menu in the left navigation of the Power BI service provides easy access. The <strong class="screentext">Shared with me</strong> menu option is also available within Power BI mobile applications.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 13.15</em>, the user has accessed the <strong class="screentext">More pages</strong> dialog via the three vertical dots at the bottom of the mobile application:</p>
    <figure class="mediaobject"><img src="images/000300.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.15: Power BI mobile More pages menu</p>
    <p class="fm-booktitle">Recipients of shared content<a id="calibre_link-666" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can also add this content to their list of <strong class="screentext">Favorites</strong> just<a id="calibre_link-1692" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> like Power BI apps. </p>
    <p class="fm-booktitle">The Power BI service gives content owners a properties pane to define the recipients of the shared content and whether the recipients will also be allowed to share the content. This pane can be accessed via the <strong class="screentext">Share</strong> icon in the ribbon menu when viewing the content in the Power BI service.</p>
    <p class="fm-booktitle">Alternatively, as shown in <em class="italic">Figure 13.16</em>, a share icon is also available when viewing the content list of a workspace:</p>
    <figure class="mediaobject"><img src="images/000311.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.16: Sharing action in Power BI service</p>
    <p class="fm-booktitle">The same sharing icon from <em class="italic">Figure 13.16</em> is available for dashboards and scorecards.</p>
    <p class="fm-booktitle">Excel workbooks published to the Power BI service<a id="calibre_link-2132" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> cannot be shared directly. To share a published<a id="calibre_link-2133" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Excel workbook (indirectly), a dashboard can be shared containing a tile that was pinned to the Excel workbook. The user receiving the shared dashboard can access the workbook via the dashboard tile, just like accessing a Power BI report based on a pinned report visual. </p>
    <p class="fm-booktitle">Once the sharing action has been selected, a <strong class="screentext">Send link</strong> dialog is launched to define the recipients who will receive access as well as their permissions. In <em class="italic">Figure 13.17</em>, the <strong class="screentext">European Reseller Sales </strong>report is being shared with specific people, Pamela Hagely and Mike Laning:</p>
    <figure class="mediaobject"><img src="images/000321.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.17: Sharing the report</p>
    <p class="fm-booktitle">Three options exist regarding who content can be shared with. In <em class="italic">Figure 13.18</em>, the <strong class="screentext">Specific people can view</strong> link from <em class="italic">Figure 13.17</em> has been clicked to reveal the three options:</p>
    <figure class="mediaobject"><img src="images/000331.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.18: Who to share with</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 13.18</em>, the sharing link<a id="calibre_link-667" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can work for everyone in the organization, those users with existing<a id="calibre_link-1693" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> access, or specific people that you specify. In addition, as per the checkboxes in <em class="italic">Figure 13.18</em>, the content owner has the option to allow sharing recipients to also share the content with others or allow sharing recipients to build their own content from the underlying dataset. If these boxes are not checked, sharing recipients can only view the content.</p>
    <p class="fm-booktitle">In addition to the <strong class="screentext">Send link</strong> dialog, clicking the ellipses (three dots) shown in the upper-right corner of <em class="italic">Figure 13.17</em> provides access to a <strong class="screentext">Manage permissions</strong> pane. This pane, as shown in <em class="italic">Figure 13.19</em>, displays all the sharing links created for the content as well as those users with direct access to the content via their workspace membership:</p>
    <figure class="mediaobject"><img src="images/000341.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.19: Manage permissions pane</p>
    <p class="fm-booktitle">The <strong class="screentext">Links giving access</strong> can be edited using<a id="calibre_link-668" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the ellipses menu to the right of the <strong class="screentext">Copy</strong> button. Members<a id="calibre_link-1694" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> with edit rights to the workspace containing the shared dashboard or report can manage user access by utilizing the <strong class="screentext">Manage permissions</strong> pane. For example, several days after the report was shared, it may be necessary to add or remove users from the share. Additionally, the ability of recipients to reshare the content can be revoked if this was enabled originally.</p>
    <p class="fm-booktitle">Sharing dashboards<a id="calibre_link-2134" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and reports should only be generated from workspaces<a id="calibre_link-2135" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and not from a user’s private <strong class="screentext">My Workspace</strong>. The workspace allows the workspace members to manage both the content and its distribution and, thus, eliminates a dependency on a single user. </p>
    <p class="fm-booktitle">If content is shared from a user’s <strong class="screentext">My Workspace</strong>, or if the user leaves the organization and their account is removed, their <strong class="screentext">My Workspace</strong> is also removed. This can mean the potential loss of important information and useful analytics. A possible exception to this may be the solicitation of feedback from others on a personal analytics project.</p>
    <p class="fm-booktitle">Let’s now dive a little deeper into how sharing works, starting with an explanation of sharing scopes.</p>
    <h2 id="calibre_link-406" class="calibre9">Sharing scopes</h2>
    <p class="fm-booktitle">When a dashboard is shared, the reports containing<a id="calibre_link-1695" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the visuals pinned to that dashboard are shared as well. The recipient of the shared dashboard can, therefore, access and interact with the underlying reports by clicking the linked dashboard tile(s). </p>
    <p class="fm-booktitle">The ability to share a report directly eliminates the need for the owners of a report to create a dashboard and for the recipients to leverage this dashboard when they only need to access the report. However, recipients of a shared dashboard can still add one or more of the underlying reports as favorites, thus providing the same ease of access as a shared report. Although a single report may be all that’s needed currently, sharing a dashboard provides greater scalability because of the caching of dashboard tiles. </p>
    <p class="fm-booktitle">For example, a shared dashboard may begin with only one report, but visuals from two or three new reports could be pinned to the dashboard, thus granting access to these additional reports. This would negate the need to share each new report individually, and the dashboard could help summarize the reports for the user. When a report is shared, the only option for adding content is to add report pages to the existing report, and this can reduce the usability of the report. </p>
    <p class="fm-booktitle">Let’s now look at the similarities and differences between direct sharing and the use of Power BI apps.</p>
    <h2 id="calibre_link-407" class="calibre9">Sharing versus Power BI apps</h2>
    <p class="fm-booktitle">Just like Power BI apps, either<a id="calibre_link-920" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the Power BI Pro<a id="calibre_link-1364" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> or PPU licenses, as well as the Power BI Premium capacity, can be used to enable user access. In the example from this section, both Pam and Mike could be assigned Power BI Pro licenses to allow both users to view the shared content. </p>
    <p class="fm-booktitle">Alternatively, the workspace<a id="calibre_link-2136" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of the shared content could be assigned to a Power BI Premium<a id="calibre_link-2137" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> capacity, thus allowing Power BI Free users to access the content. The same licensing considerations for external guest users described in the <em class="italic">Licensing apps</em> section apply to sharing dashboards and reports.</p>
    <p class="fm-booktitle">Also, like Power BI apps, the recipients of the shared content need to be mapped to an RLS role if RLS has been configured on the source dataset. Otherwise, the users attempting to access the shared content receive an error message if this mapping is not implemented within the security settings of the dataset, as described in the <em class="italic">User permissions and security</em> section earlier in this chapter. </p>
    <p class="fm-booktitle">Ultimately, Power BI apps provide the best long-term solution for content distribution, particularly for groups of users. Unlike sharing content, any number of new dashboards and reports can be added to Power BI apps as needs grow and change. </p>
    <p class="fm-booktitle">Additionally, as described earlier in this chapter, owners of the workspace can stage and test content prior to republishing the app via the app update process. In the case of shared dashboards and reports, any revision to the shared content is immediately visible to the user(s).</p>
    <p class="fm-booktitle">Let’s move on to the options for distributing content via embedding next.</p>
    <h1 id="calibre_link-408" class="heading">Embedding</h1>
    <p class="fm-booktitle">Embedding refers to the distribution<a id="calibre_link-948" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of Power BI content outside of the Power BI service<a id="calibre_link-664" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and mobile applications such as SharePoint Online, Microsoft Teams, custom applications, and the public internet. In this section, we will cover the separate licensing considerations for embedding as well as four embedding scenarios:</p>
    <ul class="calibre10">
      <li class="bulletlist">Publish to web</li>
      <li class="bulletlist">Secure URL embedding</li>
      <li class="bulletlist">Microsoft 365 apps</li>
      <li class="bulletlist">Custom applications</li>
    </ul>
    <p class="fm-booktitle">In addition to the embedding options covered in this section, it is worth noting that other Microsoft applications<a id="calibre_link-2138" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> also include the ability to embed Power BI content, including Dynamics 365 and Power Apps. Many of these additional embedding scenarios are covered in <em class="italic">Chapter 13 </em>of<em class="italic"> </em><em class="italic">Microsoft Power BI Cookbook, Second Edition</em>.</p>
    <p class="fm-booktitle">Before diving into the four embedding scenarios, it is first important to understand how Power BI content embedding is licensed.</p>
    <h2 id="calibre_link-409" class="calibre9">Licensing embedding</h2>
    <p class="fm-booktitle">Power BI Premium capacity<a id="calibre_link-949" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> isn’t required for embedding reports into SharePoint Online or MS Teams. If the content is not in a Premium workspace, the SharePoint users would need to have Power BI Pro or <strong class="screentext">PPU</strong> licenses. If the content is in a Premium<a id="calibre_link-1534" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> workspace, the SharePoint users only need a fee license.</p>
    <p class="fm-booktitle">Embedding content from Power BI into other applications requires<a id="calibre_link-1774" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the use of at least one of three different <strong class="screentext">stock-keeping units</strong> (<strong class="screentext">SKUs</strong>). These SKUs are referred to as P, EM, and A SKUs.</p>
    <p class="fm-booktitle">P SKUs (P1&ndash;P5) are Premium capacity SKUs primarily intended for enterprises to cost-effectively license large numbers of view-only Power BI users. However, these SKUs also grant the ability to embed Power BI content into Microsoft 365 apps such as SharePoint Online and Microsoft Teams and even custom applications developed by the business for both internal and external use. P SKUs are billed monthly, and the commitment is either monthly or yearly.</p>
    <p class="fm-booktitle">EM SKUs (EM1&ndash;EM3) are specifically designed for smaller organizations using Pro licenses to add embedding capabilities. EM SKUs have lower amounts of memory and processor cores than P SKUs, but they include the same functionality and are also billed monthly although they require a yearly commitment. </p>
    <p class="fm-booktitle">It is a common misconception that EM SKUs do not grant the ability to embed Power BI content for external customers. The only differences in terms of embedding between P SKUs and EM SKUs are the cost of the license, commitment length, and resources provisioned.</p>
    <p class="fm-booktitle">A SKUs (A1&ndash;A8) are specifically designed for <strong class="screentext">independent software vendors</strong> (<strong class="screentext">ISVs</strong>) to include Power BI content within their custom applications. As such, the A SKUs do not grant the right to embed content within the organization, in Microsoft 365 apps, or via secure URL embedding. A SKUs also differ in that they are billed hourly and can be paused and resumed to avoid charges.</p>
    <p class="fm-booktitle">While additional licensing<a id="calibre_link-950" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is required for most embedding scenarios, it is not required for <strong class="screentext">Publish to web</strong>.</p>
    <h2 id="calibre_link-410" class="calibre9">Publish to web</h2>
    <p class="fm-booktitle">If enabled by the Power BI<a id="calibre_link-956" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> administrator, reports in the Power BI service <a id="calibre_link-1548" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can be embedded on any website and shared via a URL to the public internet. The <strong class="screentext">Publish to web</strong> feature provides an embed code for the Power BI report, including an HTML iFrame markup and a report URL. iFrames are inline HTML elements for embedding nested content within a web page.</p>
    <p class="fm-booktitle">Organizations can utilize <strong class="screentext">Publish to web</strong> to expose non-confidential or publicly available information on their public-facing corporate website. In <em class="italic">Figure 13.20</em>, a <strong class="screentext">Publish to web</strong> embed code has been obtained in the Power BI service:</p>
    <figure class="mediaobject"><img src="images/000350.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.20: Publish to web embed code</p>
    <p class="fm-booktitle">The <strong class="screentext">Publish to web</strong> feature is accessed via the <strong class="screentext">File</strong> menu dropdown for a report, then accessing the <strong class="screentext">Embed report</strong> option, and finally selecting <strong class="screentext">Publish to web (public)</strong>. Members of a workspace<a id="calibre_link-957" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> with edit rights can use the settings<a id="calibre_link-1549" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> menu (the gear icon) to access the <strong class="screentext">Manage embed codes</strong> page. This page allows the user to retrieve or delete any embedded codes for the given workspace. </p>
    <p class="fm-booktitle">With the exception of R and Python visuals, all standard and custom visuals are supported in publish-to-web reports. However, there are many other limitations to the <strong class="screentext">Publish to web</strong> feature including not supporting reports using RLS, any Live connection, shared and certified datasets, and Q&amp;A.</p>
    <p class="fm-booktitle">Given the obvious potential risk of users accidentally sharing confidential or protected information over the public internet, Power BI administrators have granular controls over this feature including the ability to disable it for the entire organization. Details of these administrative settings are included in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em><em class="italic">.</em></p>
    <p class="fm-booktitle">Power BI reports accessed via embed codes reflect the latest data refresh of the source dataset within approximately one hour<a id="calibre_link-1550" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of its completion. Additional documentation on <strong class="screentext">Publish to web</strong>, including tips for fitting the iFrame into websites, is available at <a href="http://bit.ly/2s2aJkL" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2s2aJkL</span></a>.</p>
    <p class="fm-booktitle">Let’s now look at a method of securely embedding Power BI content into web pages.</p>
    <h2 id="calibre_link-411" class="calibre9">Secure URL embedding</h2>
    <p class="fm-booktitle">Just as workspace members<a id="calibre_link-958" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can easily use the <strong class="screentext">Publish to web</strong> feature<a id="calibre_link-1664" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to embed Power BI reports in web pages available on the public internet, workspace members can also securely embed Power BI reports onto any web page by using the <strong class="screentext">Secure URL embedding</strong> feature.</p>
    <p class="fm-booktitle">Securely embedding Power BI content into a web page works almost identically to <strong class="screentext">Publish to web</strong>, but it requires the viewer to have been authenticated to Power BI and granted access to the content either via their workspace membership or direct sharing.</p>
    <p class="fm-booktitle">To securely embed Power BI reports, view the report in the Power BI service. Then, access the <strong class="screentext">File</strong> menu, the <strong class="screentext">Embed report</strong> option, and finally <strong class="screentext">Website or portal</strong>. <em class="italic">Figure 13.21</em> shows the dialog for creating a secure embed code:</p>
    <figure class="mediaobject"><img src="images/000360.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.21: Secure embed code</p>
    <p class="fm-booktitle">Unlike <strong class="screentext">Publish to web</strong> embed codes, secure embed codes<a id="calibre_link-2139" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> are not stored or managed via the <strong class="screentext">Manage embed codes</strong> page, which<a id="calibre_link-2140" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is available to workspace members, or the <strong class="screentext">Embed code </strong>page, which is available to Power BI administrators within the <strong class="screentext">Admin portal</strong>. In addition, secure URL embedding requires a Power BI Pro or PPU license, or the content must be in a workspace assigned to the Premium capacity (a P or EM SKU).</p>
    <p class="fm-booktitle">Let’s now turn our attention to embedding Power BI content within Microsoft 365 apps such as Teams and SharePoint Online.</p>
    <h2 id="calibre_link-412" class="calibre9">Microsoft 365 apps</h2>
    <p class="fm-booktitle">Microsoft 365 consists<a id="calibre_link-955" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of many different apps<a id="calibre_link-1118" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> such as Outlook, OneDrive, Power Apps, and Power Automate. Two of these apps, Teams and SharePoint Online, are natively integrated with Power BI. Thus, organizations that obtain a P or EM SKU can embed content from Power BI into these apps, or alternatively, all users must have a Pro or PPU license.</p>
    <p class="fm-booktitle">Let’s first take a look at how embedding works for Teams.</p>
    <h3 id="calibre_link-413" class="heading1">Teams</h3>
    <p class="fm-booktitle">Teams is Microsoft’s popular<a id="calibre_link-1122" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> real-time collaboration, communication, meeting, file, and app<a id="calibre_link-1802" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> sharing app. Within Teams, users can create team workspaces for sharing and collaborating on content as well as conducting audio and video meetings.</p>
    <p class="fm-booktitle">Once a team is created, multiple channels can be created to organize content. Each channel can have multiple tabs. Each tab represents a particular app used by the channel, such as OneDrive for file sharing, a Wiki, a Whiteboard, or even YouTube. One of the available apps is Power BI. </p>
    <p class="fm-booktitle"><em class="italic">Figure 13.22</em> shows a team member adding the <strong class="screentext">Global Internet Sales</strong> report from the <strong class="screentext">Global Sales</strong> Power BI app as a tab called <strong class="screentext">Global Internet Sales</strong>:</p>
    <figure class="mediaobject"><img src="images/000370.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.22: Adding a Power BI tab to a Teams channel</p>
    <p class="fm-booktitle">The ability to surface content from a variety of different apps is a strength of Teams. Distributing content via a central collaboration space such as Teams eases the user experience since important content is directly available within users’ primary collaboration workspaces without requiring those users to switch<a id="calibre_link-1803" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> back and forth between separate<a id="calibre_link-1123" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> applications.</p>
    <p class="fm-booktitle">While Teams has, in many respects, supplanted SharePoint in terms of collaboration and content sharing, many organizations still cling to SharePoint as their primary means of information sharing. Thus, let’s look at embedding in SharePoint Online next.</p>
    <h3 id="calibre_link-414" class="heading1">SharePoint Online</h3>
    <p class="fm-booktitle">As mentioned, while the importance<a id="calibre_link-1119" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and utility of SharePoint as a collaboration platform<a id="calibre_link-1698" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> has diminished over the years to the point where SharePoint is primarily used as a backend document repository for apps such as OneDrive and Teams or as a rudimentary intranet/extranet, there are instances where organizations still wish to distribute Power BI content within SharePoint.</p>
    <p class="fm-booktitle">Distributing content to SharePoint Online is actually a two-step process, requiring actions in both the Power BI service and within SharePoint Online. The first step is to generate an embed code in the Power BI service. This step is similar to generating embed codes for <strong class="screentext">Publish to web</strong> and <strong class="screentext">Secure URL embedding</strong>. </p>
    <p class="fm-booktitle">In fact, the same basic steps are necessary: view the report in the Power BI service, then access the <strong class="screentext">File</strong> menu, the <strong class="screentext">Embed report</strong> option, and finally <strong class="screentext">SharePoint online,</strong> as shown in <em class="italic">Figure 13.23</em>:</p>
    <figure class="mediaobject"><img src="images/000379.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.23: Adding a Power BI tab to a Teams channel</p>
    <p class="fm-booktitle">Choosing this option generates an embed<a id="calibre_link-1120" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> code similar to the one<a id="calibre_link-1699" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> shown in <em class="italic">Figure 13.24</em>:</p>
    <figure class="mediaobject"><img src="images/000388.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.24: Adding a Power BI tab to a Teams channel</p>
    <p class="fm-booktitle">This embed code must be copied. Similar to secure URL embedding, this code is not stored or managed via the <strong class="screentext">Manage embed codes</strong> page, which is available to workspace members, or the <strong class="screentext">Embed code </strong>page, which is available to Power BI administrators within the <strong class="screentext">Admin portal</strong>.</p>
    <p class="fm-booktitle">The second step requires editing a SharePoint Online page. In <em class="italic">Figure 13.25</em>, the <strong class="screentext">+</strong> icon for a section of a SharePoint Online page in edit mode has been selected, allowing the insertion of a Power BI web part:</p>
    <figure class="mediaobject"><img src="images/000397.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.25: Adding a Power BI web part to a SharePoint Online page</p>
    <p class="fm-booktitle">Adding the Power BI web<a id="calibre_link-1121" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> part to the page enables the configuration<a id="calibre_link-1700" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> options to paste the embedding link from the first step in <strong class="screentext">Power BI report link</strong>, as shown in <em class="italic">Figure 13.26</em>:</p>
    <figure class="mediaobject"><img src="images/000407.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.26: Configuring a Power BI web part</p>
    <p class="fm-booktitle">Once the Power BI report web part<a id="calibre_link-2141" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> has been added and configured, republish<a id="calibre_link-2142" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the SharePoint Online page. </p>
    <p class="fm-booktitle">We will now look at our last embedding scenario, embedding Power BI content into custom applications.</p>
    <h2 id="calibre_link-415" class="calibre9">Custom applications</h2>
    <p class="fm-booktitle">In addition to the embedding<a id="calibre_link-951" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> options covered so far, Power BI embedded analytics<a id="calibre_link-685" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> enables the ability to embed reports, dashboards, and individual dashboard tiles into any custom application provided that a P, EM, or A SKU is purchased. </p>
    <p class="fm-booktitle">As opposed to embedding within<a id="calibre_link-1811" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> an organization, otherwise known as <strong class="screentext">user owns data</strong>, Power BI<a id="calibre_link-952" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> embedded analytics are known as <strong class="screentext">app owns data</strong>. The terms user owns data <a id="calibre_link-518" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and app owns data simply refer to how authentication is handled, either by the user or by the app respectively.</p>
    <p class="fm-booktitle">Power BI embedded analytics work very differently from the link embedding solutions such as <strong class="screentext">Publish to web</strong>, <strong class="screentext">Secure URL embedding</strong>, and <strong class="screentext">SharePoint Online</strong> embedding. One of the differences<a id="calibre_link-686" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is with regard to authentication. <strong class="screentext">Publish to web</strong><a id="calibre_link-2143" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> uses anonymous authentication, while organizational embedding uses interactive authentication to Azure AD. In contrast, embedded analytics uses non-interactive authentication where the custom application uses a service principal or master user for authentication.</p>
    <p class="fm-booktitle">Using a service principal is the recommended method for authentication when using Power BI embedded analytics. A service principal is simply an application whose security tokens can be used to authenticate Azure resources from a service, tool, or user app. </p>
    <p class="fm-booktitle">With service principals, tokens can either be an application secret or a certificate. Application secrets are simply strings of letters, numbers, and special characters unique to that application. Information about creating and registering<a id="calibre_link-555" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> Azure service principals can be found here: <a href="https://bit.ly/3tGVag7" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3tGVag7</span></a>.</p>
    <p class="fm-booktitle">In contrast, the master user approach uses an actual username and password. This approach<a id="calibre_link-988" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is sometimes referred to as “fake user” since the user ID is not tied to a physical individual but rather exists solely to facilitate application authentication. As mentioned, the use of service principals is preferred over the master user approach. </p>
    <p class="fm-booktitle">Once an authentication method has been selected, the next step is to register the Azure AD application. Registering the Azure AD application allows access to the Power BI REST APIs and establishes permissions for the Power BI REST resources. Additional information about<a id="calibre_link-548" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> registering Azure AD applications to use Power BI can be found at the following link: <a href="https://bit.ly/3DgKc41" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3DgKc41</span></a>.</p>
    <p class="fm-booktitle">Once the Azure AD application has been properly registered, the next step is to create a Power BI workspace and publish content within this workspace. This is the same process as described throughout this book.</p>
    <p class="fm-booktitle">With a workspace created and content published, the next step is to obtain a number of embedding parameters. For service principals, embedding requires the following embedding parameters:</p>
    <ul class="calibre10">
      <li class="bulletlist">Client ID</li>
      <li class="bulletlist">Workspace ID</li>
      <li class="bulletlist">Report or dashboard ID</li>
      <li class="bulletlist">Client secret</li>
      <li class="bulletlist">Tenant ID</li>
    </ul>
    <p class="fm-booktitle">If using the master user approach<a id="calibre_link-953" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> instead, then the embedding parameters<a id="calibre_link-687" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> required are the client ID, workspace ID, and report or dashboard ID as well as the chosen username and password for the “fake” Power BI user.</p>
    <p class="fm-booktitle">The workspace ID as well as the report or dashboard ID can be obtained by viewing content within the Power BI service. Workspace IDs are the unique ID appearing just after the <code class="inlinecode">/groups/</code> portion of a Power BI service URL. Similarly, report and dashboard IDs appear just after the <code class="inlinecode">/reports/</code> or /dashboards/ portion of such URLs.</p>
    <p class="fm-booktitle">The client ID, client secret, and tenant ID parameters are obtained within the Microsoft Azure portal when viewing the app registration for the application registered previously. In the Azure portal, select <strong class="screentext">App registrations</strong> and then the registered app. From the <strong class="screentext">Overview</strong> section, copy the <strong class="screentext">Application (client) ID</strong>. Also in the <strong class="screentext">Overview</strong> section, copy the <strong class="screentext">Directory (tenant) ID</strong>. On the same page, under <strong class="screentext">Manage</strong>, select <strong class="screentext">Certificates &amp; secrets</strong>. Under <strong class="screentext">Client secrets</strong>, select <strong class="screentext">New client secret</strong>, and, once created, copy the string in the <strong class="screentext">Value</strong> column of the newly created secret.</p>
    <p class="fm-booktitle">The next step is to ensure that service principals are allowed to access your Power BI tenant. This is done in the <strong class="screentext">Tenant settings</strong> of the Power BI <strong class="screentext">Admin portal</strong> and specifically the <strong class="screentext">Allow service principals to use Power BI APIs</strong> setting. More information about the Power BI <strong class="screentext">Admin portal</strong> and <strong class="screentext">Tenant settings</strong> is included in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>.</p>
    <p class="fm-booktitle">Once service principals are granted the ability to use the Power BI APIs for the tenant, the service principal must be given access to the workspace. This is done by adding the service principal as a member of the workspace. This is the same as adding any other user as a member of a workspace and is covered in <em class="italic">Chapter 10</em>, <em class="italic">Managing Application Workspaces and Content</em>.</p>
    <p class="fm-booktitle">Once access has been granted, it is time to embed your content. While developing a full-blown application that embeds Power BI content is beyond the scope of this book, Microsoft provides code samples for .NET Core, .NET Framework, Java, Node.js, PowerShell, Python, and React-TS in a GitHub repository: <a href="https://github.com/microsoft/PowerBI-Developer-Samples" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://github.com/microsoft/PowerBI-Developer-Samples</span></a>.</p>
    <p class="fm-booktitle">In addition, a Power BI embedded analytics playground<a id="calibre_link-2144" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is available for developers to test embedding<a id="calibre_link-2145" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> code. This playground can be accessed at <a href="http://playground.powerbi.com/" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://playground.powerbi.com/</span></a>. For example, the following simple code embeds a Power BI report:</p>
    <pre class="programlisting"><code class="hljs-code">let loadedResolve, reportLoaded = new Promise((res, rej) =&gt; { loadedResolve = res; });
let renderedResolve, reportRendered = new Promise((res, rej) =&gt; { renderedResolve = res; });
models = window['powerbi-client'].models;
function embedPowerBIReport() {
    let accessToken = EMBED_ACCESS_TOKEN;
    let embedUrl = EMBED_URL;
    let embedReportId = REPORT_ID;
    let tokenType = TOKEN_TYPE;
    let permissions = models.Permissions.All;
    let config = {
        type: 'report',
        tokenType: tokenType == '0' ? models.TokenType.Aad : models.TokenType.Embed,
        accessToken: accessToken,
        embedUrl: embedUrl,
        id: embedReportId,
        permissions: permissions,
        settings: {
            panes: {
                filters: {
                    visible: true
                },
                pageNavigation: {
                    visible: true
                }
            }
        }
    };
    let embedContainer = $('#embedContainer')[0];
    report = powerbi.embed(embedContainer, config);
    report.off("loaded");
    report.on("loaded", function () {
        loadedResolve();
        report.off("loaded");
    });
    report.off("error");
    report.on("error", function (event) {
        console.log(event.detail);
    });
    report.off("rendered");
    report.on("rendered", function () {
        renderedResolve();
        report.off("rendered");
    });
}
embedPowerBIReport();
await reportLoaded;
await reportRendered;
</code></pre>
    <p class="fm-booktitle">We have now covered all four<a id="calibre_link-954" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> embedding scenarios, so let’s move<a id="calibre_link-688" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> on to data alerts.</p>
    <h1 id="calibre_link-416" class="heading">Data alerts</h1>
    <p class="fm-booktitle">Data-driven alerts<a id="calibre_link-750" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> are email notifications and one of the top capabilities exclusive to dashboards in the Power BI service. For many users and business scenarios, data-driven alerts are a high-value complement, or even a substitute, to dashboards and reports as they help to avoid frequently accessing Power BI to search for actionable information. </p>
    <p class="fm-booktitle">For example, rather than opening Power BI in the browser or on a phone every morning and looking for red colors or certain KPI symbols, users could view certain dashboards or reports less frequently and only respond to data-driven alert notifications sent via email. </p>
    <p class="fm-booktitle">With a standard card, KPI, or gauge visual pinned to a dashboard, a data-driven alert can be configured either in the Power BI service or via the Power BI mobile app. In <em class="italic">Figure 13.27</em>, the ellipses (<strong class="screentext">…</strong>) of a KPI visual are clicked, exposing the <strong class="screentext">Manage alerts</strong> option: </p>
    <figure class="mediaobject"><img src="images/000417.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.27: Manage alerts in Power BI service</p>
    <p class="fm-booktitle">Choosing <strong class="screentext">Manage alerts</strong> from the menu displays<a id="calibre_link-751" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the <strong class="screentext">Manage alerts</strong> pane, allowing one or multiple alert rules to be added, as shown in <em class="italic">Figure 13.28</em>:</p>
    <figure class="mediaobject"><img src="images/000002.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.28: Setting an alert rule</p>
    <p class="fm-booktitle">Each alert rule is limited<a id="calibre_link-2146" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to a single condition and, thus, additional alert rules can be configured for the same dashboard tile to provide notifications for multiple conditions. For example, a separate alert rule could be configured for the gauge tile with a condition of <strong class="screentext">Above 15,000,000</strong>. When the underlying dataset of the dashboard tile is refreshed, a value for <strong class="screentext">Total Net Sales YTD</strong> above that threshold will trigger an alert notification. Notifications appear in the Power BI service as a counter next to the bell icon in the upper-right corner of all the Power BI service pages, as shown in <em class="italic">Figure 13.29</em>:</p>
    <figure class="mediaobject"><img src="images/000011.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.29: Notifications in the Power BI service</p>
    <p class="fm-booktitle">Data alerts and notifications are deeply integrated with Power BI mobile applications. Between the mobile alert notifications, the notifications within the Power BI service, and the optional email delivery of the notification, users are able to respond quickly as significant data changes occur.</p>
    <p class="fm-booktitle">While data alerts are easy to configure and highly useful for many users, if organizations have more complex alerting requirements, Power Automate can potentially be used to fulfill those needs. </p>
    <h2 id="calibre_link-417" class="calibre9">Power Automate integration</h2>
    <p class="fm-booktitle">Currently, the alert notification<a id="calibre_link-752" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> emails from Power BI are limited to the user who configured the data alert. In many scenarios, however, several users or a group email account should receive the notification email, as it’s not practical for each user to individually configure the data alerts.</p>
    <p class="fm-booktitle">Power Automate provides a powerful but easy-to-use alternative to the standard Power BI alert email. For example, without any custom data connections or code, it enables a single user to fully define one or multiple email recipients of an alert notification and to customize the content of an email message.</p>
    <p class="fm-booktitle">Power Automate is an online service that enables the automation of workflows between applications and services. Since each Power Automate flow is fundamentally composed of a trigger (starting action) and one or more corresponding actions, a top use case for Power Automate is to send custom<a id="calibre_link-2147" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> email messages based on various trigger events. For example, when a sales lead is added in Dynamics 365 <strong class="screentext">Customer Experience</strong> (<strong class="screentext">CE</strong>), an email could be automatically sent to a sales team member via Power Automate.</p>
    <p class="fm-booktitle">Several pre-built Power Automate templates are available that leverage the Power BI data alert as a trigger. These templates make it easy to get started and to customize details, such as email addresses and the data from the alert to include. In the following Power Automate flow, the <strong class="screentext">Total Net Sales YTD</strong> alert, as described in the <em class="italic">Data alerts</em> section, is used to trigger a customized email message, as shown in <em class="italic">Figure 13.30</em>:</p>
    <figure class="mediaobject"><img src="images/000021.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.30: Power BI alert email via Power Automate</p>
    <p class="fm-booktitle">Dynamic content from Power BI is available for the <strong class="screentext">Subject</strong> and <strong class="screentext">Body</strong> of the email. In the subject, the alert title would be replaced by the title of the alert &ndash; in this case, <strong class="screentext">Total Net Sales YTD vs. Plan</strong>. In the body, the tile value placeholder would be replaced by the actual value for the KPI dashboard tile.</p>
    <p class="fm-booktitle">Power Automate provides a rich platform for building both simple and complex workflows to obtain greater value<a id="calibre_link-753" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> from Power BI assets. Other common Power Automate and Power BI integrations, beyond custom email notifications, include posting messages to a Slack channel and triggering an alert in Microsoft Teams based on an alert in Power BI.</p>
    <h1 id="calibre_link-418" class="heading">Email subscriptions</h1>
    <p class="fm-booktitle">Power BI also provides email subscriptions<a id="calibre_link-946" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> for Power BI Pro users of both reports and dashboards as well as users with Free licenses if the content is hosted in a Premium capacity workspace (a P or EM SKU). With email subscriptions configured in the Power BI service, a user is sent a snapshot of either the report page or the dashboard canvas as well as an optional link to the content in the Power BI service. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 13.31</em>, a user with a Power BI Pro license has accessed <strong class="screentext">European Sales</strong> (dashboard), as described earlier in this chapter, from within a Power BI app:</p>
    <figure class="mediaobject"><img src="images/000031.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.31: Subscribe to the dashboard</p>
    <p class="fm-booktitle">Clicking the <strong class="screentext">Subscribe</strong> icon, as shown in <em class="italic">Figure 13.31</em>, opens the <strong class="screentext">Subscribe to emails</strong> pane to configure and confirm the email subscription, as shown in <em class="italic">Figure 13.32</em>:</p>
    <figure class="mediaobject"><img src="images/000041.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.32: Subscribe to emails pane</p>
    <p class="fm-booktitle">With the yellow slider<a id="calibre_link-947" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> set to <strong class="screentext">On</strong>, selecting the <strong class="screentext">Save and close</strong> button (not shown) at the bottom of the pane enables the email subscription to the dashboard with the configured settings. An email containing an image of the current state of the dashboard and a link to the dashboard in Power BI is sent at the scheduled <strong class="screentext">Frequency</strong> and <strong class="screentext">Scheduled time</strong>. </p>
    <p class="fm-booktitle">A very similar subscription icon and dialog is also available for Power BI reports. The only significant difference with report subscriptions is that each subscription is associated with a single page. Therefore, the Power BI Pro user must choose the page for each subscription and configure multiple subscriptions to the same report if multiple pages of the report need to be emailed. </p>
    <p class="fm-booktitle">A common scenario for subscriptions is for the report data, which may consist of thousands of rows and many report<a id="calibre_link-2148" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> pages, to be distributed in standard file formats such as Excel or CSV. For example, an accounting department team may utilize the data from a weekly or monthly report to help analyze recently closed financial periods. Paginated report subscriptions can be configured to deliver report data in seven different common file formats as email attachments and, thus, are the correct report type for these scenarios.</p>
    <p class="fm-booktitle">Unlike data alerts, subscriptions can be set for other users using the <strong class="screentext">Subscribe</strong> field. Additionally, subscriptions are currently sent with the report’s default filter and slicer states.</p>
    <p class="fm-booktitle">Subscriptions do not support most custom visuals. However, certified custom visuals, such as the Power KPI visual used in <strong class="screentext">European Sales</strong> (dashboard), are supported. </p>
    <p class="fm-booktitle">Let’s now look at Power BI’s Analyze in Excel functionality.</p>
    <h1 id="calibre_link-419" class="heading">Analyze in Excel</h1>
    <p class="fm-booktitle">Users with Power BI Pro licenses<a id="calibre_link-510" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can connect to datasets hosted in the Power BI service from both Power BI Desktop and Microsoft Excel. Either of these tools displays the tables, columns, and measures for the dataset and, based on the report visuals created (for example, pivot tables), sends queries to Power BI for execution by the source dataset. </p>
    <p class="fm-booktitle">In the case of Power BI Desktop, these reports can be published back to the Power BI service and retain their connection to the dataset, as recommended in the <em class="italic">Live connections to Power BI datasets</em> section of <em class="italic">Chapter 6</em>, <em class="italic">Planning Power BI Reports</em>.</p>
    <p class="fm-booktitle">Prior to broadly recommending Excel as a client-reporting tool, consider whether Power BI Desktop isn’t better suited to common use cases, such as pivot tables. As the adoption of Power BI increases, Power BI reports that are built in Power BI Desktop provide a richer and more familiar user experience. </p>
    <p class="fm-booktitle">The Analyze in Excel feature is exposed as an action for Power BI reports and datasets in the Power BI service. The action is accessible for Power BI Pro and PPU users in both workspaces as well as when viewing the report or dataset and in published apps. </p>
    <p class="fm-booktitle">In addition, connecting to a Power BI dataset is an option when using the <strong class="screentext">Get Data</strong> dropdown in Excel.</p>
    <p class="fm-booktitle">In the following example from a workspace, the option to analyze the <strong class="screentext">European Internet Sales </strong>report in Excel is available on the right-hand side after clicking the three vertical dots menu: </p>
    <figure class="mediaobject"><img src="images/000051.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.33: Analyze in Excel icon</p>
    <p class="fm-booktitle">Clicking the <strong class="screentext">Analyze in Excel</strong> icon provides<a id="calibre_link-511" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> a Microsoft Excel (<code class="inlinecode">.xlsx</code>) file that can be saved to the local machine. This file contains a default pivot table tied to the live Power BI dataset that supports the report. </p>
    <p class="fm-booktitle">For example, even though the <strong class="screentext">European Internet Sales</strong> report may only utilize a few measures and columns of the dataset, the entire fields list of the dataset is exposed with a pivot table connection in Excel, as shown in <em class="italic">Figure 13.34</em>:</p>
    <figure class="mediaobject"><img src="images/000062.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 13.34: Excel connection to the Power BI dataset</p>
    <p class="fm-booktitle">Similar to the fields list in Power BI Desktop, Excel positions tables with only measures visible at the top<a id="calibre_link-512" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> of the list preceding the tables. Just like standard Excel pivot tables, users can drag measures and columns to the field wells to structure each pivot table report. Right-clicking a column name presents the option to add the column as a slicer.</p>
    <p class="fm-booktitle">Just like interacting with a Power BI report, any RLS roles applied on the source dataset are enforced on the user’s report queries generated from Excel. The Excel workbook and any reports created based on the connection can be saved and shared like other Excel workbooks. However, for other users to refresh and query the source dataset from Excel, they require access to the app or workspace, a Power BI Pro license, and must be mapped to a security role if RLS is configured. </p>
    <p class="fm-booktitle">We now turn our attention to self-service BI workspaces.</p>
    <h1 id="calibre_link-420" class="heading">Self-service BI workspaces</h1>
    <p class="fm-booktitle">As part of an organization’s effort to empower <a id="calibre_link-1675" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>users and drive a data culture, some workspaces are often created for the purpose of enabling business users and their teams to create and manage their own content. </p>
    <p class="fm-booktitle">For example, although other workspaces and apps containing financial reporting could be wholly owned by the BI/IT team, a workspace could be created for certain members of the finance and accounting department, and a few authors could be assigned Power BI Pro licenses and some training and documentation on data sources. </p>
    <p class="fm-booktitle">Such a self-service BI workspace allows business users, versus the enterprise BI team, to create and share content. As per the Power BI deployment modes section of <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, some organizations may choose to empower certain business users to create and manage the visualization layer (<strong class="screentext">Self-Service Visualization</strong>). </p>
    <p class="fm-booktitle">This hybrid approach gives business users more flexibility to address rapidly changing analytical needs, yet leverages IT-supported and validated data sources and resources. When even greater business user flexibility is required, or when IT resources are not available, the self-service BI mode can be implemented via Power BI Pro licenses and a self-service BI workspace.</p>
    <p class="fm-booktitle">In the Self-Service BI deployment model, several business users (for example, between five and ten) who regularly collaborate<a id="calibre_link-2149" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> within a team or department are assigned Power BI Pro licenses. One of these users then creates a workspace in the Power BI service and adds the other users as members. </p>
    <p class="fm-booktitle">The BI/IT team typically requires that at least one member of the BI organization be added as a workspace administrator. Additionally, if applicable, the BI/IT team would authorize a few business users in the workspace to utilize an on-premises data gateway for their required data sources.</p>
    <p class="fm-booktitle">Once enabled, the business users can begin creating content and publishing the content to their self-service BI workspace. These users can then begin to distribute that content, as we will cover in the following section.</p>
    <h2 id="calibre_link-421" class="calibre9">Self-service content distribution</h2>
    <p class="fm-booktitle">Given that each user<a id="calibre_link-1676" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> has a Pro license, members of the Self-Service BI workspace (for example, the finance team), a user has the full flexibility to view content in the Power BI service or mobile app, as well as utilizing Pro features, such as Analyze in Excel and email subscriptions. </p>
    <p class="fm-booktitle">The users could choose to publish an app from the app workspace and advise workspace members to only use the published app for any production scenarios, such as printing reports or dashboards or referencing this content in meetings. As a small team, the users could delegate the responsibilities for creating and testing the dataset(s), reports, dashboards, scorecards, and any Excel workbooks hosted within the workspace.</p>
    <p class="fm-booktitle">A typical example of Self-Service BI is with advanced power users within finance and accounting functions. These users often have sophisticated and rapidly changing analytical needs that can’t easily be translated into corporate BI-owned solutions. </p>
    <p class="fm-booktitle">Additionally, the managers or stakeholders of this team’s work may not require access to this content themselves. For example, the analyst team could produce a monthly financial close package (that is, a PowerPoint deck) or a project analysis and either present this content in person or distribute printed materials.</p>
    <p class="fm-booktitle">If it has been determined that the business team requires additional resources, such as support for greater scale or sharing their content with users outside the workspace, the BI/IT team can consider assigning the workspace to the Power BI Premium capacity. </p>
    <p class="fm-booktitle">Additionally, if the needs or the value of the workspace grows, the project could be migrated from Self-Service BI<a id="calibre_link-2150" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to one of the other deployment modes. For example, the Power BI dataset created by the business team could be migrated to an Analysis Services model maintained by the BI team.</p>
    <p class="fm-booktitle">Self-service BI can help address certain business issues such as rapidly changing analytical needs. However, self-service BI is not without its risks.</p>
    <h2 id="calibre_link-422" class="calibre9">Risks of self-service BI</h2>
    <p class="fm-booktitle">Perhaps no greater risk<a id="calibre_link-1677" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> exists in BI than the potential to motivate or drive an incorrect decision. Several of the earlier chapters in this book, particularly <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, through <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>, are dedicated to topics and practices that aim to reduce that risk. </p>
    <p class="fm-booktitle">Although business users and analysts are often comfortable with the visualization layer given their familiarity with Microsoft 365 apps, the quality and sustainability of this content rests on the planning, testing, and skills (for example, M queries and DAX measures) applied to the source dataset. A severe risk, therefore, to Self-Service BI projects is whether the business user(s) can build and maintain a source dataset that provides consistent, accurate information. </p>
    <p class="fm-booktitle">For example, a self-service BI author may not fully understand what definitions are used in a measure or how filters in a measure and filters in the report interact to produce the numbers in the report. Thus, the self-service author and users of the self-service content could incorrectly interpret the meaning of the report. </p>
    <p class="fm-booktitle">Another significant risk is a loss of version control and change management. Although business users may have access to version control systems, such as OneDrive or SharePoint document libraries, they may not be required to use these systems or appreciate the value of version control.</p>
    <p class="fm-booktitle">It’s not uncommon for “self-service” BI solutions to result in a significant level of management overhead for the BI/IT team, as business users struggle to effectively build and manage their own content. For example, the business team could submit requests or help desk tickets for IT to help them write certain DAX measures or to integrate certain sources. Likewise, the reports business teams create may result in a very high volume of queries or slow, expensive queries. </p>
    <p class="fm-booktitle">A final risk is that the self-service<a id="calibre_link-2151" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> solution created may ultimately need to be discarded rather than migrated. For example, to quickly respond to new and changing analytical needs, the source dataset and reports may include many inefficient customizations and design patterns. </p>
    <p class="fm-booktitle">These customizations can render the solution difficult to support and potentially consume unnecessary system resources. As more users and reports become dependent on these designs or anti-patterns, it can be more difficult and costly to migrate to a more sustainable solution.</p>
    <h1 id="calibre_link-423" class="heading">Summary</h1>
    <p class="fm-booktitle">This chapter provided a broad overview of Power BI’s different content distribution and data access methods. Power BI apps were particularly emphasized as they represent the primary distribution mechanism supporting large groups of users. </p>
    <p class="fm-booktitle">The essential details of utilizing other distribution methods, such as email subscriptions, data alerts, and sharing reports and dashboards, were also reviewed. Furthermore, guidance was provided on analyzing datasets in Excel as well as utilizing Power Automate to drive custom email alerts.</p>
    <p class="fm-booktitle">The following chapter looks at Power BI deployments from an administration perspective. This includes the Power BI service administrator role and the controls available for administrators to define and manage authentication, monitor user activities, and limit or disable various features.</p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-6">
<div id="calibre_link-2152" class="calibre2">
<div id="calibre_link-2153" class="calibre3"><div id="calibre_link-2154" class="calibre4">
    <h1 class="heading">14</h1>
    <h1 id="calibre_link-424" class="mainheading">Administering Power BI for an Organization</h1>
    <p class="fm-booktitle">The management and administrative processes described in previous chapters have primarily reflected the role of corporate business intelligence teams and BI professionals. In this chapter, the features and processes relevant to IT administrators are reviewed. These features and processes help organizations deploy and manage Power BI according to their policies and preferences. This includes data governance in the context of both self-service BI and corporate BI, the Power BI admin portal, monitoring user activity and adoption, and the administration of Power BI Premium capacity.</p>
    <p class="fm-booktitle">As in the previous chapter, this chapter exclusively covers the Power BI service. Administrative topics relevant to on-premises deployments were included in <em class="italic">Chapter 12</em>, <em class="italic">Deploying the Power BI Report Server</em>. Additionally, although data governance concepts and implementation guidance are included, readers are encouraged to review Microsoft documentation for further details on implementing data governance as part of Power BI deployments.</p>
    <p class="fm-booktitle">In this chapter, we will review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">The Power BI administrator role</li>
      <li class="bulletlist">Data governance for Power BI</li>
      <li class="bulletlist">Azure Active Directory</li>
      <li class="bulletlist">The Power BI admin portal</li>
      <li class="bulletlist">Using metrics reports</li>
      <li class="bulletlist">Audit logs</li>
      <li class="bulletlist">The Power BI REST API for admins</li>
    </ul>
    <p class="fm-booktitle">We start with an overview of the Power BI administrator role.</p>
    <h1 id="calibre_link-425" class="heading">Power BI administrator role</h1>
    <p class="fm-booktitle">Within organizations, one or more Power BI administrators are responsible for the overall <a id="calibre_link-1296" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>monitoring, configuration, and management of the Power BI tenant. This role was covered briefly in the <em class="italic">Power BI admin</em> section of <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>. </p>
    <p class="fm-booktitle">As explained in that chapter, Power BI administrators are focused on the overall deployment of Power BI within an organization in terms of security, governance, and resource utilization. It is the Power BI administrator’s job to understand the overall organizational policies and governance regarding data security and management and then implement those policies and governance within Power BI. </p>
    <p class="fm-booktitle">Similar to a <strong class="screentext">database administrator</strong> (<strong class="screentext">DBA</strong>), a Power BI administrator regularly fields questions and issues <a id="calibre_link-756" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>related to stability, performance, and permissions/access. Effective Power BI admins are therefore fully knowledgeable of the roles, permissions, and licensing in Power BI as well as tools and techniques for analyzing and troubleshooting performance issues.</p>
    <p class="fm-booktitle"><strong class="screentext">Azure Active Directory</strong> (<strong class="screentext">AAD</strong>) includes a built-in role, Power BI administrator, that can be assigned to certain <a id="calibre_link-539" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>users, typically senior administrators and/or Power BI architects who are tasked with implementing tenant-level policies and configurations. Users assigned the Power BI admin role can manage all aspects of Power BI, including Premium capacities, workspaces, audit and activity logs, feature access, and more. </p>
    <p class="fm-booktitle">Assigning roles is performed within the Azure portal (<a href="https://portal.azure.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://portal.azure.com</span></a>). Once in the <a id="calibre_link-553" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>portal, select <strong class="screentext">Azure Active Directory</strong>. Select <strong class="screentext">Users</strong> under the <strong class="screentext">Manage</strong> heading in the left navigation pane, select a user, and then choose <strong class="screentext">Assigned roles</strong> as shown in <em class="italic">Figure 14.1</em>:</p>
    <figure class="mediaobject"><img src="images/000073.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.1: Assigned roles in the Azure portal</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 14.1</em>, you <a id="calibre_link-1297" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can then click the <strong class="screentext">Add assignments</strong> link to add a role for the user. The Power BI administrator role is available in the <strong class="screentext">Select role</strong> dropdown as shown in <em class="italic">Figure 14.2</em>.</p>
    <figure class="mediaobject"><img src="images/000084.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.2: Assigning the Power BI Administrator role</p>
    <p class="fm-booktitle">Smaller organizations and organizations getting started with Power BI may not require a dedicated Power BI administrator as there’s limited content or resources to monitor and manage. Larger <a id="calibre_link-1298" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>organizations with hundreds or thousands of Power BI users and workspaces, however, may find a Power BI administrator indispensable. Here are some of the most common tasks assigned to Power BI administrators:</p>
    <ul class="calibre10">
      <li class="bulletlist">Monitor resources such as Power BI Premium capacity, any critical source systems of Power BI such as an Azure SQL database, any on-premises data gateways, and license availability</li>
      <li class="bulletlist">Monitor usage and content such as determining which reports and dashboards are most heavily accessed across the organization and whether Power BI adoption is increasing or not</li>
      <li class="bulletlist">Create and manage workspaces such as assigning or removing groups/users from workspace roles and assigning or moving workspaces to Premium capacities</li>
      <li class="bulletlist">Grant or revoke access to groups to certain Power BI features such as the ability to create workspaces and use custom visuals</li>
      <li class="bulletlist">Troubleshoot issues such as dataset refresh failures, user access/licensing issues, performance problems, etc. </li>
    </ul>
    <p class="fm-booktitle">A number of different <a id="calibre_link-2155" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>tools are available to Power BI administrators to meet these different tasks, including the Power BI admin portal, the Power BI Premium Metrics app, the Power Platform admin center, the Power BI activity log, and more.</p>
    <h1 id="calibre_link-426" class="heading">Data governance for Power BI</h1>
    <p class="fm-booktitle">Data governance is defined as a set of policies used to secure an organization’s data, ensure consistent <a id="calibre_link-1304" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and accurate decision making, and manage <a id="calibre_link-766" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>access to data. In general, data governance is applicable to all types of <strong class="screentext">business intelligence</strong> (<strong class="screentext">BI</strong>), but organizations investing in Power BI for the long term should consider their data governance strategy and policies in the specific context of Power BI. </p>
    <p class="fm-booktitle">A central component of data governance relates to the three deployment modes described at the beginning of <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>, and seeks to address the following question: “<em class="italic">How can we ensure our data is secure and accurate while still providing the business with the access and flexibility it needs?</em>”</p>
    <p class="fm-booktitle">It’s generally understood that some level of <strong class="screentext">self-service BI</strong> (<strong class="screentext">SSBI</strong>) is appropriate and beneficial to empower business users to explore and discover insights into data. Tools, such as Power BI Desktop, and features in the Power BI service, such as apps, make it easier than ever for business users to independently analyze data and potentially create and distribute content. </p>
    <p class="fm-booktitle">However, experience with enterprise SSBI projects also strongly suggests that IT-owned and managed administrative controls, enterprise-grade BI tools, and data assets, such as data warehouses, are still very much necessary. In response to the strengths and weaknesses of both traditional IT-led BI and business-led SSBI, Microsoft has suggested and internally implemented a managed, self-service approach to data governance.</p>
    <p class="fm-booktitle">From a BI <a id="calibre_link-1305" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>architecture standpoint, managed SSBI represents a <a id="calibre_link-767" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>hybrid approach between the corporate (enterprise) BI and self-service visualization modes introduced in <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>. As shown in <em class="italic">Figure 14.3</em>, certain projects are carried out by the BI/IT department, while business users have the flexibility to analyze data and create their own reporting:</p>
    <figure class="mediaobject"><img src="images/000095.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.3: Multi-mode Power BI deployments</p>
    <p class="fm-booktitle">The three capabilities of corporate BI projects identified in <em class="italic">Figure 14.3</em> address the limitations or weaknesses of SSBI projects and tools. These limitations include data accuracy, scalability, complex data integration processes, and custom distributions of reports to groups of users. </p>
    <p class="fm-booktitle">Certain projects requiring these skills and tools such as the integration of multiple source systems and the scheduled distribution of user-specific reports could be exclusively developed and managed by IT. Additionally, the business stakeholders for certain projects may prefer or insist that certain projects are wholly owned by IT. </p>
    <p class="fm-booktitle">However, as shown in the <strong class="screentext">Business User Self-Service BI</strong> part of <em class="italic">Figure 14.3</em>, business users are still empowered to leverage SSBI tools, such as Power BI Desktop, to conduct their own analysis and to internally determine requirements within their business unit.</p>
    <p class="fm-booktitle">Most commonly, business users can leverage an IT-owned asset, such as an Analysis Services model, thus <a id="calibre_link-1306" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>avoiding the data preparation and modeling components <a id="calibre_link-768" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>while retaining flexibility on the visualization layer. This self-service visualization model is very popular and particularly effective when combined with Excel report connections.</p>
    <p class="fm-booktitle">Note that continuous monitoring and data governance policies are in effect across the organization regardless of corporate BI or business user SSBI. This is very important to detect any anomalies in user activity and is a first step in migrating a business-developed solution to a corporate BI solution. </p>
    <p class="fm-booktitle">For example, monitoring the Microsoft 365 Audit Log data for Power BI may indicate high and growing adoption of particular reports and dashboards based on a particular Power BI dataset. Given this query workload, or possibly other future needs for the dataset, such as advanced DAX measures, it may be appropriate to migrate this dataset to an Analysis Services model maintained by IT or move the dataset to Premium capacity. An example of this migration process to an Azure Analysis Services model is included in <em class="italic">Chapter 15</em>, <em class="italic">Scaling with Premium and Analysis Services</em>.</p>
    <p class="fm-booktitle">Let’s now look at how to implement data governance within Power BI deployments.</p>
    <h2 id="calibre_link-427" class="calibre9">Implementing data governance</h2>
    <p class="fm-booktitle">With an overarching strategy in place for deploying Power BI, as shown in the previous section, concrete <a id="calibre_link-1307" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>tasks can be defined for implementing data governance. These tasks include the following:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">Identify all data sources and tag sources containing sensitive data</strong>
        <p class="normal1">Additional access and oversight policies should be applied to data sources containing sensitive or protected data. The labels assigned to content in the <em class="italic">Information protection</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Application Workspaces and Content</em>, is an example of data tagging.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Determine where critical data sources will be stored</strong>
        <p class="normal1">For example, determine whether the data warehouse will be hosted on-premises or in the cloud. Power BI reporting can be deployed fully on-premises via Power BI Report Server, fully in the cloud, or organizations can pursue hybrid deployment models.</p>
        <p class="normal1">Additionally, determine whether analytical (OLAP) BI tools such as Analysis Services and SAP BW will be used with these data sources and whether those tools will be stored on-premises or in the cloud.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Define who can access which data and how this access can be implemented</strong>
        <p class="normal1">Defining and managing Microsoft 365 groups or security groups in <strong class="screentext">Azure Active Directory</strong> (<strong class="screentext">AAD</strong>) or <strong class="screentext">Active Directory</strong> (<strong class="screentext">AD</strong>) is strongly recommended. Determine whether <a id="calibre_link-540" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>data security roles will be implemented <a id="calibre_link-477" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>in a data warehouse source such as Teradata or if row-level security roles will be implemented in analytical models such as Analysis Services.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Develop or obtain monitoring solutions to continuously monitor activities</strong>
        <p class="normal1">Visibility to the Microsoft 365 audit log data, as described later in this chapter, is an essential part of this task. Any high-risk or undesired activities should be automatically detected, enabling swift action.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Train business users on data governance and security</strong>
        <p class="normal1">This is particularly relevant for any dataset designers within business units who will leverage Power BI Desktop to access shape and model data. </p>
      </li>
    </ol>
    <p class="fm-booktitle">The extent of data governance policies is driven by the size of the organization, its industry <a id="calibre_link-1308" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and associated regulations, and the desired data culture. For example, a large healthcare provider that wishes to pursue a more conservative data culture will implement many data governance policies to eliminate security risks and promote data quality and accuracy. However, a small to mid-sized company in a less regulated industry, and perhaps with fewer IT resources available, will likely implement less dense governance policies to promote flexibility. </p>
    <p class="fm-booktitle">For example, with Power BI Desktop and Power BI Premium capacity, a large analysis model containing complex M queries and DAX expressions could potentially be created and supported by a business user or team. However, the dataset designer of this model will need to be familiar with both the governance policy determining the level of visibility users of the dataset will have, as well as how to implement the corresponding row-level security roles. </p>
    <p class="fm-booktitle">Additionally, business users with Power BI Pro licenses responsible for distributing content such <a id="calibre_link-2156" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as via Power BI apps will need to know the security groups that should have access to the app.</p>
    <p class="fm-booktitle">Let’s next look at another important component of all Power BI deployments, Azure Active Directory.</p>
    <h1 id="calibre_link-428" class="heading">Azure Active Directory</h1>
    <p class="fm-booktitle">As with other Microsoft Azure services, Power BI relies on <strong class="screentext">Azure Active Directory</strong> (<strong class="screentext">AAD</strong>) to authenticate <a id="calibre_link-2157" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and authorize users. Therefore, even if Power BI is the only service being utilized, organizations can leverage AAD’s rich set of identity <a id="calibre_link-1154" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>management and governance features, such as conditional access policies, <strong class="screentext">multi-factor authentication</strong> (<strong class="screentext">MFA</strong>), and business-to-business collaboration. </p>
    <p class="fm-booktitle">For example, a conditional access policy can be defined within the Azure portal that blocks access to Power BI based on the user’s network location, or that requires MFA given the location and the security group of the user. Instructions for creating conditional access policies are covered in the <em class="italic">Conditional access policies</em> section later in this chapter.</p>
    <p class="fm-booktitle">Additionally, organizations can invite external users as guest users within their AAD tenant to allow for seamless distribution of Power BI content to external parties, such as suppliers or customers. This subject is covered in the next section, <em class="italic">AAD B2B collaboration</em>.</p>
    <p class="fm-booktitle">Guidance on configuring AAD security groups to support <strong class="screentext">row-level security</strong> (<strong class="screentext">RLS</strong>) is included in the <em class="italic">Security roles</em> section of <em class="italic">Chapter 5</em>, <em class="italic">Developing DAX Measures and Security Roles</em>. This section reviews other top features of AAD in the context of Power BI deployments.</p>
    <h2 id="calibre_link-429" class="calibre9">AAD B2B collaboration</h2>
    <p class="fm-booktitle">AAD <strong class="screentext">business-to-business</strong> (<strong class="screentext">B2B</strong>) collaboration enables organizations using AAD to work securely <a id="calibre_link-541" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>with users from any organization. Invitations can be sent to external users, whether the user’s organization uses AAD or not, and once accepted the guest user can leverage their own credentials to access resources, such as dashboards and reports contained in a Power BI app. </p>
    <p class="fm-booktitle">Just like users within the organization, guest users can be added to security groups and these groups can be referenced in the Power BI service. Prior to the existence of AAD B2B, it was necessary to create identities within AAD for external guest users, or even develop an application with custom authentication.</p>
    <p class="fm-booktitle">A guest user can be added to AAD by sending an invitation from AAD and by sharing content with the external user from the Power BI service. The first method, referred to as the <a id="calibre_link-2158" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>planned invite method, involves adding a guest user from within AAD and sending an invitation to the user’s email address. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 14.4</em> from the Azure portal (<a href="http://portal.azure.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">portal.azure.com</span></a>), <strong class="screentext">Azure Active Directory</strong> has been selected and the <strong class="screentext">Users | All users</strong> page has been accessed:</p>
    <figure class="mediaobject"><img src="images/000105.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.4: Add a guest user in AAD</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 14.4</em>, the administrator can click <strong class="screentext">New guest user</strong> to add the user, and enter an invitation message, such as in <em class="italic">Figure 14.5</em>:</p>
    <figure class="mediaobject"><img src="images/000115.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.5: Invite a guest user to AAD</p>
    <p class="fm-booktitle">Once the <strong class="screentext">Invite</strong> button is clicked, the guest or external user is sent an invitation via email containing the personal message. The user must accept the invitation and, once accepted, the guest user can be managed and added to security groups for use in Power BI. Adding users to security groups provides authorization to perform certain activities within <a id="calibre_link-542" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the organization or can be used to exclude groups of users from using certain features as explained in the <em class="italic">Tenant settings</em> section later in this chapter. Guest users are identified in AAD with a <strong class="screentext">User type</strong> of <strong class="screentext">Guest</strong>. </p>
    <p class="fm-booktitle">As an alternative to the planned invite method via AAD just described, an invite to an external user can also be generated from the Power BI service directly. In this method, commonly referred to as ad hoc invites, a guest user’s email address is specified when publishing or updating a Power BI app or when directly sharing Power BI content. </p>
    <p class="fm-booktitle">The external user would then receive an email invite to the specific content. Upon accepting this invite, the external user would be added as a guest user in AAD. Details on distributing content to users via apps and other methods are included in <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>.</p>
    <p class="fm-booktitle">Organizations have the option to completely block sharing with external users via the <strong class="screentext">External sharing</strong> tenant setting in the Power BI admin portal. As shown in <em class="italic">Figure 14.6</em>, this <a id="calibre_link-543" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>setting can be enabled or disabled for an entire organization, or limited to certain security groups:</p>
    <figure class="mediaobject"><img src="images/000126.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.6: External sharing tenant setting in Power BI admin portal</p>
    <p class="fm-booktitle">In addition to the Power BI admin portal, additional management options for external guest users are available in AAD. These settings, including whether members in the organization (non-admins) can invite guest users, are available on the <strong class="screentext">External collaboration settings</strong> page of AAD.</p>
    <p class="fm-booktitle">External B2B users are limited to consuming content that has been shared or distributed to them. For example, they can view apps, export data (if allowed by the organization), and create email subscriptions, but they cannot access workspaces or create and publish their own content. Additionally, external users cannot currently access shared content via Power BI mobile apps. The exact permissions and rights for external users depend upon each organization’s security policies.</p>
    <h3 id="calibre_link-430" class="heading1">Licensing external users</h3>
    <p class="fm-booktitle">In addition to authentication to the Power BI content, either a Power BI Pro license or Power Premium <a id="calibre_link-546" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>capacity is needed to allow the guest user to view the content. The following three licensing scenarios are supported:</p>
    <ul class="calibre10">
      <li class="bulletlist">The app workspace of the Power BI app can be assigned to Power BI Premium capacity</li>
      <li class="bulletlist">The guest user can be assigned a Power BI Pro or PPU license by the guest user’s organization</li>
      <li class="bulletlist">A Power BI Pro license can be assigned to the guest user by the sharing organization</li>
    </ul>
    <p class="fm-booktitle">In the case of the third option, the Power BI Pro license only allows the user to access content within the sharing organization. Assigning licenses for guest users is identical to assigning licenses for organizational users and is performed in the Microsoft 365 portal. Additional information on licensing is covered in the <em class="italic">Power BI licensing</em> section of <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>.</p>
    <p class="fm-booktitle">Let’s now look at securing access through the use of conditional access policies.</p>
    <h2 id="calibre_link-431" class="calibre9">Conditional access policies</h2>
    <p class="fm-booktitle">Administrators of AAD can configure conditional access policies to restrict user access to Power BI based <a id="calibre_link-544" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>on the user or security group, the IP address of the user sign-in attempt, the device platform of the user, and other factors. </p>
    <p class="fm-booktitle">A common scenario supported by conditional access policies is to either block access to Power BI from outside the corporate network or to require <strong class="screentext">multi-factor authentication</strong> (<strong class="screentext">MFA</strong>) for these external sign-in attempts. As a robust, enterprise-grade feature, organizations can <a id="calibre_link-1155" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>use conditional access policies in conjunction with security groups to implement specific data governance policies.</p>
    <p class="fm-booktitle">Each AAD conditional access policy is composed of one or more conditions and one or more controls. The conditions define the context of the sign-in attempt such as the security group of the user and the user’s IP address, while the controls determine the action to take given the context. </p>
    <p class="fm-booktitle">For example, a policy could be configured for the entire organization and all non-trusted IP addresses (the conditions) that requires MFA to access Power BI (the control). The Azure portal provides a simple user interface for configuring the conditions and controls of each conditional access policy. </p>
    <p class="fm-booktitle">The following steps and supporting screenshots describe the creation of an AAD conditional <a id="calibre_link-2159" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>access policy that requires MFA for users from the sales team accessing Power BI from outside the corporate network:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Log in to the Azure portal (<a href="http://portal.azure.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">portal.azure.com</span></a>) and select <strong class="screentext">Azure Active Directory</strong> from the main menu.</li>
      <li class="calibre13">In the left-hand navigation under the <strong class="screentext">Manage</strong> section, select <strong class="screentext">Security</strong> and then select <strong class="screentext">Conditional Access</strong>, as shown <em class="italic">Figure 14.7</em>:<figure class="mediaobject"><img src="images/000137.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 14.7: Conditional access in AAD</p>
      </li>
      <li class="calibre13">Select the <strong class="screentext">New policy</strong> icon at the top, select <strong class="screentext">Create new policy</strong>, and enter a name for the policy, such as Sales Team External Access MFA.</li>
      <li class="calibre13">Under <strong class="screentext">Assignments</strong>, set the <strong class="screentext">Users or workload identities</strong> property to <strong class="screentext">Include</strong> an Azure AD security group (such as AdWorks DW Sales Team).</li>
      <li class="calibre13">Under <strong class="screentext">Assignments</strong>, set the <strong class="screentext">Cloud apps or actions</strong> property to <strong class="screentext">Power BI Service</strong>.</li>
      <li class="calibre13">Under <strong class="screentext">Assignments</strong>, set the <strong class="screentext">Conditions</strong> property and configure the <strong class="screentext">Locations</strong> to <strong class="screentext">Include</strong> locations of <strong class="screentext">Any location</strong> and <strong class="screentext">Exclude</strong> locations of <strong class="screentext">All trusted locations</strong>. With this definition, the policy will apply to all IP addresses not defined as trusted locations in AAD.</li>
      <li class="calibre13">Under <strong class="screentext">Access controls</strong>, set the <strong class="screentext">Grant</strong> property and select the checkbox to require MFA.</li>
      <li class="calibre13">Finally, set the <strong class="screentext">Enable policy</strong> property at the bottom to <strong class="screentext">On</strong> and click the <strong class="screentext">Create</strong> command button:<figure class="mediaobject"><img src="images/000148.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 14.8: Configure a new Azure AD conditional access policy</p>
      </li>
    </ol>
    <p class="fm-booktitle">The minimum requirements to create new conditional access policies are the <strong class="screentext">Users or workload identities</strong> property, the <strong class="screentext">Cloud apps or actions</strong> property (Power BI service), and at least <a id="calibre_link-545" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>one access control. As with all security implementations, conditional access policies should be tested and validated. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 14.8</em>, a user within the AdWorks DW Sales Team could attempt to log in to Power BI from outside the corporate network. The user should be prompted (challenged) to authenticate by providing a mobile device number and entering an access code sent via text message. </p>
    <p class="fm-booktitle">It’s important to remember that conditional access policies are in addition to the user permissions defined in the Power BI service and the RLS roles created in Power BI datasets or Analysis Services data models. The <em class="italic">User permissions and security</em><em class="italic"> </em>section in <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>, contains additional information on these security layers. </p>
    <p class="fm-booktitle">AAD conditional access policies require either an Enterprise Mobility and Security E5 license or Azure AD Premium P2 license. <strong class="screentext">Enterprise Mobility and Security</strong> (<strong class="screentext">EMS</strong>) E5 licenses include <a id="calibre_link-961" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Azure AD Premium P2 as well as <a id="calibre_link-2160" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Microsoft Intune, Microsoft’s mobile device management service. Additional information on features, licensing, and pricing for EMS is available at the following URL: <a href="http://bit.ly/2lmHDZt" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2lmHDZt</span></a>.</p>
    <p class="fm-booktitle">Let’s now look specifically at administering Power BI via the <strong class="screentext">admin portal</strong>.</p>
    <h1 id="calibre_link-432" class="heading">Power BI admin portal</h1>
    <p class="fm-booktitle">The Power BI <strong class="screentext">admin portal</strong> provides controls for administrators to manage the Power BI tenant for their <a id="calibre_link-1314" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>organization. This includes settings governing who in the organization can utilize which features, how Power BI Premium capacity is allocated, and other settings such as embed codes and custom visuals. </p>
    <p class="fm-booktitle">The admin portal is accessible to Microsoft 365 <strong class="screentext">global administrators</strong> and users mapped to the <strong class="screentext">Power BI administrator</strong> role. The <strong class="screentext">Power BI administrator</strong> role and the assignment of a user <a id="calibre_link-1027" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to this role in Microsoft 365 were described in the <em class="italic">Power BI project roles</em> section of <em class="italic">Chapter 1</em>, <em class="italic">Planning Power BI Projects</em>. </p>
    <p class="fm-booktitle">To open the admin portal, log in to the Power BI service and select the <strong class="screentext">Admin portal</strong> item from the <strong class="screentext">Settings</strong> (gear icon) menu in the top right, as shown in <em class="italic">Figure 14.9</em>:</p>
    <figure class="mediaobject"><img src="images/000158.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.9: Admin portal in the Settings menu</p>
    <p class="fm-booktitle">Note that depending on screen resolution and zoom settings, the gear, bell, and other icons may not appear and instead be replaced by ellipses (<strong class="screentext">…</strong>). In this case, click the ellipses, then choose <strong class="screentext">Settings</strong> and then <strong class="screentext">Admin portal</strong>.</p>
    <p class="fm-booktitle">All Power BI users, including Power BI free users, are able to access the admin portal. However, users <a id="calibre_link-1315" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>who are not admins can only view the <strong class="screentext">Capacity settings</strong> page. Power BI administrators and Microsoft 365 global administrators have view and edit access to all of the pages shown in <em class="italic">Figure 14.10</em>:</p>
    <figure class="mediaobject"><img src="images/000170.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.10: Admin portal pages</p>
    <p class="fm-booktitle">Administrators of Power BI most commonly utilize the <strong class="screentext">Tenant settings</strong> and <strong class="screentext">Capacity settings</strong> as described in the <em class="italic">Tenant settings</em><em class="italic"> </em>and <em class="italic">Power BI Premium capacities</em> sections later in this chapter. However, the admin portal can also be used to manage any approved custom visuals for the organization, as well as any embed codes associated with <a id="calibre_link-1316" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the <strong class="screentext">Publish to web</strong> feature described in<em class="italic"> Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>.</p>
    <p class="fm-booktitle">Let’s take a look at the pages of the <strong class="screentext">admin portal</strong>, starting with <strong class="screentext">Tenant settings</strong>.</p>
    <h2 id="calibre_link-433" class="calibre9">Tenant settings</h2>
    <p class="fm-booktitle">The <strong class="screentext">Tenant settings</strong> page of the <strong class="screentext">admin portal</strong> allows administrators to enable or disable various features of the Power BI service. For example, an administrator could disable the <strong class="screentext">Publish to web</strong> feature <a id="calibre_link-1333" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>described in <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>, for the entire organization. Likewise, the administrator could allow only a certain security group to embed <a id="calibre_link-1731" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI content in <strong class="screentext">Software as a Service</strong> (<strong class="screentext">SaaS</strong>) applications such as SharePoint Online. </p>
    <p class="fm-booktitle">There are over 80 tenant settings currently available in the admin portal and more settings are continually added on a consistent basis. While a detailed explanation of each of these settings is beyond the scope of this book, <em class="italic">Chapter 12</em> of <em class="italic">Learn Power BI, 2nd Edition</em> contains a comprehensive list and explanation of all tenant settings present at the time of publication (February 2022).</p>
    <p class="fm-booktitle">All of the tenant settings provide certain controls while certain tenant settings also provide controls specific to the particular tenant setting. For example, all tenant settings provide a control to enable or disable the tenant setting (feature) within the Power BI tenant. If <strong class="screentext">Disabled</strong>, the feature is not available within the Power BI tenant. If <strong class="screentext">Enabled</strong>, the feature can be applied to <strong class="screentext">The entire organization</strong> or to <strong class="screentext">Specific security groups</strong>. In addition, the option is provided to <strong class="screentext">Except specific security groups</strong> as shown in <em class="italic">Figure 14.11</em>:</p>
    <figure class="mediaobject"><img src="images/000181.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.11: Common tenant setting controls</p>
    <p class="fm-booktitle">If a tenant setting is <strong class="screentext">Enabled</strong>, as shown in <em class="italic">Figure 14.11</em>, it is recommended that the feature be relegated to <strong class="screentext">Specific security groups</strong> unless it is deemed appropriate to allow the tenant setting for <strong class="screentext">The entire organization</strong>. Power BI administrators should consult with their enterprise network and security teams regarding whether each tenant setting should be enabled and for which security groups.</p>
    <p class="fm-booktitle">For example, a common scenario is that only specific security groups should be allowed to export data. In this case, the <strong class="screentext">Specific security groups</strong> radio button can be selected, and the security groups selected that should be able to export data. </p>
    <p class="fm-booktitle">In other scenarios, the feature should apply to the whole organization except certain groups of users. For example, the organization may want to enable a feature for all internal <a id="calibre_link-1334" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>users but exclude external users. In this case, external users could be added to an <strong class="screentext">External users</strong> security group. The radio button for <strong class="screentext">The entire organization</strong> would be selected and then the checkbox for <strong class="screentext">Except specific security groups</strong> would be checked. Finally, the <strong class="screentext">External users</strong> security group could be selected to be excluded.</p>
    <p class="fm-booktitle">Tenant settings are broken down into the following 23 groups:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">Help and support settings</strong></li>
      <li class="calibre13"><strong class="screentext">Workspace settings</strong></li>
      <li class="calibre13"><strong class="screentext">Information protection</strong></li>
      <li class="calibre13"><strong class="screentext">Export and sharing settings</strong></li>
      <li class="calibre13"><strong class="screentext">Discovery settings</strong></li>
      <li class="calibre13"><strong class="screentext">Content pack and app settings</strong></li>
      <li class="calibre13"><strong class="screentext">Integration settings</strong></li>
      <li class="calibre13"><strong class="screentext">Power BI visuals</strong></li>
      <li class="calibre13"><strong class="screentext">R and Python visuals settings</strong></li>
      <li class="calibre13"><strong class="screentext">Audit and usage settings</strong></li>
      <li class="calibre13"><strong class="screentext">Dashboard settings</strong></li>
      <li class="calibre13"><strong class="screentext">Developer settings</strong></li>
      <li class="calibre13"><strong class="screentext">Admin API settings</strong></li>
      <li class="calibre13"><strong class="screentext">Dataflow settings</strong></li>
      <li class="calibre13"><strong class="screentext">Template app settings</strong></li>
      <li class="calibre13"><strong class="screentext">Q&amp;A settings</strong></li>
      <li class="calibre13"><strong class="screentext">Dataset Security</strong></li>
      <li class="calibre13"><strong class="screentext">Advanced networking</strong></li>
      <li class="calibre13"><strong class="screentext">Goals settings</strong></li>
      <li class="calibre13"><strong class="screentext">User experience experiments</strong></li>
      <li class="calibre13"><strong class="screentext">Share data with your Microsoft 365 services</strong></li>
      <li class="calibre13"><strong class="screentext">Insights settings</strong></li>
      <li class="calibre13"><strong class="screentext">Quick measure suggestions</strong></li>
    </ol>
    <p class="fm-booktitle">Seven of these groups, <strong class="screentext">R and Python visuals settings</strong>, <strong class="screentext">Dashboard settings</strong>, <strong class="screentext">Dataflow settings</strong>, <strong class="screentext">Dataset Security</strong>, <strong class="screentext">Goals settings</strong>, <strong class="screentext">User experience experiments</strong>, and <strong class="screentext">Share data with your Microsoft 365 services</strong>, only contain a single setting that essentially enables or disables the feature. For example, the single settings for <strong class="screentext">R and Python visuals settings</strong>, <strong class="screentext">Dataflow settings</strong>, and <strong class="screentext">Goals settings</strong> simply either allow or disallow the use of R and Python visuals, dataflows, and goals respectively.</p>
    <p class="fm-booktitle">The <strong class="screentext">Help and support settings</strong> group controls custom support links, email notifications of outages, whether users are allowed to try paid features, and whether a custom message is shown when users publish reports. These settings should be reviewed carefully and in coordination with IT administration and help desk resources.</p>
    <p class="fm-booktitle">The <strong class="screentext">Workspace settings</strong> group enables or disables users to create workspaces, use datasets <a id="calibre_link-1335" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>across workspaces, and configure how workspace upgrades are performed. Of particular interest are the <strong class="screentext">Create workspaces</strong> and <strong class="screentext">Use datasets across workspaces</strong> settings. The <strong class="screentext">Create workspaces</strong> setting should only be enabled for the enterprise BI team and those users trusted and authorized by that team. Enabling the ability to use datasets across workspaces is also the preferred setting for enterprises as this allows greater security and separation of concerns between data modelers and report authors.</p>
    <p class="fm-booktitle">The <strong class="screentext">Information protection</strong> settings impact the use of sensitivity labels within the tenant. Sensitivity labels were discussed in the <em class="italic">Information protection</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>, and these settings should be reviewed carefully if using <strong class="screentext">Microsoft Information Protection</strong>.</p>
    <p class="fm-booktitle">From a data security perspective, the <strong class="screentext">Export and sharing settings</strong> group is perhaps most important. The settings in this group provide granular control over export formats such as downloading report (<code class="inlinecode">.pbix</code>) files or exporting to Excel or CSV files. </p>
    <p class="fm-booktitle">In addition, the <strong class="screentext">Allow Azure Active Directory guest users to access Power BI</strong>, <strong class="screentext">Invite external users to your organization</strong>, <strong class="screentext">Allow Azure Active Directory guest users to edit and manage content in the organization</strong>, <strong class="screentext">Show Azure Active Directory guests in lists of suggested people</strong>, and <strong class="screentext">External sharing</strong> settings provide granular control over if and how external users can access the Power BI tenant. Obviously, the first setting regarding AAD guest users would need to be enabled for the AAD B2B scenario discussed earlier in this chapter.</p>
    <p class="fm-booktitle">The <strong class="screentext">Export and sharing settings</strong> group also includes other critical settings such as <strong class="screentext">Publish to web</strong>, <strong class="screentext">Printing</strong>, <strong class="screentext">Email subscriptions</strong> and <strong class="screentext">Microsoft Teams integration</strong> settings. Many organizations choose to disable the <strong class="screentext">Publish to web</strong> feature for the entire organization. Additionally, only certain security groups may be allowed to share content in Teams or to print hard copies of reports and dashboards.</p>
    <p class="fm-booktitle">The <strong class="screentext">Discovery settings</strong> group controls whether content that users do not have access to can be returned in search results or otherwise discovered by users. Enabling discoverability can help promote a data culture where users can find and request access to interesting content.</p>
    <p class="fm-booktitle">The <strong class="screentext">Content pack and app settings</strong> group is another important group of tenant settings. The settings in this group control whether apps can be published to the entire organization and whether apps can be pushed to end users. The impact of these settings being enabled or disabled was discussed in the <em class="italic">App deployment process</em> section of <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>.</p>
    <p class="fm-booktitle">The <strong class="screentext">Integration settings</strong> group controls whether certain visuals can be used as well as <strong class="screentext">single sign-on</strong> (<strong class="screentext">SSO</strong>) integration for Snowflake, Redshift, and the data gateway. Settings are available to <a id="calibre_link-1336" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>enable or disable the ArcGIS Maps for Power BI, Azure Maps, and other map visuals. These visuals were discussed in <em class="italic">Chapter 7</em> and<em class="italic"> Chapter 8</em>. Also, importantly, this group contains a setting to enable <strong class="screentext">Analyze in Excel</strong> for on-premises datasets. Analyze in Excel was discussed in <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>.</p>
    <p class="fm-booktitle">The <strong class="screentext">Power BI visuals</strong> group controls the use of custom visuals within the organization. Notably, visuals added to <strong class="screentext">Organizational visuals</strong> (discussed later in this chapter) are generally not impacted by these settings.</p>
    <p class="fm-booktitle">The <strong class="screentext">Audit and usage settings</strong> group controls the creation of audit logs and usage metrics within the tenant. For example, the collection of <strong class="screentext">Per-user data in usage metrics for content creators</strong> can be enabled or disabled. It is highly recommended to enable the <strong class="screentext">Create audit logs for internal activity auditing and compliance</strong> setting.</p>
    <p class="fm-booktitle">There are four settings available in the <strong class="screentext">Developer settings</strong> group that control the embedding of content in apps as well as the use of service principals. Recall that the use of service principals for embedding was discussed the <em class="italic">Custom applications</em><em class="italic"> </em>section of<em class="italic"> Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>.</p>
    <p class="fm-booktitle">The <strong class="screentext">Admin API settings</strong> group controls whether service principals can use the Power BI admin APIs as well as the content of API responses.</p>
    <p class="fm-booktitle">The <strong class="screentext">Template app settings</strong> group controls the use and availability of template apps. Template apps are intended for partners and ISVs to easily create Power BI apps and then deploy those apps to any Power BI customer. Template apps can be published to the Power BI Apps marketplace and to Microsoft AppSource. More information about template apps can be found at the following link: <a href="https://bit.ly/36yntoj" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/36yntoj</span></a>.</p>
    <p class="fm-booktitle">There are two settings in the <strong class="screentext">Q&amp;A settings</strong> group. The first setting, <strong class="screentext">Review questions</strong>, allows dataset owners to review questions asked via Q&amp;A within the Power BI service. </p>
    <p class="fm-booktitle">Enabling this <a id="calibre_link-1337" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>feature helps dataset owners tune their synonyms and data model to provide more relevant answers to users. The second setting, <strong class="screentext">Synonym sharing</strong>, allows Q&amp;A synonyms to be shared within the organization. <strong class="screentext">Synonym sharing</strong> can reduce the time required to configure synonyms within a data model by leveraging previous work by colleagues.</p>
    <p class="fm-booktitle">The <strong class="screentext">Advanced networking</strong> group allows blocking public internet access as well as the ability to configure a Private Link. Azure Private Link enables accessing Azure <strong class="screentext">Platform as a Service</strong> (<strong class="screentext">PaaS</strong>) applications like Power BI over a private endpoint on your virtual network. More information <a id="calibre_link-1286" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>about Azure Private Link can <a id="calibre_link-554" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>be found here: <a href="https://bit.ly/3NqqHec" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3NqqHec</span></a>.</p>
    <p class="fm-booktitle">The <strong class="screentext">Insights settings</strong> and <strong class="screentext">Quick measure suggestions</strong> groups are currently in preview. These settings deal with the ability to request insights within a report as well as the ability to use natural language to write DAX measures.</p>
    <p class="fm-booktitle">Moving on from tenant settings, we next explore the <strong class="screentext">Usage metrics</strong> page.</p>
    <h2 id="calibre_link-434" class="calibre9">Usage metrics</h2>
    <p class="fm-booktitle">The <strong class="screentext">Usage metrics</strong> page of the <strong class="screentext">admin portal</strong> provides admins with a Power BI dashboard of <a id="calibre_link-1338" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>several top metrics, such as the most viewed dashboards and the most viewed dashboards by workspace. </p>
    <p class="fm-booktitle">However, the dashboard cannot be modified, and the tiles of the dashboard are not linked to any underlying reports or separate dashboards to support further analysis. Given these limitations, alternative monitoring solutions are recommended, such as the Microsoft 365 audit logs and usage metric datasets specific to Power BI apps. Details of both <a id="calibre_link-2161" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>monitoring options are included in the <em class="italic">Usage metrics reports</em> section as well as the following section discussing the <strong class="screentext">Users</strong> and <strong class="screentext">Audit logs</strong> pages.</p>
    <h2 id="calibre_link-435" class="calibre9">Users and Audit logs</h2>
    <p class="fm-booktitle">The <strong class="screentext">Users</strong> and <strong class="screentext">Audit logs</strong> pages simply provide links to the Microsoft 365 admin center. In the Microsoft <a id="calibre_link-1339" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>365 admin center, Power BI users can be added, removed, and managed. Audit logs record activity that occurs within the Power BI service such as publishing reports, sharing reports, and viewing dashboards. </p>
    <p class="fm-booktitle">Audit logging is important to organizations and can greatly benefit security and governance. For example, audit logs may be regularly reviewed to identify potentially high-risk activities such as sharing with external users, data exports, or logins from odd locations or at odd times (such as 3 AM). </p>
    <p class="fm-booktitle">In addition, audit logs can help identify users and content that is potentially important for the business intelligence team to be aware of and possibly move to a more managed solution. For example, the audit logs could reveal that a report in a single user’s My Workspace is being shared with a large audience and that the report is regularly viewed by many important business users within the organization. In such a circumstance, it would be advisable for the business intelligence team to contact the user regarding the report and determine if it is a candidate to be moved to a workspace under the control of the BI team.</p>
    <p class="fm-booktitle">If audit logging is enabled for the organization via the <strong class="screentext">Create audit logs for internal activity and auditing and compliance</strong> tenant setting discussed earlier in the <em class="italic">Tenant settings</em> section of this chapter, then this audit log data can be retrieved from the Microsoft 365 Security &amp; Compliance Center or via PowerShell. Additional information regarding audit logs is included in the <em class="italic">Audit logs</em> section of this chapter.</p>
    <p class="fm-booktitle">We now take a look at the Premium Per User settings.</p>
    <h2 id="calibre_link-436" class="calibre9">Premium Per User</h2>
    <p class="fm-booktitle"><strong class="screentext">Premium Per User</strong> (<strong class="screentext">PPU</strong>) licensing is <a id="calibre_link-1330" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the licensing method <a id="calibre_link-1533" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>that grants features previously relegated to Premium capacities to individual users on a per user basis. The <strong class="screentext">Premium Per User</strong> page contains the settings shown in <em class="italic">Figure 14.12</em>:</p>
    <figure class="mediaobject"><img src="images/000191.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.12: Premium Per User settings</p>
    <p class="fm-booktitle">Two of the Premium rights granted by PPU licensing include automatic page refresh and the XMLA endpoint. </p>
    <p class="fm-booktitle">Automatic page refresh allows a web browser viewing a dashboard or report page to automatically <a id="calibre_link-2162" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>refresh after a certain amount of time. This capability is often used to display a dashboard of information on a large screen for the purposes of monitoring critical events. </p>
    <p class="fm-booktitle">For example, such a solution might be used within a warehouse for monitoring the shipping and receiving of goods or within a manufacturing facility to monitor the status of machines.</p>
    <p class="fm-booktitle">The XMLA endpoint is what enables connectivity between tabular data models and other tools and services. Here, the XMLA endpoint can be set to <strong class="screentext">Off</strong>, <strong class="screentext">Read Only</strong>, or <strong class="screentext">Read Write</strong>. </p>
    <p class="fm-booktitle">Some organizations might consider the ability to access their Power BI datasets from a tool external <a id="calibre_link-1331" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to the Power BI service a security risk and thus set this setting to <strong class="screentext">Off</strong>. However, this disables certain functionality, such as Analyze in Excel. At a minimum, the <strong class="screentext">XMLA Endpoint</strong> must be set to <strong class="screentext">Read Only</strong> for Analyze in Excel to function. If using the ALM Toolkit for deployments of dataset changes, as explained in the <em class="italic">ALM Toolkit Deployment</em> section of <em class="italic">Chapter 15</em>, <em class="italic">Building Enterprise BI with Power BI Premium</em>, the <strong class="screentext">XMLA Endpoint</strong> would need to be set to <strong class="screentext">Read Write</strong> since the ALM Toolkit writes updates to datasets.</p>
    <p class="fm-booktitle">We now look at capacity settings.</p>
    <h2 id="calibre_link-437" class="calibre9">Capacity settings</h2>
    <p class="fm-booktitle">Capacity settings control dedicated capacities within the Power BI service. Microsoft 365 global admins <a id="calibre_link-1319" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and Power BI administrators can view, create, and manage all Power BI Premium capacities from the <strong class="screentext">Capacity settings</strong> page. This includes the ability to create, resize, and monitor capacities as well as bulk assign workspaces to capacities.</p>
    <p class="fm-booktitle">Capacity settings are discussed in detail in the <em class="italic">Create, size, and monitor capacities</em> section of <em class="italic">Chapter 15</em>, <em class="italic">Scaling with Power BI Premium</em>.</p>
    <p class="fm-booktitle">We now turn our attention to the <strong class="screentext">Embed Codes </strong>page.</p>
    <h2 id="calibre_link-438" class="calibre9">Embed codes</h2>
    <p class="fm-booktitle">Embed codes are <a id="calibre_link-1322" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>created and stored in the Power BI service when the <strong class="screentext">Publish to web</strong> feature is utilized. As described in the <em class="italic">Publish to web</em> section of <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>, this feature allows a Power BI report to be embedded in any website or shared via URL on the public internet. </p>
    <p class="fm-booktitle">Users with edit rights to the workspace of the <strong class="screentext">Publish to web</strong> content are able to manage the embed codes themselves from within the workspace. However, the <strong class="screentext">admin portal</strong> provides visibility and access to embed codes across all workspaces, as shown in <em class="italic">Figure 14.13</em>:</p>
    <figure class="mediaobject"><img src="images/000201.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.13: Embed Codes in Power BI admin portal</p>
    <p class="fm-booktitle">Once an embed code is selected, the Power BI admin can view the report in a browser or remove the embed code via the <strong class="screentext">View on web</strong> and <strong class="screentext">Delete</strong> actions in the header. The <strong class="screentext">Embed Codes</strong> page can be helpful to periodically monitor the usage of the <strong class="screentext">Publish to web</strong> feature <a id="calibre_link-1323" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and for scenarios in which data was included in a <strong class="screentext">Publish to web</strong> report that shouldn’t have been, and thus needs to be removed.</p>
    <p class="fm-booktitle">Next, we explore the <strong class="screentext">Organizational visuals</strong> page.</p>
    <h2 id="calibre_link-439" class="calibre9">Organizational visuals</h2>
    <p class="fm-booktitle">The <strong class="screentext">Organizational visuals</strong> page allows admins to upload and manage custom visuals (<code class="inlinecode">.pbiviz</code> files) that have <a id="calibre_link-1326" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>been approved for use within the organization. Organizations can enforce that only custom visuals included within the organizational visuals list can be used in reports published to their Power BI tenant using tenant settings in the <strong class="screentext">Power BI visuals</strong> group.</p>
    <p class="fm-booktitle">For example, an organization may have proprietary custom visuals developed internally, which it wishes to expose to business users. Alternatively, the organization may wish to define a set of approved custom visuals, such as only the custom visuals that have been certified by Microsoft. The process of obtaining custom visuals via Microsoft AppSource and the details of certified custom visuals are included in the <em class="italic">Custom visuals</em> section of <em class="italic">Chapter 8</em>, <em class="italic">Applying Advanced Analytics</em>.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 14.14</em>, the Pulse Chart custom visual has been added as a custom organizational visual from the <strong class="screentext">Organizational visuals</strong> page of the Power BI <strong class="screentext">admin portal</strong>:</p>
    <figure class="mediaobject"><img src="images/000210.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.14: Add organizational custom visual</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 14.14</em>, visuals can be added from AppSource or from a file (<code class="inlinecode">.pbiviz</code>). In addition, organizational visuals can be automatically configured to appear in the <strong class="screentext">Visualization</strong> pane <a id="calibre_link-1327" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of Power BI Desktop users by selecting a visual and clicking the <strong class="screentext">Enable for Visualization Pane</strong> link in the header. The <strong class="screentext">Visualization Pane</strong> property column shows whether or not this setting is enabled for each visual.</p>
    <p class="fm-booktitle">In <em class="italic">Figure 14.15</em>, the <strong class="screentext">Visualization Pane</strong> property has been enabled for the Pulse Chart visual and thus the Pulse Chart visual is listed in the default list of visualizations available for report creation:</p>
    <figure class="mediaobject"><img src="images/000220.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.15: Organizational visual enabled for the Visualization pane in Power BI Desktop</p>
    <p class="fm-booktitle">Organizational visuals not enabled with the <strong class="screentext">Visualization Pane</strong> setting can still be accessed and used by Power BI Desktop users.</p>
    <p class="fm-booktitle">Once the custom visual has been uploaded as an organizational custom visual, it will be accessible to users in Power BI Desktop. In <em class="italic">Figure 14.16</em>, when adding a custom visual as described in the <em class="italic">Adding a custom visual</em> section of <em class="italic">Chapter 8</em>, <em class="italic">Applying Advanced Analytics</em>, the user has selected the <strong class="screentext">Organizational visuals</strong> tab:</p>
    <figure class="mediaobject"><img src="images/000230.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.16: Organizational visuals in Power BI Desktop</p>
    <p class="fm-booktitle">Notably, adding an organizational visual in this manner does not add the custom visual as part <a id="calibre_link-1328" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of the default set of visuals but rather below a faint, dotted line as is usually the case when adding custom visuals. This is shown in <em class="italic">Figure 14.17</em>:</p>
    <figure class="mediaobject"><img src="images/000240.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.17: Organizational visual not enabled for the Visualization pane in Power BI Desktop</p>
    <p class="fm-booktitle">Overall, it is generally a good idea for organizations to standardize on a set of allowed custom visuals and to then disable the <strong class="screentext">Allow visuals created using the Power BI SDK</strong> and <strong class="screentext">Add and use certified visuals only (block uncertified)</strong> tenant settings found in the Power BI visuals group. </p>
    <p class="fm-booktitle">A business process can be developed to request, certify, and add additional visuals as necessary. The Power BI administrator would participate in this process and ultimately be the individual that adds the visual to the list of approved organizational visuals.</p>
    <p class="fm-booktitle">Such standardization ensures that reports remain similarly designed and that business users are <a id="calibre_link-1329" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>appropriately aware and understand how to interpret and use visuals found in reports. In addition, this rigor can help ensure that security and compliance concerns are also addressed to prevent unintended data loss.</p>
    <p class="fm-booktitle">We next look at the Azure connections page.</p>
    <h2 id="calibre_link-440" class="calibre9">Azure connections</h2>
    <p class="fm-booktitle">The Azure connections page contains three settings related to using your own Azure storage <a id="calibre_link-1317" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>accounts for Power BI as shown in <em class="italic">Figure 14.18</em>:</p>
    <figure class="mediaobject"><img src="images/000249.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.18: Azure connections page</p>
    <p class="fm-booktitle">By default, data used in Power BI is stored internally by the Power BI service. However, with the implementation of dataflows to use Azure Data Lake Storage Gen2 (ADLS Gen2), it is now possible to store your dataflows within your own ADLS Gen2 storage accounts versus default internal Power BI provisioned storage.</p>
    <p class="fm-booktitle">Using your own ADLS Gen2 <a id="calibre_link-646" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>storage account can be beneficial. Power BI stores dataflow data in <strong class="screentext">Common Data Model</strong> (<strong class="screentext">CDM</strong>) format. This format captures metadata about the data created by dataflows. This can be useful in scenarios involving automation, monitoring, extensibility, and backups. In addition, this can help ensure that multiple roles <a id="calibre_link-1318" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>within the organization such as analysts, data scientists, and other data professionals are working with and reusing the same set of curated data.</p>
    <p class="fm-booktitle">Let’s now turn our attention to the <strong class="screentext">Workspaces</strong> page of the <strong class="screentext">admin portal</strong>.</p>
    <h2 id="calibre_link-441" class="calibre9">Workspaces</h2>
    <p class="fm-booktitle">The <strong class="screentext">Workspaces</strong> page provides <a id="calibre_link-1340" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>a centralized view of all workspaces provisioned within the Power BI tenant, providing administrators a central hub for managing these workspaces.</p>
    <p class="fm-booktitle">For example, in <em class="italic">Figure 14.19</em>, an administrator is using the <strong class="screentext">Workspaces</strong> page to <strong class="screentext">Recover</strong> an <strong class="screentext">Orphaned</strong> workspace:</p>
    <figure class="mediaobject"><img src="images/000258.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.19: Recover orphaned workspace</p>
    <p class="fm-booktitle">Orphaned workspaces are workspaces that have no active AAD user as a member or administrator. This can happen if the user who created the workspace subsequently left the organization. Workspace recovery allows an administrator to be assigned so that the workspace content can be inspected and a decision made whether to assign a new owner to the workspace, migrate the content to a different workspace, or simply remove the workspace entirely.</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 14.19</em>, administrators can also view users assigned to workspaces and <a id="calibre_link-1341" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>even add and remove admins, members, and contributors of workspaces via the <strong class="screentext">Access</strong> menu option. The <strong class="screentext">Details</strong> and <strong class="screentext">Edit</strong> menu options provide information such as the workspace ID and the ability to edit the name and description of the workspace respectively.</p>
    <p class="fm-booktitle">We now look at the <strong class="screentext">Custom branding</strong> page.</p>
    <h2 id="calibre_link-442" class="calibre9">Custom branding</h2>
    <p class="fm-booktitle">The <strong class="screentext">Custom branding</strong> page can be used to customize the look and feel of the Power BI service. Only three <a id="calibre_link-1320" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>customizations are possible, adding a <strong class="screentext">Logo</strong>, a <strong class="screentext">Cover image</strong>, and a <strong class="screentext">Theme color</strong>, as shown in <em class="italic">Figure 14.20</em>:</p>
    <figure class="mediaobject"><img src="images/000267.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.20: Recover orphaned workspace</p>
    <p class="fm-booktitle">The <strong class="screentext">Logo</strong> and <strong class="screentext">Theme color</strong> affect the very top of Power BI service pages with the chosen logo image displayed at the top left of the page and the background color of the entire header bar set to the chosen <strong class="screentext">Theme color</strong>. If configured, the <strong class="screentext">Cover image</strong> is displayed as a banner image on the <strong class="screentext">Home</strong> page of the Power BI service.</p>
    <p class="fm-booktitle">Let’s <a id="calibre_link-1321" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>next look at the <strong class="screentext">Protection metrics</strong> page.</p>
    <h2 id="calibre_link-443" class="calibre9">Protection metrics</h2>
    <p class="fm-booktitle">The <strong class="screentext">Protection metrics</strong> page displays a simple report that graphs how sensitivity labels are applied to <a id="calibre_link-1332" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>content and is most useful if the organization has deployed sensitivity labels and associated information policies as described in the <em class="italic">Information protection</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>. </p>
    <p class="fm-booktitle">As discussed in that chapter, sensitivity labels serve to alert end users to the privacy level of the information they are viewing and can also include protection settings to encrypt the content. The page also includes a link to open the <strong class="screentext">Microsoft Defender for Cloud Apps</strong> portal for <a id="calibre_link-1124" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>additional metrics and reporting.</p>
    <p class="fm-booktitle">The final page available in the <strong class="screentext">admin portal</strong> is the <strong class="screentext">Featured content</strong> page, so let’s finish this section by looking at it now.</p>
    <h2 id="calibre_link-444" class="calibre9">Featured content</h2>
    <p class="fm-booktitle">The <strong class="screentext">Featured content</strong> page provides a centralized view of all content that has been set to be featured <a id="calibre_link-1324" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>on the Power BI <strong class="screentext">Home</strong> page. Reports, dashboards, and other content can be set as <strong class="screentext">Feature on Home</strong> via their <strong class="screentext">Settings</strong> panes as shown in <em class="italic">Figure 14.21</em>: </p>
    <figure class="mediaobject"><img src="images/000276.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.21: Feature on Home</p>
    <p class="fm-booktitle">In this <a id="calibre_link-1325" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>example, the <strong class="screentext">Utilization</strong> report has been set to <strong class="screentext">Feature on Home</strong> and appears on the Power BI <strong class="screentext">Home </strong>page in the <strong class="screentext">Featured</strong> section as shown in <em class="italic">Figure 14.22</em>. </p>
    <figure class="mediaobject"><img src="images/000285.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.22: Featured report tile</p>
    <p class="fm-booktitle">Note that if no content is featured, then the <strong class="screentext">Featured</strong> section of the <strong class="screentext">Home</strong> page does not appear. Also, who <a id="calibre_link-2163" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>can feature content within the Power BI tenant is controlled by the <strong class="screentext">Featured content</strong> tenant setting found in the <strong class="screentext">Export and sharing settings</strong> group.</p>
    <p class="fm-booktitle">This completes our tour of the Power BI admin portal. We now provide additional information regarding usage metric reports.</p>
    <h1 id="calibre_link-445" class="heading">Usage metrics reports</h1>
    <p class="fm-booktitle">The Power BI service provides standard usage metrics reports for both dashboards and reports. These <a id="calibre_link-1309" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>reports, which themselves are Power BI reports, provide quick insights into fundamental user adoption questions, such as how often the published content is being viewed and which users are viewing the content the most. </p>
    <p class="fm-booktitle">These read-only reports can be generated for specific dashboards and reports and can also be personalized (edited) by saving a copy. Once a copy of a usage metrics report has been saved, a Power BI dataset of usage metrics is created for either all the dashboards or all the reports in the workspace. The usage metrics datasets, which are updated by the Power BI service for the last 90 days of activity, and the saved usage reports can then serve as a foundation for a lightweight but robust monitoring solution for the workspace. </p>
    <p class="fm-booktitle">For example, the Global Sales app described in the previous chapter contains several dashboards and reports, with some of the reports containing multiple report pages. The following process and supporting images detail the creation and viewing of usage metrics reports:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">Access the workspace in the Power BI service containing the content to monitor. A Power BI Pro license and edit rights to the workspace are required to access usage metrics data.</li>
      <li class="calibre13">From the <strong class="screentext">Content</strong> page, select <strong class="screentext">View usage metrics report</strong> from the three vertical dots menu for a report, dashboard, or scorecard as shown in <em class="italic">Figure 14.23</em>:<figure class="mediaobject"><img src="images/000294.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 14.23: View usage metrics report</p>
      </li>
      <li class="calibre13">Once <a id="calibre_link-1310" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>prompted that the usage metrics are ready, click the <strong class="screentext">View usage metrics</strong> report button as shown in <em class="italic">Figure 14.24</em>. Alternatively, click the <strong class="screentext">View usage metrics report</strong> icon again for any of the dashboards or reports in the workspace.<figure class="mediaobject"><img src="images/000303.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 14.24: Usage metrics ready</p>
      </li>
      <li class="calibre13">A Power BI report containing usage metrics for the selected dashboard or report is displayed, such as the report shown in <em class="italic">Figure 14.25</em>:<figure class="mediaobject"><img src="images/000314.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 14.25: Report usage metrics report</p>
      </li>
      <li class="calibre13"><em class="italic">Figure 14.25</em> shows a usage metrics report for a report. Four report pages are included. </li>
      <li class="calibre13">The <strong class="screentext">Report usage</strong> page includes information such as report views, unique viewers, and trends over time. In addition, information regarding how the report is distributed and what platforms users are using to view the report is included as well as individual user statistics. The <strong class="screentext">Per-user data in usage metrics for content creators</strong> tenant setting in the <strong class="screentext">Audit and usage settings</strong> group is enabled. </li>
      <li class="calibre13">The <strong class="screentext">Report performance</strong> page includes information regarding how fast the report opens for users. The report list provides statistics regarding all reports in the workspace including report usage across the entire workspace as well <a id="calibre_link-1311" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>as individual report usage statistics. The <strong class="screentext">FAQ</strong> page simply provides definitions for the different metrics and answers to other frequently asked questions. </li>
      <li class="calibre13">At this point, usage metrics reports specific to either all reports, all dashboards or all scorecards in the workspace will be accessible on demand via the <strong class="screentext">View usage metrics report</strong> action depending upon the content type chosen in <em class="italic">step 2</em>. </li>
      <li class="calibre13">Repeat <em class="italic">step 2</em> for the other types of content in the workspace but note that paginated reports do not support usage metrics. Usage metrics reports look different depending upon the content type. For example, <em class="italic">Figure 14.26</em> shows a portion of a dashboard’s usage metrics report.<figure class="mediaobject"><img src="images/000324.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 14.26: Dashboard usage metrics report</p>
      </li>
    </ol>
    <p class="fm-booktitle">With the usage metrics report opened, the <strong class="screentext">Filters</strong> pane can be used to adjust the reports, dashboards, and <a id="calibre_link-1312" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>scorecards included in the report although these are identified by their <em class="italic">globally unique identifiers</em> (<em class="italic">GUIDs</em>) and not their names. These are the same GUIDs as discussed in the <em class="italic">Workspace and content identifiers</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>.</p>
    <p class="fm-booktitle">Usage metrics reports are an effective way to monitor the adoption of Power BI content within the enterprise and identify performance issues. Although useful for workspaces that support many users or important scenarios (such as executive dashboards), usage metrics reports are ultimately limited to individual workspaces. </p>
    <p class="fm-booktitle">Additionally, the usage metrics don’t include other activities of interest to administrators, such as when the newly scheduled refresh is configured or when a data source from a <a id="calibre_link-1313" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>gateway is removed. A more comprehensive monitoring dataset inclusive of all workspaces and all Power BI activities is available via the Microsoft 365 audit logs for Power BI, as described in the following section.</p>
    <h1 id="calibre_link-446" class="heading">Audit logs</h1>
    <p class="fm-booktitle">Power BI activities stored in the Microsoft 365 audit logs provide administrators with a complete view of user activities in the Power BI service. Each log event record identifies the user, the date <a id="calibre_link-1302" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and time of the activity, the type of activity, such as the <a id="calibre_link-529" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>printing of a report page, and the item in Power BI, such as the report that was printed. This level of detail at the tenant level across all primary activities helps administrators answer both high-level usage and adoption questions, as well as targeted compliance questions.</p>
    <p class="fm-booktitle">For example, the audit logs could prove that the volume of users and their level of engagement with Power BI reports and dashboards is increasing and thus that additional capacity is required or that the organization might benefit from a move to Premium capacity. Alternatively, an administrator could investigate the activities of just a few users to ensure they’re only engaging in activities aligned with their role. </p>
    <p class="fm-booktitle">As explained in the <em class="italic">User and audit logs</em> section of this chapter, audit logs should be regularly reviewed to identify potentially high-risk activities such as sharing with external users, data exports, or logins from odd locations and times. In addition, audit logs can help identify users and content that is potentially important for the business intelligence team to be aware of and possibly move to a more managed solution. </p>
    <p class="fm-booktitle">Because Power BI uses the centralized Microsoft 365 audit logs, Power BI activities can leverage other integrated solutions within Microsoft 365 and Azure. For example, Azure Sentinel can be used to identify anomalous activities within Power BI via machine learning/artificial intelligence, thus automating the process of regularly reviewing the audit log.</p>
    <p class="fm-booktitle">Perhaps most importantly, by using audit logs, an IT organization can understand what Power BI content is being utilized by the business. In the event that a few reports or dashboards become very popular, some level of engagement may be appropriate to ensure the underlying dataset is accurate and secure or the content migrated to an IT-supported solution. </p>
    <p class="fm-booktitle">Once enabled in the Power BI admin portal, the audit log data can be retrieved on an ad hoc basis or, more commonly, retrieved on a recurring basis as part of a continuous monitoring <a id="calibre_link-2164" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and governance solution. To minimize the setup and maintenance of <a id="calibre_link-2165" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>these monitoring solutions, Microsoft has made available PowerShell scripts that export Power BI audit log data to a CSV file format. </p>
    <p class="fm-booktitle">The first step in utilizing the audit logs is to enable audit log searching within the Microsoft 365 Compliance Center. This can be done at the following link: <a href="https://compliance.microsoft.com/auditlogsearch" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://compliance.microsoft.com/auditlogsearch</span></a>. If auditing is not turned on for the tenant, a link is present to <strong class="screentext">Start recording user and admin activity</strong>. Click that link and after approximately one hour, activity will start being recorded.</p>
    <p class="fm-booktitle">Next, enable the <strong class="screentext">Create audit logs for internal activity auditing and compliance</strong> setting in the Power BI admin portal. This setting is in the <strong class="screentext">Audit and usage settings </strong>group of the <strong class="screentext">Tenant settings</strong> page.</p>
    <p class="fm-booktitle">Once the audit log setting is enabled, user activities start to be recorded in the audit logs with a delay of 12 hours or less from their occurrence and will be stored for 90 days. This log data can be accessed directly from the Microsoft 365 Compliance Center or remotely via PowerShell scripts. In terms of direct or ad hoc access, a Microsoft 365 global administrator or a user with permission to the Compliance Center can log in to Microsoft 365 and navigate to the URL, <a href="https://compliance.microsoft.com/auditlogsearch" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://compliance.microsoft.com/auditlogsearch</span></a>.</p>
    <p class="fm-booktitle">Alternatively, a link to the Microsoft 365 admin center is provided on the <strong class="screentext">Audit logs</strong> page of the Power BI admin portal. This links directly to the audit log search interface of the Compliance Center.</p>
    <p class="fm-booktitle">From the audit log search page, users can configure a search for a <strong class="screentext">Date and time range</strong>, specific <strong class="screentext">Activities</strong>, and specific <strong class="screentext">Users</strong>, as shown in <em class="italic">Figure 14.27</em>:</p>
    <figure class="mediaobject"><img src="images/000334.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.27: Audit log search configuration</p>
    <p class="fm-booktitle">Once <a id="calibre_link-530" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>configured, clicking the <strong class="screentext">Search </strong>button returns audit log activities that meet the specified <a id="calibre_link-1303" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>criteria as shown in <em class="italic">Figure 14.28</em>:</p>
    <figure class="mediaobject"><img src="images/000344.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 14.28: Audit log search in Security &amp; Compliance Center</p>
    <p class="fm-booktitle">Click the <strong class="screentext">Export</strong> dropdown and then <strong class="screentext">Download all results</strong> in order to download a CSV file of the audit log search results. The CSV file contains four columns, <strong class="screentext">CreationDate</strong>, <strong class="screentext">UserIds</strong>, <strong class="screentext">Operations</strong>, and <strong class="screentext">AuditData</strong>.</p>
    <p class="fm-booktitle">The <strong class="screentext">CreationDate</strong> column is a date and time stamp for the activity in <strong class="screentext">Coordinated Universal Time</strong> (<strong class="screentext">UTC</strong>) format, while <a id="calibre_link-2166" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the <strong class="screentext">UserIds</strong> column contains the UPN of the user performing the activity <a id="calibre_link-2167" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>shown in the <strong class="screentext">Operations</strong> column, such as <code class="inlinecode">ViewReport</code>.</p>
    <p class="fm-booktitle">The <strong class="screentext">AuditData</strong> column contains additional information in JSON format, such as the following:</p>
    <pre class="programlisting"><code class="hljs-code">{
<span class="hljs-number">"Id"</span>:<span class="hljs-string">"0c20ca7f-24b5-48df-bbd6-94e1b9d4a7e4"</span>,
<span class="hljs-number">"RecordType"</span>:<span class="hljs-number">20</span>,
<span class="hljs-number">"CreationTime"</span>:<span class="hljs-string">"2022-03-29T17:43:55"</span>,
<span class="hljs-number">"Operation"</span>:<span class="hljs-string">"ViewReport"</span>,
<span class="hljs-number">"OrganizationId"</span>:<span class="hljs-string">"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"</span>,
<span class="hljs-number">"UserType"</span>:<span class="hljs-number">0</span>,
<span class="hljs-number">"UserKey"</span>:<span class="hljs-string">"10030000819AD21A"</span>, 
<span class="hljs-number">"Workload"</span>:<span class="hljs-string">"PowerBI"</span>,
<span class="hljs-number">"UserId"</span>:<span class="hljs-string">"user@fakedomain.com"</span>,
<span class="hljs-number">"ClientIP"</span>:<span class="hljs-string">"xx.xxx.xxx.xxx"</span>,
<span class="hljs-number">"UserAgent"</span>:<span class="hljs-string">"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/99.0.4844.74 Safari\/537.36 Edg\/99.0.1150.55"</span>,
<span class="hljs-number">"Activity"</span>:<span class="hljs-string">"ViewReport"</span>,
<span class="hljs-number">"ItemName"</span>:<span class="hljs-string">"GitHub"</span>,
<span class="hljs-number">"WorkSpaceName"</span>:<span class="hljs-string">"Github"</span>,
<span class="hljs-number">"DatasetName"</span>:<span class="hljs-string">"GitHub"</span>,
<span class="hljs-number">"ReportName"</span>:<span class="hljs-string">"GitHub"</span>,
<span class="hljs-number">"WorkspaceId"</span>:<span class="hljs-string">"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"</span>,
<span class="hljs-number">"AppName"</span>:<span class="hljs-string">"Github"</span>,
<span class="hljs-number">"ObjectId"</span>:<span class="hljs-string">"GitHub"</span>,
<span class="hljs-number">"DatasetId"</span>:<span class="hljs-string">" xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx "</span>,
<span class="hljs-number">"ReportId"</span>:<span class="hljs-string">" xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx "</span>,
<span class="hljs-number">"IsSuccess"</span>:<span class="hljs-literal">true</span>,
<span class="hljs-number">"ReportType"</span>:<span class="hljs-string">"PowerBIReport"</span>,
<span class="hljs-number">"RequestId"</span>:<span class="hljs-string">" xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx "</span>,
<span class="hljs-number">"ActivityId"</span>:<span class="hljs-string">" xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx "</span>,
<span class="hljs-number">"AppReportId"</span>:<span class="hljs-string">" xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx "</span>,
<span class="hljs-number">"DistributionMethod"</span>:<span class="hljs-string">"Apps"</span>,
<span class="hljs-number">"ConsumptionMethod"</span>:<span class="hljs-string">"Power BI Web"</span>
}
</code></pre>
    <p class="fm-booktitle">As shown in the preceding activity record associated with viewing a report via an app, many more attributes of the activity are available in the audit logs that aren’t displayed from the main audit log search results interface. To view these additional details from the audit log search page, click on a specific activity.</p>
    <p class="fm-booktitle">Object IDs such as <strong class="screentext">WorkspaceID</strong> and <strong class="screentext">DatasetID</strong> can be used to programmatically manage Power BI content via the Power BI REST API, as described in the <em class="italic">Staged deployments</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Application Workspaces and Content</em>.</p>
    <p class="fm-booktitle">A BI team would expect the creation and deletion of datasets and gateways to be infrequent activities relative to the creation and deletion of reports and dashboards. If many datasets are being created, this could be a sign of inefficient resource utilization and version control issues. </p>
    <p class="fm-booktitle">For example, rather than four reports using live connections to a single published dataset, each report may have its own dataset that requires its own resources and data refresh schedule (if import mode). </p>
    <p class="fm-booktitle">Excluding global admins, an Exchange Online license is required to access the auditing section of the Microsoft 365 Compliance Center. Additionally, administrators who are not global admins need to be mapped to a role that provides access to the audit log. This is done on the <strong class="screentext">Permissions &amp; roles</strong> page of the Compliance Center.</p>
    <p class="fm-booktitle">There are currently hundreds of distinct Power BI activities tracked in the audit logs, including the sharing of dashboards and reports, any updates to an organization’s Power BI settings (tenant settings), and activities related to the management of Power BI Premium capacities. The list of Power BI activities audited and their descriptions is available and kept updated at the following URL: <a href="http://bit.ly/2skXjAB" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://bit.ly/2skXjAB</span></a>.</p>
    <p class="fm-booktitle">The maximum date range for an audit log search is 90 days and the date/time of each activity is presented in UTC format. Additionally, a maximum of 50,000 events can be displayed per audit log search. Given these limitations and the manual nature of audit log searches, a scheduled log retrieval process is necessary to support a more robust monitoring solution. </p>
    <h2 id="calibre_link-447" class="calibre9">Audit log monitoring solution</h2>
    <p class="fm-booktitle">To internally develop a monitoring solution based on the audit log data, a PowerShell script that <a id="calibre_link-531" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>searches and exports the audit log data to a CSV file can <a id="calibre_link-969" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>be scheduled. This CSV file is then used as the source of an <strong class="screentext">extract-transform-load</strong> (<strong class="screentext">ETL</strong>) or <strong class="screentext">extract-load-transform</strong> (<strong class="screentext">ELT</strong>) process to persist <a id="calibre_link-967" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the log data in a source system, such as a SQL Server database or, on a small scale, a Power BI dataset using a <strong class="screentext">Folder</strong> query. Finally, Power BI Desktop can be used to implement remaining lightweight transformations, create DAX measures, and develop monitoring reports. </p>
    <p class="fm-booktitle">When developing an audit log monitoring solution for Power BI, the first step is to choose between the <strong class="screentext">Unified Audit Log</strong> (all Microsoft 365 audit activities) and the <strong class="screentext">Power BI Activity Log</strong>. While both log sources contain all Power BI auditing activities, it is highly recommended to <a id="calibre_link-2168" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>use the Power BI Activity Log since this log only contains Power BI activities and does not require a global administrator role to access. In the example that follows, we use the Power BI Activity Log.</p>
    <p class="fm-booktitle">To use the PowerShell script, you must install the <strong class="screentext">MicrosoftPowerBIMgmt</strong> PowerShell module. This can be done by opening PowerShell and running the following command:</p>
    <pre class="programlisting1"><code class="hljs-con">Install-Module -Name MicrosoftPowerBIMgmt -Scope CurrentUser
</code></pre>
    <p class="fm-booktitle">The <code class="inlinecode">Scope</code> parameter is highly recommended as the module should only be accessible to and used by the Power BI administrator. To export the last 12 hours of data, the following PowerShell script can be used to export the audit log data to a CSV file in the <code class="inlinecode">C:\PowerBIAuditLogs</code> directory:</p>
    <pre class="programlisting"><code class="hljs-code">Login<span class="hljs-literal">-PowerBI</span>
<span class="hljs-number">$Current</span> = <span class="hljs-built_in">Get-Date</span>
<span class="hljs-number">$Begin</span> = <span class="hljs-number">$CurrentDate</span>.AddHours(<span class="hljs-literal">-12</span>)
<span class="hljs-number">$dateString</span> = <span class="hljs-number">$CurrentDate</span>.ToString(<span class="hljs-string">"yyyy_MM_dd_HH_mm"</span>)
<span class="hljs-number">$csvFile</span> = <span class="hljs-string">"</span><span class="hljs-string">C:\PowerBIAuditLogs\"</span> + <span class="hljs-number">$dateString</span> + <span class="hljs-string">".csv"</span>
<span class="hljs-number">$StartTime</span> = <span class="hljs-number">$Begin</span>.ToUniversal().ToString(<span class="hljs-string">"yyyy-MM-ddTHH:mm:ss"</span>)
<span class="hljs-number">$EndTime</span> = <span class="hljs-number">$CurrentDate</span>.ToUniversal().ToString(<span class="hljs-string">"yyyy-MM-ddTHH:mm:ss"</span>)
<span class="hljs-number">$activities</span> = <span class="hljs-built_in">Get-PowerBIActivityEvent</span> <span class="hljs-literal">-StartDateTime</span> <span class="hljs-number">$StartTime</span> <span class="hljs-literal">-EndDateTime</span> <span class="hljs-number">$EndTime</span> | <span class="hljs-built_in">ConvertFrom-Json</span> | <span class="hljs-built_in">Export-Csv</span> <span class="hljs-number">$csvFile</span>
</code></pre>
    <p class="fm-booktitle">This PowerShell script (<code class="inlinecode">.ps1</code> file) can be executed on a schedule of every 12 hours. An ETL (or ELT) process could then be executed to access the CSV file and load the new data to a data source such as an Azure SQL database. The import and transformation could be done using <strong class="screentext">Azure Data Factory</strong>. Alternatively, Power BI Desktop could use a <strong class="screentext">Folder</strong> query to import all files within the <code class="inlinecode">C:\PowerBIAuditLogs</code> folder.</p>
    <p class="fm-booktitle">The results of each audit log search can contain duplicate rows. However, the <strong class="screentext">Id</strong> column included in the search results can be used to eliminate these duplicate rows. 24 columns of information are available in the CSV file.</p>
    <p class="fm-booktitle">With a sound data retrieval process in place, DAX measures could be authored, such as the count of active users, the average number of users per day and per month, and the count of created reports or dashboards. </p>
    <p class="fm-booktitle">To support security and compliance, measures and visualizations could be created targeting high-risk or undesirable activities, such as exporting report visual data or publishing reports to the web. For example, a card visual representing the count of data export activities could be pinned to a Power BI dashboard and a data alert could be configured against this dashboard tile.</p>
    <p class="fm-booktitle">An out-of-the-box Power BI monitoring solution is expected later this year that could potentially <a id="calibre_link-532" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>eliminate the need to develop and support a custom monitoring solution from scratch. Nonetheless, as every organization and Power BI environment is unique, administrators may evaluate whether this new solution provides sufficient flexibility and control to serve as an alternative to an internally developed and maintained monitoring solution.</p>
    <p class="fm-booktitle">Note that in addition to the <strong class="screentext">MicrosoftPowerBIMgmt</strong> PowerShell module, administrative actions are also available via the Power BI REST API and supporting .NET Client library for Microsoft Power BI public REST endpoints.</p>
    <h1 id="calibre_link-448" class="heading">The Power BI REST API for admins</h1>
    <p class="fm-booktitle">Although the Power BI admin portal and the Power Platform Admin Center portal provide easy <a id="calibre_link-1465" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>graphical tools for common and simple administrative tasks, the Power BI REST APIs provide programmatic access to many administration-focused endpoints, such as for retrieving artifact access for a given user, restoring <a id="calibre_link-1467" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>deleted workspaces, and rotating encrypting keys. </p>
    <p class="fm-booktitle">Power BI administrators and BI/IT managers are therefore encouraged to review the documentation on the Power BI REST APIs (<a href="https://docs.microsoft.com/en-us/rest/api/power-bi" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://docs.microsoft.com/en-us/rest/api/power-bi</span></a>) and to consider incorporating these APIs into standard admin processes.</p>
    <p class="fm-booktitle">One relatively new and very powerful admin API is <strong class="screentext">GetGroupsAsAdmin</strong>. This API can be called to retrieve up to 5,000 workspaces and include the users, reports, dashboards, datasets, dataflows, and workbooks associated with each given workspace. The JSON output of this single API call can then be loaded to a monitoring SQL database or potentially directly to a monitoring reporting solution to provide easy, centralized visibility to all the primary artifacts within a Power BI environment. </p>
    <p class="fm-booktitle">There are several methods for calling the Power BI REST APIs but perhaps the most familiar and straightforward option is to use the <code class="inlinecode">Invoke-PowerBIRestMethod</code> cmdlet included with the Power BI Management PowerShell module. With this cmdlet, the admin can simply pass a text string variable to the URL parameter and specify the appropriate API method for the <code class="inlinecode">Method</code> parameter (<code class="inlinecode">GET</code>, <code class="inlinecode">POST</code>, <code class="inlinecode">PUT</code>, <code class="inlinecode">DELETE</code>).</p>
    <p class="fm-booktitle">In the following snippet from a PowerShell script, a custom URL text string is created and passed <a id="calibre_link-1466" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to the <code class="inlinecode">Invoke-PowerBIRestMethod</code> cmdlet in order to retrieve up to 5,000 active workspaces along with their associated dashboards, reports, datasets, and users:</p>
    <pre class="programlisting"><code class="hljs-code"><span class="hljs-number">$PBIGroupsFile</span> = <span class="hljs-string">"C:\Users\bpowell\Admin\BIAdminArtifacts\PowerBIWorkspaces.json"</span>
<span class="hljs-number">$ActiveGroupsURLExPersonal</span> = <span class="hljs-string">'/admin/groups?$top=5000&amp;'</span> + <span class="hljs-string">'$filter=type eq'</span> + <span class="hljs-string">" 'Workspace'"</span> + <span class="hljs-string">' and state eq'</span> + <span class="hljs-string">" 'Active'"</span> + <span class="hljs-string">'&amp;$expand=dashboards,reports,datasets,users'</span>
<span class="hljs-comment">#Retrieve workspace data (with expanded values) and write to the JSON file</span>
<span class="hljs-built_in">Invoke-PowerBIRestMethod</span> <span class="hljs-literal">-Url</span> <span class="hljs-number">$ActiveGroupsURLExPersonal</span> <span class="hljs-literal">-Method</span> Get | <span class="hljs-built_in">Out-File</span> <span class="hljs-number">$PBIGroupsFile</span>
</code></pre>
    <p class="fm-booktitle">This completes our review of activities related to administering Power BI for an organization.</p>
    <h1 id="calibre_link-449" class="heading">Summary</h1>
    <p class="fm-booktitle">This chapter reviewed the features and processes applicable to administering Power BI for an organization. These included the configuration of tenant settings in the Power BI admin portal, analyzing the usage of Power BI assets, and monitoring overall user activity via the Microsoft 365 audit logs. Additionally, important administrative capabilities of Azure Active Directory, such as conditional access policies and external guest users, were also described. </p>
    <p class="fm-booktitle">The following chapter looks at the options for scaling Power BI to support increased user adoption, larger datasets, and enterprise BI solutions through the use of Premium capacities. This includes methodologies for allocating Power BI Premium capacity to workloads, leveraging the additional benefits of Power BI Premium, and other activities related to using Power BI at scale.</p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-7">
<div id="calibre_link-2169" class="calibre2">
<div id="calibre_link-2170" class="calibre3"><div id="calibre_link-2171" class="calibre4">
    <h1 class="heading">15</h1>
    <h1 id="calibre_link-450" class="mainheading">Building Enterprise BI with Power BI Premium</h1>
    <p class="fm-booktitle">For many organizations, the deployment of Power BI entails surfacing mission-critical KPIs over vast sets of data as well as empowering business users as part of a data culture. Power BI Premium is designed to meet these needs via a workload-based pricing model and scalable, enterprise-grade semantic modeling and reporting features. </p>
    <p class="fm-booktitle">While Power BI projects may begin as a proof-of-concept or as a self-service solution developed by a business analyst, the features exclusive to Power BI Premium capacity, such as large datasets, paginated reports, and the XMLA endpoint are often necessary to meet performance, scalability, and application life cycle needs of enterprise solutions.</p>
    <p class="fm-booktitle">Power BI Premium represents Microsoft’s flagship business intelligence suite, including a superset of Analysis Services semantic modeling features, a paginated reporting service offering the pixel-perfect enterprise reporting features of Reporting Services, and additional workloads including artificial intelligence and dataflows.</p>
    <p class="fm-booktitle">This chapter focuses on a review of the capabilities enabled by Power BI Premium capacities and the top considerations in provisioning and using this capacity. In addition, subjects such as life cycle management, data management, and disaster recovery are also addressed.</p>
    <p class="fm-booktitle">In this chapter, we will review the following topics:</p>
    <ul class="calibre10">
      <li class="bulletlist">Power BI Premium</li>
      <li class="bulletlist">Premium capacity nodes</li>
      <li class="bulletlist">Premium capacity estimations</li>
      <li class="bulletlist">Premium capacity administration and allocation</li>
      <li class="bulletlist">Premium capacity resource optimization</li>
      <li class="bulletlist">Life cycle management with Premium</li>
    </ul>
    <h1 id="calibre_link-451" class="heading">Power BI Premium</h1>
    <p class="fm-booktitle">Power BI Premium<a id="calibre_link-1403" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> consists of dedicated capacity (hardware) that an organization can provision to host some or all of its Power BI content (datasets, reports, scorecards, and dashboards). As an alternative to the free clusters of capacity provided by Microsoft and shared by many organizations, Premium capacities are isolated to a specific organization and thus are not impacted by the use of Power BI by other organizations. </p>
    <p class="fm-booktitle">As flexible platform<a id="calibre_link-1729" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and <strong class="screentext">software as a service</strong> (<strong class="screentext">SaaS</strong>) architectures become the norm, organizations increasingly value the ability to focus their efforts on building the right solutions for their stakeholders with the appropriate amount of resources and with minimal to no infrastructure maintenance. Power BI Premium capacity aligns well with these new expectations as it enables an organization to provision and deploy enterprise-scale resources it requires in seconds and avoids the need to configure or maintain the underlying hardware</p>
    <p class="fm-booktitle">With Power BI Premium, organizations can utilize their provisioned capacity as needed and are not constrained by the limits imposed on shared (free) capacity, such as a max of 1 GB dataset sizes and eight (8) refreshes per day. Additionally, as a cloud service managed by Microsoft, organizations have great flexibility to scale, allocate, and manage Premium resources according to their preferred allocation methodology and changing requirements. </p>
    <p class="fm-booktitle">The top benefit <a id="calibre_link-1407" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of Power BI Premium is the ability to provide read-only access to Power BI Free users and thus cost-effectively scale Power BI deployments based on workloads rather than individual user accounts. This is particularly essential for large organizations with thousands of users, the majority of which only need the ability to infrequently view and optionally interact with content. Thus, an IT organization can assign a Power BI Free license to all users and decide which relatively small group of users should be assigned Power BI Pro licenses for developing and publishing content.</p>
    <p class="fm-booktitle">When Power BI <a id="calibre_link-2172" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>content is hosted in a Premium capacity, the users consuming content such as via Power BI apps can view and interact with the content, such as making filter selections on a report or viewing a mobile-optimized dashboard on Power BI mobile applications without requiring a paid license. Thus, Power BI Premium enables organizations to limit the assignment of Power BI Pro users to those who create and distribute content.</p>
    <p class="fm-booktitle">Additionally, Power BI Premium capacity can be used to deliver Power BI content to users in applications and environments outside of the Power BI service. For example, Premium capacity can be used to embed Power BI visuals in custom applications, in other SaaS applications such as SharePoint Online, and to license <strong class="screentext">Power BI Report Server</strong> (<strong class="screentext">PBRS</strong>). Details regarding PBRS and alternative content distribution methods are included in <em class="italic">Chapter 12</em>, <em class="italic">Deploying Paginated Reports</em>, and <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>, respectively.</p>
    <p class="fm-booktitle">The Premium capacity-based licensing model, which <a id="calibre_link-1531" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>currently starts at $4,995 per month for a P1 SKU, implies the following three fundamental questions:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">How much Premium capacity should be provisioned?</li>
      <li class="calibre13">How should provisioned capacity be allocated? </li>
      <li class="calibre13">What can be done to minimize capacity utilization and thus resource costs?</li>
    </ol>
    <p class="fm-booktitle">Guidance and consideration of these questions are included in the following sections. </p>
    <p class="fm-booktitle">Premium <strong class="screentext">Embedded</strong> (<strong class="screentext">EM</strong>) SKUs, which <a id="calibre_link-1532" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>are exclusive to embedding Power BI content in applications or services such as SharePoint Online, have a lower starting price point and fewer resources. EM SKUs were discussed in the <em class="italic">Embedding</em> section of <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>. As most organizations will leverage the Power BI service and mobile apps for large-scale deployments, Power BI Premium P SKUs are the focus of this chapter.</p>
    <h2 id="calibre_link-452" class="calibre9">Power BI Premium capabilities</h2>
    <p class="fm-booktitle">Power BI Premium <a id="calibre_link-1408" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>provides many additional capabilities beyond the ability to distribute content to read-only Power BI Free users. For example, Premium capacity or <strong class="screentext">Premium Per User</strong> (<strong class="screentext">PPU</strong>) licensing would<a id="calibre_link-1535" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> be required to migrate SSRS, Cognos, or other similar types of reports to paginated reports in the Power BI service. Likewise, the limits of 1 GB of in-memory dataset size and only 8 refreshes per day may not be sufficient for many scenarios. Power BI Premium unlocks these resource limitations and exposes many other features, including artificial intelligence, and a rich suite of tool support via the XMLA endpoint.</p>
    <p class="fm-booktitle"><em class="italic">Table 15.1</em> identifies <a id="calibre_link-2173" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>additional features of Premium capacities as well as <strong class="screentext">Premium Per User</strong> (<strong class="screentext">PPU</strong>) licenses:</p>
    <table id="calibre_link-2174" class="table-container">
      <tbody class="calibre16">
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">#</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Feature</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">License Type</strong></p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">1</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Enable Power BI users to view content without a license</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">2</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Licensing for Power BI Report Server (PBRS)</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">3</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Multi-geo deployment</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">4</p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword1">Bring your own key</strong> (<strong class="keyword2">BYOK</strong>)</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">5</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Autoscale add-on</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">6</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Increased model size limit of 100 GB (PPU) and 400 GB (Premium)</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium and PPU</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">7</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Paginated reports in the Power BI service</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium and PPU</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">8</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Advanced AI (AutoML and Azure Cognitive Services)</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium and PPU</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">9</p>
          </td>
          <td class="table-cell">
            <p class="normal2">XMLA endpoint (read/write)</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium and PPU</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">10</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Enhanced dataflow functionality (enhanced compute engine, DirectQuery, linked, and computed entities)</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium and PPU</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">11</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Application life cycle management (pipelines)</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium and PPU</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">12</p>
          </td>
          <td class="table-cell">
            <p class="normal2">100 TB maximum storage</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium and PPU</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">13</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Maximum scheduled refreshes of 48 times per day (note: refreshes can be more frequent using the API endpoint)</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium and PPU</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">14</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Backup and restore datasets</p>
          </td>
          <td class="table-cell">
            <p class="normal2">Premium and PPU</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="fm-acknowledgement">Table 15.1: Power BI Premium features</p>
    <p class="fm-booktitle">Some of the capabilities identified in this table enable completely new scenarios for projects involving Power BI datasets created with Power BI Desktop. For example, up to 400 GB datasets can be hosted in Premium capacity. Likewise, a dataset can be configured to refresh every 30 minutes in Premium capacity.</p>
    <p class="fm-booktitle">The integration of<a id="calibre_link-1409" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> advanced artificial intelligence enables organizations to apply machine learning and other cognitive services models to their datasets, enabling predictive capabilities for categorization and regression as well as sentiment analysis, text analytics, and vision capabilities.</p>
    <p class="fm-booktitle">The ability to <a id="calibre_link-1747" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>publish <strong class="screentext">SQL Server Reporting Services</strong> (<strong class="screentext">SSRS</strong>) reports, also referred to as paginated reports (RDL reports), to the Power BI service is especially valuable for <a id="calibre_link-1263" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>organizations with significant SSRS investments. Without this capability, these organizations were previously required to deploy the Power BI Report Server (or an SSRS server), as described in <em class="italic">Chapter 12</em>, <em class="italic">Deploying Paginated Reports</em>. </p>
    <p class="fm-booktitle">Additionally, connectivity parity with Analysis Services, as provided by the XMLA endpoint, allows BI <a id="calibre_link-1745" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>developers to utilize rich and familiar model development and management tools, including <strong class="screentext">SQL Server Management Studio</strong> (<strong class="screentext">SSMS</strong>), Tabular Editor, ALM Toolkit, DAX Studio, and Visual Studio, as they would with Analysis Services models. Additionally, the standard XMLA protocol allows for other popular BI reporting tools such as Tableau to leverage a Power BI dataset as a data source. </p>
    <p class="fm-booktitle">The dataflow capabilities enabled by the enhanced compute engine allow the use of DirectQuery in dataflows as well as incremental refreshes. The enhanced compute engine also drastically improves data refresh speeds when performing costly data transformation operations such as joins, distinct rows, and grouping. Finally, linked and computed entities enable the reuse of dataflows within other dataflows as well as the pre-aggregation of data into new tables, respectively.</p>
    <p class="fm-booktitle">To support the largest Power BI deployments, the multi-geo feature of Power BI Premium allows Premium capacities to be assigned to different regions, allowing datasets and reports to be located closer to users in different geographies and thus achieve a better overall performance. </p>
    <p class="fm-booktitle">Note that BYOK allows organizations to use their own encryption keys, making it easier to meet compliance requirements and exercise more control over their data assets, and that the 100 TB storage limit for Premium capacities is a per-capacity node.</p>
    <p class="fm-booktitle">Finally, the <a id="calibre_link-1410" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>autoscale feature allows additional processing power to be added temporarily depending upon the load within the Premium capacity. Autoscaling allows Premium capacities to remain performant during peak load times.</p>
    <p class="fm-booktitle">Let’s now take a closer look at Power BI Premium capacities.</p>
    <h1 id="calibre_link-453" class="heading">Premium capacity nodes</h1>
    <p class="fm-booktitle">A Premium capacity node<a id="calibre_link-1416" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can be thought of as a fully managed server in the <a id="calibre_link-608" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Azure cloud that runs the Power BI service, including all frontend and backend operations such as loading a report and refreshing a dataset, respectively. The capacity node is dedicated and isolated to the organization that provisioned the capacity, and the same user experience and functionality are delivered as the shared (free) capacity provided by the Power BI Service. </p>
    <p class="fm-booktitle">Each capacity node has a set of processing and memory resources (v-cores and RAM), bandwidth limits, and a cost that aligns with these resources. For example, a P1 capacity node includes 8 v-cores and 25 GB of RAM at a cost of $4,995 per month, while a P2 capacity includes 16 v-cores and 50 GB of RAM at a cost of $9,995 per month. </p>
    <p class="fm-booktitle">When workspaces containing Power BI content (datasets, reports, and dashboards) are assigned to Premium capacity nodes, the resources of the given capacity node are used to execute Power BI activities associated with this content, such as query processing and data refresh operations. Depending upon how Power BI datasets and results are architected, different resources are more important than others.</p>
    <p class="fm-booktitle">For example, if Power BI reports utilize a DirectQuery dataset or a live connection to an Analysis Services model, then the amount of RAM provided per capacity is much less important than the limits on the number of connections and the max page renders at peak times. In such deployments, the resources provisioned for the data source system (CPU cores, clock speed, and RAM), as well as the latency and bandwidth of the connection between the source system and the data center region of the Power BI tenant, would largely drive query performance.</p>
    <p class="fm-booktitle">The following table identifies the resources associated with the eight EM and P Premium capacity nodes currently available as well as their equivalent A capacities: </p>
    <table id="calibre_link-2175" class="table-container">
      <tbody class="calibre16">
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Capacity SKUs</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Total v-cores</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Backend v-cores</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Frontend v-cores</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">RAM (GB)</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">DirectQuery/ Live connections (per second)</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Max memory per query (GB)</strong></p>
          </td>
          <td class="table-cell">
            <p class="normal2"><strong class="keyword">Model refresh parallelism</strong></p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">EM1/A1</p>
          </td>
          <td class="table-cell">
            <p class="normal2">1</p>
          </td>
          <td class="table-cell">
            <p class="normal2">0.5</p>
          </td>
          <td class="table-cell">
            <p class="normal2">0.5</p>
          </td>
          <td class="table-cell">
            <p class="normal2">3</p>
          </td>
          <td class="table-cell">
            <p class="normal2">3.75</p>
          </td>
          <td class="table-cell">
            <p class="normal2">1</p>
          </td>
          <td class="table-cell">
            <p class="normal2">5</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">EM2/A2</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2</p>
          </td>
          <td class="table-cell">
            <p class="normal2">1</p>
          </td>
          <td class="table-cell">
            <p class="normal2">1</p>
          </td>
          <td class="table-cell">
            <p class="normal2">5</p>
          </td>
          <td class="table-cell">
            <p class="normal2">7.5</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2</p>
          </td>
          <td class="table-cell">
            <p class="normal2">10</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">EM3/A3</p>
          </td>
          <td class="table-cell">
            <p class="normal2">4</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2</p>
          </td>
          <td class="table-cell">
            <p class="normal2">10</p>
          </td>
          <td class="table-cell">
            <p class="normal2">15</p>
          </td>
          <td class="table-cell">
            <p class="normal2">2</p>
          </td>
          <td class="table-cell">
            <p class="normal2">20</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">P1/A4</p>
          </td>
          <td class="table-cell">
            <p class="normal2">8</p>
          </td>
          <td class="table-cell">
            <p class="normal2">4</p>
          </td>
          <td class="table-cell">
            <p class="normal2">4</p>
          </td>
          <td class="table-cell">
            <p class="normal2">25</p>
          </td>
          <td class="table-cell">
            <p class="normal2">30</p>
          </td>
          <td class="table-cell">
            <p class="normal2">6</p>
          </td>
          <td class="table-cell">
            <p class="normal2">40</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">P2/A5</p>
          </td>
          <td class="table-cell">
            <p class="normal2">16</p>
          </td>
          <td class="table-cell">
            <p class="normal2">8</p>
          </td>
          <td class="table-cell">
            <p class="normal2">8</p>
          </td>
          <td class="table-cell">
            <p class="normal2">50</p>
          </td>
          <td class="table-cell">
            <p class="normal2">60</p>
          </td>
          <td class="table-cell">
            <p class="normal2">6</p>
          </td>
          <td class="table-cell">
            <p class="normal2">80</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">P3/A6</p>
          </td>
          <td class="table-cell">
            <p class="normal2">32</p>
          </td>
          <td class="table-cell">
            <p class="normal2">16</p>
          </td>
          <td class="table-cell">
            <p class="normal2">16</p>
          </td>
          <td class="table-cell">
            <p class="normal2">100</p>
          </td>
          <td class="table-cell">
            <p class="normal2">120</p>
          </td>
          <td class="table-cell">
            <p class="normal2">10</p>
          </td>
          <td class="table-cell">
            <p class="normal2">160</p>
          </td>
        </tr>
        <tr class="calibre18">
          <td class="table-cell">
            <p class="normal2">P4/A7</p>
          </td>
          <td class="table-cell">
            <p class="normal2">64</p>
          </td>
          <td class="table-cell">
            <p class="normal2">32</p>
          </td>
          <td class="table-cell">
            <p class="normal2">32</p>
          </td>
          <td class="table-cell">
            <p class="normal2">200</p>
          </td>
          <td class="table-cell">
            <p class="normal2">240</p>
          </td>
          <td class="table-cell">
            <p class="normal2">10</p>
          </td>
          <td class="table-cell">
            <p class="normal2">320</p>
          </td>
        </tr>
        <tr class="calibre17">
          <td class="table-cell">
            <p class="normal2">P5/A8</p>
          </td>
          <td class="table-cell">
            <p class="normal2">128</p>
          </td>
          <td class="table-cell">
            <p class="normal2">64</p>
          </td>
          <td class="table-cell">
            <p class="normal2">64</p>
          </td>
          <td class="table-cell">
            <p class="normal2">400</p>
          </td>
          <td class="table-cell">
            <p class="normal2">480</p>
          </td>
          <td class="table-cell">
            <p class="normal2">10</p>
          </td>
          <td class="table-cell">
            <p class="normal2">640</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="fm-acknowledgement">Table 15.2: Premium capacity nodes</p>
    <p class="fm-booktitle">The differences between P, EM, and A SKUs were discussed in the <em class="italic">Embedding</em> section of <em class="italic">Chapter 13</em>, <em class="italic">Creating Power BI Apps and Content Distribution</em>. As mentioned there, EM SKUs are exclusive to <a id="calibre_link-1417" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>embedding Power BI content in external <a id="calibre_link-609" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>applications (custom, Teams, SharePoint) and do not support viewing the content in the Power BI service or Power BI mobile apps without a license.</p>
    <p class="fm-booktitle">Given their more limited workloads, EM SKUs have significantly fewer resources and cost less to provision. Premium P SKUs (P1, P2, P3, P4, P5), however, support both embedding content in applications and the usage of the Power BI Service. As shown in <em class="italic">Table 15.2</em>, the largest Premium capacity node (P5) includes 128 v-cores and 400 GB of RAM. </p>
    <p class="fm-booktitle">The dataset size limitation for Power BI Premium of 400 GB reflects the maximum amount of memory available within Premium capacity nodes. In other words, dataset sizes are limited based on the maximum amount of memory available within the capacity. For example, a P2 Premium capacity could support several 45 GB datasets but would not support a 55 GB dataset given its 50 GB limit. </p>
    <p class="fm-booktitle">This per-dataset limit associated with Premium Capacity Generation 2 represents a dramatic leap in scalability relative to the per-capacity limits of the first generation of Premium capacity. Keep in mind that some memory must be reserved for dataset refreshes and queries, and thus the maximum permitted dataset size may be smaller than the total amount of memory for the capacity.</p>
    <p class="fm-booktitle">Some of the limits in <em class="italic">Table 15.2</em> only apply to certain dataset modes. For example, the DirectQuery/Live connections (per second), and Max memory per query (GB) are applicable to DirectQuery/Live mode connections, while Model refresh parallelism applies to import <a id="calibre_link-610" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>mode datasets. Model refresh parallelism refers to the number of objects (tables) that<a id="calibre_link-1418" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can be refreshed at the same time.</p>
    <p class="fm-booktitle">We now further explain additional columns in <em class="italic">Table 15.2</em>, specifically, the differences between frontend and backend resources.</p>
    <h2 id="calibre_link-454" class="calibre9">Frontend versus backend resources</h2>
    <p class="fm-booktitle">It’s <a id="calibre_link-1472" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>important to understand the composition of frontend and backend resources in relation to Power BI workloads. For example, although a P2 capacity provides 16 total v-cores, only 8 backend cores are dedicated to processing queries, refreshing datasets, and the server-side rendering of reports. </p>
    <p class="fm-booktitle">Additionally, only the backend of a Premium capacity node, such as the 50 GB of RAM for a P2 capacity, is exclusive to the provisioning organization. If Power BI is only being used to create reports and dashboards against DirectQuery or Live connection sources, then these backend resources are less important and the connection limit (60 per second for a P2 capacity) would be the most relevant resource to understand and monitor. </p>
    <p class="fm-booktitle">The frontend cores (8 for a P2) are shared with other organizations in a pool of servers responsible for the web service, the management of reports and dashboards, uploads/downloads, and the user experience in navigating the Power BI service. Organizations that utilize Power BI datasets in the default import (in-memory) mode will want to ensure that sufficient RAM and backend cores are available to support both the data refresh process<a id="calibre_link-2176" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and the query workloads. </p>
    <p class="fm-booktitle"><em class="italic">Figure 15.1</em> illustrates the distribution of frontend and backend resources for a Premium capacity node (P2):</p>
    <figure class="mediaobject"><img src="images/000363.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.1: Power BI Premium capacity node</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 15.1</em>, the backend of a capacity node can be thought of as a dedicated server or virtual machine with a fixed amount of CPU and RAM. It’s the backend server that is responsible for the most resource-intensive or heavy lifting operations and thus should always be considered in relation to the resource needs of import mode datasets assigned to the given capacity.</p>
    <p class="fm-booktitle">In Power BI Premium Generation 1 (Gen1), the backend v-cores were reserved physical computing nodes dedicated to a particular Power BI Premium capacity. However, in Power BI Generation 2 (Gen2), these backend resources are physical nodes within regional clusters that service all Premium capacities within that region. This new architecture has significant advantages in terms of performance and monitoring.</p>
    <p class="fm-booktitle">For example, because<a id="calibre_link-1473" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the limitations of different capacity SKUs listed in <em class="italic">Table 15.2</em> are no longer based on physical constraints, as they were in Gen1, but rather a set of rules that the Power BI service enforces, administrators no longer need to monitor their capacities as closely as before. Instead of monitoring capacities to observe whether the capacity was approaching the limits of its resources, administrators are instead simply notified when capacity limits have been reached, thus significantly reducing the overhead required by administrators to maintain optimal performance.</p>
    <p class="fm-booktitle">A factor of 2.5X (times) is generally used to size the RAM requirements of in-memory Power BI datasets. For example, a 10 GB Power BI dataset (.PBIX), would require 25 GB of RAM (10 * 2.5 = 25). This estimate is based on 10 GB to store the dataset in-memory, another 10 GB for a copy of the dataset that is created during full refresh/processing operations, and an extra 5 GB to support temporary memory structures that can be required to resolve user queries.</p>
    <p class="fm-booktitle">Note that this<a id="calibre_link-1474" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> example is exclusive to import mode datasets hosted in the Power BI Premium capacity (the backend resources). A separate architecture and considerations for capacity nodes apply when query requests are routed to Analysis Services models via Live connection or a DirectQuery data source such as Teradata or SAP HANA. </p>
    <p class="fm-booktitle">From a Premium capacity perspective, in these scenarios, the BI team would need to determine via load testing and the usage metrics described in the <em class="italic">Monitoring Premium capacities</em> section later in this chapter whether the query throughput limit (DirectQuery/ Live connections per second from <em class="italic">Table 15.2</em>) to these sources is sufficient. If this throughput level is sufficient, yet performance is still unacceptable, several other components of the overall solution could represent the performance bottleneck and could be evaluated separately.</p>
    <p class="fm-booktitle">The other components or factors impacting performance include the design of the data model, the efficiency or complexity of DAX measures, the design of the data source, the design of Power BI reports (for example, quantity and type of visuals), the resources and performance of the gateway server(s) if applicable, the network connection between the Power BI service and the data source, and the level of user interactivity with reports. </p>
    <p class="fm-booktitle">Techniques and practices to optimize data models and the visualization layer in Power BI are provided in the <em class="italic">Data model optimizations</em> and <em class="italic">Report and visualization optimizations</em> sections later in this chapter, respectively.</p>
    <p class="fm-booktitle">With the<a id="calibre_link-2177" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> basics of Premium capacities understood, we next turn our attention to answering one of the three primary questions regarding Premium capacities introduced at the beginning of this chapter: how much Premium capacity should be provisioned?</p>
    <h1 id="calibre_link-455" class="heading">Premium capacity estimations</h1>
    <p class="fm-booktitle">The <a id="calibre_link-1414" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>volume of factors involved in Premium <a id="calibre_link-606" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>capacity utilization makes it difficult to forecast the amount of Premium capacity (and thus cost) required. This complexity is particularly acute for large deployments with diverse use cases to support. </p>
    <p class="fm-booktitle">Additionally, for organizations relatively new to Power BI, the level and growth of user adoption, as well as the requirements for future projects, can be unclear. In the past, Microsoft provided an online tool to estimate which capacities would be needed for estimated workloads. However, that online tool no longer exists. Instead, use the guidance in this section to estimate Premium capacity requirements and then use the <em class="italic">Monitoring Premium capacities</em> section later in this chapter to determine whether additional resources are necessary.</p>
    <p class="fm-booktitle">Recall from the previous section that the important capacity limits from <em class="italic">Table 15.2</em> vary per dataset storage mode and usage. Available RAM is highly important to import mode datasets while somewhat less important for DirectQuery/Live datasets. Also, consider that resource requirements are not simply defined based on the number of concurrent users. </p>
    <p class="fm-booktitle">For example, 1,000 users viewing a single report with one visual is vastly different from 1,000 users viewing 100 reports, each with 10 different visuals. Add to this the variability of resource requirements based upon the complexity and efficiency of data transformation operations and/or DAX calculations as well as RLS rules and it is easy to understand the complexity of providing clear estimates in all circumstances.</p>
    <p class="fm-booktitle">For import models, it is important to realize that these models must be fully loaded into available memory in order to facilitate refreshing and querying. In addition to the size of these data models, it is important to consider how many active, heavily used, data models will exist within the capacity. Enough memory should be available to allow all such datasets to be loaded into memory at the same time in order to maximize performance.</p>
    <p class="fm-booktitle">Referencing the 2.5X factor mentioned in the last section, thus, if two 10 GB datasets are heavily used by the organization, then this would require a total of 50 GB or a P2 node. Alternatively, organizations may instead choose to deploy two P1 nodes and dedicate a dataset to each node. By using multiple capacities, organizations can isolate workloads and thereby guarantee resources for priority datasets and reports.</p>
    <p class="fm-booktitle">Import mode datasets are also constrained by the model refresh parallelism (how many models can be refreshed simultaneously), but in Gen2 are no longer constrained by the number of concurrent refreshes. In Gen1, the maximum number of concurrent refreshes was 1.5X the number of backend v-cores, rounded up.</p>
    <p class="fm-booktitle">For <a id="calibre_link-607" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>DirectQuery and Live connection datasets, the <a id="calibre_link-1415" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>DirectQuery/Live connections per second and maximum memory per query are two primary constraints, but also consider that these datasets can require significant v-core resources and even memory when evaluating complex RLS rules and DAX measure calculations.</p>
    <p class="fm-booktitle">Finally, dataflows and paginated reports.</p>
    <p class="fm-booktitle">Given the complexity of estimating required capacity sizes, a fiscally conservative approach would be to develop initial assets as part of shared capacity. Subsequently, the organization could purchase equivalent A SKUs for test purposes, which is why the A SKUs were included in <em class="italic">Table 15.2</em>. </p>
    <p class="fm-booktitle">A SKUs are charged on an hourly basis and require no minimum commitment. These A SKUs are thus an inexpensive way to load test workloads. Load testing can be executed using a PowerShell script or, for more complex scenarios, performed within Visual Studio. The Power BI Dedicated Capacity Load Assessment Tool<a id="calibre_link-1378" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can be downloaded from the following link: <a href="https://bit.ly/3tG66aR" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3tG66aR</span></a>.</p>
    <p class="fm-booktitle">Power BI Embedded A SKUs can be purchased within the Azure portal, while Power BI EM and P SKUs are purchased within the Microsoft 365 Admin Center under the Billing section.</p>
    <p class="fm-booktitle">With an approach to capacity estimation provided, we next turn our attention to capacity administration and the second of the three primary questions regarding Premium capacities introduced at the beginning of this chapter: how should provisioned capacity be allocated?</p>
    <h1 id="calibre_link-456" class="heading">Premium capacity administration and allocation</h1>
    <p class="fm-booktitle">One of the most <a id="calibre_link-1404" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>important responsibilities of a Power BI administrator is <a id="calibre_link-478" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>the management of Power BI Premium capacities. From a Power BI administration perspective, Power BI Premium can be thought of as an organization’s dedicated hardware resources to support the use of the Power BI service. </p>
    <p class="fm-booktitle">Not all of an organization’s content needs to be hosted in Premium capacity. However, these resources enable the distribution of content to read-only Power BI Free users and they provide more consistent performance, among other scalability and management benefits.</p>
    <p class="fm-booktitle">Microsoft 365 global administrators and users assigned to the Power BI service administrator role automatically have the right to administer Premium capacities in the Power BI admin portal. An administrator’s role in relation to Premium capacity is to ensure that the provisioned resources are utilized according to the organization’s policies, and that sufficient resources are available to support the existing workload.</p>
    <p class="fm-booktitle">Power BI Premium administrators should be<a id="calibre_link-1405" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> familiar with the following list of responsibilities:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">Create a new capacity with the available (purchased) v-cores</strong>
        <p class="normal1">An organization may choose to dedicate a Premium capacity to a specific project or application. In other scenarios, one capacity could be dedicated to self-service projects while another capacity could be used by corporate BI projects.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Grant capacity assignment permissions to users or security groups of users</strong>
        <p class="normal1">This enables Power BI Pro users who are also administrators of workspaces to assign their workspaces to Premium capacity. This setting can also be disabled or enabled for the entire organization. </p>
      </li>
      <li class="calibre13"><strong class="screentext">Assign workspaces to Premium capacity, or remove a workspace from Premium capacity, in the Power BI admin portal</strong>
        <p class="normal1">This is an alternative and complementary approach to capacity assignment permissions. Power BI service administrators can manage existing capacities and assign workspaces in bulk. These bulk assignments can be by user, by a security group of users, or for the entire organization.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Monitor the usage metrics of Premium capacities to ensure sufficient resources are available</strong>
        <p class="normal1">An app is available for monitoring Premium capacities. More information about this app can be found at the <a id="calibre_link-1423" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>following link: <a href="https://bit.ly/3EmzbPu" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3EmzbPu</span></a>.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Change the size of an existing capacity to a larger (scale up) or smaller (scale down) capacity node</strong>
        <p class="normal1">As more users and content utilize a specific capacity, it may be necessary to scale up or allocate certain workspaces to a different Premium capacity or shared (free) capacity.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Assign a user or group of users as capacity administrators for a capacity</strong>
        <p class="normal1">This can be appropriate to support large, enterprise deployments with multiple capacities <a id="calibre_link-1406" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and many app workspaces.</p>
      </li>
    </ol>
    <p class="fm-booktitle">Given the importance of performance to any BI project, as well as the cost of Power BI Premium capacities, BI/IT teams need to plan for an efficient, manageable allocation of Premium capacity. This allocation plan and any project-specific decisions need to be communicated to the Premium administrator(s) for implementation. The following sections describe the responsibilities identified here and related considerations in greater detail. </p>
    <h2 id="calibre_link-457" class="calibre9">Capacity allocation</h2>
    <p class="fm-booktitle">Power BI Premium <a id="calibre_link-1411" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>provides organizations with significant flexibility <a id="calibre_link-588" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>for both allocating their resources to Premium capacities, as well as assigning Power BI content to those capacities.</p>
    <p class="fm-booktitle">Although it’s possible to broadly assign all workspaces (and thus all content) of an organization to a single Premium capacity, most organizations will want to efficiently allocate and manage these resources. </p>
    <p class="fm-booktitle">For example, certain Power BI reports and dashboards that are utilized by executives or which contribute to important business processes might be identified and prioritized for Premium capacity. In an initial deployment of a Premium capacity, a BI/IT team may exclusively assign the workspaces associated with content considered mission-critical to this capacity. This capacity may remain isolated to the specific workload(s) or, based on testing and monitoring, the BI team may determine that sufficient resources are available to support additional workspaces and their associated resource requirements.</p>
    <p class="fm-booktitle">Similar to provisioning a Premium capacity exclusive to high-value content, a Premium capacity may be provisioned due to the unique requirements of a particular solution. As one example, a new Power BI dataset may be developed that represents a data source or business process not currently supported in the data warehouse. In this scenario, a large import mode Power BI dataset, perhaps initially developed by the business team, would serve as the source for reports and dashboards that require distribution to many Power BI Free users or even the entire organization. Given these characteristics, a Premium capacity node could be provisioned and dedicated to the app workspace hosting this dataset and its visualizations so that no other solution could impact its performance. </p>
    <p class="fm-booktitle">A single Premium capacity can be provisioned and created for an organization, or, for larger and more diverse deployments, multiple Premium capacities can be created with different sizes (CPU, memory, bandwidth) appropriate for their specific workloads.</p>
    <p class="fm-booktitle">In terms of allocating<a id="calibre_link-1412" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> resources to Premium capacities, an organization is only limited by the number of <strong class="screentext">virtual cores</strong> (<strong class="screentext">v-cores</strong>) that have been purchased. For example, an organization could initially purchase a P2 capacity, which includes <a id="calibre_link-589" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>16 v-cores. Once purchased, a P2 capacity could be created in the Capacity settings page of the Admin portal that utilizes all of these cores. However, at some later date, this capacity could be changed to a P1 capacity that only uses 8 v-cores. This would allow the organization to create a second P1 capacity given the 8 remaining v-cores available. Alternatively, a second P2 capacity could be purchased, providing another 16 v-cores. With 32 total v-cores purchased by the organization, an existing P2 capacity could be increased to a P3 capacity (32 v-cores). </p>
    <p class="fm-booktitle"><em class="italic">Figure 15.2</em> illustrates this example of capacity allocation:</p>
    <figure class="mediaobject"><img src="images/000014.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.2: Power BI Premium capacity allocation</p>
    <p class="fm-booktitle">Regardless of the <a id="calibre_link-1413" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Premium SKU (P1, P2, P3, P4, or P5), the combination of SKUs purchased in the Microsoft 365 admin center, or the number of specific SKUs (instances), an organization can use the total number of v-cores purchased as it <a id="calibre_link-590" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>wishes. For example, purchasing a P3 SKU provides 32 v-cores, the same as purchasing four instances of a P1 SKU (8 X 4 = 32).</p>
    <p class="fm-booktitle">For organizations getting started with Power BI and that are comfortable with actively managing their Premium capacities, individual instances of the P1 SKU with no annual commitment (month-to-month) could make sense. For example, a single P1 instance could be purchased to start and then, if it’s determined that more resources are needed, a second P1 instance could be purchased, making 16 cores available for either a P2 capacity or two P1 capacities.</p>
    <p class="fm-booktitle">In this diagram, an organization has chosen to isolate the sales and purchasing workspaces to their own P1 capacities with eight v-cores each. This isolation ensures that the resources required for one workspace, such as the user’s connection to the Sales app, do not impact the other workspace (Purchasing). Additionally, the Finance and Marketing workspaces have been left in shared (free) capacity for now but could later be assigned to Capacity A or Capacity B if sufficient resources are available.</p>
    <p class="fm-booktitle">Whether Power BI workspaces are allocated to Premium capacity or shared capacity is transparent to end users. For example, the same login and content navigation experience in the Power BI service and Power BI mobile apps applies to both Premium and shared capacity. Therefore, organizations can selectively allocate certain workspaces, such as production workspaces accessed by many Power BI Free users, to Premium capacity while<a id="calibre_link-2178" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> allowing other small or team workspaces <a id="calibre_link-2179" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to remain in the shared capacity.</p>
    <p class="fm-booktitle">The following section describes a capacity planning method.</p>
    <h3 id="calibre_link-458" class="heading1">Corporate and Self-Service BI capacity </h3>
    <p class="fm-booktitle">As described in the <em class="italic">Data governance for Power BI</em> section of <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>, certain projects will likely be wholly owned by the BI/IT team, including the<a id="calibre_link-599" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> report and visualization layer. Other <a id="calibre_link-601" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>projects, however, may be owned by business units or teams but still require or benefit from IT-provided resources, such as the on-premises data gateway and Premium capacity. </p>
    <p class="fm-booktitle">The BI team can manage a continuous life cycle over both project types (Corporate BI, Self-Service BI) by validating use cases or requirements for Premium capacity. Additionally, the migration of Power BI content across distinct Premium capacities could become part of a standard migration process from a self-service solution to a corporate BI-owned solution.</p>
    <p class="fm-booktitle">The provisioning and allocation of Power BI Premium capacity can further reflect an organization’s support for both Corporate and Self-Service BI solutions. Typically, the Power BI content created and managed by IT is considered mission-critical to the organization or is accessed by a high volume of users. Self-service BI solutions, however, tend to utilize smaller datasets and usually need to be accessible to a smaller group of users.</p>
    <p class="fm-booktitle">In the following example shown in <em class="italic">Figure 15.3</em>, the allocation includes two Premium capacities, a P3, and a P2, dedicated to Corporate BI Capacity and Self-Service BI Capacity content, respectively:</p>
    <figure class="mediaobject"><img src="images/000400.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.3: Power BI Premium Capacity allocation: Corporate and Self-Service BI</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 15.3</em>, the Sales and Finance workspaces have been assigned to a P3 capacity dedicated to corporate BI solutions. </p>
    <p class="fm-booktitle">The Human Resources and Purchasing workspaces, however, have been assigned to a P2 Premium capacity dedicated to self-service BI projects. For example, certain Power BI Pro users in these departments have developed datasets and reports that have proven to be valuable to several stakeholders. The assignment of these workspaces to Premium capacity enables these users to make this content accessible to a wider audience, such as the 20 Power BI Free users in the Purchasing department.</p>
    <p class="fm-booktitle">Remember that <a id="calibre_link-600" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>not all workspaces need to <a id="calibre_link-602" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>consume Premium capacity resources. A team of Power BI Pro users may collaborate within a workspace and still be effective with the content hosted in shared capacity. Premium capacity is only needed in scenarios requiring broad distribution to read-only Power BI Free users or when the additional capabilities (for example, large datasets) identified in the Power BI Premium capabilities section earlier in this chapter are required.</p>
    <p class="fm-booktitle">In the event that one of the self-service solutions needs to be migrated to the corporate BI team, the BI team could re-assign the workspace to the existing P3 capacity. Alternatively, to avoid consuming any additional resources of the existing P3 capacity and potentially impacting these workloads, a new corporate BI capacity could be created for the workspace or the capacity expanded to a P4.</p>
    <p class="fm-booktitle">BI teams consistently need to evaluate the trade-offs involved with isolating projects/solutions to specific Premium capacities. Assigning a single workspace or multiple related workspaces to a dedicated capacity ensures that no other project or activity impacts performances. However, many dedicated Premium capacities may become onerous to manage and could be an inefficient use of resources if the Power BI workload doesn’t fully utilize the resources. </p>
    <p class="fm-booktitle">Ultimately, teams <a id="calibre_link-2180" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>will need to monitor capacity <a id="calibre_link-2181" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>resource utilization and either re-allocate and re-assign capacities and workspaces, respectively, or provision additional Premium resources (v-cores) and scale up existing capacities. Scaling up and scaling out activities are discussed in the next section, which covers creating, sizing, and monitoring capacities.</p>
    <h2 id="calibre_link-459" class="calibre9">Create, size, and monitor capacities</h2>
    <p class="fm-booktitle">Microsoft 365 global <a id="calibre_link-591" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>admins and Power BI<a id="calibre_link-595" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> service administrators can view, create, and manage all Power BI Premium capacities via the Admin portal, as discussed in <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>. </p>
    <p class="fm-booktitle">In <em class="italic">Figure 15.4</em>, the <strong class="screentext">Capacity settings</strong> page from the Admin portal is shown:</p>
    <figure class="mediaobject"><img src="images/000410.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.4: Admin portal’s Capacity settings page</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 5.4</em>, 16 v-cores have been provisioned for the organization and a single P1 <a id="calibre_link-2182" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>capacity has been created, which <a id="calibre_link-2183" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>consumes half of these cores. </p>
    <p class="fm-booktitle">A <strong class="screentext">Set up new capacity</strong> button is located above the list of Premium capacities that have been configured. Clicking the <strong class="screentext">Set up new capacity</strong> button launches a setup window, as shown in <em class="italic">Figure 15.5</em>:</p>
    <figure class="mediaobject"><img src="images/000420.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.5: Set up new Premium capacity</p>
    <p class="fm-booktitle">In this example, eight v-cores are available for the new capacity, and thus a P1 capacity requiring eight v-cores can be created. The capacity is named and the capacity administrator(s) for the new capacity are defined. </p>
    <p class="fm-booktitle">The <strong class="screentext">Capacity size</strong> dropdown<a id="calibre_link-592" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> exposes all capacity sizes, but sizes requiring more v-cores than the volume of v-cores currently available cannot be selected. Once these properties are configured, click the <strong class="screentext">Create</strong> button to complete the process.</p>
    <p class="fm-booktitle">Note that the <strong class="screentext">Capacity size</strong> and <strong class="screentext">Capacity admins</strong> properties are required to set up the new capacity. Each <a id="calibre_link-596" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>capacity must have at least one capacity admin, who has full administrative rights to the given capacity. These users do not have to be a Microsoft 365 global admin or a Power BI service administrator. Users assigned as capacity administrators have the same administrative rights to the given capacity as Power BI service administrators, such as the ability to change capacity sizes, assigning workspaces to the capacity as well as user assignment permissions.</p>
    <p class="fm-booktitle">For example, a Power BI Pro user could be assigned as a capacity admin and could access this capacity via the Admin portal just like a Power BI admin. However, only the capacities for which the user is a capacity admin would appear on the <strong class="screentext">Capacity settings</strong> page. Additionally, other pages of the Admin portal, such as Tenant settings, would not be visible or accessible to the capacity admin. </p>
    <p class="fm-booktitle">As mentioned, capacity admins are capable of changing capacity sizes and settings, so let’s look at those topics next.</p>
    <h3 id="calibre_link-460" class="heading1">Changing capacity size</h3>
    <p class="fm-booktitle">At some point after a<a id="calibre_link-597" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> capacity has been created, it may be necessary to change the size of the capacity. For example, given the increased adoption of Power BI, the P1 SKU may be insufficient to support the current workload, and thus an additional eight v-cores could be purchased with the intent to scale up the existing capacity to a P2 capacity size (16 v-cores). Alternatively, an administrator may wish to view the recent utilization of a Premium capacity to help determine whether additional app workspaces can be assigned to the capacity. </p>
    <p class="fm-booktitle">To change a capacity size and to view the utilization for a capacity, click the name of the capacity from the <strong class="screentext">Capacity settings</strong> page shown in <em class="italic">Figure 15.4</em>. In <em class="italic">Figure 15.6</em>, a capacity was selected and then the <strong class="screentext">Change size</strong> button clicked in order to expose the <strong class="screentext">Change size</strong> pane:</p>
    <figure class="mediaobject"><img src="images/000005.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.6: Changing the capacity size</p>
    <p class="fm-booktitle">The <strong class="screentext">Change size</strong> pane contains a dropdown used for setting the capacity size. In this scenario, eight additional v-cores are available, meaning that the P1 capacity could be changed to a P2 capacity in just a few clicks. </p>
    <p class="fm-booktitle">Alternatively, instead <a id="calibre_link-598" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of changing sizes manually, as shown in <em class="italic">Figure 15.6</em>, an option exists to autoscale Premium capacities. Autoscaling is an optional feature with an additional cost that allows capacities to automatically scale up by adding additional v-cores once certain thresholds are exceeded. Using autoscale can help ensure optimal performance during peak hours. Additional information about autoscale<a id="calibre_link-535" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can be found at the following link: <a href="https://bit.ly/3J2bb4S" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3J2bb4S</span></a>.</p>
    <p class="fm-booktitle">With the creation and sizing of capacities understood, we next look at monitoring Premium capacities.</p>
    <h3 id="calibre_link-461" class="heading1">Monitoring Premium capacities</h3>
    <p class="fm-booktitle">As mentioned <a id="calibre_link-593" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>previously, Gen2 of Power BI Premium capacities has reduced the need to constantly monitor capacity nodes since the performance of backend resources are no longer physically constrained. </p>
    <p class="fm-booktitle">That said, it is still important to monitor capacities in order to identify problematic queries or datasets and reports receiving increased traffic.</p>
    <p class="fm-booktitle">An app is available for monitoring all capacities to which a user is a capacity admin. This app is available in AppSource as the Power BI Premium Capacity Utilization and Metrics app, as shown in <em class="italic">Figure 15.7</em>:</p>
    <figure class="mediaobject"><img src="images/000015.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.7: Changing capacity size</p>
    <p class="fm-booktitle">This app allows capacity admins to understand the usage of datasets, dataflows, paginated reports, and other content within Power BI Premium Gen2 capacities, as well as important metrics such as memory utilization and v-core processing time. A link to the app is included under the <strong class="screentext">Capacity usage report</strong> section of the settings for a capacity. Additional information <a id="calibre_link-1021" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>about this app is available at the following link: <a href="https://bit.ly/377d0Qu" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/377d0Qu</span></a>.</p>
    <p class="fm-booktitle">In addition<a id="calibre_link-594" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to the monitoring of utilization and metrics, Premium capacities also include the ability to send notifications when certain important metrics have been reached or exceeded. This is done in the notifications section after clicking on a specific capacity from the <strong class="screentext">Capacity settings</strong> page of the Admin portal, as shown in <em class="italic">Figure 15.8</em>:</p>
    <figure class="mediaobject"><img src="images/000025.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.8: Notification settings</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 15.8</em>, instead of the constant need to monitor capacities typical of Gen1, Gen2 allows for less rigorous monitoring via notifications. Capacity admins can choose thresholds for notifications as well as for important events such as autoscaling. </p>
    <p class="fm-booktitle">Let’s next take a look at assigning workspaces to capacities.</p>
    <h2 id="calibre_link-462" class="calibre9">Workspace assignment</h2>
    <p class="fm-booktitle">Just as <a id="calibre_link-603" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>organizations have the flexibility to allocate their purchased v-cores across one or multiple Premium capacities, there are also multiple options for assigning workspaces to Premium capacity. </p>
    <p class="fm-booktitle">To bulk assign multiple workspaces to a capacity within the Admin portal, navigate to a specific capacity by clicking on the capacity name from the <strong class="screentext">Capacity settings</strong> page of the Admin portal, expand the <strong class="screentext">Workspaces assigned to this capacity</strong> section, and then click the <strong class="screentext">Assign workspaces</strong> link, as shown in <em class="italic">Figure 15.9</em>:</p>
    <figure class="mediaobject"><img src="images/000035.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.9: Assigning workspaces</p>
    <p class="fm-booktitle">Clicking this link exposes the <strong class="screentext">Assign workspaces</strong> pane as shown in <em class="italic">Figure 15.10</em>:</p>
    <figure class="mediaobject"><img src="images/000045.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.10: Assign workspaces pane</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 15.10</em>, all workspaces for the entire organization can be bulk assigned to the capacity. In addition, specific workspaces or all workspaces created by specific users can also be assigned. If applied to specific users, any existing workspaces assigned to those users, including workspaces already in a separate capacity, will be moved to the capacity assigned. </p>
    <p class="fm-booktitle">As an alternative or complementary approach to assigning workspaces in the Admin portal, administrators of a capacity can also grant users or groups of users permission to assign workspaces to Premium capacity. This is done in the <strong class="screentext">Contributor permissions</strong> section for a capacity. In <em class="italic">Figure 15.11</em>, a user (gdeckler) is granted contributor permissions to a <a id="calibre_link-604" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Premium capacity:</p>
    <figure class="mediaobject"><img src="images/000055.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.11: Contributor permissions</p>
    <p class="fm-booktitle">Users granted this permission will also require administrative rights to any workspace they wish to assign to Premium capacity. Workspace assignment is performed by workspace administrators via the <strong class="screentext">Premium</strong> tab of the <strong class="screentext">Setting</strong> pane for a workspace, as shown in <em class="italic">Figure 15.12</em>:</p>
    <figure class="mediaobject"><img src="images/000066.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.12: Assigning to Premium per capacity</p>
    <p class="fm-booktitle">The differences between workspace administrators and members were described in the <em class="italic">Workspace roles and rights</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>. </p>
    <p class="fm-booktitle">This <a id="calibre_link-605" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>completes our coverage of the administration and allocation tasks for Premium capacities. We now turn our attention to the final primary question regarding Premium capacities introduced at the beginning of this chapter: what can be done to minimize capacity utilization and, thus, resource costs? </p>
    <h1 id="calibre_link-463" class="heading">Premium capacity resource optimization</h1>
    <p class="fm-booktitle">Given the <a id="calibre_link-611" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>cost of Premium capacity, BI teams will<a id="calibre_link-1419" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> want to follow practices to ensure that these resources are actually required and not being used inefficiently. For example, with large import mode datasets, a simple design change such as the removal of unused columns from a fact table can significantly reduce the size of the dataset and, hence, the amount of memory needed. </p>
    <p class="fm-booktitle">By following a <a id="calibre_link-2184" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>series of recommended practices in terms of both modeling and report design, fewer Premium capacity resources <a id="calibre_link-2185" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>will be required to deliver the same query performance and scale. With small-scale self-service BI datasets and reports, performance tuning and optimization are usually not necessary. Nonetheless, as these models and reports can later take on greater scale and importance, a basic review of the solution can be applied before the content is assigned to Premium capacity.</p>
    <p class="fm-booktitle">The following two sections identify several of the top data modeling and report design practices to efficiently utilize Premium capacity resources. </p>
    <h2 id="calibre_link-464" class="calibre9">Data model optimizations</h2>
    <p class="fm-booktitle">For many data models, particularly those that were developed as part of pilot projects or by business users, a number of modifications can be implemented to reduce resource requirements or improve query performance. Therefore, prior to concluding that a certain amount of Premium capacity is <a id="calibre_link-612" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>required, data models can be evaluated against a number of standard design practices and optimization techniques such as the following:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">Avoid duplicate or near-duplicate data models</strong>
        <p class="normal1">Design and maintain a consolidated, standardized dataset (data model) of fact and dimension tables that can support many reports. Multiple datasets that represent near duplicates of the same source data and logic will require their own resources for refreshes and will also be difficult to manage and maintain version control.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Remove tables and columns that aren’t needed by the model</strong>
        <p class="normal1">For import mode models, columns with unique values (cardinality) will be the most expensive to store and scan at query time. The <em class="italic">Fact table columns</em> section of <em class="italic">Chapter 4</em>, <em class="italic">Designing Import, DirectQuery, and Composite Data Models</em> provides examples of avoiding derived columns that, for import mode models, can be efficiently implemented via DAX measures.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Reduce the precision and cardinality of columns when possible</strong>
        <p class="normal1">If four digits <a id="calibre_link-613" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>to the right of the decimal place are sufficient precision, revise a column’s data type from a Decimal number to a Fixed decimal number (19, 4). Apply rounding if even less precision is required. Split columns containing multiple values, such as a datetime column, into separate columns (date and time).</p>
      </li>
      <li class="calibre13"><strong class="screentext">Limit or avoid high cardinality relationships, such as dimension tables with over 1.5 million rows</strong>
        <p class="normal1">Consider splitting very large dimension tables into two tables and defining relationships between these tables and the fact table. The less granular table (such as Product Subcategory grain) could support most reports while the more granular table (such as Product) could be used only when this granularity is required.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Avoid expensive DAX measures</strong>
        <p class="normal1">Avoid measures that require a high volume of context transitions (from row to filter context) or that cause an unnecessary number of evaluations. For example, only define DAX variables that will always be required for the expression and that can be used to replace other expressions. Additionally, rather than embedding complex logic in measures, particularly logic that involves materializing large temporary tables or iterating over large tables, look for opportunities to revise the model such as with new attributes to keep the DAX measures simple and efficient.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Use whole number (integer) data types instead of text data types whenever possible</strong></li>
      <li class="calibre13"><strong class="screentext">If the data model uses a DirectQuery data source, optimize this source</strong>
        <p class="normal1">For example, implement indexes or columnar technologies available, such as the Clustered Columnstore Index for SQL Server. Additionally, ensure that the source database supports referential integrity and that the DirectQuery model assumes referential integrity in its defined relationships. This will result in inner join queries to the source. Additionally, consider whether an in-memory or even a DirectQuery aggregation table could be used to improve the performance of common or high priority report queries.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Avoid or limit DISTINCTCOUNT() measures against high cardinality columns</strong>
        <p class="normal1">For example, create the <code class="inlinecode">DISTINCTCOUNT()</code> measure expression against the natural key or business key column identifying the dimension member (such as Customer ABC), rather than the columns used in the fact-to-dimension relationship. With slowly changing dimension processes, the relationship columns could store many more unique values per dimension member and thus reduce performance. Additionally, if a slight deviation from the exact result is tolerable, the <code class="inlinecode">APPROXIMATEDISTINCTCOUNT()</code> function can be considered a more performant alternative to <code class="inlinecode">DISTINCTCOUNT()</code>.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Avoid the use of calculated DAX columns on fact tables</strong>
        <p class="normal1">Create these columns in the source system or in the queries used to load the model to allow for better data compression. For DirectQuery models, avoid the use of<a id="calibre_link-614" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> DAX calculated columns for all tables.</p>
      </li>
    </ol>
    <p class="fm-booktitle">In addition to dataset optimizations, it is also important to consider report and visualization optimizations.</p>
    <h2 id="calibre_link-465" class="calibre9">Report and visualization optimizations</h2>
    <p class="fm-booktitle">A well-designed analytical <a id="calibre_link-615" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>model with ample resources can still struggle to produce adequate performance due to an inefficient visualization layer. The following list of techniques can be applied to Power BI reports and dashboards to reduce the query workload and avoid slower resource-intensive queries:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1"><strong class="screentext">Create dashboards on top of reports to leverage cached query results representing the latest data refresh</strong>
        <p class="normal1">Unlike dashboards, report queries are sent and executed on the fly when Power BI reports are loaded. Multiple dashboards can be linked together as described in <em class="italic">Chapter 9, Designing Dashboards</em>. If the dataset uses a DirectQuery or Live connection, take advantage of the scheduled cache refresh, as described in the <em class="italic">Dashboard cache refresh</em> section of <em class="italic">Chapter 11, Managing the On-Premises Data Gateway</em>.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Avoid report visuals that return large amounts of data such as tables with thousands of rows and many columns</strong>
        <p class="normal1">Report visuals that require scrolling or which represent a data extract format should be filtered and summarized. Report visuals that return more data points than necessary to address their business question can be modified to a lower granularity. </p>
        <p class="normal1">For example, a dense scatter chart of individual products could be modified to use the less granular product subcategories column.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Ensure that filters are being applied to reports so that only the required data is returned</strong>
        <p class="normal1">Apply report-level filters to only return the time periods needed (such as current year and last year). Use visual-level filters such as a top N filter, as described in the <em class="italic">Visual-level filtering</em> section of <em class="italic">Chapter 8, Creating and Formatting Visualizations</em>.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Limit the volume of visuals used on a given report page</strong>
        <p class="normal1">Optionally, remove the interactions between visuals (cross-highlighting) to further reduce report queries.</p>
      </li>
      <li class="calibre13"><strong class="screentext">Understand which DAX measures are less performant and only use these measures when required</strong>
        <p class="normal1">For <a id="calibre_link-616" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>example, only use expensive measures in card visuals or within highly filtered visuals exposing only a few distinct numbers.</p>
      </li>
    </ol>
    <p class="fm-booktitle">Following these best practices for reports will help optimize the use of Premium capacity resources. In addition, the capacity settings themselves can be tuned in order to optimize resource workloads.</p>
    <h2 id="calibre_link-466" class="calibre9">Workloads</h2>
    <p class="fm-booktitle">Power BI Premium was originally<a id="calibre_link-617" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> exclusive to datasets but has been expanded to include three additional workloads: Paginated Reports, AI, and Dataflows. Power BI administrators have the option of configuring settings specific to each of these workloads. Workloads settings are available for Premium capacities in the <strong class="screentext">Workloads</strong> section after navigating to a specific capacity<a id="calibre_link-2186" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> from the <strong class="screentext">Capacity settings</strong> page of the Admin portal. These settings are shown in <em class="italic">Figure 15.13</em>:</p>
    <figure class="mediaobject"><img src="images/000077.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.13: Workloads settings</p>
    <p class="fm-booktitle">Configuring <a id="calibre_link-618" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Premium capacity workload settings is an important tool for ensuring that Premium capacity resources are being allocated to the highest priority workloads and to avoid or mitigate the impact of inefficient or resource-intensive queries and artifacts on the overall Premium capacity. </p>
    <p class="fm-booktitle">For example, setting threshold values for both <strong class="screentext">the Query Memory Limit %</strong> and the <strong class="screentext">Max Result Row Set Count</strong> dataset settings can help avoid capacity resources being allocated to poorly designed queries or ‘data extract’ style reports. Likewise, the <strong class="screentext">Minimum refresh interval</strong> dataset setting can be used to avoid report authors from configuring reports that would generate a high and unnecessary volume of queries against a DirectQuery source system. Additional information on <strong class="screentext">Workloads</strong> can be<a id="calibre_link-619" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> found at the<a id="calibre_link-1848" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> following link: <a href="https://bit.ly/379PEK3" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/379PEK3</span></a>.</p>
    <p class="fm-booktitle">The three primary questions regarding Premiums capacities have now been covered. However, there are additional secondary considerations for Premium capacities, such as life cycle management.</p>
    <h1 id="calibre_link-467" class="heading">Life cycle management with Premium</h1>
    <p class="fm-booktitle">In<a id="calibre_link-1060" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> addition to the enhanced life cycle management capabilities <a id="calibre_link-1422" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>of Power BI Premium described in the <em class="italic">Power BI deployment pipelines</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>, the write capabilities of the XMLA endpoint enable additional capabilities with regard to life cycle management of datasets assigned to Premium capacities.</p>
    <p class="fm-booktitle">Specifically, given the write capabilities of the XMLA endpoint, the recommended tool for deploying incremental changes to datasets becomes the ALM Toolkit from MAQ Software, which is based on the BISM Normalizer by Christian Wade.</p>
    <h2 id="calibre_link-468" class="calibre9">ALM Toolkit deployment</h2>
    <p class="fm-booktitle">ALM Toolkit<a id="calibre_link-496" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> is a free, open source tool that enables the object-level comparison of source<a id="calibre_link-1061" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> and target datasets and the incremental deployment of changes such as new or revised DAX measures. ALM Toolkit can be <a id="calibre_link-500" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>downloaded from <a href="http://alm-toolkit.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">http://alm-toolkit.com</span></a>. </p>
    <p class="fm-booktitle">Once downloaded, simply run the <code class="inlinecode">.msi</code> installer file to install. After installation, ALM Toolkit is available from the <strong class="screentext">External tools</strong> tab of Power BI Desktop, as shown in <em class="italic">Figure 15.14</em>:</p>
    <figure class="mediaobject"><img src="images/000088.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.14: ALM Toolkit as available through External Tools</p>
    <p class="fm-booktitle">Open a Power BI <a id="calibre_link-1062" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Desktop file <a id="calibre_link-497" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>and then launch ALM Toolkit from the ribbon on the <strong class="screentext">External tools</strong> tab. Once opened, click the <strong class="screentext">Compare</strong> button to display the <strong class="screentext">Connections</strong> dialog shown in <em class="italic">Figure 15.15</em>:</p>
    <figure class="mediaobject"><img src="images/000099.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.15: ALM Toolkit Connections dialog</p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 15.15</em>, the <a id="calibre_link-498" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>local dataset open in Power BI Desktop serves as the <strong class="screentext">Source</strong> and is<a id="calibre_link-1063" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> compared with a <strong class="screentext">Target</strong> dataset in the Power BI service. Clicking the <strong class="screentext">OK</strong> button compares the <strong class="screentext">Target</strong> with the <strong class="screentext">Source</strong> in order to ascertain any differences between the data models. </p>
    <p class="fm-booktitle">As shown in <em class="italic">Figure 15.16</em>, a new measure, <strong class="screentext">New Account Measure</strong>, has been added to the local data <a id="calibre_link-2187" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>model but does not exist in the <strong class="screentext">Target</strong> dataset published to the Power BI service.</p>
    <figure class="mediaobject"><img src="images/000109.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.16: ALM Toolkit comparison of data models</p>
    <p class="fm-booktitle">Use the <strong class="screentext">Select Actions</strong> dropdown <a id="calibre_link-2188" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>shown in <em class="italic">Figure 15.16</em> to select <strong class="screentext">Create all objects Missing in Target</strong>, as shown in <em class="italic">Figure 15.17</em>:</p>
    <figure class="mediaobject"><img src="images/000119.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.17: ALM Toolkit Select Actions dropdown</p>
    <p class="fm-booktitle">Next, click the <strong class="screentext">Validate Selection</strong> button and, once validated, click the <strong class="screentext">OK</strong> button. Finally, click the <strong class="screentext">Update</strong> button to deploy the changes to the published dataset in the Power BI service.</p>
    <p class="fm-booktitle">In this example, changes<a id="calibre_link-1064" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> made by a<a id="calibre_link-499" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> developer to a local copy of the Power BI Desktop (<code class="inlinecode">.pbix</code>) file were deployed to a workspace assigned to the <strong class="screentext">Development</strong> stage of a Power BI Deployment pipeline. As discussed in the <em class="italic">Power BI deployment pipelines</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>, these changes could then be promoted to the workspace assigned to the <strong class="screentext">Test</strong> stage and finally, to the <strong class="screentext">Production</strong> stage.</p>
    <p class="fm-booktitle">Using ALM Toolkit to deploy changes to Power BI datasets is particularly important when using incremental refresh. Incremental refresh creates an additional partition within the dataset for each incremental refresh cycle. In addition, because of this, datasets using incremental refresh cannot be downloaded from the Power BI service. </p>
    <p class="fm-booktitle">Without the use of ALM Toolkit, if model changes are required, the local Power BI Desktop file would need to be fully refreshed and then republished to the Power BI service, removing all incremental refresh partitions and effectively “starting over” with regard to incremental refreshes. For large, complex data models, this could be a costly and time-consuming exercise, especially if only minor changes have been made. </p>
    <p class="fm-booktitle">Additionally, there’s often a scenario in which certain objects in the source dataset, such as query parameters, need to remain different than the target dataset. ALM Toolkit makes it easy to <a id="calibre_link-2189" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>exclude certain <a id="calibre_link-2190" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>differences and deploy only the changes required.</p>
    <p class="fm-booktitle">Documentation for ALM Toolkit<a id="calibre_link-501" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> can be found at the following link: <a href="https://bit.ly/3f95ODQ" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://bit.ly/3f95ODQ</span></a>.</p>
    <p class="fm-booktitle">We next take a look at another life cycle scenario enabled by the XMLA endpoint.</p>
    <h2 id="calibre_link-469" class="calibre9">Dataset management with SSMS</h2>
    <p class="fm-booktitle">With the XMLA <a id="calibre_link-1065" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>endpoint feature of <a id="calibre_link-808" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>Power BI Premium, it is possible to connect to<a id="calibre_link-1678" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> datasets published to the Power BI service from within <strong class="screentext">SQL Server Management Studio</strong> (<strong class="screentext">SSMS</strong>). To accomplish this, follow these steps:</p>
    <ol class="numberedlist">
      <li class="calibre13" value="1">First, open <strong class="screentext">Settings</strong> for a workspace and navigate to the <strong class="screentext">Premium</strong> tab, as shown in <em class="italic">Figure 15.18</em>:<figure class="mediaobject"><img src="images/000130.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 15.18: Premium Workspace Connection</p>
      </li>
      <li class="calibre13">Use the <strong class="screentext">Copy</strong> button<a id="calibre_link-1066" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> to copy<a id="calibre_link-809" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the workspace<a id="calibre_link-1679" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> connection</li>
      <li class="calibre13">Open SSMS</li>
      <li class="calibre13">In the <strong class="screentext">Connect to Server</strong> dialog, choose <strong class="screentext">Analysis Services</strong> in the <strong class="screentext">Server type</strong> field and paste the copied connection string into the <strong class="screentext">Server name</strong> field, as shown in <em class="italic">Figure 15.19</em>:<figure class="mediaobject"><img src="images/000141.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 15.19: SQL Server Connection</p>
      </li>
      <li class="calibre13">As shown in <em class="italic">Figure 15.19</em>, choose <strong class="screentext">Azure Active Directory - Password</strong> in the <strong class="screentext">Authentication </strong>field, enter <a id="calibre_link-1067" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>a username and password, and then click<a id="calibre_link-810" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> the <strong class="screentext">Connect</strong> button</li>
      <li class="calibre13">The datasets <a id="calibre_link-1680" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>published to the workspace are available in the <strong class="screentext">Object Explorer</strong> pane of SSMS, as shown in <em class="italic">Figure 15.20</em>:<figure class="mediaobject"><img src="images/000152.png" alt="" class="calibre15" /></figure>
        <p class="packt_figref">Figure 15.20: SSMS Object Explorer</p>
      </li>
    </ol>
    <p class="fm-booktitle">The datasets within the workspace can now be managed within SSMS as if they were any other Analysis Services tabular cube. </p>
    <p class="fm-booktitle">For example, the data<a id="calibre_link-1068" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> warehouse <a id="calibre_link-811" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>team might need to reload the entire sales <a id="calibre_link-1681" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>history for the past 5 years to correct an issue found by an external audit. However, the incremental refresh policy in Power BI is only loading the last 1-2 months’ worth of data. Using SSMS via the XMLA endpoint, the older partitions can be manually refreshed for the historical data by viewing the partitions for the dataset, as shown in <em class="italic">Figure 15.21</em>:</p>
    <figure class="mediaobject"><img src="images/000195.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.21: Partitions within SSMS</p>
    <p class="fm-booktitle">Note that <a id="calibre_link-2191" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>PowerShell <a id="calibre_link-2192" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>scripts and the SqlServer PowerShell module can also <a id="calibre_link-2193" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>be used as a means to handle these custom refresh scenarios and to potentially supplement incremental refresh policies managed by Power BI.</p>
    <p class="fm-booktitle">We will now look at a final topic regarding the life cycle of Premium capacity datasets &ndash; backup and restoration.</p>
    <h2 id="calibre_link-470" class="calibre9">Backing up Premium capacities</h2>
    <p class="fm-booktitle">The release to <a id="calibre_link-1528" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a><strong class="screentext">general availability</strong> (<strong class="screentext">GA</strong>) support for backing up and <a id="calibre_link-1069" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>restoring Power BI Premium and PPU datasets closed an important gap with Analysis Services and also provides a mechanism for migration from an Analysis Services model to Power BI Premium. </p>
    <p class="fm-booktitle">Either SSMS or the Analysis Services cmdlets for PowerShell can be used to back up and restore datasets published to the Power BI service using the XMLA endpoints. For example, once connected to a Power BI workspace, as explained in the previous section, the <strong class="screentext">Back Up</strong> and <strong class="screentext">Restore</strong> options become available for datasets published to Premium capacities, including PPU workspaces, as shown in <em class="italic">Figure 15.22</em>:</p>
    <figure class="mediaobject"><img src="images/000162.png" alt="" class="calibre15" /></figure>
    <p class="fm-acknowledgement">Figure 15.22: Back Up and Restore options for datasets</p>
    <p class="fm-booktitle">To use the <strong class="screentext">Back Up</strong> and <strong class="screentext">Restore</strong> features, you must register an <strong class="screentext">Azure Data Lake Gen2</strong> (<strong class="screentext">ADLS Gen2</strong>) storage<a id="calibre_link-1529" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> account for the tenant or at the workspace level. These<a id="calibre_link-1070" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a> settings were discussed in the Azure connections section of <em class="italic">Chapter 14</em>, <em class="italic">Administering Power BI for an Organization</em>. Offline backups can be obtained by using Azure Storage Explorer to download backup files from the connected ADLS Gen2 storage.</p>
    <p class="fm-booktitle">Backups performed place backup files (<code class="inlinecode">.abf</code> files) into a power-bi-backup container within the ADLS Gen2 storage container. A folder is created in this container with the same name as the workspace. In the event that a workspace is renamed, the corresponding backup folder is also automatically renamed to match. To conduct a restore, the backup files must also be placed in that same folder.</p>
    <p class="fm-booktitle">Workspace users who have write or administrator permissions can perform backups of datasets within that workspace. This includes users who are members of the admin, member, and contributor roles discussed in the <em class="italic">Workspace roles and rights</em> section of <em class="italic">Chapter 10</em>, <em class="italic">Managing Workspaces and Content</em>. In addition, users with direct write permissions to a dataset can back up that dataset. Only workspace admins, members, and contributors can restore a dataset.</p>
    <p class="fm-booktitle">As mentioned, the ability to back up and restore datasets published to the Power BI service enables a migration path for Analysis Services workloads. In addition, backup and restore operations might be undertaken in the event of tenant migration, data corruption, or for <a id="calibre_link-1530" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>regulatory-based data retention <a id="calibre_link-1071" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"></a>requirements.</p>
    <p class="fm-booktitle">This concludes our analysis of life cycle management for Premium capacities as well as our exploration of building enterprise BI with Power BI Premium.</p>
    <h1 id="calibre_link-471" class="heading">Summary</h1>
    <p class="fm-booktitle">This chapter reviewed Power BI Premium as the primary means to deploy Power BI at scale and with enterprise BI tools and controls. The features and administration of Power BI Premium were described, as well as the factors to account for inefficiently provisioning and allocating Premium capacity. Finally, life cycle management concerns particular to Premium capacity features were explored.</p>
    <p class="fm-booktitle">This book has been all about how to enable enterprise-level business intelligence using Power BI, and this chapter highlighted some of the exclusive features that Power BI Premium provides in pursuit of this goal. We hope you have enjoyed this book and are now confident in how to apply this knowledge within your own organization.</p>
    <h1 class="heading">Join our community on Discord</h1>
    <p class="fm-booktitle">Join our community’s Discord space for discussions with the author and other readers: <a href="https://discord.gg/q6BPbHEPXp" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://discord.gg/q6BPbHEPXp</span></a></p>
    <p class="fm-booktitle"><img src="images/000081.png" alt="" class="calibre7" /></p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-1869">
<div id="calibre_link-2194" class="calibre2">
<div id="calibre_link-2195" class="calibre3"><div id="calibre_link-2196" class="calibre4">
    <p class="fm-booktitle"><img src="images/000353.png" alt="" width="449" height="115" class="calibre21" /></p>
    <p class="fm-booktitle"><a href="http://packt.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">packt.com</span></a></p>
    <p class="fm-booktitle">Subscribe to our online digital library for full access to over 7,000 books and videos, as well as industry leading tools to help you plan your personal development and advance your career. For more information, please visit our website.</p>
    <h1 id="calibre_link-2197" class="heading">Why subscribe?</h1>
    <ul class="calibre10">
      <li class="bulletlist">Spend less time learning and more time coding with practical eBooks and Videos from over 4,000 industry professionals</li>
      <li class="bulletlist">Improve your learning with Skill Plans built especially for you</li>
      <li class="bulletlist">Get a free eBook or video every month</li>
      <li class="bulletlist">Fully searchable for easy access to vital information</li>
      <li class="bulletlist">Copy and paste, print, and bookmark content</li>
    </ul>
    <p class="fm-booktitle">At <a href="http://www.packt.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">www.packt.com</span></a>, you can also read a collection of free technical articles, sign up for a range of free newsletters, and receive exclusive discounts and offers on Packt books and eBooks.</p>
 <p class="eop"></p>
    <h1 id="calibre_link-472" class="mainheading">Other Books You May Enjoy</h1>
    <p class="fm-booktitle">If you enjoyed this book, you may be interested in these other books by Packt:</p>
    <p class="fm-booktitle"><a href="https://www.packtpub.com/product/learn-power-bi/9781801811958" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><img src="images/000070.jpg" alt="" width="222" height="273" class="calibre22" /></a></p>
    <p class="fm-booktitle"><strong class="screentext">Learn Power BI</strong></p>
    <p class="fm-booktitle">Greg Deckler</p>
    <p class="fm-booktitle">ISBN: 9781801811958</p>
    <ul class="calibre10">
      <li class="bulletlist">Get up and running quickly with Power BI</li>
      <li class="bulletlist">Understand and plan your business intelligence projects</li>
      <li class="bulletlist">Connect to and transform data using Power Query</li>
      <li class="bulletlist">Create data models optimized for analysis and reporting</li>
      <li class="bulletlist">Perform simple and complex DAX calculations to enhance analysis</li>
      <li class="bulletlist">Discover business insights and create professional reports</li>
      <li class="bulletlist">Collaborate via Power BI dashboards, apps, goals, and scorecards</li>
      <li class="bulletlist">Deploy and govern Power BI, including using deployment pipelines</li>
    </ul>
    <p class="fm-booktitle"><a href="https://www.packtpub.com/product/microsoft-power-bi-cookbook/9781801813044" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><img src="images/000307.png" alt="" width="225" height="278" class="calibre22" /></a></p>
    <p class="fm-booktitle"><strong class="screentext">Microsoft Power BI Cookbook</strong></p>
    <p class="fm-booktitle">Greg Deckler</p>
    <p class="fm-booktitle">Brett Powell</p>
    <p class="fm-booktitle">ISBN: 9781801813044</p>
    <ul class="calibre10">
      <li class="bulletlist">Cleanse, stage, and integrate your data sources with Power Query (M)</li>
      <li class="bulletlist">Remove data complexities and provide users with intuitive, self-service BI capabilities</li>
      <li class="bulletlist">Build business logic and analysis into your solutions via the DAX programming language and dashboard-ready calculations</li>
      <li class="bulletlist">Implement aggregation tables to accelerate query performance over large data sources</li>
      <li class="bulletlist">Create and integrate paginated reports</li>
      <li class="bulletlist">Understand the differences and implications of DirectQuery, live connections, Import, and Composite model datasets</li>
      <li class="bulletlist">Integrate other Microsoft data tools into your Power BI solution</li>
    </ul>
 <p class="eop"></p>
    <h1 id="calibre_link-2198" class="heading">Packt is searching for authors like you</h1>
    <p class="fm-booktitle">If you’re interested in becoming an author for Packt, please visit <a href="http://authors.packtpub.com" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">authors.packtpub.com</span></a> and apply today. We have worked with thousands of developers and tech professionals, just like you, to help them share their insight with the global tech community. You can make a general application, apply for a specific hot topic that we are recruiting an author for, or submit your own idea.</p>
  </div>
  <div id="calibre_link-2199" class="calibre4">
    <h1 id="calibre_link-2200" class="heading">Share your thoughts</h1>
    <p class="fm-booktitle">Now you’ve finished <em class="italic">Mastering Microsoft Power BI, Second Edition</em>, we’d love to hear your thoughts! If you purchased the book from Amazon, please <a href="https://packt.link/r/1801811482" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">click here to go straight to the Amazon review page</span></a> for this book and share your feedback or leave a review on the site that you purchased it from.</p>
    <p class="fm-booktitle">Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content.</p>
  </div>
</div>
</div>
</div>


<div class="calibre1" id="calibre_link-475">
<div id="calibre_link-2201" class="calibre2">
<div id="calibre_link-2202" class="calibre3"><div id="calibre_link-474" class="calibre4" type="index">
    <h1 id="calibre_link-473" class="mainheading">Index</h1>
    <p class="fm-booktitle">Symbols</p>
    <p class="fm-booktitle"> DAX calculations </p>
    <p class="fm-booktitle">performance testing <a href="#calibre_link-476" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">225</a></p>
    <p class="fm-booktitle">A</p>
    <p class="fm-booktitle">Active Directory (AD) <a href="#calibre_link-477" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">587</a></p>
    <p class="fm-booktitle">administration, Power BI Premium <a href="#calibre_link-478" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">633</a></p>
    <p class="fm-booktitle">Admin role <a href="#calibre_link-479" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">419</a>, <a href="#calibre_link-480" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">420</a></p>
    <p class="fm-booktitle">aggregation tables <a href="#calibre_link-481" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">171</a>, <a href="#calibre_link-482" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">172</a>, <a href="#calibre_link-483" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">174</a>, <a href="#calibre_link-484" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">175</a></p>
    <p class="fm-booktitle">AI splits <a href="#calibre_link-485" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">337</a></p>
    <p class="fm-booktitle">AI visuals <a href="#calibre_link-486" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">331</a>, <a href="#calibre_link-487" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">332</a></p>
    <p class="fm-booktitle">Decomposition tree visual <a href="#calibre_link-488" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">336</a>, <a href="#calibre_link-489" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">337</a>, <a href="#calibre_link-490" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">338</a></p>
    <p class="fm-booktitle">Q&amp;A visualization <a href="#calibre_link-491" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">338</a>, <a href="#calibre_link-492" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">339</a>, <a href="#calibre_link-493" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">340</a></p>
    <p class="fm-booktitle">smart narrative visual <a href="#calibre_link-494" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">341</a>, <a href="#calibre_link-495" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">342</a></p>
    <p class="fm-booktitle">ALM Toolkit <a href="#calibre_link-496" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">652</a></p>
    <p class="fm-booktitle">deployment <a href="#calibre_link-497" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">653</a>, <a href="#calibre_link-498" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">654</a>, <a href="#calibre_link-499" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">655</a></p>
    <p class="fm-booktitle">download link <a href="#calibre_link-500" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">652</a></p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-501" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">655</a></p>
    <p class="fm-booktitle">Analytics pane <a href="#calibre_link-502" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">179</a>, <a href="#calibre_link-503" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">358</a>, <a href="#calibre_link-504" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">359</a></p>
    <p class="fm-booktitle">Forecasting feature <a href="#calibre_link-505" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">362</a>, <a href="#calibre_link-506" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">364</a></p>
    <p class="fm-booktitle">Trend line <a href="#calibre_link-507" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">359</a>, <a href="#calibre_link-508" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">360</a>, <a href="#calibre_link-509" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">362</a></p>
    <p class="fm-booktitle">Analyze feature. <span>See</span>&nbsp; Quick Insights feature</p>
    <p class="fm-booktitle">Analyze in Excel <a href="#calibre_link-510" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">575</a>, <a href="#calibre_link-511" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">576</a>, <a href="#calibre_link-512" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">577</a></p>
    <p class="fm-booktitle">Analyze in Excel feature <a href="#calibre_link-513" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">21</a></p>
    <p class="fm-booktitle">animation</p>
    <p class="fm-booktitle">adding <a href="#calibre_link-514" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">355</a></p>
    <p class="fm-booktitle">app deployment process <a href="#calibre_link-515" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">540</a>, <a href="#calibre_link-516" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">541</a></p>
    <p class="fm-booktitle">application lifecycle management (ALM) <a href="#calibre_link-517" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">439</a></p>
    <p class="fm-booktitle">app owns data <a href="#calibre_link-518" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">567</a></p>
    <p class="fm-booktitle">ArcGIS Maps for Power BI visual <a href="#calibre_link-519" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">348</a>, <a href="#calibre_link-520" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">349</a>, <a href="#calibre_link-521" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">350</a>, <a href="#calibre_link-522" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">351</a></p>
    <p class="fm-booktitle">ArcGIS Map visual <a href="#calibre_link-523" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">297</a></p>
    <p class="fm-booktitle">artificial intelligence (AI) <a href="#calibre_link-524" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">331</a></p>
    <p class="fm-booktitle">key influencers visual <a href="#calibre_link-525" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">332</a>, <a href="#calibre_link-526" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">334</a>, <a href="#calibre_link-527" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">336</a></p>
    <p class="fm-booktitle">Assume Referential Integrity <a href="#calibre_link-528" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">169</a></p>
    <p class="fm-booktitle">audit logs</p>
    <p class="fm-booktitle">about <a href="#calibre_link-529" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">615</a>, <a href="#calibre_link-530" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">617</a></p>
    <p class="fm-booktitle">monitoring solution <a href="#calibre_link-531" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">619</a>, <a href="#calibre_link-532" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">620</a></p>
    <p class="fm-booktitle">automatic aggregations <a href="#calibre_link-533" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">171</a></p>
    <p class="fm-booktitle">Auto ML features <a href="#calibre_link-534" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">332</a></p>
    <p class="fm-booktitle">autoscale</p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-535" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">642</a></p>
    <p class="fm-booktitle">Azure Active Directory <a href="#calibre_link-536" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">16</a></p>
    <p class="fm-booktitle">Azure Active Directory (AAD) <a href="#calibre_link-537" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">220</a>, <a href="#calibre_link-538" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">414</a>, <a href="#calibre_link-539" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">582</a>, <a href="#calibre_link-540" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">587</a></p>
    <p class="fm-booktitle">business-to-business (B2B) collaboration <a href="#calibre_link-541" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">588</a>, <a href="#calibre_link-542" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">589</a>, <a href="#calibre_link-543" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">590</a></p>
    <p class="fm-booktitle">conditional access policies <a href="#calibre_link-544" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">591</a>, <a href="#calibre_link-545" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">593</a></p>
    <p class="fm-booktitle">external users, licensing <a href="#calibre_link-546" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">590</a></p>
    <p class="fm-booktitle">Azure Active Directory Security Group <a href="#calibre_link-547" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">220</a></p>
    <p class="fm-booktitle">Azure AD applications, registering</p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-548" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">567</a></p>
    <p class="fm-booktitle">Azure Analysis Services</p>
    <p class="fm-booktitle">Power BI, as superset <a href="#calibre_link-549" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">121</a></p>
    <p class="fm-booktitle">Azure Data Factory (ADF) <a href="#calibre_link-550" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">72</a></p>
    <p class="fm-booktitle">Azure map visual <a href="#calibre_link-551" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">297</a></p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-552" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">297</a></p>
    <p class="fm-booktitle">Azure portal</p>
    <p class="fm-booktitle">URL <a href="#calibre_link-553" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">582</a></p>
    <p class="fm-booktitle">Azure Private Link</p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-554" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">600</a></p>
    <p class="fm-booktitle">Azure service principals, creating and registering</p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-555" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">567</a></p>
    <p class="fm-booktitle">B</p>
    <p class="fm-booktitle">base measures</p>
    <p class="fm-booktitle">expressions <a href="#calibre_link-556" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">198</a></p>
    <p class="fm-booktitle">implementing <a href="#calibre_link-557" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">196</a>, <a href="#calibre_link-558" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">197</a></p>
    <p class="fm-booktitle">bidirectional relationships <a href="#calibre_link-559" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">154</a>, <a href="#calibre_link-560" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">155</a></p>
    <p class="fm-booktitle">date dimension tables <a href="#calibre_link-561" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">156</a></p>
    <p class="fm-booktitle">implementing, with CROSSFILTER function <a href="#calibre_link-562" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">157</a>, <a href="#calibre_link-563" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">158</a></p>
    <p class="fm-booktitle">shared dimension tables <a href="#calibre_link-564" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">155</a>, <a href="#calibre_link-565" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">156</a></p>
    <p class="fm-booktitle">Bookmarks <a href="#calibre_link-566" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">267</a>, <a href="#calibre_link-567" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">268</a></p>
    <p class="fm-booktitle">custom report navigation <a href="#calibre_link-568" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">271</a>, <a href="#calibre_link-569" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">272</a></p>
    <p class="fm-booktitle">Selection pane <a href="#calibre_link-570" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">269</a></p>
    <p class="fm-booktitle">Spotlight property <a href="#calibre_link-571" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">269</a>, <a href="#calibre_link-572" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">270</a>, <a href="#calibre_link-573" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">271</a></p>
    <p class="fm-booktitle">View icon <a href="#calibre_link-574" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">272</a>, <a href="#calibre_link-575" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">273</a></p>
    <p class="fm-booktitle">Boolean expressions</p>
    <p class="fm-booktitle">about <a href="#calibre_link-576" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">194</a></p>
    <p class="fm-booktitle">restrictions <a href="#calibre_link-577" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">194</a></p>
    <p class="fm-booktitle">bubble map visual <a href="#calibre_link-578" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">298</a>, <a href="#calibre_link-579" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">299</a></p>
    <p class="fm-booktitle">C</p>
    <p class="fm-booktitle">calculated tables <a href="#calibre_link-580" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">187</a></p>
    <p class="fm-booktitle">CALCULATE() function <a href="#calibre_link-581" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">188</a>, <a href="#calibre_link-582" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">189</a></p>
    <p class="fm-booktitle">calculation groups <a href="#calibre_link-583" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">207</a>, <a href="#calibre_link-584" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">208</a>, <a href="#calibre_link-585" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">209</a>, <a href="#calibre_link-586" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">210</a>, <a href="#calibre_link-587" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">211</a></p>
    <p class="fm-booktitle">capacity allocation, Power BI Premium <a href="#calibre_link-588" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">634</a>, <a href="#calibre_link-589" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">635</a>, <a href="#calibre_link-590" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">636</a></p>
    <p class="fm-booktitle">capacities, creating <a href="#calibre_link-591" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">639</a>, <a href="#calibre_link-592" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">641</a></p>
    <p class="fm-booktitle">capacities, monitoring <a href="#calibre_link-593" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">642</a>, <a href="#calibre_link-594" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">644</a></p>
    <p class="fm-booktitle">capacities, sizing <a href="#calibre_link-595" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">639</a>, <a href="#calibre_link-596" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">641</a></p>
    <p class="fm-booktitle">capacity size, modifying <a href="#calibre_link-597" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">641</a>, <a href="#calibre_link-598" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">642</a></p>
    <p class="fm-booktitle">Corporate <a href="#calibre_link-599" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">637</a>, <a href="#calibre_link-600" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">638</a></p>
    <p class="fm-booktitle">Self-Service BI <a href="#calibre_link-601" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">637</a>, <a href="#calibre_link-602" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">638</a></p>
    <p class="fm-booktitle">workspace assignment <a href="#calibre_link-603" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">644</a>, <a href="#calibre_link-604" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">646</a>, <a href="#calibre_link-605" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">647</a></p>
    <p class="fm-booktitle">capacity estimations, Power BI Premium <a href="#calibre_link-606" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">631</a>, <a href="#calibre_link-607" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">632</a></p>
    <p class="fm-booktitle">capacity nodes, Power BI Premium <a href="#calibre_link-608" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">627</a>, <a href="#calibre_link-609" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">628</a>, <a href="#calibre_link-610" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">629</a></p>
    <p class="fm-booktitle">capacity resource optimization, Power BI Premium <a href="#calibre_link-611" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">647</a></p>
    <p class="fm-booktitle">data model optimizations <a href="#calibre_link-612" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">647</a>, <a href="#calibre_link-613" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">648</a>, <a href="#calibre_link-614" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">649</a></p>
    <p class="fm-booktitle">report and visualization optimizations <a href="#calibre_link-615" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">649</a>, <a href="#calibre_link-616" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">650</a></p>
    <p class="fm-booktitle">workloads <a href="#calibre_link-617" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">650</a>, <a href="#calibre_link-618" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">651</a>, <a href="#calibre_link-619" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">652</a></p>
    <p class="fm-booktitle">cardinality <a href="#calibre_link-620" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">57</a></p>
    <p class="fm-booktitle">Card visuals <a href="#calibre_link-621" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">294</a></p>
    <p class="fm-booktitle">chaining <a href="#calibre_link-622" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">56</a></p>
    <p class="fm-booktitle">charts</p>
    <p class="fm-booktitle">selecting <a href="#calibre_link-623" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">244</a>, <a href="#calibre_link-624" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">245</a>, <a href="#calibre_link-625" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">246</a></p>
    <p class="fm-booktitle">versus matrices <a href="#calibre_link-626" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">242</a></p>
    <p class="fm-booktitle">versus tables <a href="#calibre_link-627" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">242</a></p>
    <p class="fm-booktitle">Children�s Online Privacy Protection Act (COPPA) <a href="#calibre_link-628" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">436</a></p>
    <p class="fm-booktitle">Cmdlets <a href="#calibre_link-629" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">428</a></p>
    <p class="fm-booktitle">column charts</p>
    <p class="fm-booktitle">conditional formatting <a href="#calibre_link-630" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">316</a>, <a href="#calibre_link-631" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">317</a></p>
    <p class="fm-booktitle">formatting <a href="#calibre_link-632" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">315</a>, <a href="#calibre_link-633" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">316</a></p>
    <p class="fm-booktitle">columns metadata <a href="#calibre_link-634" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">160</a></p>
    <p class="fm-booktitle">Data category <a href="#calibre_link-635" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">162</a>, <a href="#calibre_link-636" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">164</a></p>
    <p class="fm-booktitle">Data format <a href="#calibre_link-637" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">162</a></p>
    <p class="fm-booktitle">Default summarization <a href="#calibre_link-638" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">160</a>, <a href="#calibre_link-639" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">161</a>, <a href="#calibre_link-640" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">162</a></p>
    <p class="fm-booktitle">Descriptions <a href="#calibre_link-641" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">164</a>, <a href="#calibre_link-642" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">165</a></p>
    <p class="fm-booktitle">columnstore <a href="#calibre_link-643" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">170</a></p>
    <p class="fm-booktitle">comma-separated value (CSV) file <a href="#calibre_link-644" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">346</a>, <a href="#calibre_link-645" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">512</a></p>
    <p class="fm-booktitle">Common Data Model (CDM) <a href="#calibre_link-646" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">608</a></p>
    <p class="fm-booktitle">composite data models</p>
    <p class="fm-booktitle">aggregation tables <a href="#calibre_link-647" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">171</a>, <a href="#calibre_link-648" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">172</a>, <a href="#calibre_link-649" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">174</a>, <a href="#calibre_link-650" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">175</a></p>
    <p class="fm-booktitle">performance, optimizing <a href="#calibre_link-651" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">171</a></p>
    <p class="fm-booktitle">composite datasets <a href="#calibre_link-652" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">55</a>, <a href="#calibre_link-653" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">57</a></p>
    <p class="fm-booktitle">table storage modes <a href="#calibre_link-654" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">57</a></p>
    <p class="fm-booktitle">conditional formatting</p>
    <p class="fm-booktitle">column chart <a href="#calibre_link-655" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">316</a>, <a href="#calibre_link-656" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">317</a></p>
    <p class="fm-booktitle">line chart <a href="#calibre_link-657" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">317</a>, <a href="#calibre_link-658" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">318</a>, <a href="#calibre_link-659" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">319</a></p>
    <p class="fm-booktitle">rules, applying to table and matrix visuals <a href="#calibre_link-660" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">323</a>, <a href="#calibre_link-661" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">324</a>, <a href="#calibre_link-662" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">325</a>, <a href="#calibre_link-663" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">326</a></p>
    <p class="fm-booktitle">content</p>
    <p class="fm-booktitle">distributing, via embedding <a href="#calibre_link-664" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">559</a></p>
    <p class="fm-booktitle">sharing <a href="#calibre_link-665" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">554</a>, <a href="#calibre_link-666" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">555</a>, <a href="#calibre_link-667" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">556</a>, <a href="#calibre_link-668" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">557</a></p>
    <p class="fm-booktitle">content distribution <a href="#calibre_link-669" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">536</a></p>
    <p class="fm-booktitle">methods <a href="#calibre_link-670" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">536</a>, <a href="#calibre_link-671" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">537</a>, <a href="#calibre_link-672" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">538</a></p>
    <p class="fm-booktitle">Contributor role <a href="#calibre_link-673" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">418</a></p>
    <p class="fm-booktitle">Coordinated Universal Time (UTC) <a href="#calibre_link-674" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">95</a></p>
    <p class="fm-booktitle">CROSSFILTER function</p>
    <p class="fm-booktitle">used, for implementing bidirectional relationship <a href="#calibre_link-675" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">157</a>, <a href="#calibre_link-676" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">158</a></p>
    <p class="fm-booktitle">CURRENT FILE options <a href="#calibre_link-677" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">68</a>, <a href="#calibre_link-678" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">69</a>, <a href="#calibre_link-679" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">70</a></p>
    <p class="fm-booktitle">current periods <a href="#calibre_link-680" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">200</a>, <a href="#calibre_link-681" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">201</a>, <a href="#calibre_link-682" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">202</a></p>
    <p class="fm-booktitle">versus prior periods <a href="#calibre_link-683" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">205</a>, <a href="#calibre_link-684" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">206</a></p>
    <p class="fm-booktitle">custom applications</p>
    <p class="fm-booktitle">embedding <a href="#calibre_link-685" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">566</a>, <a href="#calibre_link-686" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">567</a>, <a href="#calibre_link-687" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">568</a>, <a href="#calibre_link-688" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">570</a></p>
    <p class="fm-booktitle">custom format strings <a href="#calibre_link-689" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">321</a>, <a href="#calibre_link-690" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">322</a>, <a href="#calibre_link-691" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">323</a></p>
    <p class="fm-booktitle">custom slicer parameters <a href="#calibre_link-692" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">287</a>, <a href="#calibre_link-693" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">288</a></p>
    <p class="fm-booktitle">custom visual <a href="#calibre_link-694" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">351</a></p>
    <p class="fm-booktitle">adding <a href="#calibre_link-695" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">352</a>, <a href="#calibre_link-696" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">353</a>, <a href="#calibre_link-697" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">354</a></p>
    <p class="fm-booktitle">D</p>
    <p class="fm-booktitle">Dark Gray Canvas base map <a href="#calibre_link-698" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">349</a></p>
    <p class="fm-booktitle">dashboard</p>
    <p class="fm-booktitle">architectures <a href="#calibre_link-699" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">386</a></p>
    <p class="fm-booktitle">design <a href="#calibre_link-700" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">376</a></p>
    <p class="fm-booktitle">versus reports <a href="#calibre_link-701" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">373</a>, <a href="#calibre_link-702" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">374</a>, <a href="#calibre_link-703" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">376</a></p>
    <p class="fm-booktitle">dashboard architectures <a href="#calibre_link-704" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">386</a></p>
    <p class="fm-booktitle">multiple-dashboard architecture <a href="#calibre_link-705" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">388</a>, <a href="#calibre_link-706" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">389</a></p>
    <p class="fm-booktitle">multiple datasets <a href="#calibre_link-707" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">392</a>, <a href="#calibre_link-708" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">393</a></p>
    <p class="fm-booktitle">organizational dashboard architecture <a href="#calibre_link-709" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">389</a>, <a href="#calibre_link-710" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">390</a>, <a href="#calibre_link-711" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">391</a>, <a href="#calibre_link-712" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">392</a></p>
    <p class="fm-booktitle">single-dashboard architecture <a href="#calibre_link-713" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">386</a>, <a href="#calibre_link-714" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">387</a>, <a href="#calibre_link-715" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">388</a></p>
    <p class="fm-booktitle">dashboard cache refresh <a href="#calibre_link-716" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">494</a>, <a href="#calibre_link-717" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">495</a></p>
    <p class="fm-booktitle">dashboard, design <a href="#calibre_link-718" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">376</a>, <a href="#calibre_link-719" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">377</a>, <a href="#calibre_link-720" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">378</a>, <a href="#calibre_link-721" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">380</a></p>
    <p class="fm-booktitle">layout <a href="#calibre_link-722" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">382</a></p>
    <p class="fm-booktitle">supporting tiles <a href="#calibre_link-723" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">384</a>, <a href="#calibre_link-724" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">385</a></p>
    <p class="fm-booktitle">visual selection <a href="#calibre_link-725" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">380</a>, <a href="#calibre_link-726" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">381</a>, <a href="#calibre_link-727" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">382</a></p>
    <p class="fm-booktitle">dashboard layout <a href="#calibre_link-728" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">382</a></p>
    <p class="fm-booktitle">fullscreen mode <a href="#calibre_link-729" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">383</a>, <a href="#calibre_link-730" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">384</a></p>
    <p class="fm-booktitle">navigation pane <a href="#calibre_link-731" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">383</a></p>
    <p class="fm-booktitle">dashboard tiles <a href="#calibre_link-732" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">393</a>, <a href="#calibre_link-733" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">394</a></p>
    <p class="fm-booktitle">custom links <a href="#calibre_link-734" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">394</a>, <a href="#calibre_link-735" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">395</a></p>
    <p class="fm-booktitle">details <a href="#calibre_link-736" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">394</a>, <a href="#calibre_link-737" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">395</a></p>
    <p class="fm-booktitle">Excel workbooks <a href="#calibre_link-738" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">403</a>, <a href="#calibre_link-739" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">404</a>, <a href="#calibre_link-740" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">405</a></p>
    <p class="fm-booktitle">paginated reports <a href="#calibre_link-741" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">399</a>, <a href="#calibre_link-742" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">400</a>, <a href="#calibre_link-743" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">401</a>, <a href="#calibre_link-744" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">402</a></p>
    <p class="fm-booktitle">real-time data tiles <a href="#calibre_link-745" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">396</a>, <a href="#calibre_link-746" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">397</a>, <a href="#calibre_link-747" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">398</a></p>
    <p class="fm-booktitle">themes <a href="#calibre_link-748" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">398</a>, <a href="#calibre_link-749" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">399</a></p>
    <p class="fm-booktitle">data alerts <a href="#calibre_link-750" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">570</a>, <a href="#calibre_link-751" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">571</a></p>
    <p class="fm-booktitle">Power Automate integration <a href="#calibre_link-752" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">572</a>, <a href="#calibre_link-753" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">573</a></p>
    <p class="fm-booktitle">Data Analysis eXpressions (DAX) <a href="#calibre_link-754" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">14</a></p>
    <p class="fm-booktitle">Data Analysis Expressions (DAX) <a href="#calibre_link-755" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">120</a></p>
    <p class="fm-booktitle">database administrator (DBA) <a href="#calibre_link-756" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">582</a></p>
    <p class="fm-booktitle">Data category <a href="#calibre_link-757" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">162</a>, <a href="#calibre_link-758" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">164</a></p>
    <p class="fm-booktitle">dataflows <a href="#calibre_link-759" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">112</a>, <a href="#calibre_link-760" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">113</a></p>
    <p class="fm-booktitle">Data format <a href="#calibre_link-761" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">162</a></p>
    <p class="fm-booktitle">dataframe variable <a href="#calibre_link-762" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">346</a></p>
    <p class="fm-booktitle">data gateway <a href="#calibre_link-763" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">52</a>, <a href="#calibre_link-764" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">111</a></p>
    <p class="fm-booktitle">DataGateway <a href="#calibre_link-765" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">485</a></p>
    <p class="fm-booktitle">data governance</p>
    <p class="fm-booktitle">for Power BI <a href="#calibre_link-766" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">584</a>, <a href="#calibre_link-767" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">585</a>, <a href="#calibre_link-768" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">586</a></p>
    <p class="fm-booktitle">data loss prevention (DLP) <a href="#calibre_link-769" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">436</a>, <a href="#calibre_link-770" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">437</a>, <a href="#calibre_link-771" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">438</a></p>
    <p class="fm-booktitle">Data Management Views (DMVs) <a href="#calibre_link-772" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">168</a></p>
    <p class="fm-booktitle">Data Mining parser <a href="#calibre_link-773" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">451</a></p>
    <p class="fm-booktitle">data model <a href="#calibre_link-774" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">4</a></p>
    <p class="fm-booktitle">performance, optimizing <a href="#calibre_link-775" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">165</a></p>
    <p class="fm-booktitle">Data Model <a href="#calibre_link-776" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">120</a>, <a href="#calibre_link-777" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">124</a></p>
    <p class="fm-booktitle">Data view <a href="#calibre_link-778" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">128</a></p>
    <p class="fm-booktitle">Model view <a href="#calibre_link-779" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">124</a>, <a href="#calibre_link-780" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">125</a>, <a href="#calibre_link-781" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">126</a>, <a href="#calibre_link-782" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">127</a></p>
    <p class="fm-booktitle">Report view <a href="#calibre_link-783" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">129</a>, <a href="#calibre_link-784" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">130</a></p>
    <p class="fm-booktitle">data profiling <a href="#calibre_link-785" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">32</a>, <a href="#calibre_link-786" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">33</a>, <a href="#calibre_link-787" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">34</a>, <a href="#calibre_link-788" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">36</a></p>
    <p class="fm-booktitle">using, with Power BI Desktop <a href="#calibre_link-789" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">36</a>, <a href="#calibre_link-790" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">37</a></p>
    <p class="fm-booktitle">data refresh <a href="#calibre_link-791" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">490</a></p>
    <p class="fm-booktitle">data relationships, chart visuals</p>
    <p class="fm-booktitle">comparison <a href="#calibre_link-792" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">244</a></p>
    <p class="fm-booktitle">composition <a href="#calibre_link-793" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">245</a></p>
    <p class="fm-booktitle">distribution <a href="#calibre_link-794" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">245</a></p>
    <p class="fm-booktitle">relationship <a href="#calibre_link-795" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">244</a></p>
    <p class="fm-booktitle">dataset design <a href="#calibre_link-796" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">26</a></p>
    <p class="fm-booktitle">data warehouse bus matrix <a href="#calibre_link-797" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">26</a>, <a href="#calibre_link-798" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">27</a></p>
    <p class="fm-booktitle">dataset design process <a href="#calibre_link-799" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">27</a></p>
    <p class="fm-booktitle">business process. selecting <a href="#calibre_link-800" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">28</a></p>
    <p class="fm-booktitle">dimensions, identifying <a href="#calibre_link-801" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">30</a>, <a href="#calibre_link-802" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">31</a></p>
    <p class="fm-booktitle">facts, identifying <a href="#calibre_link-803" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">31</a>, <a href="#calibre_link-804" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">32</a></p>
    <p class="fm-booktitle">grain, declaring <a href="#calibre_link-805" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">29</a></p>
    <p class="fm-booktitle">dataset layers <a href="#calibre_link-806" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">120</a>, <a href="#calibre_link-807" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">121</a></p>
    <p class="fm-booktitle">dataset management</p>
    <p class="fm-booktitle">with SSMS <a href="#calibre_link-808" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">655</a>, <a href="#calibre_link-809" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">656</a>, <a href="#calibre_link-810" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">657</a>, <a href="#calibre_link-811" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">658</a></p>
    <p class="fm-booktitle">dataset mode</p>
    <p class="fm-booktitle">query, designing <a href="#calibre_link-812" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">50</a>, <a href="#calibre_link-813" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">52</a></p>
    <p class="fm-booktitle">dataset objectives <a href="#calibre_link-814" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">121</a>, <a href="#calibre_link-815" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">122</a>, <a href="#calibre_link-816" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">123</a></p>
    <p class="fm-booktitle">competing <a href="#calibre_link-817" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">123</a></p>
    <p class="fm-booktitle">external factors <a href="#calibre_link-818" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">124</a></p>
    <p class="fm-booktitle">dataset planning <a href="#calibre_link-819" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">38</a></p>
    <p class="fm-booktitle">Cmposite mode <a href="#calibre_link-820" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">40</a>, <a href="#calibre_link-821" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">43</a></p>
    <p class="fm-booktitle">data transformations, planning for <a href="#calibre_link-822" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">38</a>, <a href="#calibre_link-823" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">39</a>, <a href="#calibre_link-824" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">40</a></p>
    <p class="fm-booktitle">DirectQuery/Live mode <a href="#calibre_link-825" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">41</a>, <a href="#calibre_link-826" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">43</a></p>
    <p class="fm-booktitle">Import mode <a href="#calibre_link-827" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">40</a>, <a href="#calibre_link-828" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">42</a>, <a href="#calibre_link-829" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">43</a></p>
    <p class="fm-booktitle">data sources <a href="#calibre_link-830" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">58</a>, <a href="#calibre_link-831" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">59</a></p>
    <p class="fm-booktitle">authentication <a href="#calibre_link-832" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">59</a>, <a href="#calibre_link-833" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">60</a></p>
    <p class="fm-booktitle">Power BI deskstop, options <a href="#calibre_link-834" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">66</a>, <a href="#calibre_link-835" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">68</a></p>
    <p class="fm-booktitle">privacy levels <a href="#calibre_link-836" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">63</a>, <a href="#calibre_link-837" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">64</a></p>
    <p class="fm-booktitle">settings <a href="#calibre_link-838" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">61</a>, <a href="#calibre_link-839" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">62</a></p>
    <p class="fm-booktitle">data storytelling <a href="#calibre_link-840" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">355</a></p>
    <p class="fm-booktitle">Data view <a href="#calibre_link-841" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">124</a>, <a href="#calibre_link-842" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">128</a></p>
    <p class="fm-booktitle">date dimension tables <a href="#calibre_link-843" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">157</a></p>
    <p class="fm-booktitle">date dimension view</p>
    <p class="fm-booktitle">building <a href="#calibre_link-844" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">75</a>, <a href="#calibre_link-845" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">76</a>, <a href="#calibre_link-846" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">78</a></p>
    <p class="fm-booktitle">date intelligence metrics <a href="#calibre_link-847" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">202</a>, <a href="#calibre_link-848" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">203</a>, <a href="#calibre_link-849" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">204</a>, <a href="#calibre_link-850" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">205</a></p>
    <p class="fm-booktitle">current periods, versus prior periods <a href="#calibre_link-851" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">205</a>, <a href="#calibre_link-852" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">206</a></p>
    <p class="fm-booktitle">growth rates <a href="#calibre_link-853" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">205</a>, <a href="#calibre_link-854" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">206</a></p>
    <p class="fm-booktitle">rolling periods <a href="#calibre_link-855" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">206</a>, <a href="#calibre_link-856" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">207</a></p>
    <p class="fm-booktitle">DAX fusion <a href="#calibre_link-857" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">313</a></p>
    <p class="fm-booktitle">DAX measure basics <a href="#calibre_link-858" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">178</a>, <a href="#calibre_link-859" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">179</a></p>
    <p class="fm-booktitle">CALCULATE() function <a href="#calibre_link-860" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">188</a>, <a href="#calibre_link-861" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">189</a></p>
    <p class="fm-booktitle">evaluation process <a href="#calibre_link-862" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">182</a>, <a href="#calibre_link-863" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">183</a></p>
    <p class="fm-booktitle">filter context <a href="#calibre_link-864" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">179</a>, <a href="#calibre_link-865" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">180</a>, <a href="#calibre_link-866" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">181</a></p>
    <p class="fm-booktitle">FILTER() function <a href="#calibre_link-867" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">190</a>, <a href="#calibre_link-868" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">191</a></p>
    <p class="fm-booktitle">row context <a href="#calibre_link-869" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">184</a>, <a href="#calibre_link-870" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">185</a>, <a href="#calibre_link-871" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">186</a></p>
    <p class="fm-booktitle">scalar function <a href="#calibre_link-872" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">186</a></p>
    <p class="fm-booktitle">table function <a href="#calibre_link-873" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">186</a></p>
    <p class="fm-booktitle">variables, defining <a href="#calibre_link-874" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">191</a>, <a href="#calibre_link-875" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">192</a>, <a href="#calibre_link-876" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">193</a>, <a href="#calibre_link-877" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">194</a>, <a href="#calibre_link-878" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">195</a>, <a href="#calibre_link-879" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">196</a></p>
    <p class="fm-booktitle">DAX Studio <a href="#calibre_link-880" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">227</a></p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-881" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">227</a></p>
    <p class="fm-booktitle">Decomposition tree visual <a href="#calibre_link-882" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">336</a>, <a href="#calibre_link-883" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">337</a>, <a href="#calibre_link-884" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">338</a></p>
    <p class="fm-booktitle">dedicated capacity, Power BI licenses</p>
    <p class="fm-booktitle">Embedded licensing <a href="#calibre_link-885" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">23</a>, <a href="#calibre_link-886" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">24</a></p>
    <p class="fm-booktitle">licensing options <a href="#calibre_link-887" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">21</a></p>
    <p class="fm-booktitle">Premium licensing options <a href="#calibre_link-888" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">21</a>, <a href="#calibre_link-889" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">22</a></p>
    <p class="fm-booktitle">Premium Per User (PPU) licensing <a href="#calibre_link-890" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">23</a></p>
    <p class="fm-booktitle">Default summarization <a href="#calibre_link-891" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">160</a>, <a href="#calibre_link-892" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">161</a>, <a href="#calibre_link-893" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">162</a></p>
    <p class="fm-booktitle">Descriptions <a href="#calibre_link-894" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">164</a>, <a href="#calibre_link-895" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">165</a></p>
    <p class="fm-booktitle">detail-row expressions <a href="#calibre_link-896" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">207</a></p>
    <p class="fm-booktitle">dimension metrics <a href="#calibre_link-897" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">211</a>, <a href="#calibre_link-898" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">212</a></p>
    <p class="fm-booktitle">missing dimension <a href="#calibre_link-899" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">212</a>, <a href="#calibre_link-900" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">213</a>, <a href="#calibre_link-901" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">214</a></p>
    <p class="fm-booktitle">dimension tables <a href="#calibre_link-902" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">138</a>, <a href="#calibre_link-903" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">139</a></p>
    <p class="fm-booktitle">custom sort <a href="#calibre_link-904" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">141</a>, <a href="#calibre_link-905" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">142</a></p>
    <p class="fm-booktitle">hierarchies <a href="#calibre_link-906" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">139</a>, <a href="#calibre_link-907" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">140</a></p>
    <p class="fm-booktitle">DirectQuery</p>
    <p class="fm-booktitle">report, executing <a href="#calibre_link-908" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">54</a></p>
    <p class="fm-booktitle">staging <a href="#calibre_link-909" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">90</a></p>
    <p class="fm-booktitle">DirectQuery dataset queries <a href="#calibre_link-910" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">53</a>, <a href="#calibre_link-911" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">54</a></p>
    <p class="fm-booktitle">DirectQuery datasets</p>
    <p class="fm-booktitle">publishing <a href="#calibre_link-912" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">492</a>, <a href="#calibre_link-913" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">493</a></p>
    <p class="fm-booktitle">DirectQuery mode datasets</p>
    <p class="fm-booktitle">automatic aggregations <a href="#calibre_link-914" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">171</a></p>
    <p class="fm-booktitle">columnstore <a href="#calibre_link-915" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">170</a>, <a href="#calibre_link-916" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">171</a></p>
    <p class="fm-booktitle">HTAP <a href="#calibre_link-917" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">170</a>, <a href="#calibre_link-918" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">171</a></p>
    <p class="fm-booktitle">performance, optimizing <a href="#calibre_link-919" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">169</a></p>
    <p class="fm-booktitle">direct sharing</p>
    <p class="fm-booktitle">versus Power BI apps <a href="#calibre_link-920" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">558</a></p>
    <p class="fm-booktitle">DMV data</p>
    <p class="fm-booktitle">enhancing <a href="#calibre_link-921" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">454</a>, <a href="#calibre_link-922" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">455</a></p>
    <p class="fm-booktitle">integrating <a href="#calibre_link-923" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">454</a>, <a href="#calibre_link-924" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">455</a></p>
    <p class="fm-booktitle">DMVs, Power BI</p>
    <p class="fm-booktitle">querying <a href="#calibre_link-925" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">452</a>, <a href="#calibre_link-926" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">453</a></p>
    <p class="fm-booktitle">drill-through filters <a href="#calibre_link-927" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">252</a></p>
    <p class="fm-booktitle">drill-through report pages <a href="#calibre_link-928" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">251</a>, <a href="#calibre_link-929" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">252</a></p>
    <p class="fm-booktitle">back button <a href="#calibre_link-930" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">253</a>, <a href="#calibre_link-931" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">254</a></p>
    <p class="fm-booktitle">custom labels <a href="#calibre_link-932" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">253</a>, <a href="#calibre_link-933" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">254</a></p>
    <p class="fm-booktitle">multi-column, including <a href="#calibre_link-934" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">254</a>, <a href="#calibre_link-935" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">255</a>, <a href="#calibre_link-936" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">256</a>, <a href="#calibre_link-937" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">257</a></p>
    <p class="fm-booktitle">Drive Time feature <a href="#calibre_link-938" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">349</a></p>
    <p class="fm-booktitle">Dual mode tables <a href="#calibre_link-939" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">57</a></p>
    <p class="fm-booktitle">Dynamic Management Views (DMVs) <a href="#calibre_link-940" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">227</a></p>
    <p class="fm-booktitle">dynamic ranking measures <a href="#calibre_link-941" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">216</a>, <a href="#calibre_link-942" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">217</a></p>
    <p class="fm-booktitle">dynamic row-level security <a href="#calibre_link-943" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">222</a>, <a href="#calibre_link-944" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">223</a>, <a href="#calibre_link-945" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">224</a></p>
    <p class="fm-booktitle">E</p>
    <p class="fm-booktitle">email subscriptions <a href="#calibre_link-946" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">574</a>, <a href="#calibre_link-947" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">575</a></p>
    <p class="fm-booktitle">embedding <a href="#calibre_link-948" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">559</a></p>
    <p class="fm-booktitle">licensing considerations <a href="#calibre_link-949" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">559</a>, <a href="#calibre_link-950" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">560</a></p>
    <p class="fm-booktitle">embedding scenarios</p>
    <p class="fm-booktitle">custom applications <a href="#calibre_link-951" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">566</a>, <a href="#calibre_link-952" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">567</a>, <a href="#calibre_link-953" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">568</a>, <a href="#calibre_link-954" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">570</a></p>
    <p class="fm-booktitle">Microsoft 365 apps <a href="#calibre_link-955" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">563</a></p>
    <p class="fm-booktitle">Publish to web <a href="#calibre_link-956" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">560</a>, <a href="#calibre_link-957" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">561</a></p>
    <p class="fm-booktitle">secure URL embedding feature <a href="#calibre_link-958" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">562</a></p>
    <p class="fm-booktitle">Enable load property <a href="#calibre_link-959" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">91</a></p>
    <p class="fm-booktitle">Enter data query <a href="#calibre_link-960" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">287</a></p>
    <p class="fm-booktitle">Enterprise Mobility and Security (EMS) <a href="#calibre_link-961" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">593</a></p>
    <p class="fm-booktitle">expressions, types</p>
    <p class="fm-booktitle">current and prior periods <a href="#calibre_link-962" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">200</a>, <a href="#calibre_link-963" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">201</a>, <a href="#calibre_link-964" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">202</a></p>
    <p class="fm-booktitle">KPI targets <a href="#calibre_link-965" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">199</a>, <a href="#calibre_link-966" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">200</a></p>
    <p class="fm-booktitle">extract-load-transform (ELT) <a href="#calibre_link-967" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">619</a></p>
    <p class="fm-booktitle">extract-transform-load (ETL) <a href="#calibre_link-968" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">149</a>, <a href="#calibre_link-969" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">619</a></p>
    <p class="fm-booktitle">Extract-Transform-Load (ETL) <a href="#calibre_link-970" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">74</a></p>
    <p class="fm-booktitle">F</p>
    <p class="fm-booktitle">facts and dimensions queries <a href="#calibre_link-971" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">91</a></p>
    <p class="fm-booktitle">Excel workbook, Annual Sales Plan <a href="#calibre_link-972" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">92</a>, <a href="#calibre_link-973" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">93</a>, <a href="#calibre_link-974" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">94</a></p>
    <p class="fm-booktitle">source reference only <a href="#calibre_link-975" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">91</a>, <a href="#calibre_link-976" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">92</a></p>
    <p class="fm-booktitle">fact tables <a href="#calibre_link-977" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">130</a>, <a href="#calibre_link-978" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">131</a></p>
    <p class="fm-booktitle">column data types <a href="#calibre_link-979" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">133</a>, <a href="#calibre_link-980" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">134</a></p>
    <p class="fm-booktitle">columns <a href="#calibre_link-981" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">131</a>, <a href="#calibre_link-982" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">132</a>, <a href="#calibre_link-983" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">133</a></p>
    <p class="fm-booktitle">fact-to-dimension relationships <a href="#calibre_link-984" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">135</a>, <a href="#calibre_link-985" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">136</a>, <a href="#calibre_link-986" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">137</a>, <a href="#calibre_link-987" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">138</a></p>
    <p class="fm-booktitle">fake user <a href="#calibre_link-988" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">567</a></p>
    <p class="fm-booktitle">field descriptions <a href="#calibre_link-989" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">445</a></p>
    <p class="fm-booktitle">creating <a href="#calibre_link-990" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">446</a>, <a href="#calibre_link-991" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">447</a></p>
    <p class="fm-booktitle">viewing <a href="#calibre_link-992" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">447</a>, <a href="#calibre_link-993" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">448</a>, <a href="#calibre_link-994" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">449</a></p>
    <p class="fm-booktitle">Filled map visual <a href="#calibre_link-995" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">297</a>, <a href="#calibre_link-996" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">300</a>, <a href="#calibre_link-997" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">301</a></p>
    <p class="fm-booktitle">filter context <a href="#calibre_link-998" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">179</a>, <a href="#calibre_link-999" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">180</a>, <a href="#calibre_link-1000" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">181</a></p>
    <p class="fm-booktitle">SQL equivalent <a href="#calibre_link-1001" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">181</a></p>
    <p class="fm-booktitle">FILTER() function <a href="#calibre_link-1002" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">190</a>, <a href="#calibre_link-1003" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">191</a></p>
    <p class="fm-booktitle">Filters pane <a href="#calibre_link-1004" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">284</a></p>
    <p class="fm-booktitle">usage, exploring <a href="#calibre_link-1005" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">291</a>, <a href="#calibre_link-1006" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">293</a>, <a href="#calibre_link-1007" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">294</a></p>
    <p class="fm-booktitle">Fit to Screen option <a href="#calibre_link-1008" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">384</a></p>
    <p class="fm-booktitle">focus mode <a href="#calibre_link-1009" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">379</a></p>
    <p class="fm-booktitle">formatting options, visualizations <a href="#calibre_link-1010" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">312</a></p>
    <p class="fm-booktitle">column and line charts <a href="#calibre_link-1011" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">315</a>, <a href="#calibre_link-1012" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">316</a></p>
    <p class="fm-booktitle">scatter charts <a href="#calibre_link-1013" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">328</a>, <a href="#calibre_link-1014" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">330</a></p>
    <p class="fm-booktitle">table and matrix visuals <a href="#calibre_link-1015" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">319</a>, <a href="#calibre_link-1016" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">320</a>, <a href="#calibre_link-1017" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">321</a></p>
    <p class="fm-booktitle">tooltips <a href="#calibre_link-1018" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">312</a>, <a href="#calibre_link-1019" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">313</a></p>
    <p class="fm-booktitle">G</p>
    <p class="fm-booktitle">Gauge visual <a href="#calibre_link-1020" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">296</a></p>
    <p class="fm-booktitle">Gen2 metrics app</p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-1021" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">643</a></p>
    <p class="fm-booktitle">General Data Protection Regulation (GDPR) <a href="#calibre_link-1022" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">436</a>, <a href="#calibre_link-1023" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">439</a></p>
    <p class="fm-booktitle">generally available (GA) <a href="#calibre_link-1024" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">520</a></p>
    <p class="fm-booktitle">Geographic Information Systems (GIS) <a href="#calibre_link-1025" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">348</a></p>
    <p class="fm-booktitle">Get Reports <a href="#calibre_link-1026" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">429</a></p>
    <p class="fm-booktitle">global administrators <a href="#calibre_link-1027" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">594</a></p>
    <p class="fm-booktitle">Global administrators <a href="#calibre_link-1028" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">16</a></p>
    <p class="fm-booktitle">globally unique identifier (GUID) <a href="#calibre_link-1029" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">428</a></p>
    <p class="fm-booktitle">global options <a href="#calibre_link-1030" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">68</a></p>
    <p class="fm-booktitle">Global sales dashboard <a href="#calibre_link-1031" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">380</a>, <a href="#calibre_link-1032" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">382</a></p>
    <p class="fm-booktitle">H</p>
    <p class="fm-booktitle">Health Insurance Portability and Accountability Act (HIPAA) <a href="#calibre_link-1033" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">436</a>, <a href="#calibre_link-1034" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">438</a></p>
    <p class="fm-booktitle">hindcasting <a href="#calibre_link-1035" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">364</a></p>
    <p class="fm-booktitle">hybrid tables <a href="#calibre_link-1036" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">58</a></p>
    <p class="fm-booktitle">Hybrid Transactional and Analytical Processing (HTAP) <a href="#calibre_link-1037" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">170</a></p>
    <p class="fm-booktitle">HyperText Markup Language (HTML) <a href="#calibre_link-1038" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">499</a></p>
    <p class="fm-booktitle">I</p>
    <p class="fm-booktitle">import mode dataset queries <a href="#calibre_link-1039" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">52</a>, <a href="#calibre_link-1040" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">53</a></p>
    <p class="fm-booktitle">import mode datasets</p>
    <p class="fm-booktitle">columnar compression <a href="#calibre_link-1041" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">166</a>, <a href="#calibre_link-1042" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">168</a></p>
    <p class="fm-booktitle">memory analysis via Data Management Views (DMVs) <a href="#calibre_link-1043" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">168</a>, <a href="#calibre_link-1044" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">169</a></p>
    <p class="fm-booktitle">memory analysis via VertiPaq Analyzer <a href="#calibre_link-1045" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">168</a>, <a href="#calibre_link-1046" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">169</a></p>
    <p class="fm-booktitle">performance, optimizing <a href="#calibre_link-1047" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">166</a></p>
    <p class="fm-booktitle">query caching <a href="#calibre_link-1048" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">166</a></p>
    <p class="fm-booktitle">independent software vendors (ISVs) <a href="#calibre_link-1049" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">23</a></p>
    <p class="fm-booktitle">Infrastructure-as-a-Service (IaaS) <a href="#calibre_link-1050" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">53</a></p>
    <p class="fm-booktitle">integrated development environments (IDEs) <a href="#calibre_link-1051" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">344</a></p>
    <p class="fm-booktitle">Internet Sales query <a href="#calibre_link-1052" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">91</a></p>
    <p class="fm-booktitle">K</p>
    <p class="fm-booktitle">key influencers visual <a href="#calibre_link-1053" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">332</a>, <a href="#calibre_link-1054" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">334</a>, <a href="#calibre_link-1055" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">336</a></p>
    <p class="fm-booktitle">key performance indicators (KPIs) <a href="#calibre_link-1056" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">388</a></p>
    <p class="fm-booktitle">KPI targets <a href="#calibre_link-1057" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">199</a>, <a href="#calibre_link-1058" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">200</a></p>
    <p class="fm-booktitle">KPI visual <a href="#calibre_link-1059" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">295</a></p>
    <p class="fm-booktitle">L</p>
    <p class="fm-booktitle">life cycle management, Power BI Premium <a href="#calibre_link-1060" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">652</a></p>
    <p class="fm-booktitle">ALM Toolkit deployment <a href="#calibre_link-1061" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">652</a>, <a href="#calibre_link-1062" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">653</a>, <a href="#calibre_link-1063" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">654</a>, <a href="#calibre_link-1064" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">655</a></p>
    <p class="fm-booktitle">dataset management, with SSMS <a href="#calibre_link-1065" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">655</a>, <a href="#calibre_link-1066" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">656</a>, <a href="#calibre_link-1067" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">657</a>, <a href="#calibre_link-1068" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">658</a></p>
    <p class="fm-booktitle">Premium Capacities, backing up <a href="#calibre_link-1069" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">658</a>, <a href="#calibre_link-1070" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">659</a>, <a href="#calibre_link-1071" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">660</a></p>
    <p class="fm-booktitle">line charts</p>
    <p class="fm-booktitle">conditional formatting <a href="#calibre_link-1072" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">316</a>, <a href="#calibre_link-1073" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">317</a>, <a href="#calibre_link-1074" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">318</a>, <a href="#calibre_link-1075" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">319</a></p>
    <p class="fm-booktitle">formatting <a href="#calibre_link-1076" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">315</a>, <a href="#calibre_link-1077" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">316</a></p>
    <p class="fm-booktitle">live connections</p>
    <p class="fm-booktitle">on-premises SQL Server Analysis Services (SSAS) models , accessing via <a href="#calibre_link-1078" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">493</a></p>
    <p class="fm-booktitle">Live connections</p>
    <p class="fm-booktitle">datasets, switching <a href="#calibre_link-1079" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">276</a>, <a href="#calibre_link-1080" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">277</a></p>
    <p class="fm-booktitle">reports, customizing <a href="#calibre_link-1081" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">275</a>, <a href="#calibre_link-1082" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">276</a></p>
    <p class="fm-booktitle">to Power BI datasets <a href="#calibre_link-1083" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">273</a>, <a href="#calibre_link-1084" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">275</a></p>
    <p class="fm-booktitle">live report pages <a href="#calibre_link-1085" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">405</a>, <a href="#calibre_link-1086" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">406</a>, <a href="#calibre_link-1087" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">407</a></p>
    <p class="fm-booktitle">M</p>
    <p class="fm-booktitle">machine learning (ML) <a href="#calibre_link-1088" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">114</a>, <a href="#calibre_link-1089" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">171</a></p>
    <p class="fm-booktitle">map visuals</p>
    <p class="fm-booktitle">bubble map <a href="#calibre_link-1090" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">298</a>, <a href="#calibre_link-1091" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">299</a></p>
    <p class="fm-booktitle">exploring <a href="#calibre_link-1092" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">297</a></p>
    <p class="fm-booktitle">Filled map <a href="#calibre_link-1093" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">300</a>, <a href="#calibre_link-1094" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">301</a></p>
    <p class="fm-booktitle">Mark as date table <a href="#calibre_link-1095" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">78</a>, <a href="#calibre_link-1096" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">79</a>, <a href="#calibre_link-1097" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">80</a></p>
    <p class="fm-booktitle">Master Data Management (MDM) <a href="#calibre_link-1098" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">31</a></p>
    <p class="fm-booktitle">matrices</p>
    <p class="fm-booktitle">versus charts <a href="#calibre_link-1099" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">242</a></p>
    <p class="fm-booktitle">measure evaluation process <a href="#calibre_link-1100" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">182</a>, <a href="#calibre_link-1101" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">183</a></p>
    <p class="fm-booktitle">measure metadata <a href="#calibre_link-1102" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">160</a></p>
    <p class="fm-booktitle">Data category <a href="#calibre_link-1103" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">162</a>, <a href="#calibre_link-1104" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">164</a></p>
    <p class="fm-booktitle">Data format <a href="#calibre_link-1105" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">162</a></p>
    <p class="fm-booktitle">measures metadata</p>
    <p class="fm-booktitle">Descriptions <a href="#calibre_link-1106" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">164</a>, <a href="#calibre_link-1107" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">165</a></p>
    <p class="fm-booktitle">Member role <a href="#calibre_link-1108" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">419</a></p>
    <p class="fm-booktitle">metadata management <a href="#calibre_link-1109" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">444</a>, <a href="#calibre_link-1110" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">445</a></p>
    <p class="fm-booktitle">field descriptions <a href="#calibre_link-1111" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">445</a></p>
    <p class="fm-booktitle">reporting <a href="#calibre_link-1112" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">450</a>, <a href="#calibre_link-1113" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">451</a></p>
    <p class="fm-booktitle">report pages <a href="#calibre_link-1114" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">455</a></p>
    <p class="fm-booktitle">Metadata Mechanic <a href="#calibre_link-1115" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">449</a></p>
    <p class="fm-booktitle">download link <a href="#calibre_link-1116" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">449</a></p>
    <p class="fm-booktitle">Microsoft 365 admin center</p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-1117" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">433</a></p>
    <p class="fm-booktitle">Microsoft 365 apps <a href="#calibre_link-1118" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">563</a></p>
    <p class="fm-booktitle">embedding, in SharePoint Online <a href="#calibre_link-1119" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">564</a>, <a href="#calibre_link-1120" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">565</a>, <a href="#calibre_link-1121" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">566</a></p>
    <p class="fm-booktitle">embedding, working for Teams <a href="#calibre_link-1122" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">563</a>, <a href="#calibre_link-1123" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">564</a></p>
    <p class="fm-booktitle">Microsoft Defender for Cloud Apps <a href="#calibre_link-1124" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">610</a></p>
    <p class="fm-booktitle">migration phases, of report to Power BI service</p>
    <p class="fm-booktitle">assess <a href="#calibre_link-1125" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">512</a>, <a href="#calibre_link-1126" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">513</a></p>
    <p class="fm-booktitle">final deployment <a href="#calibre_link-1127" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">515</a></p>
    <p class="fm-booktitle">inventory <a href="#calibre_link-1128" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">511</a>, <a href="#calibre_link-1129" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">512</a></p>
    <p class="fm-booktitle">migrate <a href="#calibre_link-1130" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">515</a></p>
    <p class="fm-booktitle">Plan <a href="#calibre_link-1131" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">514</a></p>
    <p class="fm-booktitle">User Acceptance Testing <a href="#calibre_link-1132" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">515</a></p>
    <p class="fm-booktitle">missing dimension <a href="#calibre_link-1133" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">212</a>, <a href="#calibre_link-1134" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">213</a>, <a href="#calibre_link-1135" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">214</a></p>
    <p class="fm-booktitle">mobile-optimized dashboards <a href="#calibre_link-1136" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">408</a>, <a href="#calibre_link-1137" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">410</a></p>
    <p class="fm-booktitle">mobile-optimized report pages <a href="#calibre_link-1138" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">368</a>, <a href="#calibre_link-1139" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">369</a>, <a href="#calibre_link-1140" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">370</a></p>
    <p class="fm-booktitle">model metadata <a href="#calibre_link-1141" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">159</a></p>
    <p class="fm-booktitle">visibility <a href="#calibre_link-1142" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">159</a>, <a href="#calibre_link-1143" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">160</a></p>
    <p class="fm-booktitle">Model view <a href="#calibre_link-1144" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">124</a>, <a href="#calibre_link-1145" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">125</a>, <a href="#calibre_link-1146" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">126</a>, <a href="#calibre_link-1147" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">127</a></p>
    <p class="fm-booktitle">M queries</p>
    <p class="fm-booktitle">versus SQL views <a href="#calibre_link-1148" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">72</a>, <a href="#calibre_link-1149" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">73</a>, <a href="#calibre_link-1150" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">74</a></p>
    <p class="fm-booktitle">MSHGQM tool <a href="#calibre_link-1151" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">443</a></p>
    <p class="fm-booktitle">download link <a href="#calibre_link-1152" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">444</a></p>
    <p class="fm-booktitle">Multi-Dimensional eXpressions (MDX) <a href="#calibre_link-1153" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">182</a></p>
    <p class="fm-booktitle">multi-factor authentication (MFA) <a href="#calibre_link-1154" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">587</a>, <a href="#calibre_link-1155" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">591</a></p>
    <p class="fm-booktitle">multiple-dashboard architecture <a href="#calibre_link-1156" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">388</a>, <a href="#calibre_link-1157" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">389</a></p>
    <p class="fm-booktitle">Multipurpose Internet Mail Extension (MIME) <a href="#calibre_link-1158" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">499</a></p>
    <p class="fm-booktitle">Multi-row card visual <a href="#calibre_link-1159" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">294</a></p>
    <p class="fm-booktitle">My workspace <a href="#calibre_link-1160" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">421</a></p>
    <p class="fm-booktitle">N</p>
    <p class="fm-booktitle">node types <a href="#calibre_link-1161" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">22</a></p>
    <p class="fm-booktitle">O</p>
    <p class="fm-booktitle">object-level security (OLS) <a href="#calibre_link-1162" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">544</a></p>
    <p class="fm-booktitle">Object Linking and Embedding Database (OLE DB) <a href="#calibre_link-1163" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">58</a></p>
    <p class="fm-booktitle">Office Online Server (OOS) <a href="#calibre_link-1164" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">516</a></p>
    <p class="fm-booktitle">OneDrive for Business <a href="#calibre_link-1165" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">439</a>, <a href="#calibre_link-1166" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">440</a>, <a href="#calibre_link-1167" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">441</a></p>
    <p class="fm-booktitle">OnLine Transactional Processing (OLTP) <a href="#calibre_link-1168" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">170</a></p>
    <p class="fm-booktitle">online transaction processing (OLTP) <a href="#calibre_link-1169" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">41</a></p>
    <p class="fm-booktitle">on-premises data gateway</p>
    <p class="fm-booktitle">administrators <a href="#calibre_link-1170" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">483</a></p>
    <p class="fm-booktitle">architectures <a href="#calibre_link-1171" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">471</a>, <a href="#calibre_link-1172" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">472</a>, <a href="#calibre_link-1173" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">473</a>, <a href="#calibre_link-1174" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">474</a></p>
    <p class="fm-booktitle">clusters <a href="#calibre_link-1175" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">469</a>, <a href="#calibre_link-1176" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">470</a>, <a href="#calibre_link-1177" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">471</a></p>
    <p class="fm-booktitle">clusters, managing <a href="#calibre_link-1178" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">482</a>, <a href="#calibre_link-1179" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">483</a></p>
    <p class="fm-booktitle">concepts <a href="#calibre_link-1180" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">469</a></p>
    <p class="fm-booktitle">configuration <a href="#calibre_link-1181" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">476</a></p>
    <p class="fm-booktitle">connectors <a href="#calibre_link-1182" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">480</a>, <a href="#calibre_link-1183" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">481</a></p>
    <p class="fm-booktitle">data sources and users <a href="#calibre_link-1184" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">484</a>, <a href="#calibre_link-1185" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">485</a></p>
    <p class="fm-booktitle">diagnostics <a href="#calibre_link-1186" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">488</a>, <a href="#calibre_link-1187" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">489</a></p>
    <p class="fm-booktitle">infrastructure and hardware requirements, defining <a href="#calibre_link-1188" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">464</a>, <a href="#calibre_link-1189" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">465</a>, <a href="#calibre_link-1190" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">466</a></p>
    <p class="fm-booktitle">installation <a href="#calibre_link-1191" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">476</a>, <a href="#calibre_link-1192" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">477</a>, <a href="#calibre_link-1193" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">478</a></p>
    <p class="fm-booktitle">installation location, identifying <a href="#calibre_link-1194" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">463</a>, <a href="#calibre_link-1195" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">464</a></p>
    <p class="fm-booktitle">migrating <a href="#calibre_link-1196" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">487</a></p>
    <p class="fm-booktitle">monitoring <a href="#calibre_link-1197" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">486</a></p>
    <p class="fm-booktitle">monitoring reports <a href="#calibre_link-1198" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">489</a>, <a href="#calibre_link-1199" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">490</a></p>
    <p class="fm-booktitle">need, determining <a href="#calibre_link-1200" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">462</a></p>
    <p class="fm-booktitle">PowerShell support <a href="#calibre_link-1201" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">485</a>, <a href="#calibre_link-1202" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">486</a></p>
    <p class="fm-booktitle">recovery keys, planning for <a href="#calibre_link-1203" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">467</a></p>
    <p class="fm-booktitle">Recovery Keys tab <a href="#calibre_link-1204" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">481</a>, <a href="#calibre_link-1205" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">482</a></p>
    <p class="fm-booktitle">restoring <a href="#calibre_link-1206" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">487</a></p>
    <p class="fm-booktitle">roles and permissions, defining <a href="#calibre_link-1207" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">466</a>, <a href="#calibre_link-1208" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">467</a></p>
    <p class="fm-booktitle">security <a href="#calibre_link-1209" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">474</a>, <a href="#calibre_link-1210" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">475</a>, <a href="#calibre_link-1211" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">476</a></p>
    <p class="fm-booktitle">service account <a href="#calibre_link-1212" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">478</a>, <a href="#calibre_link-1213" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">479</a></p>
    <p class="fm-booktitle">standard, versus personal mode <a href="#calibre_link-1214" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">468</a>, <a href="#calibre_link-1215" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">469</a></p>
    <p class="fm-booktitle">taking over <a href="#calibre_link-1216" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">487</a></p>
    <p class="fm-booktitle">TCP, versus HTTPS mode <a href="#calibre_link-1217" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">479</a>, <a href="#calibre_link-1218" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">480</a></p>
    <p class="fm-booktitle">troubleshooting <a href="#calibre_link-1219" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">486</a></p>
    <p class="fm-booktitle">on-premises data gateway planning <a href="#calibre_link-1220" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">458</a>, <a href="#calibre_link-1221" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">459</a>, <a href="#calibre_link-1222" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">460</a>, <a href="#calibre_link-1223" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">461</a></p>
    <p class="fm-booktitle">top gateway planning tasks <a href="#calibre_link-1224" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">461</a></p>
    <p class="fm-booktitle">on-premises SQL Server Analysis Services (SSAS) models </p>
    <p class="fm-booktitle">accessing, via live connections <a href="#calibre_link-1225" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">493</a></p>
    <p class="fm-booktitle">Open Database Connectivity (ODBC) <a href="#calibre_link-1226" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">58</a></p>
    <p class="fm-booktitle">Open Data Protocol (OData) <a href="#calibre_link-1227" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">58</a></p>
    <p class="fm-booktitle">OpenStreetMap base map <a href="#calibre_link-1228" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">349</a></p>
    <p class="fm-booktitle">organizational dashboard architecture <a href="#calibre_link-1229" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">389</a>, <a href="#calibre_link-1230" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">390</a>, <a href="#calibre_link-1231" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">391</a>, <a href="#calibre_link-1232" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">392</a></p>
    <p class="fm-booktitle">P</p>
    <p class="fm-booktitle">paginated reports</p>
    <p class="fm-booktitle">building <a href="#calibre_link-1233" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">499</a>, <a href="#calibre_link-1234" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">500</a>, <a href="#calibre_link-1235" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">501</a>, <a href="#calibre_link-1236" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">502</a>, <a href="#calibre_link-1237" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">503</a>, <a href="#calibre_link-1238" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">504</a>, <a href="#calibre_link-1239" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">505</a>, <a href="#calibre_link-1240" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">506</a>, <a href="#calibre_link-1241" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">507</a></p>
    <p class="fm-booktitle">exporting <a href="#calibre_link-1242" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">509</a></p>
    <p class="fm-booktitle">identifying <a href="#calibre_link-1243" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">508</a></p>
    <p class="fm-booktitle">in Power BI service <a href="#calibre_link-1244" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">498</a></p>
    <p class="fm-booktitle">interacting with <a href="#calibre_link-1245" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">508</a></p>
    <p class="fm-booktitle">planning <a href="#calibre_link-1246" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">498</a>, <a href="#calibre_link-1247" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">499</a></p>
    <p class="fm-booktitle">printing <a href="#calibre_link-1248" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">509</a>, <a href="#calibre_link-1249" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">510</a></p>
    <p class="fm-booktitle">publishing <a href="#calibre_link-1250" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">499</a>, <a href="#calibre_link-1251" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">500</a>, <a href="#calibre_link-1252" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">501</a>, <a href="#calibre_link-1253" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">502</a>, <a href="#calibre_link-1254" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">503</a>, <a href="#calibre_link-1255" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">504</a>, <a href="#calibre_link-1256" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">505</a>, <a href="#calibre_link-1257" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">506</a>, <a href="#calibre_link-1258" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">507</a></p>
    <p class="fm-booktitle">sharing <a href="#calibre_link-1259" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">509</a>, <a href="#calibre_link-1260" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">510</a></p>
    <p class="fm-booktitle">subscribing <a href="#calibre_link-1261" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">509</a>, <a href="#calibre_link-1262" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">510</a></p>
    <p class="fm-booktitle">paginated reports (RDL reports) <a href="#calibre_link-1263" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">626</a></p>
    <p class="fm-booktitle">paginated report visual <a href="#calibre_link-1264" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">309</a>, <a href="#calibre_link-1265" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">310</a></p>
    <p class="fm-booktitle">parameter tables <a href="#calibre_link-1266" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">142</a>, <a href="#calibre_link-1267" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">143</a></p>
    <p class="fm-booktitle">Display folders <a href="#calibre_link-1268" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">148</a>, <a href="#calibre_link-1269" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">149</a></p>
    <p class="fm-booktitle">last refreshed date <a href="#calibre_link-1270" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">145</a>, <a href="#calibre_link-1271" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">146</a></p>
    <p class="fm-booktitle">measure groups <a href="#calibre_link-1272" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">143</a>, <a href="#calibre_link-1273" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">144</a>, <a href="#calibre_link-1274" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">145</a></p>
    <p class="fm-booktitle">Measure Support table <a href="#calibre_link-1275" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">146</a>, <a href="#calibre_link-1276" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">147</a></p>
    <p class="fm-booktitle">partial query folding <a href="#calibre_link-1277" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">49</a></p>
    <p class="fm-booktitle">PBRS client applications <a href="#calibre_link-1278" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">530</a>, <a href="#calibre_link-1279" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">531</a></p>
    <p class="fm-booktitle">desktop versions, running side by side <a href="#calibre_link-1280" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">531</a></p>
    <p class="fm-booktitle">mobile versions <a href="#calibre_link-1281" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">532</a></p>
    <p class="fm-booktitle">performance analyzer</p>
    <p class="fm-booktitle">using <a href="#calibre_link-1282" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">225</a>, <a href="#calibre_link-1283" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">226</a></p>
    <p class="fm-booktitle">personally identifiable information (PII) <a href="#calibre_link-1284" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">436</a></p>
    <p class="fm-booktitle">Platform as a Service (PaaS) <a href="#calibre_link-1285" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">53</a>, <a href="#calibre_link-1286" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">600</a></p>
    <p class="fm-booktitle">Platform-as-a-Service (PaaS) <a href="#calibre_link-1287" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">518</a></p>
    <p class="fm-booktitle">Play axis</p>
    <p class="fm-booktitle">for Scatter charts <a href="#calibre_link-1288" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">355</a>, <a href="#calibre_link-1289" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">356</a></p>
    <p class="fm-booktitle">Power Apps visual</p>
    <p class="fm-booktitle">example, using in Power BI desktop <a href="#calibre_link-1290" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">303</a>, <a href="#calibre_link-1291" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">305</a></p>
    <p class="fm-booktitle">Power Automate</p>
    <p class="fm-booktitle"> for Power BI <a href="#calibre_link-1292" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">305</a>, <a href="#calibre_link-1293" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">306</a>, <a href="#calibre_link-1294" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">307</a>, <a href="#calibre_link-1295" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">308</a></p>
    <p class="fm-booktitle">Power BI</p>
    <p class="fm-booktitle">administrator role <a href="#calibre_link-1296" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">582</a>, <a href="#calibre_link-1297" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">583</a>, <a href="#calibre_link-1298" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">584</a></p>
    <p class="fm-booktitle">as data sources <a href="#calibre_link-1299" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">65</a>, <a href="#calibre_link-1300" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">66</a></p>
    <p class="fm-booktitle">as superset, of Azure Analysis Services <a href="#calibre_link-1301" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">121</a></p>
    <p class="fm-booktitle">audit logs <a href="#calibre_link-1302" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">615</a>, <a href="#calibre_link-1303" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">617</a></p>
    <p class="fm-booktitle">data governance <a href="#calibre_link-1304" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">584</a>, <a href="#calibre_link-1305" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">585</a>, <a href="#calibre_link-1306" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">586</a></p>
    <p class="fm-booktitle">data governance, implementing <a href="#calibre_link-1307" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">586</a>, <a href="#calibre_link-1308" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">587</a></p>
    <p class="fm-booktitle">usage metric reports <a href="#calibre_link-1309" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">611</a>, <a href="#calibre_link-1310" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">612</a>, <a href="#calibre_link-1311" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">613</a>, <a href="#calibre_link-1312" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">614</a>, <a href="#calibre_link-1313" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">615</a></p>
    <p class="fm-booktitle">Power BI, admin portal <a href="#calibre_link-1314" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">594</a></p>
    <p class="fm-booktitle">about <a href="#calibre_link-1315" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">594</a>, <a href="#calibre_link-1316" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">595</a></p>
    <p class="fm-booktitle">Azure connections page <a href="#calibre_link-1317" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">607</a>, <a href="#calibre_link-1318" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">608</a></p>
    <p class="fm-booktitle">capacity settings page <a href="#calibre_link-1319" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">603</a></p>
    <p class="fm-booktitle">Custom branding page <a href="#calibre_link-1320" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">609</a>, <a href="#calibre_link-1321" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">610</a></p>
    <p class="fm-booktitle">Embed Codes page <a href="#calibre_link-1322" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">603</a>, <a href="#calibre_link-1323" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">604</a></p>
    <p class="fm-booktitle">Featured content page <a href="#calibre_link-1324" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">610</a>, <a href="#calibre_link-1325" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">611</a></p>
    <p class="fm-booktitle">Organizational visuals page <a href="#calibre_link-1326" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">604</a>, <a href="#calibre_link-1327" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">605</a>, <a href="#calibre_link-1328" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">606</a>, <a href="#calibre_link-1329" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">607</a></p>
    <p class="fm-booktitle">Premium Per User (PPU) <a href="#calibre_link-1330" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">602</a>, <a href="#calibre_link-1331" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">603</a></p>
    <p class="fm-booktitle">Protection metrics page <a href="#calibre_link-1332" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">610</a></p>
    <p class="fm-booktitle">Tenant settings page <a href="#calibre_link-1333" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">595</a>, <a href="#calibre_link-1334" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">596</a>, <a href="#calibre_link-1335" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">598</a>, <a href="#calibre_link-1336" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">599</a>, <a href="#calibre_link-1337" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">600</a></p>
    <p class="fm-booktitle">Usage metrics page <a href="#calibre_link-1338" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">600</a></p>
    <p class="fm-booktitle">Users and Audit logs page <a href="#calibre_link-1339" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">601</a></p>
    <p class="fm-booktitle">Workspaces page <a href="#calibre_link-1340" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">608</a>, <a href="#calibre_link-1341" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">609</a></p>
    <p class="fm-booktitle">Power BI apps <a href="#calibre_link-1342" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">538</a></p>
    <p class="fm-booktitle">deployment process <a href="#calibre_link-1343" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">540</a>, <a href="#calibre_link-1344" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">541</a></p>
    <p class="fm-booktitle">installing <a href="#calibre_link-1345" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">549</a>, <a href="#calibre_link-1346" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">550</a></p>
    <p class="fm-booktitle">licensing <a href="#calibre_link-1347" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">538</a>, <a href="#calibre_link-1348" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">539</a></p>
    <p class="fm-booktitle">publishing <a href="#calibre_link-1349" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">545</a>, <a href="#calibre_link-1350" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">546</a>, <a href="#calibre_link-1351" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">547</a>, <a href="#calibre_link-1352" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">548</a>, <a href="#calibre_link-1353" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">549</a></p>
    <p class="fm-booktitle">security <a href="#calibre_link-1354" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">542</a>, <a href="#calibre_link-1355" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">543</a>, <a href="#calibre_link-1356" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">544</a>, <a href="#calibre_link-1357" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">545</a></p>
    <p class="fm-booktitle">updating <a href="#calibre_link-1358" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">551</a>, <a href="#calibre_link-1359" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">552</a></p>
    <p class="fm-booktitle">users permission <a href="#calibre_link-1360" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">542</a>, <a href="#calibre_link-1361" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">543</a>, <a href="#calibre_link-1362" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">544</a>, <a href="#calibre_link-1363" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">545</a></p>
    <p class="fm-booktitle">versus direct sharing <a href="#calibre_link-1364" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">558</a></p>
    <p class="fm-booktitle">viewing, on mobile devices <a href="#calibre_link-1365" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">552</a>, <a href="#calibre_link-1366" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">553</a>, <a href="#calibre_link-1367" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">554</a></p>
    <p class="fm-booktitle">Power BI, benefits <a href="#calibre_link-1368" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">433</a></p>
    <p class="fm-booktitle">data loss prevention (DLP) <a href="#calibre_link-1369" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">436</a></p>
    <p class="fm-booktitle">information protection <a href="#calibre_link-1370" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">433</a>, <a href="#calibre_link-1371" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">434</a>, <a href="#calibre_link-1372" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">435</a>, <a href="#calibre_link-1373" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">436</a></p>
    <p class="fm-booktitle">Power BI datasets</p>
    <p class="fm-booktitle">Import mode and Live mode datasets, switching between <a href="#calibre_link-1374" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">277</a></p>
    <p class="fm-booktitle">Live connections <a href="#calibre_link-1375" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">273</a>, <a href="#calibre_link-1376" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">274</a>, <a href="#calibre_link-1377" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">275</a></p>
    <p class="fm-booktitle">Power BI Dedicated Capacity Load Assessment Tool</p>
    <p class="fm-booktitle">download link <a href="#calibre_link-1378" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">633</a></p>
    <p class="fm-booktitle">Power BI deployment modes <a href="#calibre_link-1379" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">2</a>, <a href="#calibre_link-1380" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">3</a></p>
    <p class="fm-booktitle">Corporate BI delivery approach <a href="#calibre_link-1381" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">4</a></p>
    <p class="fm-booktitle">deployment mode, selecting <a href="#calibre_link-1382" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">7</a>, <a href="#calibre_link-1383" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">8</a></p>
    <p class="fm-booktitle">Self-Service Visualization approach <a href="#calibre_link-1384" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">5</a>, <a href="#calibre_link-1385" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">6</a></p>
    <p class="fm-booktitle">Power BI deployment pipelines <a href="#calibre_link-1386" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">430</a>, <a href="#calibre_link-1387" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">431</a>, <a href="#calibre_link-1388" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">432</a>, <a href="#calibre_link-1389" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">433</a></p>
    <p class="fm-booktitle">Power BI deskstop, options</p>
    <p class="fm-booktitle">CURRENT FILE options <a href="#calibre_link-1390" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">68</a>, <a href="#calibre_link-1391" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">69</a>, <a href="#calibre_link-1392" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">70</a></p>
    <p class="fm-booktitle">global options <a href="#calibre_link-1393" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">68</a></p>
    <p class="fm-booktitle">Power BI Desktop</p>
    <p class="fm-booktitle">data profiling with <a href="#calibre_link-1394" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">36</a>, <a href="#calibre_link-1395" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">37</a></p>
    <p class="fm-booktitle">Power BI licenses</p>
    <p class="fm-booktitle">dedicated capacity <a href="#calibre_link-1396" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">21</a></p>
    <p class="fm-booktitle">scenarios <a href="#calibre_link-1397" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">24</a>, <a href="#calibre_link-1398" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">25</a></p>
    <p class="fm-booktitle">shared capacity <a href="#calibre_link-1399" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">18</a>, <a href="#calibre_link-1400" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">20</a></p>
    <p class="fm-booktitle">Power BI PowerShell module <a href="#calibre_link-1401" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">425</a>, <a href="#calibre_link-1402" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">428</a></p>
    <p class="fm-booktitle">Power BI Premium <a href="#calibre_link-1403" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">624</a></p>
    <p class="fm-booktitle">administration <a href="#calibre_link-1404" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">633</a></p>
    <p class="fm-booktitle">administrators, responsibilities <a href="#calibre_link-1405" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">633</a>, <a href="#calibre_link-1406" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">634</a></p>
    <p class="fm-booktitle">benefit <a href="#calibre_link-1407" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">624</a></p>
    <p class="fm-booktitle">capabilities <a href="#calibre_link-1408" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">625</a>, <a href="#calibre_link-1409" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">626</a>, <a href="#calibre_link-1410" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">627</a></p>
    <p class="fm-booktitle">capacity allocation <a href="#calibre_link-1411" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">634</a>, <a href="#calibre_link-1412" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">635</a>, <a href="#calibre_link-1413" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">636</a></p>
    <p class="fm-booktitle">capacity estimations <a href="#calibre_link-1414" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">631</a>, <a href="#calibre_link-1415" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">632</a></p>
    <p class="fm-booktitle">capacity nodes <a href="#calibre_link-1416" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">627</a>, <a href="#calibre_link-1417" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">628</a>, <a href="#calibre_link-1418" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">629</a></p>
    <p class="fm-booktitle">capacity resource optimization <a href="#calibre_link-1419" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">647</a></p>
    <p class="fm-booktitle">dataflow features <a href="#calibre_link-1420" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">113</a>, <a href="#calibre_link-1421" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">114</a></p>
    <p class="fm-booktitle">life cycle management <a href="#calibre_link-1422" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">652</a></p>
    <p class="fm-booktitle">Power BI Premium Capacity Metrics app</p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-1423" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">634</a></p>
    <p class="fm-booktitle">Power BI project roles <a href="#calibre_link-1424" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">12</a>, <a href="#calibre_link-1425" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">13</a></p>
    <p class="fm-booktitle">dataset designer <a href="#calibre_link-1426" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">13</a>, <a href="#calibre_link-1427" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">14</a></p>
    <p class="fm-booktitle">Power BI admininistrator <a href="#calibre_link-1428" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">16</a></p>
    <p class="fm-booktitle">project role collaboration <a href="#calibre_link-1429" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">17</a></p>
    <p class="fm-booktitle">report authors <a href="#calibre_link-1430" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">15</a></p>
    <p class="fm-booktitle">Power BI projects</p>
    <p class="fm-booktitle">discovery and ingestion <a href="#calibre_link-1431" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">9</a></p>
    <p class="fm-booktitle">template <a href="#calibre_link-1432" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">9</a></p>
    <p class="fm-booktitle">Power BI projects template <a href="#calibre_link-1433" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">9</a></p>
    <p class="fm-booktitle">adventure Works BI <a href="#calibre_link-1434" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">9</a>, <a href="#calibre_link-1435" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">10</a>, <a href="#calibre_link-1436" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">12</a></p>
    <p class="fm-booktitle">Power BI Report Server (PBRS)</p>
    <p class="fm-booktitle">client applications <a href="#calibre_link-1437" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">530</a>, <a href="#calibre_link-1438" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">531</a></p>
    <p class="fm-booktitle">connectivity options <a href="#calibre_link-1439" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">521</a></p>
    <p class="fm-booktitle">data sources <a href="#calibre_link-1440" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">521</a></p>
    <p class="fm-booktitle">deploying <a href="#calibre_link-1441" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">522</a></p>
    <p class="fm-booktitle">hardware and user licensing <a href="#calibre_link-1442" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">521</a>, <a href="#calibre_link-1443" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">522</a></p>
    <p class="fm-booktitle">hybrid deployment models <a href="#calibre_link-1444" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">523</a>, <a href="#calibre_link-1445" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">524</a></p>
    <p class="fm-booktitle">installing <a href="#calibre_link-1446" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">526</a>, <a href="#calibre_link-1447" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">527</a></p>
    <p class="fm-booktitle">planning <a href="#calibre_link-1448" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">516</a>, <a href="#calibre_link-1449" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">517</a>, <a href="#calibre_link-1450" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">518</a></p>
    <p class="fm-booktitle">product key, retrieving <a href="#calibre_link-1451" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">527</a>, <a href="#calibre_link-1452" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">529</a></p>
    <p class="fm-booktitle">pro licenses, for report authors <a href="#calibre_link-1453" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">522</a></p>
    <p class="fm-booktitle">reference topology <a href="#calibre_link-1454" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">524</a>, <a href="#calibre_link-1455" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">525</a></p>
    <p class="fm-booktitle">scale PBRS <a href="#calibre_link-1456" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">525</a>, <a href="#calibre_link-1457" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">526</a></p>
    <p class="fm-booktitle">upgrade cycles <a href="#calibre_link-1458" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">529</a>, <a href="#calibre_link-1459" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">530</a></p>
    <p class="fm-booktitle">upgrading <a href="#calibre_link-1460" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">526</a>, <a href="#calibre_link-1461" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">527</a></p>
    <p class="fm-booktitle">Power BI REST API <a href="#calibre_link-1462" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">425</a>, <a href="#calibre_link-1463" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">427</a></p>
    <p class="fm-booktitle">documentation link <a href="#calibre_link-1464" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">425</a></p>
    <p class="fm-booktitle">Power BI REST APIs</p>
    <p class="fm-booktitle">for admins <a href="#calibre_link-1465" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">620</a>, <a href="#calibre_link-1466" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">621</a></p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-1467" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">620</a></p>
    <p class="fm-booktitle">Power BI service</p>
    <p class="fm-booktitle">feature differences <a href="#calibre_link-1468" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">518</a>, <a href="#calibre_link-1469" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">519</a></p>
    <p class="fm-booktitle">paginated reports <a href="#calibre_link-1470" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">498</a></p>
    <p class="fm-booktitle">reports, migrating to <a href="#calibre_link-1471" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">510</a></p>
    <p class="fm-booktitle">PowerBI workloads</p>
    <p class="fm-booktitle">frontend resources, versus backend resources <a href="#calibre_link-1472" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">629</a>, <a href="#calibre_link-1473" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">630</a>, <a href="#calibre_link-1474" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">631</a></p>
    <p class="fm-booktitle">Power KPI custom visuals <a href="#calibre_link-1475" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">377</a></p>
    <p class="fm-booktitle">Power Platform admin center <a href="#calibre_link-1476" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">468</a></p>
    <p class="fm-booktitle">Power Platform visuals <a href="#calibre_link-1477" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">302</a>, <a href="#calibre_link-1478" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">303</a></p>
    <p class="fm-booktitle">Power Query Editor <a href="#calibre_link-1479" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">85</a></p>
    <p class="fm-booktitle">Power Query M</p>
    <p class="fm-booktitle">editing tools <a href="#calibre_link-1480" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">114</a></p>
    <p class="fm-booktitle">queries <a href="#calibre_link-1481" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">84</a></p>
    <p class="fm-booktitle">Power Query M editing tools <a href="#calibre_link-1482" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">114</a></p>
    <p class="fm-booktitle">Advanced Editor <a href="#calibre_link-1483" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">114</a>, <a href="#calibre_link-1484" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">115</a></p>
    <p class="fm-booktitle">Visual Studio <a href="#calibre_link-1485" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">117</a>, <a href="#calibre_link-1486" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">118</a></p>
    <p class="fm-booktitle">Visual Studio Code <a href="#calibre_link-1487" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">116</a></p>
    <p class="fm-booktitle">Power Query M queries</p>
    <p class="fm-booktitle">combining <a href="#calibre_link-1488" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">102</a>, <a href="#calibre_link-1489" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">103</a></p>
    <p class="fm-booktitle">creating <a href="#calibre_link-1490" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">98</a></p>
    <p class="fm-booktitle">custom function queries <a href="#calibre_link-1491" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">97</a></p>
    <p class="fm-booktitle">data source parameters <a href="#calibre_link-1492" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">86</a>, <a href="#calibre_link-1493" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">87</a>, <a href="#calibre_link-1494" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">88</a></p>
    <p class="fm-booktitle">examples <a href="#calibre_link-1495" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">100</a></p>
    <p class="fm-booktitle">facts and dimensions queries <a href="#calibre_link-1496" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">91</a></p>
    <p class="fm-booktitle">numeric data types <a href="#calibre_link-1497" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">98</a>, <a href="#calibre_link-1498" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">99</a></p>
    <p class="fm-booktitle">organizing <a href="#calibre_link-1499" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">85</a>, <a href="#calibre_link-1500" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">86</a></p>
    <p class="fm-booktitle">parameter tables queries <a href="#calibre_link-1501" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">94</a>, <a href="#calibre_link-1502" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">95</a>, <a href="#calibre_link-1503" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">96</a></p>
    <p class="fm-booktitle">security table queries <a href="#calibre_link-1504" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">96</a></p>
    <p class="fm-booktitle">staging <a href="#calibre_link-1505" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">88</a>, <a href="#calibre_link-1506" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">89</a>, <a href="#calibre_link-1507" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">90</a></p>
    <p class="fm-booktitle">types <a href="#calibre_link-1508" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">84</a>, <a href="#calibre_link-1509" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">85</a></p>
    <p class="fm-booktitle">used, for accessing items <a href="#calibre_link-1510" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">99</a>, <a href="#calibre_link-1511" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">100</a></p>
    <p class="fm-booktitle">Power Query M queries examples <a href="#calibre_link-1512" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">100</a></p>
    <p class="fm-booktitle">customer history column <a href="#calibre_link-1513" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">105</a>, <a href="#calibre_link-1514" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">106</a></p>
    <p class="fm-booktitle">derived column data types <a href="#calibre_link-1515" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">106</a>, <a href="#calibre_link-1516" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">107</a></p>
    <p class="fm-booktitle">for product dimension integration <a href="#calibre_link-1517" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">107</a>, <a href="#calibre_link-1518" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">108</a>, <a href="#calibre_link-1519" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">109</a>, <a href="#calibre_link-1520" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">110</a>, <a href="#calibre_link-1521" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">111</a></p>
    <p class="fm-booktitle">incremental refresh, for fact tables <a href="#calibre_link-1522" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">103</a>, <a href="#calibre_link-1523" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">104</a></p>
    <p class="fm-booktitle">R and Python script transformation <a href="#calibre_link-1524" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">111</a></p>
    <p class="fm-booktitle">three years filter, trailing <a href="#calibre_link-1525" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">101</a>, <a href="#calibre_link-1526" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">102</a></p>
    <p class="fm-booktitle">PowerShell Core</p>
    <p class="fm-booktitle">download link <a href="#calibre_link-1527" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">485</a></p>
    <p class="fm-booktitle">Premium Capacities</p>
    <p class="fm-booktitle">backing up <a href="#calibre_link-1528" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">658</a>, <a href="#calibre_link-1529" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">659</a>, <a href="#calibre_link-1530" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">660</a></p>
    <p class="fm-booktitle">premium capacity-based licensing model <a href="#calibre_link-1531" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">625</a></p>
    <p class="fm-booktitle">Premium Embedded SKUs (EM) <a href="#calibre_link-1532" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">625</a></p>
    <p class="fm-booktitle">Premium Per User (PPU) <a href="#calibre_link-1533" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">602</a></p>
    <p class="fm-booktitle">Premium Per User (PPU) licenses <a href="#calibre_link-1534" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">559</a></p>
    <p class="fm-booktitle">Premium Per User (PPU) licensing <a href="#calibre_link-1535" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">625</a></p>
    <p class="fm-booktitle">premium visuals <a href="#calibre_link-1536" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">308</a></p>
    <p class="fm-booktitle">paginated report <a href="#calibre_link-1537" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">309</a>, <a href="#calibre_link-1538" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">310</a></p>
    <p class="fm-booktitle">Scorecard <a href="#calibre_link-1539" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">308</a>, <a href="#calibre_link-1540" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">309</a></p>
    <p class="fm-booktitle">prior periods <a href="#calibre_link-1541" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">200</a>, <a href="#calibre_link-1542" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">201</a>, <a href="#calibre_link-1543" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">202</a></p>
    <p class="fm-booktitle">versus current periods <a href="#calibre_link-1544" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">205</a>, <a href="#calibre_link-1545" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">206</a></p>
    <p class="fm-booktitle">product dimension view <a href="#calibre_link-1546" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">80</a></p>
    <p class="fm-booktitle">proof-of-concept (POC) <a href="#calibre_link-1547" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">7</a></p>
    <p class="fm-booktitle">Publish to web <a href="#calibre_link-1548" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">560</a>, <a href="#calibre_link-1549" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">561</a></p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-1550" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">562</a></p>
    <p class="fm-booktitle">Pulse chart custom visual</p>
    <p class="fm-booktitle">animation capabilities, exploring <a href="#calibre_link-1551" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">356</a>, <a href="#calibre_link-1552" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">357</a>, <a href="#calibre_link-1553" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">358</a></p>
    <p class="fm-booktitle">Push Datasets <a href="#calibre_link-1554" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">397</a></p>
    <p class="fm-booktitle">Python script options <a href="#calibre_link-1555" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">347</a></p>
    <p class="fm-booktitle">Python visual <a href="#calibre_link-1556" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">342</a>, <a href="#calibre_link-1557" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">344</a>, <a href="#calibre_link-1558" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">347</a>, <a href="#calibre_link-1559" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">348</a></p>
    <p class="fm-booktitle">download link <a href="#calibre_link-1560" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">347</a></p>
    <p class="fm-booktitle">Q</p>
    <p class="fm-booktitle">Q&amp;A visualization <a href="#calibre_link-1561" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">338</a>, <a href="#calibre_link-1562" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">339</a>, <a href="#calibre_link-1563" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">340</a></p>
    <p class="fm-booktitle">query</p>
    <p class="fm-booktitle">designing, per dataset mode <a href="#calibre_link-1564" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">50</a>, <a href="#calibre_link-1565" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">52</a></p>
    <p class="fm-booktitle">query folding <a href="#calibre_link-1566" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">39</a>, <a href="#calibre_link-1567" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">48</a>, <a href="#calibre_link-1568" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">49</a>, <a href="#calibre_link-1569" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">52</a>, <a href="#calibre_link-1570" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">90</a></p>
    <p class="fm-booktitle">partial query folding <a href="#calibre_link-1571" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">49</a></p>
    <p class="fm-booktitle">Quick insights feature <a href="#calibre_link-1572" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">56</a>, <a href="#calibre_link-1573" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">364</a>, <a href="#calibre_link-1574" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">365</a></p>
    <p class="fm-booktitle">increase/decrease, explaining <a href="#calibre_link-1575" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">366</a>, <a href="#calibre_link-1576" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">368</a></p>
    <p class="fm-booktitle">R</p>
    <p class="fm-booktitle">ranking metrics <a href="#calibre_link-1577" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">214</a>, <a href="#calibre_link-1578" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">215</a>, <a href="#calibre_link-1579" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">216</a></p>
    <p class="fm-booktitle">dynamic ranking measures <a href="#calibre_link-1580" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">216</a>, <a href="#calibre_link-1581" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">217</a></p>
    <p class="fm-booktitle">RColorBrewer package <a href="#calibre_link-1582" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">346</a></p>
    <p class="fm-booktitle">RDL Migration Tool</p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-1583" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">513</a></p>
    <p class="fm-booktitle">related tables <a href="#calibre_link-1584" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">187</a>, <a href="#calibre_link-1585" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">188</a></p>
    <p class="fm-booktitle">relationships <a href="#calibre_link-1586" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">149</a></p>
    <p class="fm-booktitle">ambiguity <a href="#calibre_link-1587" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">150</a>, <a href="#calibre_link-1588" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">151</a></p>
    <p class="fm-booktitle">bidirectional relationships <a href="#calibre_link-1589" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">154</a>, <a href="#calibre_link-1590" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">155</a></p>
    <p class="fm-booktitle">single-direction relationships <a href="#calibre_link-1591" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">151</a>, <a href="#calibre_link-1592" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">152</a>, <a href="#calibre_link-1593" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">153</a></p>
    <p class="fm-booktitle">uniqueness <a href="#calibre_link-1594" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">149</a>, <a href="#calibre_link-1595" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">150</a></p>
    <p class="fm-booktitle">relative date filtering <a href="#calibre_link-1596" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">263</a>, <a href="#calibre_link-1597" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">264</a></p>
    <p class="fm-booktitle">Report Definition Language (RDL) <a href="#calibre_link-1598" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">309</a>, <a href="#calibre_link-1599" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">310</a>, <a href="#calibre_link-1600" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">499</a></p>
    <p class="fm-booktitle">report design</p>
    <p class="fm-booktitle">summarizing <a href="#calibre_link-1601" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">278</a>, <a href="#calibre_link-1602" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">279</a></p>
    <p class="fm-booktitle">report filter scopes <a href="#calibre_link-1603" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">257</a>, <a href="#calibre_link-1604" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">259</a></p>
    <p class="fm-booktitle">filter conditions, applying <a href="#calibre_link-1605" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">259</a>, <a href="#calibre_link-1606" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">260</a>, <a href="#calibre_link-1607" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">261</a></p>
    <p class="fm-booktitle">relative date filtering <a href="#calibre_link-1608" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">263</a>, <a href="#calibre_link-1609" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">264</a></p>
    <p class="fm-booktitle">report- and page-level filters <a href="#calibre_link-1610" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">261</a>, <a href="#calibre_link-1611" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">263</a></p>
    <p class="fm-booktitle">visual-level filtering <a href="#calibre_link-1612" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">265</a></p>
    <p class="fm-booktitle">reporting elements</p>
    <p class="fm-booktitle">exploring <a href="#calibre_link-1613" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">310</a>, <a href="#calibre_link-1614" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">312</a></p>
    <p class="fm-booktitle">report planning process <a href="#calibre_link-1615" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">229</a></p>
    <p class="fm-booktitle">access and distribution, defining <a href="#calibre_link-1616" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">233</a></p>
    <p class="fm-booktitle">audience, identifying <a href="#calibre_link-1617" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">230</a>, <a href="#calibre_link-1618" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">231</a></p>
    <p class="fm-booktitle">business questions, defining to answer <a href="#calibre_link-1619" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">231</a></p>
    <p class="fm-booktitle">dataset support to business questions, checking <a href="#calibre_link-1620" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">231</a>, <a href="#calibre_link-1621" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">232</a></p>
    <p class="fm-booktitle">interactivity, determining <a href="#calibre_link-1622" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">232</a>, <a href="#calibre_link-1623" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">233</a></p>
    <p class="fm-booktitle">report architecture diagram <a href="#calibre_link-1624" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">235</a>, <a href="#calibre_link-1625" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">236</a>, <a href="#calibre_link-1626" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">237</a></p>
    <p class="fm-booktitle">report layout, sketching <a href="#calibre_link-1627" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">234</a>, <a href="#calibre_link-1628" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">235</a></p>
    <p class="fm-booktitle">steps <a href="#calibre_link-1629" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">230</a></p>
    <p class="fm-booktitle">reports</p>
    <p class="fm-booktitle">versus dashboard <a href="#calibre_link-1630" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">373</a>, <a href="#calibre_link-1631" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">374</a>, <a href="#calibre_link-1632" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">376</a></p>
    <p class="fm-booktitle">Report Server Database</p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-1633" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">526</a></p>
    <p class="fm-booktitle">Report view <a href="#calibre_link-1634" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">124</a>, <a href="#calibre_link-1635" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">129</a>, <a href="#calibre_link-1636" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">130</a></p>
    <p class="fm-booktitle">rolling periods <a href="#calibre_link-1637" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">206</a>, <a href="#calibre_link-1638" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">207</a></p>
    <p class="fm-booktitle">row context <a href="#calibre_link-1639" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">184</a>, <a href="#calibre_link-1640" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">185</a>, <a href="#calibre_link-1641" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">186</a></p>
    <p class="fm-booktitle">row-level security (RLS) <a href="#calibre_link-1642" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">415</a>, <a href="#calibre_link-1643" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">544</a></p>
    <p class="fm-booktitle">Row Level Security (RLS) <a href="#calibre_link-1644" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">220</a></p>
    <p class="fm-booktitle">Row-Level Security (RLS) <a href="#calibre_link-1645" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">64</a></p>
    <p class="fm-booktitle">R visual <a href="#calibre_link-1646" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">342</a>, <a href="#calibre_link-1647" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">344</a>, <a href="#calibre_link-1648" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">345</a>, <a href="#calibre_link-1649" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">346</a></p>
    <p class="fm-booktitle">download link <a href="#calibre_link-1650" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">344</a></p>
    <p class="fm-booktitle">S</p>
    <p class="fm-booktitle">sample project analysis <a href="#calibre_link-1651" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">44</a>, <a href="#calibre_link-1652" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">45</a></p>
    <p class="fm-booktitle">scalar function <a href="#calibre_link-1653" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">186</a>, <a href="#calibre_link-1654" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">187</a></p>
    <p class="fm-booktitle">scatter charts <a href="#calibre_link-1655" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">328</a>, <a href="#calibre_link-1656" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">330</a></p>
    <p class="fm-booktitle">Scatter charts</p>
    <p class="fm-booktitle">play axis <a href="#calibre_link-1657" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">356</a></p>
    <p class="fm-booktitle">Play axis <a href="#calibre_link-1658" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">355</a></p>
    <p class="fm-booktitle">scheduled data refresh <a href="#calibre_link-1659" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">490</a>, <a href="#calibre_link-1660" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">491</a>, <a href="#calibre_link-1661" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">492</a></p>
    <p class="fm-booktitle">Scorecard <a href="#calibre_link-1662" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">308</a>, <a href="#calibre_link-1663" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">309</a></p>
    <p class="fm-booktitle">Secure URL embedding <a href="#calibre_link-1664" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">562</a></p>
    <p class="fm-booktitle">security roles <a href="#calibre_link-1665" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">218</a>, <a href="#calibre_link-1666" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">219</a>, <a href="#calibre_link-1667" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">220</a>, <a href="#calibre_link-1668" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">221</a>, <a href="#calibre_link-1669" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">222</a></p>
    <p class="fm-booktitle">dynamic row-level security <a href="#calibre_link-1670" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">222</a>, <a href="#calibre_link-1671" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">223</a>, <a href="#calibre_link-1672" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">224</a></p>
    <p class="fm-booktitle">Selection pane, Bookmarks <a href="#calibre_link-1673" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">269</a></p>
    <p class="fm-booktitle">Self-Service <a href="#calibre_link-1674" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">3</a></p>
    <p class="fm-booktitle">self-service BI workspaces <a href="#calibre_link-1675" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">577</a></p>
    <p class="fm-booktitle">content distribution <a href="#calibre_link-1676" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">578</a></p>
    <p class="fm-booktitle">risks <a href="#calibre_link-1677" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">579</a></p>
    <p class="fm-booktitle">Server Management Studio (SSMS)</p>
    <p class="fm-booktitle">dataset management <a href="#calibre_link-1678" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">655</a>, <a href="#calibre_link-1679" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">656</a>, <a href="#calibre_link-1680" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">657</a>, <a href="#calibre_link-1681" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">658</a></p>
    <p class="fm-booktitle">Service Principal Name (SPN) <a href="#calibre_link-1682" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">493</a></p>
    <p class="fm-booktitle">Shape map visuals <a href="#calibre_link-1683" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">297</a></p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-1684" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">297</a></p>
    <p class="fm-booktitle">shared capacity, Power BI licenses</p>
    <p class="fm-booktitle">about <a href="#calibre_link-1685" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">18</a></p>
    <p class="fm-booktitle">Free licensing <a href="#calibre_link-1686" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">18</a>, <a href="#calibre_link-1687" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">19</a>, <a href="#calibre_link-1688" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">20</a></p>
    <p class="fm-booktitle">Pro licensing <a href="#calibre_link-1689" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">20</a>, <a href="#calibre_link-1690" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">21</a></p>
    <p class="fm-booktitle">shared content <a href="#calibre_link-1691" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">554</a>, <a href="#calibre_link-1692" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">555</a>, <a href="#calibre_link-1693" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">556</a>, <a href="#calibre_link-1694" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">557</a></p>
    <p class="fm-booktitle">shared dashboard</p>
    <p class="fm-booktitle">scopes <a href="#calibre_link-1695" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">558</a></p>
    <p class="fm-booktitle">shared dimension tables <a href="#calibre_link-1696" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">155</a>, <a href="#calibre_link-1697" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">156</a></p>
    <p class="fm-booktitle">SharePoint Online</p>
    <p class="fm-booktitle">embedding <a href="#calibre_link-1698" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">564</a>, <a href="#calibre_link-1699" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">565</a>, <a href="#calibre_link-1700" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">566</a></p>
    <p class="fm-booktitle">single-dashboard architecture <a href="#calibre_link-1701" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">386</a>, <a href="#calibre_link-1702" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">387</a></p>
    <p class="fm-booktitle">single-direction relationships <a href="#calibre_link-1703" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">151</a>, <a href="#calibre_link-1704" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">152</a>, <a href="#calibre_link-1705" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">153</a></p>
    <p class="fm-booktitle">single number visuals <a href="#calibre_link-1706" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">294</a></p>
    <p class="fm-booktitle">Card visuals <a href="#calibre_link-1707" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">294</a></p>
    <p class="fm-booktitle">Gauge visual <a href="#calibre_link-1708" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">296</a></p>
    <p class="fm-booktitle">KPI visual <a href="#calibre_link-1709" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">295</a></p>
    <p class="fm-booktitle">single sign-on (SSO) <a href="#calibre_link-1710" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">461</a></p>
    <p class="fm-booktitle">slicer <a href="#calibre_link-1711" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">283</a>, <a href="#calibre_link-1712" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">284</a></p>
    <p class="fm-booktitle">custom slicer parameters <a href="#calibre_link-1713" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">287</a>, <a href="#calibre_link-1714" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">288</a></p>
    <p class="fm-booktitle">usage, exploring <a href="#calibre_link-1715" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">291</a>, <a href="#calibre_link-1716" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">293</a>, <a href="#calibre_link-1717" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">294</a></p>
    <p class="fm-booktitle">What-if parameters <a href="#calibre_link-1718" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">289</a>, <a href="#calibre_link-1719" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">290</a>, <a href="#calibre_link-1720" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">291</a></p>
    <p class="fm-booktitle">Slicer synchronization <a href="#calibre_link-1721" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">285</a>, <a href="#calibre_link-1722" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">286</a>, <a href="#calibre_link-1723" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">287</a></p>
    <p class="fm-booktitle">smart narrative visual <a href="#calibre_link-1724" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">341</a>, <a href="#calibre_link-1725" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">342</a></p>
    <p class="fm-booktitle">SnowballC <a href="#calibre_link-1726" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">346</a></p>
    <p class="fm-booktitle">Social Security Numbers (SSN) <a href="#calibre_link-1727" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">436</a></p>
    <p class="fm-booktitle">software as a service (SaaS) <a href="#calibre_link-1728" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">16</a>, <a href="#calibre_link-1729" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">624</a></p>
    <p class="fm-booktitle">Software as a Service (SaaS) <a href="#calibre_link-1730" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">53</a>, <a href="#calibre_link-1731" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">595</a></p>
    <p class="fm-booktitle">Software-as-a-Service (SaaS) <a href="#calibre_link-1732" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">518</a></p>
    <p class="fm-booktitle">solid-state drives (SSD) <a href="#calibre_link-1733" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">464</a></p>
    <p class="fm-booktitle">source control</p>
    <p class="fm-booktitle">for M and DAX code <a href="#calibre_link-1734" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">441</a>, <a href="#calibre_link-1735" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">442</a></p>
    <p class="fm-booktitle">sparklines <a href="#calibre_link-1736" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">326</a>, <a href="#calibre_link-1737" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">327</a></p>
    <p class="fm-booktitle">Spotlight property, Bookmarks <a href="#calibre_link-1738" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">270</a></p>
    <p class="fm-booktitle">SQL equivalent <a href="#calibre_link-1739" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">181</a>, <a href="#calibre_link-1740" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">182</a></p>
    <p class="fm-booktitle">SQL Server Analysis Services (SSAS) <a href="#calibre_link-1741" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">121</a></p>
    <p class="fm-booktitle">SQL Server Integration Services (SSIS) <a href="#calibre_link-1742" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">34</a></p>
    <p class="fm-booktitle">SQL Server Management Studio (SSMS) <a href="#calibre_link-1743" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">227</a>, <a href="#calibre_link-1744" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">493</a>, <a href="#calibre_link-1745" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">626</a></p>
    <p class="fm-booktitle">SQL Server Reporting Services (SSRS) <a href="#calibre_link-1746" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">309</a></p>
    <p class="fm-booktitle">SQL Server Reporting Services (SSRS) reports <a href="#calibre_link-1747" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">626</a></p>
    <p class="fm-booktitle">SQL Server Report Services (SSRS)</p>
    <p class="fm-booktitle">parity with <a href="#calibre_link-1748" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">519</a>, <a href="#calibre_link-1749" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">520</a></p>
    <p class="fm-booktitle">SQL views <a href="#calibre_link-1750" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">70</a>, <a href="#calibre_link-1751" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">71</a>, <a href="#calibre_link-1752" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">72</a></p>
    <p class="fm-booktitle">examples <a href="#calibre_link-1753" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">74</a>, <a href="#calibre_link-1754" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">75</a></p>
    <p class="fm-booktitle">slowly changing dimensions <a href="#calibre_link-1755" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">81</a></p>
    <p class="fm-booktitle">versus M queries <a href="#calibre_link-1756" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">72</a>, <a href="#calibre_link-1757" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">73</a>, <a href="#calibre_link-1758" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">74</a></p>
    <p class="fm-booktitle">SQL views, examples</p>
    <p class="fm-booktitle">date dimension view, building <a href="#calibre_link-1759" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">75</a>, <a href="#calibre_link-1760" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">76</a>, <a href="#calibre_link-1761" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">78</a></p>
    <p class="fm-booktitle">Mark as date table <a href="#calibre_link-1762" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">78</a>, <a href="#calibre_link-1763" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">79</a>, <a href="#calibre_link-1764" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">80</a></p>
    <p class="fm-booktitle">product dimension view <a href="#calibre_link-1765" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">80</a></p>
    <p class="fm-booktitle">staged deployments <a href="#calibre_link-1766" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">422</a></p>
    <p class="fm-booktitle">lifecycle process <a href="#calibre_link-1767" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">423</a></p>
    <p class="fm-booktitle">workspace datasets <a href="#calibre_link-1768" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">424</a>, <a href="#calibre_link-1769" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">425</a></p>
    <p class="fm-booktitle">standard metadata reports <a href="#calibre_link-1770" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">451</a></p>
    <p class="fm-booktitle">server and database parameters <a href="#calibre_link-1771" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">452</a></p>
    <p class="fm-booktitle">standard mode</p>
    <p class="fm-booktitle">versus personal mode <a href="#calibre_link-1772" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">468</a>, <a href="#calibre_link-1773" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">469</a></p>
    <p class="fm-booktitle">stock-keeping units (SKUs) <a href="#calibre_link-1774" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">560</a></p>
    <p class="fm-booktitle">Stock Keeping Units (SKUs) <a href="#calibre_link-1775" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">166</a></p>
    <p class="fm-booktitle">subject matter experts (SMEs) <a href="#calibre_link-1776" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">9</a></p>
    <p class="fm-booktitle">T</p>
    <p class="fm-booktitle">table and matrix visuals</p>
    <p class="fm-booktitle">conditional formatting rules, applying <a href="#calibre_link-1777" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">323</a>, <a href="#calibre_link-1778" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">324</a>, <a href="#calibre_link-1779" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">325</a>, <a href="#calibre_link-1780" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">326</a></p>
    <p class="fm-booktitle">custom format strings <a href="#calibre_link-1781" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">321</a>, <a href="#calibre_link-1782" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">322</a>, <a href="#calibre_link-1783" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">323</a></p>
    <p class="fm-booktitle">formatting <a href="#calibre_link-1784" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">319</a>, <a href="#calibre_link-1785" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">320</a>, <a href="#calibre_link-1786" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">321</a></p>
    <p class="fm-booktitle">scatter chart <a href="#calibre_link-1787" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">328</a>, <a href="#calibre_link-1788" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">330</a></p>
    <p class="fm-booktitle">sparklines <a href="#calibre_link-1789" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">326</a>, <a href="#calibre_link-1790" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">327</a></p>
    <p class="fm-booktitle">values as rows, displaying <a href="#calibre_link-1791" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">327</a>, <a href="#calibre_link-1792" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">328</a></p>
    <p class="fm-booktitle">table function <a href="#calibre_link-1793" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">186</a>, <a href="#calibre_link-1794" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">187</a></p>
    <p class="fm-booktitle">tables</p>
    <p class="fm-booktitle">versus charts <a href="#calibre_link-1795" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">242</a>, <a href="#calibre_link-1796" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">243</a>, <a href="#calibre_link-1797" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">244</a></p>
    <p class="fm-booktitle">versus matrices <a href="#calibre_link-1798" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">242</a>, <a href="#calibre_link-1799" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">243</a>, <a href="#calibre_link-1800" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">244</a></p>
    <p class="fm-booktitle">table storage modes <a href="#calibre_link-1801" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">57</a></p>
    <p class="fm-booktitle">Teams</p>
    <p class="fm-booktitle">embedding, working <a href="#calibre_link-1802" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">563</a>, <a href="#calibre_link-1803" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">564</a></p>
    <p class="fm-booktitle">tm package <a href="#calibre_link-1804" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">346</a></p>
    <p class="fm-booktitle">tooltips <a href="#calibre_link-1805" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">312</a>, <a href="#calibre_link-1806" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">313</a></p>
    <p class="fm-booktitle">report page tooltips <a href="#calibre_link-1807" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">313</a>, <a href="#calibre_link-1808" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">315</a></p>
    <p class="fm-booktitle">trailing averages <a href="#calibre_link-1809" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">206</a></p>
    <p class="fm-booktitle">U</p>
    <p class="fm-booktitle">user acceptance testing (UAT) <a href="#calibre_link-1810" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">422</a></p>
    <p class="fm-booktitle">user owns data <a href="#calibre_link-1811" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">567</a></p>
    <p class="fm-booktitle">V</p>
    <p class="fm-booktitle">version control <a href="#calibre_link-1812" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">439</a></p>
    <p class="fm-booktitle">VertiPaq Analyzer <a href="#calibre_link-1813" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">168</a></p>
    <p class="fm-booktitle">Viewer role <a href="#calibre_link-1814" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">416</a>, <a href="#calibre_link-1815" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">417</a></p>
    <p class="fm-booktitle">View mode, Bookmarks <a href="#calibre_link-1816" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">272</a></p>
    <p class="fm-booktitle">View Native Query <a href="#calibre_link-1817" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">49</a></p>
    <p class="fm-booktitle">virtual private network (VPN) <a href="#calibre_link-1818" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">464</a></p>
    <p class="fm-booktitle">visual interactions <a href="#calibre_link-1819" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">248</a>, <a href="#calibre_link-1820" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">249</a></p>
    <p class="fm-booktitle">editing <a href="#calibre_link-1821" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">249</a>, <a href="#calibre_link-1822" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">250</a></p>
    <p class="fm-booktitle">visualization</p>
    <p class="fm-booktitle">best practices <a href="#calibre_link-1823" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">237</a>, <a href="#calibre_link-1824" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">238</a>, <a href="#calibre_link-1825" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">239</a>, <a href="#calibre_link-1826" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">241</a></p>
    <p class="fm-booktitle">visualization anti-patterns <a href="#calibre_link-1827" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">246</a>, <a href="#calibre_link-1828" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">247</a>, <a href="#calibre_link-1829" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">248</a></p>
    <p class="fm-booktitle">chart selection <a href="#calibre_link-1830" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">244</a></p>
    <p class="fm-booktitle">tables and matrices, versus charts <a href="#calibre_link-1831" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">243</a></p>
    <p class="fm-booktitle">visualizations</p>
    <p class="fm-booktitle">formatting <a href="#calibre_link-1832" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">312</a></p>
    <p class="fm-booktitle">Visualizations pane</p>
    <p class="fm-booktitle">overview <a href="#calibre_link-1833" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">282</a>, <a href="#calibre_link-1834" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">283</a></p>
    <p class="fm-booktitle">visual-level filtering <a href="#calibre_link-1835" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">265</a></p>
    <p class="fm-booktitle">top N visual-level filters <a href="#calibre_link-1836" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">266</a></p>
    <p class="fm-booktitle">visuals</p>
    <p class="fm-booktitle">selecting <a href="#calibre_link-1837" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">241</a>, <a href="#calibre_link-1838" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">242</a></p>
    <p class="fm-booktitle">selection process <a href="#calibre_link-1839" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">242</a></p>
    <p class="fm-booktitle">Visual Studio Team Services (VSTS) <a href="#calibre_link-1840" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">439</a></p>
    <p class="fm-booktitle">W</p>
    <p class="fm-booktitle">waterfall chart <a href="#calibre_link-1841" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">301</a>, <a href="#calibre_link-1842" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">302</a></p>
    <p class="fm-booktitle">Web Data Connector (WDC) (Get Data | Web) <a href="#calibre_link-1843" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">462</a></p>
    <p class="fm-booktitle">What-if parameters <a href="#calibre_link-1844" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">289</a>, <a href="#calibre_link-1845" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">290</a>, <a href="#calibre_link-1846" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">291</a></p>
    <p class="fm-booktitle">wordcloud package <a href="#calibre_link-1847" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">346</a></p>
    <p class="fm-booktitle">workloads</p>
    <p class="fm-booktitle">reference link <a href="#calibre_link-1848" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">652</a></p>
    <p class="fm-booktitle">workspaces <a href="#calibre_link-1849" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">412</a>, <a href="#calibre_link-1850" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">413</a></p>
    <p class="fm-booktitle">content identifiers, identifying <a href="#calibre_link-1851" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">428</a>, <a href="#calibre_link-1852" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">429</a></p>
    <p class="fm-booktitle">datasets <a href="#calibre_link-1853" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">420</a></p>
    <p class="fm-booktitle">My Workspace <a href="#calibre_link-1854" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">421</a></p>
    <p class="fm-booktitle">PowerShell scripts <a href="#calibre_link-1855" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">429</a>, <a href="#calibre_link-1856" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">430</a></p>
    <p class="fm-booktitle">role, in life cycle of Power BI content <a href="#calibre_link-1857" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">413</a></p>
    <p class="fm-booktitle">roles and rights <a href="#calibre_link-1858" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">414</a>, <a href="#calibre_link-1859" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">415</a></p>
    <p class="fm-booktitle">workspaces roles <a href="#calibre_link-1860" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">414</a></p>
    <p class="fm-booktitle">Admin role <a href="#calibre_link-1861" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">419</a>, <a href="#calibre_link-1862" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">420</a></p>
    <p class="fm-booktitle">Contributor role <a href="#calibre_link-1863" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">418</a></p>
    <p class="fm-booktitle">Member role <a href="#calibre_link-1864" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">419</a></p>
    <p class="fm-booktitle">Viewer role <a href="#calibre_link-1865" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">416</a>, <a href="#calibre_link-1866" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">417</a></p>
    <p class="fm-booktitle">Y</p>
    <p class="fm-booktitle">year-to-date (YTD) <a href="#calibre_link-1867" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">13</a>, <a href="#calibre_link-1868" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre">357</a></p>
<p class="eop"></p>

    <h1 class="heading">Download a free PDF copy of this book</h1>
<p class="fm-booktitle">Thanks for purchasing this book!</p>
<p class="fm-booktitle">Do you like to read on the go but are unable to carry your print books everywhere? Is your eBook purchase not compatible with the device of your choice?</p>
<p class="fm-booktitle">Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at no cost.</p>
<p class="fm-booktitle">Read anywhere, any place, on any device. Search, copy, and paste code from your favorite technical books directly into your application.</p>
<p class="fm-booktitle">The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your inbox daily</p>
<p class="fm-booktitle">Follow these simple steps to get the benefits:</p>
    <ol class="calibre10">
      <li class="calibre13">Scan the QR code or visit the link below
      <figure class="mediaobject"><img src="images/000167.png" alt="" class="calibre15" /></figure>
<p class="normal"><a href="https://packt.link/free-ebook/9781801811484" class="calibre6 pcalibre1 pcalibre3 pcalibre2 pcalibre"><span class="url">https://packt.link/free-ebook/9781801811484</span></a></p></li>
      <li class="calibre13">Submit your proof of purchase</li>
      <li class="calibre13">That’s it! We’ll send your free PDF and other benefits to your email directly</li>
    </ol>

  </div>
</div>
</div>
</div>


</body></html>